<template><!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAYAAAAAAAEAIAD6BAAAZgAAAICAAAABACAAKAgBAGAFAABAQAAAAQAgAChCAACIDQEAMDAAAAEAIACoJQAAsE8BACAgAAABACAAqBAAAFh1AQAQEAAAAQAgAGgEAAAAhgEAiVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAA51BMVEX////V8N2Q2KVLv20ApDAGpzUAoioNqTsUrEAbrkaX2qs+umKJ1Z8AnR9EvWjc8uMAnySMZBgAAAAAAEiR2KZJFAAAAAjr///j9enp3bJxcXGVpdEisUyK1aCobTEAFkv//+ljSj8AAAdGhaiY2qujZzgAHlA6AAAAACKkaToAH1H/3KXY////8/KInJ///9UYNU7F0O2e3LG/jFwAACCmzur/6tuGaF3L//8HAABnpt7/0JEAAAllcXuFhYd1aD+X1f//05gobKirbz/22LmJjI57e3uLiYfm9v9iLAAAJlc6c6krR3hTLsi7AAADzklEQVR42u3dV3PTQBiF4WAIMSE00XvvvXdC7///93BzDp75PBpLu2qZfd+7BEfa7+FmR7bktTUiIiKijtulZmq32qPWQ/69X+e/83HGngcAAAAAAAAAAKjPC96rNtQ8Mx/Hx/V5xp4XAAAAAAAAAEoGiAN7wfuUf44bnE01C/n3ccNUd9zRQQAAAAAAAACgQID9yhsUL8wXNjzAlso9n4/j4/o8Pq/X4XUBAAAAAAAAAADdd0DFDclBdUj1/R/g8/i8caN0WHW+HgAAAAAAAAAoEMAbjDj4YDuvhuuLGzMDAQAAAAAAAAAA6Qeeh5oOfkRV6qjqC+KYih/MSP6PAgAAAAAAAIACAXwhIb4B0fZAx5UBTqiTqi+IuHHzHKcUAAAAAAAAAABQny8k+AD+QGLbhZxWZ9RZ1dfgMb9Bck75ZwAAAAAAAAAAYLnzKl5Q8IWGoRbeVd74xHk8JwAAAAAAAAAAsMg3JORugNwF5QsiF1V83SV1WVWhK+qqarsOz+G5PCcAAAAAAAAAALAoPrDgmkoFuK48yA0VX3dTVSu6pdquw3N4Ls8JAAAAAAAAAAAsPhCxEcp9oPFt5QHuKP/7XRUHvaf8uvvqgWq7Ds8R5/t/YyUAAAAAAAAAFAwQNwr+YGHq4E0BHqoI8Eg9VrnrcJ5raaMHAAAAAAAAAAUDPFFDA7inqqrpmXquugLw3AAAAAAAAAAAwHgA7oV6qepAXikAAAAAAAAAACAfYKwLIk17rXycNyoXYPQrQgAAAAAAAAAwAYCxPiDxVr1T79UHta3iRuijarqOyX5CBAAAAAAAAAAmAOC6vmFiFcAnVTXss2q7jtHuGAEAAAAAAACAHQTQ9QMUvigPUHfj5Ff1TX1XP9RPlbqO0Z4gAQAAAAAAAAA7CMAPGvSGwRcOGn8xQeiXMsBvlTpI25KfKAkAAAAAAAAABQK45G9mUHUXNP6ooQCS5wAAAAAAAACAggG8gfAHC9t+4WIc/K8aavDsL1wEAAAAAAAAgIIB4oHmobZfwDxU/kKoeAEkeb0AAAAAAAAAUDCAi1/EPDUIr8ODe51ed/YJAAAAAAAAAKBgAN9g6DcWIoRPtHQjYk/5PD6v1+F1eZ2drQcAAAAAAAAACgaI1W08/AaEb0jYUl0PHN+w8ToG25gBAAAAAAAAQMEAbqZ8Y2LckPhnP7DAMJtqFvLv/Tr/XYT2cX1e//1ggwMAAAAAAAAAACtB4gcVUvNxJjcwAAAAAAAAAABQmx9o7AXHDc56KG6Y/He5D3gGAAAAAAAAAACIiIiIlvoHwWF/GyxzH3sAAAAASUVORK5CYIIoAAAAgAAAAAABAAABACAAAAAAAAAAAQB0EgAAdBIAAAAAAAAAAAAA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////93w1f/d8NX/3fDV/93w1f+l2JD/pdiQ/6XYkP+l2JD/bb9L/22/S/9tv0v/bb9L/zCkAP8wpAD/MKQA/zCkAP81pwb/NacG/zWnBv81pwb/NacG/zWnBv81pwb/NacG/zCkAP8wpAD/MKQA/zCkAP9tv0v/bb9L/22/S/9tv0v/pdiQ/6XYkP+l2JD/pdiQ/93w1f/d8NX/3fDV/93w1f//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3fDV/93w1f/d8NX/3fDV/6XYkP+l2JD/pdiQ/6XYkP9tv0v/bb9L/22/S/9tv0v/MKQA/zCkAP8wpAD/MKQA/zWnBv81pwb/NacG/zWnBv81pwb/NacG/zWnBv81pwb/MKQA/zCkAP8wpAD/MKQA/22/S/9tv0v/bb9L/22/S/+l2JD/pdiQ/6XYkP+l2JD/3fDV/93w1f/d8NX/3fDV///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////d8NX/3fDV/93w1f/d8NX/pdiQ/6XYkP+l2JD/pdiQ/22/S/9tv0v/bb9L/22/S/8wpAD/MKQA/zCkAP8wpAD/NacG/zWnBv81pwb/NacG/zWnBv81pwb/NacG/zWnBv8wpAD/MKQA/zCkAP8wpAD/bb9L/22/S/9tv0v/bb9L/6XYkP+l2JD/pdiQ/6XYkP/d8NX/3fDV/93w1f/d8NX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////93w1f/d8NX/3fDV/93w1f+l2JD/pdiQ/6XYkP+l2JD/bb9L/22/S/9tv0v/bb9L/zCkAP8wpAD/MKQA/zCkAP81pwb/NacG/zWnBv81pwb/NacG/zWnBv81pwb/NacG/zCkAP8wpAD/MKQA/zCkAP9tv0v/bb9L/22/S/9tv0v/pdiQ/6XYkP+l2JD/pdiQ/93w1f/d8NX/3fDV/93w1f///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6XYkP+l2JD/pdiQ/6XYkP8qogD/KqIA/yqiAP8qogD/O6kN/zupDf87qQ3/O6kN/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/O6kN/zupDf87qQ3/O6kN/yqiAP8qogD/KqIA/yqiAP+l2JD/pdiQ/6XYkP+l2JD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////pdiQ/6XYkP+l2JD/pdiQ/yqiAP8qogD/KqIA/yqiAP87qQ3/O6kN/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP87qQ3/O6kN/zupDf87qQ3/KqIA/yqiAP8qogD/KqIA/6XYkP+l2JD/pdiQ/6XYkP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+l2JD/pdiQ/6XYkP+l2JD/KqIA/yqiAP8qogD/KqIA/zupDf87qQ3/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/zupDf87qQ3/O6kN/zupDf8qogD/KqIA/yqiAP8qogD/pdiQ/6XYkP+l2JD/pdiQ/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6XYkP+l2JD/pdiQ/6XYkP8qogD/KqIA/yqiAP8qogD/O6kN/zupDf87qQ3/O6kN/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/O6kN/zupDf87qQ3/O6kN/yqiAP8qogD/KqIA/yqiAP+l2JD/pdiQ/6XYkP+l2JD//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6XYkP+l2JD/pdiQ/6XYkP8qogD/KqIA/yqiAP8qogD/QKwU/0CsFP9ArBT/QKwU/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/MKQA/zCkAP8wpAD/MKQA/22/S/9tv0v/bb9L/22/S/+r2pf/q9qX/6val/+r2pf/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+r2pf/q9qX/6val/+r2pf/bb9L/22/S/9tv0v/bb9L/zCkAP8wpAD/MKQA/zCkAP87qQ3/O6kN/zupDf87qQ3/Rq4b/0auG/9Grhv/Rq4b/0CsFP9ArBT/QKwU/0CsFP8qogD/KqIA/yqiAP8qogD/pdiQ/6XYkP+l2JD/pdiQ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////pdiQ/6XYkP+l2JD/pdiQ/yqiAP8qogD/KqIA/yqiAP9ArBT/QKwU/0CsFP9ArBT/Rq4b/0auG/9Grhv/Rq4b/0CsFP9ArBT/QKwU/0CsFP8wpAD/MKQA/zCkAP8wpAD/bb9L/22/S/9tv0v/bb9L/6val/+r2pf/q9qX/6val/+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6val/+r2pf/q9qX/6val/9tv0v/bb9L/22/S/9tv0v/MKQA/zCkAP8wpAD/MKQA/zupDf87qQ3/O6kN/zupDf9Grhv/Rq4b/0auG/9Grhv/QKwU/0CsFP9ArBT/QKwU/yqiAP8qogD/KqIA/yqiAP+l2JD/pdiQ/6XYkP+l2JD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+l2JD/pdiQ/6XYkP+l2JD/KqIA/yqiAP8qogD/KqIA/0CsFP9ArBT/QKwU/0CsFP9Grhv/Rq4b/0auG/9Grhv/QKwU/0CsFP9ArBT/QKwU/zCkAP8wpAD/MKQA/zCkAP9tv0v/bb9L/22/S/9tv0v/q9qX/6val/+r2pf/q9qX/6XYkP+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+l2JD/q9qX/6val/+r2pf/q9qX/22/S/9tv0v/bb9L/22/S/8wpAD/MKQA/zCkAP8wpAD/O6kN/zupDf87qQ3/O6kN/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/KqIA/yqiAP8qogD/KqIA/6XYkP+l2JD/pdiQ/6XYkP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6XYkP+l2JD/pdiQ/6XYkP8qogD/KqIA/yqiAP8qogD/QKwU/0CsFP9ArBT/QKwU/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/MKQA/zCkAP8wpAD/MKQA/22/S/9tv0v/bb9L/22/S/+r2pf/q9qX/6val/+r2pf/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+r2pf/q9qX/6val/+r2pf/bb9L/22/S/9tv0v/bb9L/zCkAP8wpAD/MKQA/zCkAP87qQ3/O6kN/zupDf87qQ3/Rq4b/0auG/9Grhv/Rq4b/0CsFP9ArBT/QKwU/0CsFP8qogD/KqIA/yqiAP8qogD/pdiQ/6XYkP+l2JD/pdiQ//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/O6kN/zupDf87qQ3/O6kN/0auG/9Grhv/Rq4b/0auG/81pwb/NacG/zWnBv81pwb/bb9L/22/S/9tv0v/bb9L/5/Vif+f1Yn/n9WJ/5/Vif///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Py3P/j8tz/4/Lc/+Py3P9ovUT/aL1E/2i9RP9ovUT/NacG/zWnBv81pwb/NacG/0auG/9Grhv/Rq4b/0auG/87qQ3/O6kN/zupDf87qQ3/Yro+/2K6Pv9iuj7/Yro+/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Yro+/2K6Pv87qQ3/O6kN/zupDf87qQ3/Rq4b/0auG/9Grhv/Rq4b/zWnBv81pwb/NacG/zWnBv9tv0v/bb9L/22/S/9tv0v/n9WJ/5/Vif+f1Yn/n9WJ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////4/Lc/+Py3P/j8tz/4/Lc/2i9RP9ovUT/aL1E/2i9RP81pwb/NacG/zWnBv81pwb/Rq4b/0auG/9Grhv/Rq4b/zupDf87qQ3/O6kN/zupDf9iuj7/Yro+/2K6Pv9iuj7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/zupDf87qQ3/O6kN/zupDf9Grhv/Rq4b/0auG/9Grhv/NacG/zWnBv81pwb/NacG/22/S/9tv0v/bb9L/22/S/+f1Yn/n9WJ/5/Vif+f1Yn////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/+Py3P/j8tz/aL1E/2i9RP9ovUT/aL1E/zWnBv81pwb/NacG/zWnBv9Grhv/Rq4b/0auG/9Grhv/O6kN/zupDf87qQ3/O6kN/2K6Pv9iuj7/Yro+/2K6Pv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/O6kN/zupDf87qQ3/O6kN/0auG/9Grhv/Rq4b/0auG/81pwb/NacG/zWnBv81pwb/bb9L/22/S/9tv0v/bb9L/5/Vif+f1Yn/n9WJ/5/Vif///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Py3P/j8tz/4/Lc/+Py3P9ovUT/aL1E/2i9RP9ovUT/NacG/zWnBv81pwb/NacG/0auG/9Grhv/Rq4b/0auG/87qQ3/O6kN/zupDf87qQ3/Yro+/2K6Pv9iuj7/Yro+///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/+Py3P/j8tz/JJ8A/ySfAP8knwD/JJ8A/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/aL1E/2i9RP9ovUT/aL1E/+Py3P/j8tz/4/Lc/+Py3P/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/+Py3P/j8tz/aL1E/2i9RP9ovUT/aL1E/0CsFP9ArBT/QKwU/0CsFP9Grhv/Rq4b/0auG/9Grhv/JJ8A/ySfAP8knwD/JJ8A/+Py3P/j8tz/4/Lc/+Py3P///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Py3P/j8tz/4/Lc/+Py3P8knwD/JJ8A/ySfAP8knwD/Rq4b/0auG/9Grhv/Rq4b/0CsFP9ArBT/QKwU/0CsFP9ovUT/aL1E/2i9RP9ovUT/4/Lc/+Py3P/j8tz/4/Lc/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Py3P/j8tz/4/Lc/+Py3P9ovUT/aL1E/2i9RP9ovUT/QKwU/0CsFP9ArBT/QKwU/0auG/9Grhv/Rq4b/0auG/8knwD/JJ8A/ySfAP8knwD/4/Lc/+Py3P/j8tz/4/Lc////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////4/Lc/+Py3P/j8tz/4/Lc/ySfAP8knwD/JJ8A/ySfAP9Grhv/Rq4b/0auG/9Grhv/QKwU/0CsFP9ArBT/QKwU/2i9RP9ovUT/aL1E/2i9RP/j8tz/4/Lc/+Py3P/j8tz/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////4/Lc/+Py3P/j8tz/4/Lc/2i9RP9ovUT/aL1E/2i9RP9ArBT/QKwU/0CsFP9ArBT/Rq4b/0auG/9Grhv/Rq4b/ySfAP8knwD/JJ8A/ySfAP/j8tz/4/Lc/+Py3P/j8tz////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/+Py3P/j8tz/JJ8A/ySfAP8knwD/JJ8A/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/aL1E/2i9RP9ovUT/aL1E/+Py3P/j8tz/4/Lc/+Py3P/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/+Py3P/j8tz/aL1E/2i9RP9ovUT/aL1E/0CsFP9ArBT/QKwU/0CsFP9Grhv/Rq4b/0auG/9Grhv/JJ8A/ySfAP8knwD/JJ8A/+Py3P/j8tz/4/Lc/+Py3P///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2i9RP9ovUT/aL1E/2i9RP9Grhv/Rq4b/0auG/9Grhv/QKwU/0CsFP9ArBT/QKwU/2K6Pv9iuj7/Yro+/2K6Pv//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/zupDf87qQ3/O6kN/zupDf9Grhv/Rq4b/0auG/9Grhv/aL1E/2i9RP9ovUT/aL1E////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////aL1E/2i9RP9ovUT/aL1E/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/Yro+/2K6Pv9iuj7/Yro+//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/O6kN/zupDf87qQ3/O6kN/0auG/9Grhv/Rq4b/0auG/9ovUT/aL1E/2i9RP9ovUT///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9ovUT/aL1E/2i9RP9ovUT/Rq4b/0auG/9Grhv/Rq4b/0CsFP9ArBT/QKwU/0CsFP9iuj7/Yro+/2K6Pv9iuj7//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Yro+/2K6Pv87qQ3/O6kN/zupDf87qQ3/Rq4b/0auG/9Grhv/Rq4b/2i9RP9ovUT/aL1E/2i9RP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2i9RP9ovUT/aL1E/2i9RP9Grhv/Rq4b/0auG/9Grhv/QKwU/0CsFP9ArBT/QKwU/2K6Pv9iuj7/Yro+/2K6Pv//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/zupDf87qQ3/O6kN/zupDf9Grhv/Rq4b/0auG/9Grhv/aL1E/2i9RP9ovUT/aL1E//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9iuj7/Yro+/2K6Pv9iuj7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ptiR/6bYkf+m2JH/ptiR/zupDf87qQ3/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/Yro+/2K6Pv9iuj7/Yro+/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Yro+/2K6Pv9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/2K6Pv9iuj7/Yro+/2K6Pv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+m2JH/ptiR/6bYkf+m2JH/O6kN/zupDf87qQ3/O6kN/0CsFP9ArBT/QKwU/0CsFP9iuj7/Yro+/2K6Pv9iuj7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/Yro+/2K6Pv9iuj7/Yro+/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6bYkf+m2JH/ptiR/6bYkf87qQ3/O6kN/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/2K6Pv9iuj7/Yro+/2K6Pv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9iuj7/Yro+/2K6Pv9iuj7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ptiR/6bYkf+m2JH/ptiR/zupDf87qQ3/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/Yro+/2K6Pv9iuj7/Yro+////////////////////////////////////////////////////////////////////////////////////////////////////////////6fXj/+n14//p9eP/6fXj/zWnBv81pwb/NacG/zWnBv9Grhv/Rq4b/0auG/9Grhv/Yro+/2K6Pv9iuj7/Yro+//////////////////////////////////////////////////////////////////////////////////////8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/3hHK/94Ryv/eEcr/3hHK///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/0auG/9Grhv/Rq4b/0auG/81pwb/NacG/zWnBv81pwb/6fXj/+n14//p9eP/6fXj///////////////////////////////////////////////////////////////////////////////////////p9eP/6fXj/+n14//p9eP/NacG/zWnBv81pwb/NacG/0auG/9Grhv/Rq4b/0auG/9iuj7/Yro+/2K6Pv9iuj7//////////////////////////////////////////////////////////////////////////////////////wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/eEcr/3hHK/94Ryv/eEcr//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/Rq4b/0auG/9Grhv/Rq4b/zWnBv81pwb/NacG/zWnBv/p9eP/6fXj/+n14//p9eP//////////////////////////////////////////////////////////////////////////////////////+n14//p9eP/6fXj/+n14/81pwb/NacG/zWnBv81pwb/Rq4b/0auG/9Grhv/Rq4b/2K6Pv9iuj7/Yro+/2K6Pv//////////////////////////////////////////////////////////////////////////////////////AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP94Ryv/eEcr/3hHK/94Ryv//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Yro+/2K6Pv9Grhv/Rq4b/0auG/9Grhv/NacG/zWnBv81pwb/NacG/+n14//p9eP/6fXj/+n14///////////////////////////////////////////////////////////////////////////////////////6fXj/+n14//p9eP/6fXj/zWnBv81pwb/NacG/zWnBv9Grhv/Rq4b/0auG/9Grhv/Yro+/2K6Pv9iuj7/Yro+//////////////////////////////////////////////////////////////////////////////////////8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/3hHK/94Ryv/eEcr/3hHK///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/0auG/9Grhv/Rq4b/0auG/81pwb/NacG/zWnBv81pwb/6fXj/+n14//p9eP/6fXj//////////////////////////////////////////////////////////////////////////////////////8knwD/JJ8A/ySfAP8knwD/TLEi/0yxIv9MsSL/TLEi/ySfAP8knwD/JJ8A/ySfAP///////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/6lzOv+pczr/qXM6/6lzOv//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////JJ8A/ySfAP8knwD/JJ8A/0yxIv9MsSL/TLEi/0yxIv8knwD/JJ8A/ySfAP8knwD//////////////////////////////////////////////////////////////////////////////////////ySfAP8knwD/JJ8A/ySfAP9MsSL/TLEi/0yxIv9MsSL/JJ8A/ySfAP8knwD/JJ8A////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/qXM6/6lzOv+pczr/qXM6//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8knwD/JJ8A/ySfAP8knwD/TLEi/0yxIv9MsSL/TLEi/ySfAP8knwD/JJ8A/ySfAP//////////////////////////////////////////////////////////////////////////////////////JJ8A/ySfAP8knwD/JJ8A/0yxIv9MsSL/TLEi/0yxIv8knwD/JJ8A/ySfAP8knwD///////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP+pczr/qXM6/6lzOv+pczr//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ySfAP8knwD/JJ8A/ySfAP9MsSL/TLEi/0yxIv9MsSL/JJ8A/ySfAP8knwD/JJ8A//////////////////////////////////////////////////////////////////////////////////////8knwD/JJ8A/ySfAP8knwD/TLEi/0yxIv9MsSL/TLEi/ySfAP8knwD/JJ8A/ySfAP///////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/6lzOv+pczr/qXM6/6lzOv//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////JJ8A/ySfAP8knwD/JJ8A/0yxIv9MsSL/TLEi/0yxIv8knwD/JJ8A/ySfAP8knwD/////////////////////////////////////////////////////////////////oNWK/6DViv+g1Yr/oNWK/0CsFP9ArBT/QKwU/0CsFP87qQ3/O6kN/zupDf87qQ3/6fXj/+n14//p9eP/6fXj/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAsYv8ALGL/ACxi/wAsYv8AAAD/AAAA/wAAAP8AAAD/VyYA/1cmAP9XJgD/VyYA///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////p9eP/6fXj/+n14//p9eP/O6kN/zupDf87qQ3/O6kN/0CsFP9ArBT/QKwU/0CsFP+g1Yr/oNWK/6DViv+g1Yr///////////////////////////////////////////+g1Yr/oNWK/6DViv+g1Yr/QKwU/0CsFP9ArBT/QKwU/zupDf87qQ3/O6kN/zupDf/p9eP/6fXj/+n14//p9eP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ACxi/wAsYv8ALGL/ACxi/wAAAP8AAAD/AAAA/wAAAP9XJgD/VyYA/1cmAP9XJgD//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+n14//p9eP/6fXj/+n14/87qQ3/O6kN/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/6DViv+g1Yr/oNWK/6DViv///////////////////////////////////////////6DViv+g1Yr/oNWK/6DViv9ArBT/QKwU/0CsFP9ArBT/O6kN/zupDf87qQ3/O6kN/+n14//p9eP/6fXj/+n14/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8ALGL/ACxi/wAsYv8ALGL/AAAA/wAAAP8AAAD/AAAA/1cmAP9XJgD/VyYA/1cmAP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6fXj/+n14//p9eP/6fXj/zupDf87qQ3/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/oNWK/6DViv+g1Yr/oNWK////////////////////////////////////////////oNWK/6DViv+g1Yr/oNWK/0CsFP9ArBT/QKwU/0CsFP87qQ3/O6kN/zupDf87qQ3/6fXj/+n14//p9eP/6fXj/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAsYv8ALGL/ACxi/wAsYv8AAAD/AAAA/wAAAP8AAAD/VyYA/1cmAP9XJgD/VyYA///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////p9eP/6fXj/+n14//p9eP/O6kN/zupDf87qQ3/O6kN/0CsFP9ArBT/QKwU/0CsFP+g1Yr/oNWK/6DViv+g1Yr///////////////////////////////////////////9tv0v/bb9L/22/S/9tv0v/Rq4b/0auG/9Grhv/Rq4b/yqiAP8qogD/KqIA/yqiAP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////P2+r/z9vq/8/b6v/P2+r/wAAAP8AAAD/AAAA/wAAAP9QHgD/UB4A/1AeAP9QHgD///////////////////////////////////////////+52Pb/udj2/7nY9v+52Pb/joyJ/46Mif+OjIn/joyJ/3t7e/97e3v/e3t7/3t7e/+HiYv/h4mL/4eJi/+HiYv///bm///25v//9ub///bm//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8qogD/KqIA/yqiAP8qogD/Rq4b/0auG/9Grhv/Rq4b/22/S/9tv0v/bb9L/22/S////////////////////////////////////////////22/S/9tv0v/bb9L/22/S/9Grhv/Rq4b/0auG/9Grhv/KqIA/yqiAP8qogD/KqIA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8/b6v/P2+r/z9vq/8/b6v/AAAA/wAAAP8AAAD/AAAA/1AeAP9QHgD/UB4A/1AeAP///////////////////////////////////////////7nY9v+52Pb/udj2/7nY9v+OjIn/joyJ/46Mif+OjIn/e3t7/3t7e/97e3v/e3t7/4eJi/+HiYv/h4mL/4eJi///9ub///bm///25v//9ub//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////yqiAP8qogD/KqIA/yqiAP9Grhv/Rq4b/0auG/9Grhv/bb9L/22/S/9tv0v/bb9L////////////////////////////////////////////bb9L/22/S/9tv0v/bb9L/0auG/9Grhv/Rq4b/0auG/8qogD/KqIA/yqiAP8qogD//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////z9vq/8/b6v/P2+r/z9vq/8AAAD/AAAA/wAAAP8AAAD/UB4A/1AeAP9QHgD/UB4A////////////////////////////////////////////udj2/7nY9v+52Pb/udj2/46Mif+OjIn/joyJ/46Mif97e3v/e3t7/3t7e/97e3v/h4mL/4eJi/+HiYv/h4mL///25v//9ub///bm///25v//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////KqIA/yqiAP8qogD/KqIA/0auG/9Grhv/Rq4b/0auG/9tv0v/bb9L/22/S/9tv0v///////////////////////////////////////////9tv0v/bb9L/22/S/9tv0v/Rq4b/0auG/9Grhv/Rq4b/yqiAP8qogD/KqIA/yqiAP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////P2+r/z9vq/8/b6v/P2+r/wAAAP8AAAD/AAAA/wAAAP9QHgD/UB4A/1AeAP9QHgD///////////////////////////////////////////+52Pb/udj2/7nY9v+52Pb/joyJ/46Mif+OjIn/joyJ/3t7e/97e3v/e3t7/3t7e/+HiYv/h4mL/4eJi/+HiYv///bm///25v//9ub///bm//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8qogD/KqIA/yqiAP8qogD/Rq4b/0auG/9Grhv/Rq4b/22/S/9tv0v/bb9L/22/S////////////////////////////////////////////zCkAP8wpAD/MKQA/zCkAP9ArBT/QKwU/0CsFP9ArBT/q9qY/6vamP+r2pj/q9qY//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/zpppP86aaT/AAAA/wAAAP8AAAD/AAAA/1EfAP9RHwD/UR8A/1EfAP//////////////////////mNP//5jT//+Y0///mNP//wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/qGwo/6hsKP+obCj/qGwo/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6vamP+r2pj/q9qY/6vamP9ArBT/QKwU/0CsFP9ArBT/MKQA/zCkAP8wpAD/MKQA////////////////////////////////////////////MKQA/zCkAP8wpAD/MKQA/0CsFP9ArBT/QKwU/0CsFP+r2pj/q9qY/6vamP+r2pj//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/Ommk/zpppP8AAAD/AAAA/wAAAP8AAAD/UR8A/1EfAP9RHwD/UR8A//////////////////////+Y0///mNP//5jT//+Y0///AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP+obCj/qGwo/6hsKP+obCj/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////q9qY/6vamP+r2pj/q9qY/0CsFP9ArBT/QKwU/0CsFP8wpAD/MKQA/zCkAP8wpAD///////////////////////////////////////////8wpAD/MKQA/zCkAP8wpAD/QKwU/0CsFP9ArBT/QKwU/6vamP+r2pj/q9qY/6vamP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP86aaT/Ommk/wAAAP8AAAD/AAAA/wAAAP9RHwD/UR8A/1EfAP9RHwD//////////////////////5jT//+Y0///mNP//5jT//8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/6hsKP+obCj/qGwo/6hsKP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+r2pj/q9qY/6vamP+r2pj/QKwU/0CsFP9ArBT/QKwU/zCkAP8wpAD/MKQA/zCkAP///////////////////////////////////////////zCkAP8wpAD/MKQA/zCkAP9ArBT/QKwU/0CsFP9ArBT/q9qY/6vamP+r2pj/q9qY//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/zpppP86aaT/AAAA/wAAAP8AAAD/AAAA/1EfAP9RHwD/UR8A/1EfAP//////////////////////mNP//5jT//+Y0///mNP//wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/qGwo/6hsKP+obCj/qGwo/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6vamP+r2pj/q9qY/6vamP9ArBT/QKwU/0CsFP9ArBT/MKQA/zCkAP8wpAD/MKQA///////////////////////j8tz/4/Lc/+Py3P/j8tz/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf/d8NX/3fDV/93w1f/d8NX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/Ommk/zpppP8AAAD/AAAA/wAAAP8AAAD/UR8A/1EfAP9RHwD/UR8A//////////////////////+R0P//kdD//5HQ//+R0P//CQAA/wkAAP8JAAD/CQAA/3txZf97cWX/e3Fl/3txZf+HhYX/h4WF/4eFhf+HhYX/P2h1/z9odf8/aHX/P2h1/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD//9WX///Vl///1Zf//9WX////////////////////////////////////////////////////////////////////////////////////////////////////////////3fDV/93w1f/d8NX/3fDV/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/4/Lc/+Py3P/j8tz/4/Lc/+Py3P/j8tz/4/Lc/+Py3P87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/93w1f/d8NX/3fDV/93w1f//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP86aaT/Ommk/wAAAP8AAAD/AAAA/wAAAP9RHwD/UR8A/1EfAP9RHwD//////////////////////5HQ//+R0P//kdD//5HQ//8JAAD/CQAA/wkAAP8JAAD/e3Fl/3txZf97cWX/e3Fl/4eFhf+HhYX/h4WF/4eFhf8/aHX/P2h1/z9odf8/aHX/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP//1Zf//9WX///Vl///1Zf////////////////////////////////////////////////////////////////////////////////////////////////////////////d8NX/3fDV/93w1f/d8NX/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf/j8tz/4/Lc/+Py3P/j8tz/4/Lc/+Py3P/j8tz/4/Lc/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/3fDV/93w1f/d8NX/3fDV//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/zpppP86aaT/AAAA/wAAAP8AAAD/AAAA/1EfAP9RHwD/UR8A/1EfAP//////////////////////kdD//5HQ//+R0P//kdD//wkAAP8JAAD/CQAA/wkAAP97cWX/e3Fl/3txZf97cWX/h4WF/4eFhf+HhYX/h4WF/z9odf8/aHX/P2h1/z9odf8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA///Vl///1Zf//9WX///Vl////////////////////////////////////////////////////////////////////////////////////////////////////////////93w1f/d8NX/3fDV/93w1f87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/+Py3P/j8tz/4/Lc/+Py3P/j8tz/4/Lc/+Py3P/j8tz/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf/d8NX/3fDV/93w1f/d8NX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/Ommk/zpppP8AAAD/AAAA/wAAAP8AAAD/UR8A/1EfAP9RHwD/UR8A//////////////////////+R0P//kdD//5HQ//+R0P//CQAA/wkAAP8JAAD/CQAA/3txZf97cWX/e3Fl/3txZf+HhYX/h4WF/4eFhf+HhYX/P2h1/z9odf8/aHX/P2h1/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD//9WX///Vl///1Zf//9WX////////////////////////////////////////////////////////////////////////////////////////////////////////////3fDV/93w1f/d8NX/3fDV/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/4/Lc/+Py3P/j8tz/4/Lc/6vamP+r2pj/q9qY/6vamP9ArBT/QKwU/0CsFP9ArBT/NacG/zWnBv81pwb/NacG////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP86aaT/Ommk/wAAAP8AAAD/AAAA/wAAAP9RHwD/UR8A/1EfAP9RHwD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAH/wAAB/8AAAf/AAAH/wAAAP8AAAD/AAAA/wAAAP/epmf/3qZn/96mZ//epmf/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////NacG/zWnBv81pwb/NacG/0CsFP9ArBT/QKwU/0CsFP+r2pj/q9qY/6vamP+r2pj/q9qY/6vamP+r2pj/q9qY/0CsFP9ArBT/QKwU/0CsFP81pwb/NacG/zWnBv81pwb///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/zpppP86aaT/AAAA/wAAAP8AAAD/AAAA/1EfAP9RHwD/UR8A/1EfAP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAf/AAAH/wAAB/8AAAf/AAAA/wAAAP8AAAD/AAAA/96mZ//epmf/3qZn/96mZ/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////81pwb/NacG/zWnBv81pwb/QKwU/0CsFP9ArBT/QKwU/6vamP+r2pj/q9qY/6vamP+r2pj/q9qY/6vamP+r2pj/QKwU/0CsFP9ArBT/QKwU/zWnBv81pwb/NacG/zWnBv///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/Ommk/zpppP8AAAD/AAAA/wAAAP8AAAD/UR8A/1EfAP9RHwD/UR8A/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAB/8AAAf/AAAH/wAAB/8AAAD/AAAA/wAAAP8AAAD/3qZn/96mZ//epmf/3qZn/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zWnBv81pwb/NacG/zWnBv9ArBT/QKwU/0CsFP9ArBT/q9qY/6vamP+r2pj/q9qY/6vamP+r2pj/q9qY/6vamP9ArBT/QKwU/0CsFP9ArBT/NacG/zWnBv81pwb/NacG////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP86aaT/Ommk/wAAAP8AAAD/AAAA/wAAAP9RHwD/UR8A/1EfAP9RHwD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAH/wAAB/8AAAf/AAAH/wAAAP8AAAD/AAAA/wAAAP/epmf/3qZn/96mZ//epmf/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////NacG/zWnBv81pwb/NacG/0CsFP9ArBT/QKwU/0CsFP+r2pj/q9qY/6vamP+r2pj/sdye/7Hcnv+x3J7/sdye/0CsFP9ArBT/QKwU/0CsFP81pwb/NacG/zWnBv81pwb///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/zpppP86aaT/AAAA/wAAAP8AAAD/AAAA/1EfAP9RHwD/UR8A/1EfAP/////////////////////////////////////////////////////////////////b6v//2+r//9vq///b6v//XWiG/11ohv9daIb/XWiG/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA////y////8v////L////y/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////81pwb/NacG/zWnBv81pwb/QKwU/0CsFP9ArBT/QKwU/7Hcnv+x3J7/sdye/7Hcnv+x3J7/sdye/7Hcnv+x3J7/QKwU/0CsFP9ArBT/QKwU/zWnBv81pwb/NacG/zWnBv///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/Ommk/zpppP8AAAD/AAAA/wAAAP8AAAD/UR8A/1EfAP9RHwD/UR8A/////////////////////////////////////////////////////////////////9vq///b6v//2+r//9vq//9daIb/XWiG/11ohv9daIb/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD////L////y////8v////L/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zWnBv81pwb/NacG/zWnBv9ArBT/QKwU/0CsFP9ArBT/sdye/7Hcnv+x3J7/sdye/7Hcnv+x3J7/sdye/7Hcnv9ArBT/QKwU/0CsFP9ArBT/NacG/zWnBv81pwb/NacG////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP86aaT/Ommk/wAAAP8AAAD/AAAA/wAAAP9RHwD/UR8A/1EfAP9RHwD/////////////////////////////////////////////////////////////////2+r//9vq///b6v//2+r//11ohv9daIb/XWiG/11ohv8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP///8v////L////y////8v/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////NacG/zWnBv81pwb/NacG/0CsFP9ArBT/QKwU/0CsFP+x3J7/sdye/7Hcnv+x3J7/sdye/7Hcnv+x3J7/sdye/0CsFP9ArBT/QKwU/0CsFP81pwb/NacG/zWnBv81pwb///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/zpppP86aaT/AAAA/wAAAP8AAAD/AAAA/1EfAP9RHwD/UR8A/1EfAP/////////////////////////////////////////////////////////////////b6v//2+r//9vq///b6v//XWiG/11ohv9daIb/XWiG/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA////y////8v////L////y/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////81pwb/NacG/zWnBv81pwb/QKwU/0CsFP9ArBT/QKwU/7Hcnv+x3J7/sdye/7Hcnv+x3J7/sdye/7Hcnv+x3J7/QKwU/0CsFP9ArBT/QKwU/zWnBv81pwb/NacG/zWnBv///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/Ommk/zpppP8AAAD/AAAA/wAAAP8AAAD/UR8A/1EfAP9RHwD/UR8A////////////////////////////////////////////XIy//1yMv/9cjL//XIy//wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/yAAAP8gAAD/IAAA/yAAAP/qzqb/6s6m/+rOpv/qzqb//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zWnBv81pwb/NacG/zWnBv9ArBT/QKwU/0CsFP9ArBT/sdye/7Hcnv+x3J7/sdye/7Hcnv+x3J7/sdye/7Hcnv9ArBT/QKwU/0CsFP9ArBT/NacG/zWnBv81pwb/NacG////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP86aaT/Ommk/wAAAP8AAAD/AAAA/wAAAP9RHwD/UR8A/1EfAP9RHwD///////////////////////////////////////////9cjL//XIy//1yMv/9cjL//AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/IAAA/yAAAP8gAAD/IAAA/+rOpv/qzqb/6s6m/+rOpv//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////NacG/zWnBv81pwb/NacG/0CsFP9ArBT/QKwU/0CsFP+x3J7/sdye/7Hcnv+x3J7/sdye/7Hcnv+x3J7/sdye/0CsFP9ArBT/QKwU/0CsFP81pwb/NacG/zWnBv81pwb///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/zpppP86aaT/AAAA/wAAAP8AAAD/AAAA/1EfAP9RHwD/UR8A/1EfAP///////////////////////////////////////////1yMv/9cjL//XIy//1yMv/8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8gAAD/IAAA/yAAAP8gAAD/6s6m/+rOpv/qzqb/6s6m//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////81pwb/NacG/zWnBv81pwb/QKwU/0CsFP9ArBT/QKwU/7Hcnv+x3J7/sdye/7Hcnv+x3J7/sdye/7Hcnv+x3J7/QKwU/0CsFP9ArBT/QKwU/zWnBv81pwb/NacG/zWnBv///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/Ommk/zpppP8AAAD/AAAA/wAAAP8AAAD/UR8A/1EfAP9RHwD/UR8A////////////////////////////////////////////XIy//1yMv/9cjL//XIy//wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/yAAAP8gAAD/IAAA/yAAAP/qzqb/6s6m/+rOpv/qzqb//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zWnBv81pwb/NacG/zWnBv9ArBT/QKwU/0CsFP9ArBT/sdye/7Hcnv+x3J7/sdye/6vamP+r2pj/q9qY/6vamP9ArBT/QKwU/0CsFP9ArBT/NacG/zWnBv81pwb/NacG////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP86aaT/Ommk/wAAAP8AAAD/AAAA/wAAAP9RHwD/UR8A/1EfAP9RHwD//////////////////////9X////V////1f///9X///8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/041GP9ONRj/TjUY/041GP/t0MX/7dDF/+3Qxf/t0MX/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////NacG/zWnBv81pwb/NacG/0CsFP9ArBT/QKwU/0CsFP+r2pj/q9qY/6vamP+r2pj/q9qY/6vamP+r2pj/q9qY/0CsFP9ArBT/QKwU/0CsFP81pwb/NacG/zWnBv81pwb///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/zpppP86aaT/AAAA/wAAAP8AAAD/AAAA/1EfAP9RHwD/UR8A/1EfAP//////////////////////1f///9X////V////1f///wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/TjUY/041GP9ONRj/TjUY/+3Qxf/t0MX/7dDF/+3Qxf////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////81pwb/NacG/zWnBv81pwb/QKwU/0CsFP9ArBT/QKwU/6vamP+r2pj/q9qY/6vamP+r2pj/q9qY/6vamP+r2pj/QKwU/0CsFP9ArBT/QKwU/zWnBv81pwb/NacG/zWnBv///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/Ommk/zpppP8AAAD/AAAA/wAAAP8AAAD/UR8A/1EfAP9RHwD/UR8A///////////////////////V////1f///9X////V////AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP9ONRj/TjUY/041GP9ONRj/7dDF/+3Qxf/t0MX/7dDF/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zWnBv81pwb/NacG/zWnBv9ArBT/QKwU/0CsFP9ArBT/q9qY/6vamP+r2pj/q9qY/6vamP+r2pj/q9qY/6vamP9ArBT/QKwU/0CsFP9ArBT/NacG/zWnBv81pwb/NacG////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP86aaT/Ommk/wAAAP8AAAD/AAAA/wAAAP9RHwD/UR8A/1EfAP9RHwD//////////////////////9X////V////1f///9X///8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/041GP9ONRj/TjUY/041GP/t0MX/7dDF/+3Qxf/t0MX/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////NacG/zWnBv81pwb/NacG/0CsFP9ArBT/QKwU/0CsFP+r2pj/q9qY/6vamP+r2pj/4/Lc/+Py3P/j8tz/4/Lc/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/3fDV/93w1f/d8NX/3fDV//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/zpppP86aaT/AAAA/wAAAP8AAAD/AAAA/1EfAP9RHwD/UR8A/1EfAP//////////////////////pdz//6Xc//+l3P//pdz//wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD////Y////2P///9j////Y///////////////////////y8///8vP///Lz///y8///n5yI/5+ciP+fnIj/n5yI/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////93w1f/d8NX/3fDV/93w1f87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/+Py3P/j8tz/4/Lc/+Py3P/j8tz/4/Lc/+Py3P/j8tz/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf/d8NX/3fDV/93w1f/d8NX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/Ommk/zpppP8AAAD/AAAA/wAAAP8AAAD/UR8A/1EfAP9RHwD/UR8A//////////////////////+l3P//pdz//6Xc//+l3P//AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP///9j////Y////2P///9j///////////////////////Lz///y8///8vP///Lz//+fnIj/n5yI/5+ciP+fnIj/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3fDV/93w1f/d8NX/3fDV/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/4/Lc/+Py3P/j8tz/4/Lc/+Py3P/j8tz/4/Lc/+Py3P87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/93w1f/d8NX/3fDV/93w1f//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP86aaT/Ommk/wAAAP8AAAD/AAAA/wAAAP9RHwD/UR8A/1EfAP9RHwD//////////////////////6Xc//+l3P//pdz//6Xc//8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA////2P///9j////Y////2P//////////////////////8vP///Lz///y8///8vP//5+ciP+fnIj/n5yI/5+ciP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////d8NX/3fDV/93w1f/d8NX/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf/j8tz/4/Lc/+Py3P/j8tz/4/Lc/+Py3P/j8tz/4/Lc/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/3fDV/93w1f/d8NX/3fDV//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/zpppP86aaT/AAAA/wAAAP8AAAD/AAAA/1EfAP9RHwD/UR8A/1EfAP//////////////////////pdz//6Xc//+l3P//pdz//wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD////Y////2P///9j////Y///////////////////////y8///8vP///Lz///y8///n5yI/5+ciP+fnIj/n5yI/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////93w1f/d8NX/3fDV/93w1f87qQ3/O6kN/zupDf87qQ3/O6kN/zupDf87qQ3/O6kN/+Py3P/j8tz/4/Lc/+Py3P//////////////////////MKQA/zCkAP8wpAD/MKQA/0CsFP9ArBT/QKwU/0CsFP+r2pj/q9qY/6vamP+r2pj//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zhno/84Z6P/OGej/zhno/8AAAD/AAAA/wAAAP8AAAD/UB4A/1AeAP9QHgD/UB4A////////////////////////////////////////////AAA6/wAAOv8AADr/AAA6/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8iAAD/IgAA/yIAAP8iAAD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////q9qY/6vamP+r2pj/q9qY/0CsFP9ArBT/QKwU/0CsFP8wpAD/MKQA/zCkAP8wpAD///////////////////////////////////////////8wpAD/MKQA/zCkAP8wpAD/QKwU/0CsFP9ArBT/QKwU/6vamP+r2pj/q9qY/6vamP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////OGej/zhno/84Z6P/OGej/wAAAP8AAAD/AAAA/wAAAP9QHgD/UB4A/1AeAP9QHgD///////////////////////////////////////////8AADr/AAA6/wAAOv8AADr/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/yIAAP8iAAD/IgAA/yIAAP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+r2pj/q9qY/6vamP+r2pj/QKwU/0CsFP9ArBT/QKwU/zCkAP8wpAD/MKQA/zCkAP///////////////////////////////////////////zCkAP8wpAD/MKQA/zCkAP9ArBT/QKwU/0CsFP9ArBT/q9qY/6vamP+r2pj/q9qY//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////84Z6P/OGej/zhno/84Z6P/AAAA/wAAAP8AAAD/AAAA/1AeAP9QHgD/UB4A/1AeAP///////////////////////////////////////////wAAOv8AADr/AAA6/wAAOv8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/IgAA/yIAAP8iAAD/IgAA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6vamP+r2pj/q9qY/6vamP9ArBT/QKwU/0CsFP9ArBT/MKQA/zCkAP8wpAD/MKQA////////////////////////////////////////////MKQA/zCkAP8wpAD/MKQA/0CsFP9ArBT/QKwU/0CsFP+r2pj/q9qY/6vamP+r2pj//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zhno/84Z6P/OGej/zhno/8AAAD/AAAA/wAAAP8AAAD/UB4A/1AeAP9QHgD/UB4A////////////////////////////////////////////AAA6/wAAOv8AADr/AAA6/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8iAAD/IgAA/yIAAP8iAAD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////q9qY/6vamP+r2pj/q9qY/0CsFP9ArBT/QKwU/0CsFP8wpAD/MKQA/zCkAP8wpAD///////////////////////////////////////////9tv0v/bb9L/22/S/9tv0v/Rq4b/0auG/9Grhv/Rq4b/yqiAP8qogD/KqIA/yqiAP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////MW2o/zFtqP8xbaj/MW2o/wAAAP8AAAD/AAAA/wAAAP9LFgD/SxYA/0sWAP9LFgD////////////////////////////////////////////p////6f///+n////p////P0pj/z9KY/8/SmP/P0pj/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/BwAA/wcAAP8HAAD/BwAA/6iFRv+ohUb/qIVG/6iFRv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8qogD/KqIA/yqiAP8qogD/Rq4b/0auG/9Grhv/Rq4b/22/S/9tv0v/bb9L/22/S////////////////////////////////////////////22/S/9tv0v/bb9L/22/S/9Grhv/Rq4b/0auG/9Grhv/KqIA/yqiAP8qogD/KqIA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8xbaj/MW2o/zFtqP8xbaj/AAAA/wAAAP8AAAD/AAAA/0sWAP9LFgD/SxYA/0sWAP///////////////////////////////////////////+n////p////6f///+n///8/SmP/P0pj/z9KY/8/SmP/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8HAAD/BwAA/wcAAP8HAAD/qIVG/6iFRv+ohUb/qIVG/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////yqiAP8qogD/KqIA/yqiAP9Grhv/Rq4b/0auG/9Grhv/bb9L/22/S/9tv0v/bb9L////////////////////////////////////////////bb9L/22/S/9tv0v/bb9L/0auG/9Grhv/Rq4b/0auG/8qogD/KqIA/yqiAP8qogD//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zFtqP8xbaj/MW2o/zFtqP8AAAD/AAAA/wAAAP8AAAD/SxYA/0sWAP9LFgD/SxYA////////////////////////////////////////////6f///+n////p////6f///z9KY/8/SmP/P0pj/z9KY/8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wcAAP8HAAD/BwAA/wcAAP+ohUb/qIVG/6iFRv+ohUb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////KqIA/yqiAP8qogD/KqIA/0auG/9Grhv/Rq4b/0auG/9tv0v/bb9L/22/S/9tv0v///////////////////////////////////////////9tv0v/bb9L/22/S/9tv0v/Rq4b/0auG/9Grhv/Rq4b/yqiAP8qogD/KqIA/yqiAP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////MW2o/zFtqP8xbaj/MW2o/wAAAP8AAAD/AAAA/wAAAP9LFgD/SxYA/0sWAP9LFgD////////////////////////////////////////////p////6f///+n////p////P0pj/z9KY/8/SmP/P0pj/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/BwAA/wcAAP8HAAD/BwAA/6iFRv+ohUb/qIVG/6iFRv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8qogD/KqIA/yqiAP8qogD/Rq4b/0auG/9Grhv/Rq4b/22/S/9tv0v/bb9L/22/S////////////////////////////////////////////6DViv+g1Yr/oNWK/6DViv87qQ3/O6kN/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/6bYkf+m2JH/ptiR/6bYkf//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6fXj/+n14//p9eP/6fXj/zupDf87qQ3/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/oNWK/6DViv+g1Yr/oNWK////////////////////////////////////////////oNWK/6DViv+g1Yr/oNWK/zupDf87qQ3/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/ptiR/6bYkf+m2JH/ptiR///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////p9eP/6fXj/+n14//p9eP/O6kN/zupDf87qQ3/O6kN/0CsFP9ArBT/QKwU/0CsFP+g1Yr/oNWK/6DViv+g1Yr///////////////////////////////////////////+g1Yr/oNWK/6DViv+g1Yr/O6kN/zupDf87qQ3/O6kN/0CsFP9ArBT/QKwU/0CsFP+m2JH/ptiR/6bYkf+m2JH//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+n14//p9eP/6fXj/+n14/87qQ3/O6kN/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/6DViv+g1Yr/oNWK/6DViv///////////////////////////////////////////6DViv+g1Yr/oNWK/6DViv87qQ3/O6kN/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/6bYkf+m2JH/ptiR/6bYkf//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6fXj/+n14//p9eP/6fXj/zupDf87qQ3/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/oNWK/6DViv+g1Yr/oNWK/////////////////////////////////////////////////////////////////2i9RP9ovUT/aL1E/2i9RP9Grhv/Rq4b/0auG/9Grhv/KqIA/yqiAP8qogD/KqIA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7Ld6f+y3en/st3p/7Ld6f9xcXH/cXFx/3Fxcf9xcXH/0aWV/9Gllf/RpZX/0aWV//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8knwD/JJ8A/ySfAP8knwD/TLEi/0yxIv9MsSL/TLEi/ySfAP8knwD/JJ8A/ySfAP//////////////////////////////////////////////////////////////////////////////////////aL1E/2i9RP9ovUT/aL1E/0auG/9Grhv/Rq4b/0auG/8qogD/KqIA/yqiAP8qogD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////st3p/7Ld6f+y3en/st3p/3Fxcf9xcXH/cXFx/3Fxcf/RpZX/0aWV/9Gllf/RpZX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ySfAP8knwD/JJ8A/ySfAP9MsSL/TLEi/0yxIv9MsSL/JJ8A/ySfAP8knwD/JJ8A//////////////////////////////////////////////////////////////////////////////////////9ovUT/aL1E/2i9RP9ovUT/Rq4b/0auG/9Grhv/Rq4b/yqiAP8qogD/KqIA/yqiAP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+y3en/st3p/7Ld6f+y3en/cXFx/3Fxcf9xcXH/cXFx/9Gllf/RpZX/0aWV/9Gllf//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////JJ8A/ySfAP8knwD/JJ8A/0yxIv9MsSL/TLEi/0yxIv8knwD/JJ8A/ySfAP8knwD//////////////////////////////////////////////////////////////////////////////////////2i9RP9ovUT/aL1E/2i9RP9Grhv/Rq4b/0auG/9Grhv/KqIA/yqiAP8qogD/KqIA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7Ld6f+y3en/st3p/7Ld6f9xcXH/cXFx/3Fxcf9xcXH/0aWV/9Gllf/RpZX/0aWV//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8knwD/JJ8A/ySfAP8knwD/TLEi/0yxIv9MsSL/TLEi/ySfAP8knwD/JJ8A/ySfAP//////////////////////////////////////////////////////////////////////////////////////4/Lc/+Py3P/j8tz/4/Lc/zWnBv81pwb/NacG/zWnBv9Grhv/Rq4b/0auG/9Grhv/Yro+/2K6Pv9iuj7/Yro+////////////////////////////////////////////////////////////////////////////////////////////////////////////ABRJ/wAUSf8AFEn/ABRJ/wAAAP8AAAD/AAAA/wAAAP8IAAD/CAAA/wgAAP8IAAD////r////6////+v////r////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/0auG/9Grhv/Rq4b/0auG/81pwb/NacG/zWnBv81pwb/6fXj/+n14//p9eP/6fXj///////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/+Py3P/j8tz/NacG/zWnBv81pwb/NacG/0auG/9Grhv/Rq4b/0auG/9iuj7/Yro+/2K6Pv9iuj7///////////////////////////////////////////////////////////////////////////////////////////////////////////8AFEn/ABRJ/wAUSf8AFEn/AAAA/wAAAP8AAAD/AAAA/wgAAP8IAAD/CAAA/wgAAP///+v////r////6////+v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/Rq4b/0auG/9Grhv/Rq4b/zWnBv81pwb/NacG/zWnBv/p9eP/6fXj/+n14//p9eP//////////////////////////////////////////////////////////////////////////////////////+Py3P/j8tz/4/Lc/+Py3P81pwb/NacG/zWnBv81pwb/Rq4b/0auG/9Grhv/Rq4b/2K6Pv9iuj7/Yro+/2K6Pv///////////////////////////////////////////////////////////////////////////////////////////////////////////wAUSf8AFEn/ABRJ/wAUSf8AAAD/AAAA/wAAAP8AAAD/CAAA/wgAAP8IAAD/CAAA////6////+v////r////6////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Yro+/2K6Pv9Grhv/Rq4b/0auG/9Grhv/NacG/zWnBv81pwb/NacG/+n14//p9eP/6fXj/+n14///////////////////////////////////////////////////////////////////////////////////////4/Lc/+Py3P/j8tz/4/Lc/zWnBv81pwb/NacG/zWnBv9Grhv/Rq4b/0auG/9Grhv/Yro+/2K6Pv9iuj7/Yro+////////////////////////////////////////////////////////////////////////////////////////////////////////////ABRJ/wAUSf8AFEn/ABRJ/wAAAP8AAAD/AAAA/wAAAP8IAAD/CAAA/wgAAP8IAAD////r////6////+v////r////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/0auG/9Grhv/Rq4b/0auG/81pwb/NacG/zWnBv81pwb/6fXj/+n14//p9eP/6fXj////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/Yro+/2K6Pv9iuj7/Yro+//////////////////////////////////////////////////////////////////////////////////////8YZIz/GGSM/xhkjP8YZIz/AAAA/wAAAP8AAAD/AAAA/0gAAP9IAAD/SAAA/0gAAP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6bYkf+m2JH/ptiR/6bYkf87qQ3/O6kN/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/2K6Pv9iuj7/Yro+/2K6Pv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9iuj7/Yro+/2K6Pv9iuj7//////////////////////////////////////////////////////////////////////////////////////xhkjP8YZIz/GGSM/xhkjP8AAAD/AAAA/wAAAP8AAAD/SAAA/0gAAP9IAAD/SAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ptiR/6bYkf+m2JH/ptiR/zupDf87qQ3/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/Yro+/2K6Pv9iuj7/Yro+/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Yro+/2K6Pv9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/2K6Pv9iuj7/Yro+/2K6Pv//////////////////////////////////////////////////////////////////////////////////////GGSM/xhkjP8YZIz/GGSM/wAAAP8AAAD/AAAA/wAAAP9IAAD/SAAA/0gAAP9IAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+m2JH/ptiR/6bYkf+m2JH/O6kN/zupDf87qQ3/O6kN/0CsFP9ArBT/QKwU/0CsFP9iuj7/Yro+/2K6Pv9iuj7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/Yro+/2K6Pv9iuj7/Yro+//////////////////////////////////////////////////////////////////////////////////////8YZIz/GGSM/xhkjP8YZIz/AAAA/wAAAP8AAAD/AAAA/0gAAP9IAAD/SAAA/0gAAP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6bYkf+m2JH/ptiR/6bYkf87qQ3/O6kN/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/2K6Pv9iuj7/Yro+/2K6Pv//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/Yro+/2K6Pv9iuj7/Yro+//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/O6kN/zupDf87qQ3/O6kN/0auG/9Grhv/Rq4b/0auG/9ovUT/aL1E/2i9RP9ovUT///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/Rq4b/0auG/9Grhv/Rq4b/0CsFP9ArBT/QKwU/0CsFP9iuj7/Yro+/2K6Pv9iuj7//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Yro+/2K6Pv87qQ3/O6kN/zupDf87qQ3/Rq4b/0auG/9Grhv/Rq4b/2i9RP9ovUT/aL1E/2i9RP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Yro+/2K6Pv9Grhv/Rq4b/0auG/9Grhv/QKwU/0CsFP9ArBT/QKwU/2K6Pv9iuj7/Yro+/2K6Pv//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/zupDf87qQ3/O6kN/zupDf9Grhv/Rq4b/0auG/9Grhv/aL1E/2i9RP9ovUT/aL1E////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/Yro+/2K6Pv9iuj7/Yro+//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/O6kN/zupDf87qQ3/O6kN/0auG/9Grhv/Rq4b/0auG/9ovUT/aL1E/2i9RP9ovUT/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////H50A/x+dAP8fnQD/H50A/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/aL1E/2i9RP9ovUT/aL1E/+Py3P/j8tz/4/Lc/+Py3P/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/+Py3P/j8tz/aL1E/2i9RP9ovUT/aL1E/0CsFP9ArBT/QKwU/0CsFP9Grhv/Rq4b/0auG/9Grhv/JJ8A/ySfAP8knwD/JJ8A/+Py3P/j8tz/4/Lc/+Py3P////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8fnQD/H50A/x+dAP8fnQD/Rq4b/0auG/9Grhv/Rq4b/0CsFP9ArBT/QKwU/0CsFP9ovUT/aL1E/2i9RP9ovUT/4/Lc/+Py3P/j8tz/4/Lc/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Py3P/j8tz/4/Lc/+Py3P9ovUT/aL1E/2i9RP9ovUT/QKwU/0CsFP9ArBT/QKwU/0auG/9Grhv/Rq4b/0auG/8knwD/JJ8A/ySfAP8knwD/4/Lc/+Py3P/j8tz/4/Lc/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////x+dAP8fnQD/H50A/x+dAP9Grhv/Rq4b/0auG/9Grhv/QKwU/0CsFP9ArBT/QKwU/2i9RP9ovUT/aL1E/2i9RP/j8tz/4/Lc/+Py3P/j8tz/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////4/Lc/+Py3P/j8tz/4/Lc/2i9RP9ovUT/aL1E/2i9RP9ArBT/QKwU/0CsFP9ArBT/Rq4b/0auG/9Grhv/Rq4b/ySfAP8knwD/JJ8A/ySfAP/j8tz/4/Lc/+Py3P/j8tz/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////H50A/x+dAP8fnQD/H50A/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/aL1E/2i9RP9ovUT/aL1E/+Py3P/j8tz/4/Lc/+Py3P/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/+Py3P/j8tz/aL1E/2i9RP9ovUT/aL1E/0CsFP9ArBT/QKwU/0CsFP9Grhv/Rq4b/0auG/9Grhv/JJ8A/ySfAP8knwD/JJ8A/+Py3P/j8tz/4/Lc/+Py3P//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/zupDf87qQ3/O6kN/zupDf9Grhv/Rq4b/0auG/9Grhv/NacG/zWnBv81pwb/NacG/22/S/9tv0v/bb9L/22/S/+f1Yn/n9WJ/5/Vif+f1Yn///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+f1Yn/n9WJ/5/Vif+f1Yn/bb9L/22/S/9tv0v/bb9L/zWnBv81pwb/NacG/zWnBv9Grhv/Rq4b/0auG/9Grhv/O6kN/zupDf87qQ3/O6kN/2K6Pv9iuj7/Yro+/2K6Pv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/2K6Pv9iuj7/O6kN/zupDf87qQ3/O6kN/0auG/9Grhv/Rq4b/0auG/81pwb/NacG/zWnBv81pwb/bb9L/22/S/9tv0v/bb9L/5/Vif+f1Yn/n9WJ/5/Vif///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////5/Vif+f1Yn/n9WJ/5/Vif9tv0v/bb9L/22/S/9tv0v/NacG/zWnBv81pwb/NacG/0auG/9Grhv/Rq4b/0auG/87qQ3/O6kN/zupDf87qQ3/Yro+/2K6Pv9iuj7/Yro+/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Yro+/2K6Pv87qQ3/O6kN/zupDf87qQ3/Rq4b/0auG/9Grhv/Rq4b/zWnBv81pwb/NacG/zWnBv9tv0v/bb9L/22/S/9tv0v/n9WJ/5/Vif+f1Yn/n9WJ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////n9WJ/5/Vif+f1Yn/n9WJ/22/S/9tv0v/bb9L/22/S/81pwb/NacG/zWnBv81pwb/Rq4b/0auG/9Grhv/Rq4b/zupDf87qQ3/O6kN/zupDf9iuj7/Yro+/2K6Pv9iuj7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9iuj7/Yro+/zupDf87qQ3/O6kN/zupDf9Grhv/Rq4b/0auG/9Grhv/NacG/zWnBv81pwb/NacG/22/S/9tv0v/bb9L/22/S/+f1Yn/n9WJ/5/Vif+f1Yn///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+f1Yn/n9WJ/5/Vif+f1Yn/bb9L/22/S/9tv0v/bb9L/zWnBv81pwb/NacG/zWnBv9Grhv/Rq4b/0auG/9Grhv/O6kN/zupDf87qQ3/O6kN/2K6Pv9iuj7/Yro+/2K6Pv//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////pdiQ/6XYkP+l2JD/pdiQ/yqiAP8qogD/KqIA/yqiAP9ArBT/QKwU/0CsFP9ArBT/Rq4b/0auG/9Grhv/Rq4b/0CsFP9ArBT/QKwU/0CsFP8wpAD/MKQA/zCkAP8wpAD/bb9L/22/S/9tv0v/bb9L/6val/+r2pf/q9qX/6val/+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6val/+r2pf/q9qX/6val/9tv0v/bb9L/22/S/9tv0v/MKQA/zCkAP8wpAD/MKQA/0CsFP9ArBT/QKwU/0CsFP9Grhv/Rq4b/0auG/9Grhv/QKwU/0CsFP9ArBT/QKwU/yqiAP8qogD/KqIA/yqiAP+l2JD/pdiQ/6XYkP+l2JD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+l2JD/pdiQ/6XYkP+l2JD/KqIA/yqiAP8qogD/KqIA/0CsFP9ArBT/QKwU/0CsFP9Grhv/Rq4b/0auG/9Grhv/QKwU/0CsFP9ArBT/QKwU/zCkAP8wpAD/MKQA/zCkAP9tv0v/bb9L/22/S/9tv0v/q9qX/6val/+r2pf/q9qX/6XYkP+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+l2JD/q9qX/6val/+r2pf/q9qX/22/S/9tv0v/bb9L/22/S/8wpAD/MKQA/zCkAP8wpAD/QKwU/0CsFP9ArBT/QKwU/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/KqIA/yqiAP8qogD/KqIA/6XYkP+l2JD/pdiQ/6XYkP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6XYkP+l2JD/pdiQ/6XYkP8qogD/KqIA/yqiAP8qogD/QKwU/0CsFP9ArBT/QKwU/0auG/9Grhv/Rq4b/0auG/9ArBT/QKwU/0CsFP9ArBT/MKQA/zCkAP8wpAD/MKQA/22/S/9tv0v/bb9L/22/S/+r2pf/q9qX/6val/+r2pf/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+r2pf/q9qX/6val/+r2pf/bb9L/22/S/9tv0v/bb9L/zCkAP8wpAD/MKQA/zCkAP9ArBT/QKwU/0CsFP9ArBT/Rq4b/0auG/9Grhv/Rq4b/0CsFP9ArBT/QKwU/0CsFP8qogD/KqIA/yqiAP8qogD/pdiQ/6XYkP+l2JD/pdiQ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////pdiQ/6XYkP+l2JD/pdiQ/yqiAP8qogD/KqIA/yqiAP9ArBT/QKwU/0CsFP9ArBT/Rq4b/0auG/9Grhv/Rq4b/0CsFP9ArBT/QKwU/0CsFP8wpAD/MKQA/zCkAP8wpAD/bb9L/22/S/9tv0v/bb9L/6val/+r2pf/q9qX/6val/+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6XYkP+l2JD/pdiQ/6val/+r2pf/q9qX/6val/9tv0v/bb9L/22/S/9tv0v/MKQA/zCkAP8wpAD/MKQA/0CsFP9ArBT/QKwU/0CsFP9Grhv/Rq4b/0auG/9Grhv/QKwU/0CsFP9ArBT/QKwU/yqiAP8qogD/KqIA/yqiAP+l2JD/pdiQ/6XYkP+l2JD//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6XYkP+l2JD/pdiQ/6XYkP8qogD/KqIA/yqiAP8qogD/O6kN/zupDf87qQ3/O6kN/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/O6kN/zupDf87qQ3/O6kN/yqiAP8qogD/KqIA/yqiAP+l2JD/pdiQ/6XYkP+l2JD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////pdiQ/6XYkP+l2JD/pdiQ/yqiAP8qogD/KqIA/yqiAP87qQ3/O6kN/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP87qQ3/O6kN/zupDf87qQ3/KqIA/yqiAP8qogD/KqIA/6XYkP+l2JD/pdiQ/6XYkP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+l2JD/pdiQ/6XYkP+l2JD/KqIA/yqiAP8qogD/KqIA/zupDf87qQ3/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/zupDf87qQ3/O6kN/zupDf8qogD/KqIA/yqiAP8qogD/pdiQ/6XYkP+l2JD/pdiQ/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6XYkP+l2JD/pdiQ/6XYkP8qogD/KqIA/yqiAP8qogD/O6kN/zupDf87qQ3/O6kN/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/O6kN/zupDf87qQ3/O6kN/yqiAP8qogD/KqIA/yqiAP+l2JD/pdiQ/6XYkP+l2JD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////d8NX/3fDV/93w1f/d8NX/pdiQ/6XYkP+l2JD/pdiQ/22/S/9tv0v/bb9L/22/S/8wpAD/MKQA/zCkAP8wpAD/NacG/zWnBv81pwb/NacG/zWnBv81pwb/NacG/zWnBv8wpAD/MKQA/zCkAP8wpAD/bb9L/22/S/9tv0v/bb9L/6XYkP+l2JD/pdiQ/6XYkP/d8NX/3fDV/93w1f/d8NX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////93w1f/d8NX/3fDV/93w1f+l2JD/pdiQ/6XYkP+l2JD/bb9L/22/S/9tv0v/bb9L/zCkAP8wpAD/MKQA/zCkAP81pwb/NacG/zWnBv81pwb/NacG/zWnBv81pwb/NacG/zCkAP8wpAD/MKQA/zCkAP9tv0v/bb9L/22/S/9tv0v/pdiQ/6XYkP+l2JD/pdiQ/93w1f/d8NX/3fDV/93w1f//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3fDV/93w1f/d8NX/3fDV/6XYkP+l2JD/pdiQ/6XYkP9tv0v/bb9L/22/S/9tv0v/MKQA/zCkAP8wpAD/MKQA/zWnBv81pwb/NacG/zWnBv81pwb/NacG/zWnBv81pwb/MKQA/zCkAP8wpAD/MKQA/22/S/9tv0v/bb9L/22/S/+l2JD/pdiQ/6XYkP+l2JD/3fDV/93w1f/d8NX/3fDV///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////d8NX/3fDV/93w1f/d8NX/pdiQ/6XYkP+l2JD/pdiQ/22/S/9tv0v/bb9L/22/S/8wpAD/MKQA/zCkAP8wpAD/NacG/zWnBv81pwb/NacG/zWnBv81pwb/NacG/zWnBv8wpAD/MKQA/zCkAP8wpAD/bb9L/22/S/9tv0v/bb9L/6XYkP+l2JD/pdiQ/6XYkP/d8NX/3fDV/93w1f/d8NX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAEAAAACAAAAAAQAgAAAAAAAAQAAAdBIAAHQSAAAAAAAAAAAAAP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////93w1f/d8NX/pdiQ/6XYkP9tv0v/bb9L/zCkAP8wpAD/NacG/zWnBv81pwb/NacG/zCkAP8wpAD/bb9L/22/S/+l2JD/pdiQ/93w1f/d8NX////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////d8NX/3fDV/6XYkP+l2JD/bb9L/22/S/8wpAD/MKQA/zWnBv81pwb/NacG/zWnBv8wpAD/MKQA/22/S/9tv0v/pdiQ/6XYkP/d8NX/3fDV//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+l2JD/pdiQ/yqiAP8qogD/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/O6kN/zupDf8qogD/KqIA/6XYkP+l2JD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////pdiQ/6XYkP8qogD/KqIA/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/zupDf87qQ3/KqIA/yqiAP+l2JD/pdiQ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////pdiQ/6XYkP8qogD/KqIA/0CsFP9ArBT/Rq4b/0auG/9ArBT/QKwU/zCkAP8wpAD/bb9L/22/S/+r2pf/q9qX/6XYkP+l2JD/pdiQ/6XYkP+r2pf/q9qX/22/S/9tv0v/MKQA/zCkAP87qQ3/O6kN/0auG/9Grhv/QKwU/0CsFP8qogD/KqIA/6XYkP+l2JD//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6XYkP+l2JD/KqIA/yqiAP9ArBT/QKwU/0auG/9Grhv/QKwU/0CsFP8wpAD/MKQA/22/S/9tv0v/q9qX/6val/+l2JD/pdiQ/6XYkP+l2JD/q9qX/6val/9tv0v/bb9L/zCkAP8wpAD/O6kN/zupDf9Grhv/Rq4b/0CsFP9ArBT/KqIA/yqiAP+l2JD/pdiQ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv87qQ3/O6kN/0auG/9Grhv/NacG/zWnBv9tv0v/bb9L/5/Vif+f1Yn//////////////////////////////////////////////////////////////////////////////////////+Py3P/j8tz/aL1E/2i9RP81pwb/NacG/0auG/9Grhv/O6kN/zupDf9iuj7/Yro+/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/O6kN/zupDf9Grhv/Rq4b/zWnBv81pwb/bb9L/22/S/+f1Yn/n9WJ///////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/2i9RP9ovUT/NacG/zWnBv9Grhv/Rq4b/zupDf87qQ3/Yro+/2K6Pv///////////////////////////////////////////////////////////////////////////////////////////////////////////+Py3P/j8tz/JJ8A/ySfAP9Grhv/Rq4b/0CsFP9ArBT/aL1E/2i9RP/j8tz/4/Lc/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Py3P/j8tz/aL1E/2i9RP9ArBT/QKwU/0auG/9Grhv/JJ8A/ySfAP/j8tz/4/Lc///////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/ySfAP8knwD/Rq4b/0auG/9ArBT/QKwU/2i9RP9ovUT/4/Lc/+Py3P/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/2i9RP9ovUT/QKwU/0CsFP9Grhv/Rq4b/ySfAP8knwD/4/Lc/+Py3P//////////////////////////////////////////////////////////////////////////////////////aL1E/2i9RP9Grhv/Rq4b/0CsFP9ArBT/Yro+/2K6Pv///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/O6kN/zupDf9Grhv/Rq4b/2i9RP9ovUT//////////////////////////////////////////////////////////////////////////////////////2i9RP9ovUT/Rq4b/0auG/9ArBT/QKwU/2K6Pv9iuj7///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/zupDf87qQ3/Rq4b/0auG/9ovUT/aL1E////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9ArBT/QKwU/0CsFP9ArBT/Yro+/2K6Pv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+m2JH/ptiR/zupDf87qQ3/QKwU/0CsFP9iuj7/Yro+/////////////////////////////////////////////////////////////////2K6Pv9iuj7/QKwU/0CsFP9ArBT/QKwU/2K6Pv9iuj7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ptiR/6bYkf87qQ3/O6kN/0CsFP9ArBT/Yro+/2K6Pv//////////////////////////////////////////////////////6fXj/+n14/81pwb/NacG/0auG/9Grhv/Yro+/2K6Pv///////////////////////////////////////////wAAAP8AAAD/AAAA/wAAAP94Ryv/eEcr////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9Grhv/Rq4b/zWnBv81pwb/6fXj/+n14////////////////////////////////////////////+n14//p9eP/NacG/zWnBv9Grhv/Rq4b/2K6Pv9iuj7///////////////////////////////////////////8AAAD/AAAA/wAAAP8AAAD/eEcr/3hHK////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Rq4b/0auG/81pwb/NacG/+n14//p9eP///////////////////////////////////////////8knwD/JJ8A/0yxIv9MsSL/JJ8A/ySfAP//////////////////////////////////////////////////////AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/qXM6/6lzOv///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ySfAP8knwD/TLEi/0yxIv8knwD/JJ8A////////////////////////////////////////////JJ8A/ySfAP9MsSL/TLEi/ySfAP8knwD//////////////////////////////////////////////////////wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/6lzOv+pczr///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8knwD/JJ8A/0yxIv9MsSL/JJ8A/ySfAP////////////////////////////////+g1Yr/oNWK/0CsFP9ArBT/O6kN/zupDf/p9eP/6fXj/////////////////////////////////////////////////////////////////wAsYv8ALGL/AAAA/wAAAP9XJgD/VyYA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6fXj/+n14/87qQ3/O6kN/0CsFP9ArBT/oNWK/6DViv//////////////////////oNWK/6DViv9ArBT/QKwU/zupDf87qQ3/6fXj/+n14/////////////////////////////////////////////////////////////////8ALGL/ACxi/wAAAP8AAAD/VyYA/1cmAP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+n14//p9eP/O6kN/zupDf9ArBT/QKwU/6DViv+g1Yr//////////////////////22/S/9tv0v/Rq4b/0auG/8qogD/KqIA////////////////////////////////////////////////////////////////////////////P2+r/z9vq/8AAAD/AAAA/1AeAP9QHgD//////////////////////7nY9v+52Pb/joyJ/46Mif97e3v/e3t7/4eJi/+HiYv///bm///25v///////////////////////////////////////////////////////////////////////////yqiAP8qogD/Rq4b/0auG/9tv0v/bb9L//////////////////////9tv0v/bb9L/0auG/9Grhv/KqIA/yqiAP///////////////////////////////////////////////////////////////////////////z9vq/8/b6v/AAAA/wAAAP9QHgD/UB4A//////////////////////+52Pb/udj2/46Mif+OjIn/e3t7/3t7e/+HiYv/h4mL///25v//9ub///////////////////////////////////////////////////////////////////////////8qogD/KqIA/0auG/9Grhv/bb9L/22/S///////////////////////MKQA/zCkAP9ArBT/QKwU/6vamP+r2pj///////////////////////////////////////////////////////////////////////////86aaT/Ommk/wAAAP8AAAD/UR8A/1EfAP///////////5jT//+Y0///AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/6hsKP+obCj/////////////////////////////////////////////////////////////////q9qY/6vamP9ArBT/QKwU/zCkAP8wpAD//////////////////////zCkAP8wpAD/QKwU/0CsFP+r2pj/q9qY////////////////////////////////////////////////////////////////////////////Ommk/zpppP8AAAD/AAAA/1EfAP9RHwD///////////+Y0///mNP//wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP+obCj/qGwo/////////////////////////////////////////////////////////////////6vamP+r2pj/QKwU/0CsFP8wpAD/MKQA////////////4/Lc/+Py3P87qQ3/O6kN/zupDf87qQ3/3fDV/93w1f///////////////////////////////////////////////////////////////////////////zpppP86aaT/AAAA/wAAAP9RHwD/UR8A////////////kdD//5HQ//8JAAD/CQAA/3txZf97cWX/h4WF/4eFhf8/aHX/P2h1/wAAAP8AAAD/AAAA/wAAAP//1Zf//9WX///////////////////////////////////////////////////////d8NX/3fDV/zupDf87qQ3/O6kN/zupDf/j8tz/4/Lc/+Py3P/j8tz/O6kN/zupDf87qQ3/O6kN/93w1f/d8NX///////////////////////////////////////////////////////////////////////////86aaT/Ommk/wAAAP8AAAD/UR8A/1EfAP///////////5HQ//+R0P//CQAA/wkAAP97cWX/e3Fl/4eFhf+HhYX/P2h1/z9odf8AAAD/AAAA/wAAAP8AAAD//9WX///Vl///////////////////////////////////////////////////////3fDV/93w1f87qQ3/O6kN/zupDf87qQ3/4/Lc/+Py3P+r2pj/q9qY/0CsFP9ArBT/NacG/zWnBv//////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP8AAAD/AAAA/1EfAP9RHwD/////////////////////////////////////////////////////////////////AAAH/wAAB/8AAAD/AAAA/96mZ//epmf/////////////////////////////////////////////////////////////////NacG/zWnBv9ArBT/QKwU/6vamP+r2pj/q9qY/6vamP9ArBT/QKwU/zWnBv81pwb//////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/AAAA/wAAAP9RHwD/UR8A/////////////////////////////////////////////////////////////////wAAB/8AAAf/AAAA/wAAAP/epmf/3qZn/////////////////////////////////////////////////////////////////zWnBv81pwb/QKwU/0CsFP+r2pj/q9qY/7Hcnv+x3J7/QKwU/0CsFP81pwb/NacG//////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/wAAAP8AAAD/UR8A/1EfAP/////////////////////////////////b6v//2+r//11ohv9daIb/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD////L////y/////////////////////////////////////////////////////////////////81pwb/NacG/0CsFP9ArBT/sdye/7Hcnv+x3J7/sdye/0CsFP9ArBT/NacG/zWnBv//////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP8AAAD/AAAA/1EfAP9RHwD/////////////////////////////////2+r//9vq//9daIb/XWiG/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA////y////8v/////////////////////////////////////////////////////////////////NacG/zWnBv9ArBT/QKwU/7Hcnv+x3J7/sdye/7Hcnv9ArBT/QKwU/zWnBv81pwb//////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/AAAA/wAAAP9RHwD/UR8A//////////////////////9cjL//XIy//wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/yAAAP8gAAD/6s6m/+rOpv///////////////////////////////////////////////////////////////////////////zWnBv81pwb/QKwU/0CsFP+x3J7/sdye/7Hcnv+x3J7/QKwU/0CsFP81pwb/NacG//////////////////////////////////////////////////////////////////////////////////////86aaT/Ommk/wAAAP8AAAD/UR8A/1EfAP//////////////////////XIy//1yMv/8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8gAAD/IAAA/+rOpv/qzqb///////////////////////////////////////////////////////////////////////////81pwb/NacG/0CsFP9ArBT/sdye/7Hcnv+r2pj/q9qY/0CsFP9ArBT/NacG/zWnBv//////////////////////////////////////////////////////////////////////////////////////Ommk/zpppP8AAAD/AAAA/1EfAP9RHwD////////////V////1f///wAAAP8AAAD/AAAA/wAAAP9ONRj/TjUY/+3Qxf/t0MX/////////////////////////////////////////////////////////////////////////////////////////////////NacG/zWnBv9ArBT/QKwU/6vamP+r2pj/q9qY/6vamP9ArBT/QKwU/zWnBv81pwb//////////////////////////////////////////////////////////////////////////////////////zpppP86aaT/AAAA/wAAAP9RHwD/UR8A////////////1f///9X///8AAAD/AAAA/wAAAP8AAAD/TjUY/041GP/t0MX/7dDF/////////////////////////////////////////////////////////////////////////////////////////////////zWnBv81pwb/QKwU/0CsFP+r2pj/q9qY/+Py3P/j8tz/O6kN/zupDf87qQ3/O6kN/93w1f/d8NX///////////////////////////////////////////////////////////////////////////86aaT/Ommk/wAAAP8AAAD/UR8A/1EfAP///////////6Xc//+l3P//AAAA/wAAAP8AAAD/AAAA////2P///9j////////////y8///8vP//5+ciP+fnIj/////////////////////////////////////////////////////////////////3fDV/93w1f87qQ3/O6kN/zupDf87qQ3/4/Lc/+Py3P/j8tz/4/Lc/zupDf87qQ3/O6kN/zupDf/d8NX/3fDV////////////////////////////////////////////////////////////////////////////Ommk/zpppP8AAAD/AAAA/1EfAP9RHwD///////////+l3P//pdz//wAAAP8AAAD/AAAA/wAAAP///9j////Y////////////8vP///Lz//+fnIj/n5yI/////////////////////////////////////////////////////////////////93w1f/d8NX/O6kN/zupDf87qQ3/O6kN/+Py3P/j8tz///////////8wpAD/MKQA/0CsFP9ArBT/q9qY/6vamP///////////////////////////////////////////////////////////////////////////zhno/84Z6P/AAAA/wAAAP9QHgD/UB4A//////////////////////8AADr/AAA6/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/IgAA/yIAAP////////////////////////////////////////////////////////////////+r2pj/q9qY/0CsFP9ArBT/MKQA/zCkAP//////////////////////MKQA/zCkAP9ArBT/QKwU/6vamP+r2pj///////////////////////////////////////////////////////////////////////////84Z6P/OGej/wAAAP8AAAD/UB4A/1AeAP//////////////////////AAA6/wAAOv8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/yIAAP8iAAD/////////////////////////////////////////////////////////////////q9qY/6vamP9ArBT/QKwU/zCkAP8wpAD//////////////////////22/S/9tv0v/Rq4b/0auG/8qogD/KqIA////////////////////////////////////////////////////////////////////////////MW2o/zFtqP8AAAD/AAAA/0sWAP9LFgD//////////////////////+n////p////P0pj/z9KY/8AAAD/AAAA/wAAAP8AAAD/BwAA/wcAAP+ohUb/qIVG/////////////////////////////////////////////////////////////////yqiAP8qogD/Rq4b/0auG/9tv0v/bb9L//////////////////////9tv0v/bb9L/0auG/9Grhv/KqIA/yqiAP///////////////////////////////////////////////////////////////////////////zFtqP8xbaj/AAAA/wAAAP9LFgD/SxYA///////////////////////p////6f///z9KY/8/SmP/AAAA/wAAAP8AAAD/AAAA/wcAAP8HAAD/qIVG/6iFRv////////////////////////////////////////////////////////////////8qogD/KqIA/0auG/9Grhv/bb9L/22/S///////////////////////oNWK/6DViv87qQ3/O6kN/0CsFP9ArBT/ptiR/6bYkf///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+n14//p9eP/O6kN/zupDf9ArBT/QKwU/6DViv+g1Yr//////////////////////6DViv+g1Yr/O6kN/zupDf9ArBT/QKwU/6bYkf+m2JH////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////p9eP/6fXj/zupDf87qQ3/QKwU/0CsFP+g1Yr/oNWK/////////////////////////////////2i9RP9ovUT/Rq4b/0auG/8qogD/KqIA/////////////////////////////////////////////////////////////////7Ld6f+y3en/cXFx/3Fxcf/RpZX/0aWV////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////JJ8A/ySfAP9MsSL/TLEi/ySfAP8knwD///////////////////////////////////////////9ovUT/aL1E/0auG/9Grhv/KqIA/yqiAP////////////////////////////////////////////////////////////////+y3en/st3p/3Fxcf9xcXH/0aWV/9Gllf///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ySfAP8knwD/TLEi/0yxIv8knwD/JJ8A////////////////////////////////////////////4/Lc/+Py3P81pwb/NacG/0auG/9Grhv/Yro+/2K6Pv//////////////////////////////////////////////////////ABRJ/wAUSf8AAAD/AAAA/wgAAP8IAAD////r////6///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9Grhv/Rq4b/zWnBv81pwb/6fXj/+n14////////////////////////////////////////////+Py3P/j8tz/NacG/zWnBv9Grhv/Rq4b/2K6Pv9iuj7//////////////////////////////////////////////////////wAUSf8AFEn/AAAA/wAAAP8IAAD/CAAA////6////+v//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/Rq4b/0auG/81pwb/NacG/+n14//p9eP//////////////////////////////////////////////////////2K6Pv9iuj7/QKwU/0CsFP9ArBT/QKwU/2K6Pv9iuj7///////////////////////////////////////////8YZIz/GGSM/wAAAP8AAAD/SAAA/0gAAP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ptiR/6bYkf87qQ3/O6kN/0CsFP9ArBT/Yro+/2K6Pv////////////////////////////////////////////////////////////////9iuj7/Yro+/0CsFP9ArBT/QKwU/0CsFP9iuj7/Yro+////////////////////////////////////////////GGSM/xhkjP8AAAD/AAAA/0gAAP9IAAD//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6bYkf+m2JH/O6kN/zupDf9ArBT/QKwU/2K6Pv9iuj7///////////////////////////////////////////////////////////////////////////9iuj7/Yro+/0auG/9Grhv/QKwU/0CsFP9iuj7/Yro+////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv87qQ3/O6kN/0auG/9Grhv/aL1E/2i9RP//////////////////////////////////////////////////////////////////////////////////////Yro+/2K6Pv9Grhv/Rq4b/0CsFP9ArBT/Yro+/2K6Pv///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/O6kN/zupDf9Grhv/Rq4b/2i9RP9ovUT/////////////////////////////////////////////////////////////////////////////////////////////////H50A/x+dAP9Grhv/Rq4b/0CsFP9ArBT/aL1E/2i9RP/j8tz/4/Lc/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Py3P/j8tz/aL1E/2i9RP9ArBT/QKwU/0auG/9Grhv/JJ8A/ySfAP/j8tz/4/Lc/////////////////////////////////////////////////////////////////////////////////////////////////x+dAP8fnQD/Rq4b/0auG/9ArBT/QKwU/2i9RP9ovUT/4/Lc/+Py3P/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j8tz/4/Lc/2i9RP9ovUT/QKwU/0CsFP9Grhv/Rq4b/ySfAP8knwD/4/Lc/+Py3P///////////////////////////////////////////////////////////////////////////////////////////////////////////2K6Pv9iuj7/O6kN/zupDf9Grhv/Rq4b/zWnBv81pwb/bb9L/22/S/+f1Yn/n9WJ//////////////////////////////////////////////////////////////////////////////////////+f1Yn/n9WJ/22/S/9tv0v/NacG/zWnBv9Grhv/Rq4b/zupDf87qQ3/Yro+/2K6Pv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/Yro+/zupDf87qQ3/Rq4b/0auG/81pwb/NacG/22/S/9tv0v/n9WJ/5/Vif//////////////////////////////////////////////////////////////////////////////////////n9WJ/5/Vif9tv0v/bb9L/zWnBv81pwb/Rq4b/0auG/87qQ3/O6kN/2K6Pv9iuj7///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+l2JD/pdiQ/yqiAP8qogD/QKwU/0CsFP9Grhv/Rq4b/0CsFP9ArBT/MKQA/zCkAP9tv0v/bb9L/6val/+r2pf/pdiQ/6XYkP+l2JD/pdiQ/6val/+r2pf/bb9L/22/S/8wpAD/MKQA/0CsFP9ArBT/Rq4b/0auG/9ArBT/QKwU/yqiAP8qogD/pdiQ/6XYkP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////pdiQ/6XYkP8qogD/KqIA/0CsFP9ArBT/Rq4b/0auG/9ArBT/QKwU/zCkAP8wpAD/bb9L/22/S/+r2pf/q9qX/6XYkP+l2JD/pdiQ/6XYkP+r2pf/q9qX/22/S/9tv0v/MKQA/zCkAP9ArBT/QKwU/0auG/9Grhv/QKwU/0CsFP8qogD/KqIA/6XYkP+l2JD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+l2JD/pdiQ/yqiAP8qogD/O6kN/zupDf9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/O6kN/zupDf8qogD/KqIA/6XYkP+l2JD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////pdiQ/6XYkP8qogD/KqIA/zupDf87qQ3/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/zupDf87qQ3/KqIA/yqiAP+l2JD/pdiQ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////d8NX/3fDV/6XYkP+l2JD/bb9L/22/S/8wpAD/MKQA/zWnBv81pwb/NacG/zWnBv8wpAD/MKQA/22/S/9tv0v/pdiQ/6XYkP/d8NX/3fDV////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3fDV/93w1f+l2JD/pdiQ/22/S/9tv0v/MKQA/zCkAP81pwb/NacG/zWnBv81pwb/MKQA/zCkAP9tv0v/bb9L/6XYkP+l2JD/3fDV/93w1f////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAwAAAAYAAAAAEAIAAAAAAAACQAAHQSAAB0EgAAAAAAAAAAAAD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9/v1/+746v/S7Mj/xOW2/7bfpf+Y0oD/mdKB/5rTg/+a04P/mdKB/5jSgP+236X/xOW2/9LsyP/u+Or/9/v1////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7vjq/93w1f+l2JD/icxu/22/S/8wpAD/M6YD/zWnBv81pwb/M6YD/zCkAP9tv0v/icxu/6XYkP/d8NX/7vjq////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////0uzI/6XYkP8qogD/M6YH/zupDf9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP87qQ3/M6YH/yqiAP+l2JD/0uzI////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6fXj/9LsyP+V0YD/hMlp/3PCUv84qA7/O6kP/z6rEf84qAr/R68d/1e2MP92w1b/dMNU/3PCUv9zwlL/dMNU/3bDVv9XtjD/R68d/zioCv87qQ3/OqkN/zioDv9zwlL/hMlp/5XRgP/S7Mj/6fXj////////////////////////////////////////////////////////////////////////////////////////////////////////////0uzI/6XYkP8qogD/NacK/0CsFP9Grhv/Q60Y/0CsFP8wpAD/T7Im/22/S/+r2pf/qNmU/6XYkP+l2JD/qNmU/6val/9tv0v/T7Im/zCkAP87qQ3/QawU/0auG/9ArBT/NacK/yqiAP+l2JD/0uzI//////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/T7Im/zupDf9Grhv/PqsR/zWnBv9tv0v/hspq/5/Vif/////////////////////////////////////////////////////////////////j8tz/ptiQ/2i9RP81pwb/PqsR/0auG/87qQ3/T7Im/2K6Pv/////////////////////////////////////////////////////////////////////////////////x+e7/weS3/5LPgP9UtC3/Sa8f/z6rEf9XtjD/csFQ/4zNcf+236X/w+W1/8/qxP/////////////////////////////////////////////////////////////////x+e7/0uvI/7Teov+MzXH/csFQ/1e2MP8+qxH/Sa8f/1S0Lf+Sz4D/weS3//H57v/////////////////////////////////////////////////////////////////j8tz/hMlu/ySfAP9Grhv/Q60Y/0CsFP9ovUT/ptiQ/+Py3P/////////////////////////////////////////////////////////////////////////////////////////////////j8tz/ptiQ/2i9RP9ArBT/Q60Y/0auG/8knwD/hMlu/+Py3P////////////////////////////////////////////////////////////////9ovUT/V7Yw/0auG/9ArBT/UbMp/2K6Pv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/T7Im/zupDf9Grhv/V7Yw/2i9RP//////////////////////////////////////////////////////2O7P/7Hdn/9UtSz/TLEi/0OtGP9Rsyn/gchk/7Hdn/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+x3Z//kc93/3HBT/9BrBT/SrAg/1S1LP+x3Z//2O7P////////////////////////////////////////////sd2f/2K6Pv9ArBT/QKwU/0CsFP9iuj7/sd2f////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////0+zI/6bYkf87qQ3/PqsR/0CsFP9iuj7/sd2f///////////////////////////////////////p9eP/j851/zWnBv9Grhv/VLQt/2K6Pv////////////////////////////////8AAAD/AAAA/wAAAP94Ryv/vKOV//////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/VLQt/0auG/81pwb/j851/+n14/////////////////////////////////+HynL/ZLtD/0GsFP81pw7/c8JW/7Hdn/////////////////////////////////8AAAD/AAAA/wAAAP88JBb/iG5Z/9S5nf////////////////////////////////////////////////////////////////////////////////////////////////+x3Z//c8JW/zWnDv9BrBT/ZLtD/4fKcv////////////////////////////////8knwD/OKgR/0yxIv8knwD/ks+A//////////////////////////////////////8AAAD/AAAA/wAAAP8AAAD/VTod/6lzOv//////////////////////////////////////////////////////////////////////////////////////////////////////ks+A/ySfAP9MsSL/OKgR/ySfAP//////////////////////0OrF/6DViv9ArBT/PqsR/zupDf/p9eP/9Prx////////////////////////////////////////////gJax/wAsYv8AAAD/LBMA/1cmAP//////////////////////////////////////////////////////////////////////////////////////////////////////9Prx/+n14/87qQ3/PqsR/0CsFP+g1Yr/0OrF////////////w+W1/4fKa/9DrRj/O6kP/zOmB//0+vH/+v34////////////////////////////////////////////j6bD/yBOh/8AAAD/KhEA/1QiAP/////////////////c7Pv/0dnf/8fGxP+9vb3/wMHB/8PExf//+/P///35////////////////////////////////////////////+v34//T68f8zpgf/O6kP/0OtGP+Hymv/w+W1////////////tt+l/22/S/9Grhv/OKgO/yqiAP//////////////////////////////////////////////////////n7fV/z9vq/8AAAD/KA8A/1AeAP////////////////+52Pb/pLLA/46Mif97e3v/gYKD/4eJi///9ub///vz//////////////////////////////////////////////////////8qogD/OKgO/0auG/9tv0v/tt+l////////////mNKA/zCkAP9ArBT/dsNW/6vamP//////////////////////////////////////////////////////nbTS/zpppP8AAAD/KRAA/1EfAP//////zOn//5jT//8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/VDYU/6hsKP////////////////////////////////////////////////+r2pj/dsNW/0CsFP8wpAD/mNKA///////x+e7/k9B6/zanB/8+qxH/gchk/8Tlt///////////////////////////////////////////////////////nbTS/zpppP8AAAD/KRAA/1EfAP//////yuj//5XS//8FAAD/IRwZ/z45M/9EQ0P/Mjs//yA0O/8AAAD/KhsK/1Q2FP//6sv///Xl///////////////////////////////////////E5bf/gchk/z6rEf82pwf/k9B6//H57v/j8tz/j851/zupDf87qQ3/jM1x/93w1f//////////////////////////////////////////////////////nbTS/zpppP8AAAD/KRAA/1EfAP//////yOj//5HQ//8JAAD/Qjkz/3txZf+HhYX/Y3d9/z9odf8AAAD/AAAA/wAAAP//1Zf//+rL///////////////////////////////////////d8NX/jM1x/zupDf87qQ3/j851/+Py3P+r2pj/dsNW/0CsFP81pwb/mtOD////////////////////////////////////////////////////////////nbTS/zpppP8AAAD/KRAA/1EfAP////////////////////////////////////////////////8AAAf/AAAE/wAAAP/epmf/79Oz////////////////////////////////////////////mtOD/zWnBv9ArBT/dsNW/6vamP+u25v/d8RY/0CsFP81pwb/mtOD////////////////////////////////////////////////////////////nbTS/zpppP8AAAD/KRAA/1EfAP//////////////////////9vr//+31//+utMP/l5qh/4CAgP8AAAT/AAAC/wAAAP/v05n/9+nM////////////////////////////////////////////mtOD/zWnBv9ArBT/d8RY/67bm/+x3J7/ecRZ/0CsFP81pwb/mtOD////////////////////////////////////////////////////////////nbTS/zpppP8AAAD/KRAA/1EfAP//////////////////////7fX//9vq//9daIb/LzRD/wAAAP8AAAD/AAAA/wAAAP///8v////l////////////////////////////////////////////mtOD/zWnBv9ArBT/ecRZ/7Hcnv+x3J7/ecRZ/0CsFP81pwb/mtOD////////////////////////////////////////////////////////////nbTS/zpppP8AAAD/KRAA/1EfAP////////////////9cjL//LkZg/wAAAP8AAAD/AAAA/wAAAP8gAAD/hWdT/+rOpv//////////////////////////////////////////////////////mtOD/zWnBv9ArBT/ecRZ/7Hcnv+u25v/d8RY/0CsFP81pwb/mtOD////////////////////////////////////////////////////////////nbTS/zpppP8AAAD/KRAA/1EfAP//////9f///+r///8uRmD/FyMw/wAAAP8nGwz/T0E3/3doY/+QgID/wrOp//Xn0///////////////////////////////////////////////////////mtOD/zWnBv9ArBT/d8RY/67bm/+r2pj/dsNW/0CsFP81pwb/mtOD////////////////////////////////////////////////////////////nbTS/zpppP8AAAD/KRAA/1EfAP//////6v///9X///8AAAD/AAAA/wAAAP9ONRj/noNv/+3Qxf//////////////////////////////////////////////////////////////////////mtOD/zWnBv9ArBT/dsNW/6vamP/j8tz/j851/zupDf87qQ3/jM1x/93w1f//////////////////////////////////////////////////////nbTS/zpppP8AAAD/KRAA/1EfAP//////0u7//6Xc//8AAAD/AAAA/wAAAP///9j////s///////y8///ycjE/5+ciP/////////////////////////////////////////////////d8NX/jM1x/zupDf87qQ3/j851/+Py3P/x+e7/k9B6/zanB/8+qxH/gchk/8Tlt///////////////////////////////////////////////////////nLTR/zlopP8AAAD/KA8A/1EfAP//////6fb//9Lu//8AAB3/AAAP/wAAAP+AgGz/gIB2/4CAgP95eoD/bWRi/2FORP/////////////////////////////////////////////////E5bf/gchk/z6rEf82pwf/k9B6//H57v//////mNKA/zCkAP9ArBT/dsNW/6vamP//////////////////////////////////////////////////////nLPR/zhno/8AAAD/KA8A/1AeAP////////////////8AADr/AAAd/wAAAP8AAAD/AAAA/wAAAP8AAAD/EQAA/yIAAP////////////////////////////////////////////////+r2pj/dsNW/0CsFP8wpAD/mNKA////////////tt+l/22/S/9Grhv/OKgO/yqiAP//////////////////////////////////////////////////////mLbU/zFtqP8AAAD/JgsA/0sWAP/////////////////p////lKWx/z9KY/8AAAD/AAAA/wAAAP8HAAD/WEMj/6iFRv////////////////////////////////////////////////8qogD/OKgO/0auG/9tv0v/tt+l////////////w+W1/4fKa/9BrBT/O6kP/zWnCv/T7Mj/6fXk////////////////////////////////////////////zNvp/5i21P+AgID/koWA/6WLgP/////////////////0////ytLY/5+lsf+AgID/gICA/4CAgP+DgID/q6GR/9TCo///////////////////////////////////////+v34//T68f8zpgf/O6kP/0OtGP+Hymv/w+W1////////////0OrF/6DViv87qQ3/PqsR/0CsFP+m2JH/0+zI////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9Prx/+n14/87qQ3/PqsR/0CsFP+g1Yr/0OrF//////////////////////9ovUT/V7Yw/0auG/8qogD/ldGA////////////////////////////////////////////2e70/7Ld6f9xcXH/oYuD/9Gllf//////////////////////////////////////////////////////////////////////////////////////////////////////ks+A/ySfAP9MsSL/OKgR/ySfAP////////////////////////////////+m2JD/csFQ/z6rEf84qA7/dMJW/7Hdn///////////////////////////////////////rLzM/1l5mf85OTn/U0ZC/21TS/////X////6//////////////////////////////////////////////////////////////////////////////////////+x3Z//c8JW/zWnDv9BrBT/ZLtD/4fKcv/////////////////////////////////j8tz/jM1x/zWnBv9Grhv/VLQt/2K6Pv//////////////////////////////////////gIqk/wAUSf8AAAD/BAAA/wgAAP///+v////1//////////////////////////////////////////////////////////////////////////////////////9iuj7/VLQt/0auG/81pwb/j851/+n14///////////////////////////////////////sd2f/2K6Pv9ArBT/QKwU/0CsFP9iuj7/sd2f////////////////////////////jLLG/xhkjP8AAAD/JAAA/0gAAP//////////////////////////////////////////////////////////////////////////////////////0+zI/6bYkf87qQ3/PqsR/0CsFP9iuj7/sd2f////////////////////////////////////////////2O7P/7Hdn/9Rsyn/SrAg/0OtGP9Rsyn/gchk/7Hdn///////////////////////xdji/4yyxv+AgID/koCA/6SAgP////////////////////////////////////////////////////////////////////////////////+x3Z//kc93/3HBT/9BrBT/SrAg/1S1LP+x3Z//2O7P//////////////////////////////////////////////////////9iuj7/VLQt/0auG/9ArBT/UbMp/2K6Pv////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9iuj7/T7Im/zupDf9Grhv/V7Yw/2i9RP//////////////////////////////////////////////////////////////////////j86A/x+dAP9Grhv/Q60Y/0CsFP9ovUT/ptiQ/+Py3P/////////////////////////////////////////////////////////////////////////////////////////////////j8tz/ptiQ/2i9RP9ArBT/Q60Y/0auG/8knwD/hMlu/+Py3P//////////////////////////////////////////////////////////////////////x+e//4/OgP9UtC3/Sa8f/z6rEf9XtjD/csFQ/4zNcf+236X/w+W1/8/qxP/////////////////////////////////////////////////////////////////P6sT/w+W1/7bfpf+MzXH/csFQ/1e2MP8+qxH/Sa8f/1S0Lf+Sz4D/weS3//H57v////////////////////////////////////////////////////////////////////////////////9iuj7/T7Im/zupDf9Grhv/PqsR/zWnBv9tv0v/hspq/5/Vif////////////////////////////////////////////////////////////////+f1Yn/hspq/22/S/81pwb/PqsR/0auG/87qQ3/T7Im/2K6Pv//////////////////////////////////////////////////////////////////////////////////////////////////////0uzI/6XYkP8qogD/NacK/0CsFP9Grhv/Q60Y/0CsFP8wpAD/T7Im/22/S/+r2pf/qNmU/6XYkP+l2JD/qNmU/6val/9tv0v/T7Im/zCkAP9ArBT/Q60Y/0auG/9ArBT/NacK/yqiAP+l2JD/0uzI////////////////////////////////////////////////////////////////////////////////////////////////////////////6fXj/9LsyP+V0YD/hMlp/3PCUv84qA7/O6kP/z6rEf84qAr/R68d/1e2MP92w1b/dMNU/3PCUv9zwlL/dMNU/3bDVv9XtjD/R68d/zioCv8+qxH/O6kP/zioDv9zwlL/hMlp/5XRgP/S7Mj/6fXj////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////0uzI/6XYkP8qogD/M6YH/zupDf9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP87qQ3/M6YH/yqiAP+l2JD/0uzI////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7vjq/93w1f+l2JD/icxu/22/S/8wpAD/M6YD/zWnBv81pwb/M6YD/zCkAP9tv0v/icxu/6XYkP/d8NX/7vjq////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9/v1/+746v/S7Mj/xOW2/7bfpf+Y0oD/mdKB/5rTg/+a04P/mdKB/5jSgP+236X/xOW2/9LsyP/u+Or/9/v1//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAIAAAAEAAAAABACAAAAAAAAAQAAB0EgAAdBIAAAAAAAAAAAAA/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////93w1f+l2JD/bb9L/zCkAP81pwb/NacG/zCkAP9tv0v/pdiQ/93w1f///////////////////////////////////////////////////////////////////////////////////////////////////////////6XYkP8qogD/O6kN/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/O6kN/yqiAP+l2JD//////////////////////////////////////////////////////////////////////////////////////6XYkP8qogD/QKwU/0auG/9ArBT/MKQA/22/S/+r2pf/pdiQ/6XYkP+r2pf/bb9L/zCkAP87qQ3/Rq4b/0CsFP8qogD/pdiQ//////////////////////////////////////////////////////////////////////9iuj7/O6kN/0auG/81pwb/bb9L/5/Vif///////////////////////////////////////////+Py3P9ovUT/NacG/0auG/87qQ3/Yro+///////////////////////////////////////////////////////j8tz/JJ8A/0auG/9ArBT/aL1E/+Py3P/////////////////////////////////////////////////////////////////j8tz/aL1E/0CsFP9Grhv/JJ8A/+Py3P///////////////////////////////////////////2i9RP9Grhv/QKwU/2K6Pv//////////////////////////////////////////////////////////////////////////////////////Yro+/zupDf9Grhv/aL1E//////////////////////////////////////9iuj7/QKwU/0CsFP9iuj7/////////////////////////////////////////////////////////////////////////////////////////////////ptiR/zupDf9ArBT/Yro+////////////////////////////6fXj/zWnBv9Grhv/Yro+//////////////////////8AAAD/AAAA/3hHK///////////////////////////////////////////////////////////////////////Yro+/0auG/81pwb/6fXj//////////////////////8knwD/TLEi/ySfAP///////////////////////////wAAAP8AAAD/AAAA/6lzOv//////////////////////////////////////////////////////////////////////JJ8A/0yxIv8knwD/////////////////oNWK/0CsFP87qQ3/6fXj/////////////////////////////////wAsYv8AAAD/VyYA///////////////////////////////////////////////////////////////////////p9eP/O6kN/0CsFP+g1Yr///////////9tv0v/Rq4b/yqiAP//////////////////////////////////////P2+r/wAAAP9QHgD///////////+52Pb/joyJ/3t7e/+HiYv///bm//////////////////////////////////////8qogD/Rq4b/22/S////////////zCkAP9ArBT/q9qY//////////////////////////////////////86aaT/AAAA/1EfAP//////mNP//wAAAP8AAAD/AAAA/wAAAP8AAAD/qGwo/////////////////////////////////6vamP9ArBT/MKQA///////j8tz/O6kN/zupDf/d8NX//////////////////////////////////////zpppP8AAAD/UR8A//////+R0P//CQAA/3txZf+HhYX/P2h1/wAAAP8AAAD//9WX////////////////////////////3fDV/zupDf87qQ3/4/Lc/6vamP9ArBT/NacG////////////////////////////////////////////Ommk/wAAAP9RHwD/////////////////////////////////AAAH/wAAAP/epmf/////////////////////////////////NacG/0CsFP+r2pj/sdye/0CsFP81pwb///////////////////////////////////////////86aaT/AAAA/1EfAP/////////////////b6v//XWiG/wAAAP8AAAD/AAAA////y/////////////////////////////////81pwb/QKwU/7Hcnv+x3J7/QKwU/zWnBv///////////////////////////////////////////zpppP8AAAD/UR8A////////////XIy//wAAAP8AAAD/AAAA/yAAAP/qzqb//////////////////////////////////////zWnBv9ArBT/sdye/6vamP9ArBT/NacG////////////////////////////////////////////Ommk/wAAAP9RHwD//////9X///8AAAD/AAAA/041GP/t0MX/////////////////////////////////////////////////NacG/0CsFP+r2pj/4/Lc/zupDf87qQ3/3fDV//////////////////////////////////////86aaT/AAAA/1EfAP//////pdz//wAAAP8AAAD////Y///////y8///n5yI/////////////////////////////////93w1f87qQ3/O6kN/+Py3P//////MKQA/0CsFP+r2pj//////////////////////////////////////zhno/8AAAD/UB4A////////////AAA6/wAAAP8AAAD/AAAA/wAAAP8iAAD/////////////////////////////////q9qY/0CsFP8wpAD///////////9tv0v/Rq4b/yqiAP//////////////////////////////////////MW2o/wAAAP9LFgD////////////p////P0pj/wAAAP8AAAD/BwAA/6iFRv////////////////////////////////8qogD/Rq4b/22/S////////////6DViv87qQ3/QKwU/6bYkf//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6fXj/zupDf9ArBT/oNWK/////////////////2i9RP9Grhv/KqIA/////////////////////////////////7Ld6f9xcXH/0aWV//////////////////////////////////////////////////////////////////////8knwD/TLEi/ySfAP//////////////////////4/Lc/zWnBv9Grhv/Yro+////////////////////////////ABRJ/wAAAP8IAAD////r////////////////////////////////////////////////////////////Yro+/0auG/81pwb/6fXj////////////////////////////Yro+/0CsFP9ArBT/Yro+//////////////////////8YZIz/AAAA/0gAAP///////////////////////////////////////////////////////////6bYkf87qQ3/QKwU/2K6Pv//////////////////////////////////////Yro+/0auG/9ArBT/Yro+//////////////////////////////////////////////////////////////////////////////////////9iuj7/O6kN/0auG/9ovUT/////////////////////////////////////////////////H50A/0auG/9ArBT/aL1E/+Py3P/////////////////////////////////////////////////////////////////j8tz/aL1E/0CsFP9Grhv/JJ8A/+Py3P//////////////////////////////////////////////////////Yro+/zupDf9Grhv/NacG/22/S/+f1Yn///////////////////////////////////////////+f1Yn/bb9L/zWnBv9Grhv/O6kN/2K6Pv//////////////////////////////////////////////////////////////////////pdiQ/yqiAP9ArBT/Rq4b/0CsFP8wpAD/bb9L/6val/+l2JD/pdiQ/6val/9tv0v/MKQA/0CsFP9Grhv/QKwU/yqiAP+l2JD//////////////////////////////////////////////////////////////////////////////////////6XYkP8qogD/O6kN/0CsFP9ArBT/QKwU/0CsFP9ArBT/QKwU/0CsFP9ArBT/O6kN/yqiAP+l2JD////////////////////////////////////////////////////////////////////////////////////////////////////////////d8NX/pdiQ/22/S/8wpAD/NacG/zWnBv8wpAD/bb9L/6XYkP/d8NX//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAABAAAAAgAAAAAQAgAAAAAAAABAAAdBIAAHQSAAAAAAAAAAAAAP//////////////////////////9/v1/8Tltv+Z0oH/mdKB/8Tltv/3+/X////////////////////////////////////////////p9eP/hMlp/zupD/9Hrx3/dMNU/3TDVP9Hrx3/OqkN/4TJaf/p9eP////////////////////////////B5Lf/Sa8f/3LBUP/D5bX//////////////////////9LryP9ywVD/Sa8f/8Hkt//////////////////Y7s//TLEi/4HIZP///////////////////////////////////////////5HPd/9KsCD/2O7P////////////ZLtD/3PCVv///////////wAAAP+Ibln/////////////////////////////////c8JW/2S7Q///////w+W1/zupD//6/fj///////////+PpsP/KhEA///////R2d//wMHB///9+f////////////r9+P87qQ//w+W1/5PQev+ByGT/////////////////nbTS/ykQAP/K6P//IRwZ/zI7P/8qGwr///Xl////////////gchk/5PQev93xFj/mtOD/////////////////5200v8pEAD///////b6//+XmqH/AAAC//fpzP///////////5rTg/93xFj/d8RY/5rTg/////////////////+dtNL/KRAA//X///8XIzD/T0E3/8Kzqf////////////////+a04P/d8RY/5PQev+ByGT/////////////////nLTR/ygPAP/p9v//AAAP/4CAdv9tZGL/////////////////gchk/5PQev/D5bX/O6kP/+n15P///////////8zb6f+ShYD//////8rS2P+AgID/q6GR////////////+v34/zupD//D5bX//////3LBUP90wlb///////////+svMz/U0ZC////+v///////////////////////////3PCVv9ku0P////////////Y7s//SrAg/4HIZP//////xdji/5KAgP///////////////////////////5HPd/9KsCD/2O7P/////////////////8fnv/9Jrx//csFQ/8Pltf//////////////////////w+W1/3LBUP9Jrx//weS3////////////////////////////6fXj/4TJaf87qQ//R68d/3TDVP90w1T/R68d/zupD/+EyWn/6fXj////////////////////////////////////////////9/v1/8Tltv+Z0oH/mdKB/8Tltv/3+/X///////////////////////////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
    <title>Document</title>
  <script type="module" crossorigin>
(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const t of a)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function r(a){const t={};return a.integrity&&(t.integrity=a.integrity),a.referrerPolicy&&(t.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?t.credentials="include":a.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(a){if(a.ep)return;a.ep=!0;const t=r(a);fetch(a.href,t)}})();var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ut(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}const nh="jssip",rh="JsSIP",ih="the Javascript SIP library",lh="3.10.0",oh="https://jssip.net",ah=["José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)","Iñaki Baz Castillo <ibc@aliax.net> (https://inakibaz.me)"],uh="lib/JsSIP.d.ts",ch="lib-es5/JsSIP.js",fh=["sip","websocket","webrtc","node","browser","library"],dh="MIT",hh={type:"git",url:"https://github.com/versatica/JsSIP.git"},_h={url:"https://github.com/versatica/JsSIP/issues"},ph={"@types/events":"^3.0.0","@types/debug":"^4.1.7",debug:"^4.3.1",events:"^3.3.0","sdp-transform":"^2.14.1"},mh={"@babel/core":"^7.19.6","@babel/preset-env":"^7.19.4","ansi-colors":"^3.2.4",browserify:"^16.5.1",eslint:"^5.16.0","fancy-log":"^1.3.3",gulp:"^4.0.2","gulp-babel":"^8.0.0","gulp-eslint":"^5.0.0","gulp-expect-file":"^1.0.2","gulp-header":"^2.0.9","gulp-nodeunit-runner":"^0.2.2","gulp-plumber":"^1.2.1","gulp-rename":"^1.4.0","gulp-uglify-es":"^1.0.4",pegjs:"^0.7.0","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},gh={lint:"node npm-scripts.js lint",test:"node npm-scripts.js test",prepublish:"node npm-scripts.js prepublish",release:"node npm-scripts.js release"},jo={name:nh,title:rh,description:ih,version:lh,homepage:oh,contributors:ah,types:uh,main:ch,keywords:fh,license:dh,repository:hh,bugs:_h,dependencies:ph,devDependencies:mh,scripts:gh};var tc=jo,lt={USER_AGENT:"".concat(tc.title," ").concat(tc.version),SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2};function po(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?po=function(r){return typeof r}:po=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},po(c)}function Vo(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function qo(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&sl(c,s)}function Bo(c){var s=ed();return function(){var o=nl(c),a;if(s){var t=nl(this).constructor;a=Reflect.construct(o,arguments,t)}else a=o.apply(this,arguments);return Th(this,a)}}function Th(c,s){return s&&(po(s)==="object"||typeof s=="function")?s:vh(c)}function vh(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function pr(c){var s=typeof Map=="function"?new Map:void 0;return pr=function(o){if(o===null||!Eh(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s<"u"){if(s.has(o))return s.get(o);s.set(o,a)}function a(){return mo(o,arguments,nl(this).constructor)}return a.prototype=Object.create(o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),sl(a,o)},pr(c)}function mo(c,s,r){return ed()?mo=Reflect.construct:mo=function(a,t,n){var p=[null];p.push.apply(p,t);var d=Function.bind.apply(a,p),h=new d;return n&&sl(h,n.prototype),h},mo.apply(null,arguments)}function ed(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Eh(c){return Function.toString.call(c).indexOf("[native code]")!==-1}function sl(c,s){return sl=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},sl(c,s)}function nl(c){return nl=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},nl(c)}var Sh=function(c){qo(r,c);var s=Bo(r);function r(o,a){var t;return Vo(this,r),t=s.call(this),t.code=1,t.name="CONFIGURATION_ERROR",t.parameter=o,t.value=a,t.message=t.value?"Invalid value ".concat(JSON.stringify(t.value),' for parameter "').concat(t.parameter,'"'):"Missing parameter: ".concat(t.parameter),t}return r}(pr(Error)),yh=function(c){qo(r,c);var s=Bo(r);function r(o){var a;return Vo(this,r),a=s.call(this),a.code=2,a.name="INVALID_STATE_ERROR",a.status=o,a.message="Invalid status: ".concat(o),a}return r}(pr(Error)),Ah=function(c){qo(r,c);var s=Bo(r);function r(o){var a;return Vo(this,r),a=s.call(this),a.code=3,a.name="NOT_SUPPORTED_ERROR",a.message=o,a}return r}(pr(Error)),Ch=function(c){qo(r,c);var s=Bo(r);function r(o){var a;return Vo(this,r),a=s.call(this),a.code=4,a.name="NOT_READY_ERROR",a.message=o,a}return r}(pr(Error)),Ws={ConfigurationError:Sh,InvalidStateError:yh,NotSupportedError:Ah,NotReadyError:Ch},Ze={},fa,sc;function $u(){if(sc)return fa;sc=1;function c(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function s(t,n){for(var p=0;p<n.length;p++){var d=n[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(t,d.key,d)}}function r(t,n,p){return n&&s(t.prototype,n),p&&s(t,p),t}var o=Ks(),a=us();return fa=function(){r(t,null,[{key:"parse",value:function(p){if(p=a.parse(p,"Name_Addr_Header"),p!==-1)return p}}]);function t(n,p,d){if(c(this,t),!n||!(n instanceof o))throw new TypeError('missing or invalid "uri" parameter');this._uri=n,this._parameters={},this.display_name=p;for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&this.setParam(h,d[h])}return r(t,[{key:"setParam",value:function(p,d){p&&(this._parameters[p.toLowerCase()]=typeof d>"u"||d===null?null:d.toString())}},{key:"getParam",value:function(p){if(p)return this._parameters[p.toLowerCase()]}},{key:"hasParam",value:function(p){if(p)return this._parameters.hasOwnProperty(p.toLowerCase())&&!0||!1}},{key:"deleteParam",value:function(p){if(p=p.toLowerCase(),this._parameters.hasOwnProperty(p)){var d=this._parameters[p];return delete this._parameters[p],d}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"clone",value:function(){return new t(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}},{key:"_quote",value:function(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}},{key:"toString",value:function(){var p=this._display_name?'"'.concat(this._quote(this._display_name),'" '):"";p+="<".concat(this._uri.toString(),">");for(var d in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,d)&&(p+=";".concat(d),this._parameters[d]!==null&&(p+="=".concat(this._parameters[d])));return p}},{key:"uri",get:function(){return this._uri}},{key:"display_name",get:function(){return this._display_name},set:function(p){this._display_name=p===0?"0":p}}]),t}(),fa}var da,nc;function us(){return nc||(nc=1,da=function(){function c(r){return'"'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var s={parse:function(o,a){var t={CRLF:g,DIGIT:T,ALPHA:E,HEXDIG:S,WSP:A,OCTET:R,DQUOTE:C,SP:$,HTAB:L,alphanum:ne,reserved:D,unreserved:F,mark:Se,escaped:ve,LWS:M,SWS:N,HCOLON:q,TEXT_UTF8_TRIM:V,TEXT_UTF8char:z,UTF8_NONASCII:H,UTF8_CONT:J,LHEX:U,token:P,token_nodot:se,separators:st,word:ee,STAR:W,SLASH:B,EQUAL:ie,LPAREN:ge,RPAREN:be,RAQUOT:Me,LAQUOT:Ce,COMMA:oe,SEMI:ye,COLON:nt,LDQUOT:ot,RDQUOT:Ee,comment:Ae,ctext:Ie,quoted_string:Oe,quoted_string_clean:pe,qdtext:ue,quoted_pair:_e,SIP_URI_noparams:we,SIP_URI:Ne,uri_scheme:Qe,uri_scheme_sips:$e,uri_scheme_sip:Lt,userinfo:_t,user:wn,user_unreserved:On,password:Ys,hostport:Qt,host:fs,hostname:zs,domainlabel:Dn,toplabel:Nn,IPv6reference:Js,IPv6address:me,h16:ae,ls32:at,IPv4address:Wt,dec_octet:Is,port:vr,uri_parameters:Un,uri_parameter:Pn,transport_param:Er,user_param:Sr,method_param:yr,ttl_param:Ar,maddr_param:Cr,lr_param:Rr,other_param:Ir,pname:br,pvalue:bs,paramchar:ws,param_unreserved:wr,headers:Xs,header:Qs,hname:Or,hvalue:Os,hnv_unreserved:Zs,Request_Response:Tl,Request_Line:Dr,Request_URI:xn,absoluteURI:Mn,hier_part:Nr,net_path:en,abs_path:tn,opaque_part:Ds,uric:Ns,uric_no_slash:Ur,path_segments:sn,segment:Us,param:ds,pchar:Ps,scheme:Pr,authority:xr,srvr:Mr,reg_name:kr,query:kn,SIP_Version:Ln,INVITEm:Lr,ACKm:$r,OPTIONSm:Hr,BYEm:Fr,CANCELm:jr,REGISTERm:Vr,SUBSCRIBEm:qr,NOTIFYm:Br,REFERm:nn,Method:rn,Status_Line:Gr,Status_Code:Wr,extension_code:Kr,Reason_Phrase:vl,Allow_Events:zo,Call_ID:Jo,Contact:$n,contact_param:$t,name_addr:Ht,display_name:xs,contact_params:Hn,c_p_q:Yr,c_p_expires:Zt,delta_seconds:es,qvalue:We,generic_param:Ke,gen_value:El,Content_Disposition:Sl,disp_type:Fn,disp_param:jn,handling_param:yl,Content_Encoding:Xo,Content_Length:Qo,Content_Type:Al,media_type:zr,m_type:Jr,discrete_type:Xr,composite_type:ln,extension_token:on,x_token:Qr,m_subtype:Vn,m_parameter:qn,m_value:Cl,CSeq:Rl,CSeq_value:Il,Expires:Zo,Event:an,event_type:un,From:Zr,from_param:cn,tag_param:ei,Max_Forwards:ea,Min_Expires:ta,Name_Addr_Header:sa,Proxy_Authenticate:ti,challenge:Bn,other_challenge:Ms,auth_param:ts,digest_cln:fn,realm:si,realm_value:ni,domain:dn,URI:hn,nonce:ri,nonce_value:ii,opaque:li,stale:oi,algorithm:ai,qop_options:_n,qop_value:Gn,Proxy_Require:na,Record_Route:Wn,rec_route:Kn,Reason:ui,reason_param:Yn,reason_cause:bl,Require:ra,Route:zn,route_param:Jn,Subscription_State:wl,substate_value:Xn,subexp_params:Qn,event_reason_value:Ol,Subject:ia,Supported:la,To:ci,to_param:fi,Via:Zn,via_param:ks,via_params:er,via_ttl:di,via_maddr:hi,via_received:_i,via_branch:pi,response_port:mi,rport:gi,sent_protocol:Ti,protocol_name:vi,transport:Ei,sent_by:Si,via_host:yi,via_port:tr,ttl:Ai,WWW_Authenticate:oa,Session_Expires:Dl,s_e_expires:sr,s_e_params:nr,s_e_refresher:Nl,extension_header:Ul,header_value:Pl,message_body:aa,uuid_URI:xl,uuid:Ft,hex4:jt,hex8:Ci,hex12:Ml,Refer_To:ua,Replaces:kl,call_id:rr,replaces_param:ir,to_tag:Ri,from_tag:Ii,early_flag:Ll};if(a!==void 0){if(t[a]===void 0)throw new Error("Invalid rule name: "+c(a)+".")}else a="CRLF";var n=0,p=0,d=[];function h(e){n<p||(n>p&&(p=n,d=[]),d.push(e))}function g(){var e;return o.substr(n,2)===`\r
`?(e=`\r
`,n+=2):(e=null,h('"\\r\\n"')),e}function T(){var e;return/^[0-9]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[0-9]")),e}function E(){var e;return/^[a-zA-Z]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[a-zA-Z]")),e}function S(){var e;return/^[0-9a-fA-F]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[0-9a-fA-F]")),e}function A(){var e;return e=$(),e===null&&(e=L()),e}function R(){var e;return/^[\0-\xFF]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[\\0-\\xFF]")),e}function C(){var e;return/^["]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h('["]')),e}function $(){var e;return o.charCodeAt(n)===32?(e=" ",n++):(e=null,h('" "')),e}function L(){var e;return o.charCodeAt(n)===9?(e="	",n++):(e=null,h('"\\t"')),e}function ne(){var e;return/^[a-zA-Z0-9]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[a-zA-Z0-9]")),e}function D(){var e;return o.charCodeAt(n)===59?(e=";",n++):(e=null,h('";"')),e===null&&(o.charCodeAt(n)===47?(e="/",n++):(e=null,h('"/"')),e===null&&(o.charCodeAt(n)===63?(e="?",n++):(e=null,h('"?"')),e===null&&(o.charCodeAt(n)===58?(e=":",n++):(e=null,h('":"')),e===null&&(o.charCodeAt(n)===64?(e="@",n++):(e=null,h('"@"')),e===null&&(o.charCodeAt(n)===38?(e="&",n++):(e=null,h('"&"')),e===null&&(o.charCodeAt(n)===61?(e="=",n++):(e=null,h('"="')),e===null&&(o.charCodeAt(n)===43?(e="+",n++):(e=null,h('"+"')),e===null&&(o.charCodeAt(n)===36?(e="$",n++):(e=null,h('"$"')),e===null&&(o.charCodeAt(n)===44?(e=",",n++):(e=null,h('","'))))))))))),e}function F(){var e;return e=ne(),e===null&&(e=Se()),e}function Se(){var e;return o.charCodeAt(n)===45?(e="-",n++):(e=null,h('"-"')),e===null&&(o.charCodeAt(n)===95?(e="_",n++):(e=null,h('"_"')),e===null&&(o.charCodeAt(n)===46?(e=".",n++):(e=null,h('"."')),e===null&&(o.charCodeAt(n)===33?(e="!",n++):(e=null,h('"!"')),e===null&&(o.charCodeAt(n)===126?(e="~",n++):(e=null,h('"~"')),e===null&&(o.charCodeAt(n)===42?(e="*",n++):(e=null,h('"*"')),e===null&&(o.charCodeAt(n)===39?(e="'",n++):(e=null,h(`"'"`)),e===null&&(o.charCodeAt(n)===40?(e="(",n++):(e=null,h('"("')),e===null&&(o.charCodeAt(n)===41?(e=")",n++):(e=null,h('")"')))))))))),e}function ve(){var e,l,u,f,_;return f=n,_=n,o.charCodeAt(n)===37?(e="%",n++):(e=null,h('"%"')),e!==null?(l=S(),l!==null?(u=S(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){return v.join("")}(f,e)),e===null&&(n=f),e}function M(){var e,l,u,f,_,m;for(f=n,_=n,m=n,e=[],l=A();l!==null;)e.push(l),l=A();if(e!==null?(l=g(),l!==null?e=[e,l]:(e=null,n=m)):(e=null,n=m),e=e!==null?e:"",e!==null){if(u=A(),u!==null)for(l=[];u!==null;)l.push(u),u=A();else l=null;l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e!==null&&(e=function(v){return" "}()),e===null&&(n=f),e}function N(){var e;return e=M(),e=e!==null?e:"",e}function q(){var e,l,u,f,_;for(f=n,_=n,e=[],l=$(),l===null&&(l=L());l!==null;)e.push(l),l=$(),l===null&&(l=L());return e!==null?(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=N(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m){return":"}()),e===null&&(n=f),e}function V(){var e,l,u,f,_,m,v;if(_=n,m=n,l=z(),l!==null)for(e=[];l!==null;)e.push(l),l=z();else e=null;if(e!==null){for(l=[],v=n,u=[],f=M();f!==null;)u.push(f),f=M();for(u!==null?(f=z(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;){for(l.push(u),v=n,u=[],f=M();f!==null;)u.push(f),f=M();u!==null?(f=z(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v)}l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e!==null&&(e=function(y){return o.substring(n,y)}(_)),e===null&&(n=_),e}function z(){var e;return/^[!-~]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[!-~]")),e===null&&(e=H()),e}function H(){var e;return/^[\x80-\uFFFF]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[\\x80-\\uFFFF]")),e}function J(){var e;return/^[\x80-\xBF]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[\\x80-\\xBF]")),e}function U(){var e;return e=T(),e===null&&(/^[a-f]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[a-f]"))),e}function P(){var e,l,u;if(u=n,l=ne(),l===null&&(o.charCodeAt(n)===45?(l="-",n++):(l=null,h('"-"')),l===null&&(o.charCodeAt(n)===46?(l=".",n++):(l=null,h('"."')),l===null&&(o.charCodeAt(n)===33?(l="!",n++):(l=null,h('"!"')),l===null&&(o.charCodeAt(n)===37?(l="%",n++):(l=null,h('"%"')),l===null&&(o.charCodeAt(n)===42?(l="*",n++):(l=null,h('"*"')),l===null&&(o.charCodeAt(n)===95?(l="_",n++):(l=null,h('"_"')),l===null&&(o.charCodeAt(n)===43?(l="+",n++):(l=null,h('"+"')),l===null&&(o.charCodeAt(n)===96?(l="`",n++):(l=null,h('"`"')),l===null&&(o.charCodeAt(n)===39?(l="'",n++):(l=null,h(`"'"`)),l===null&&(o.charCodeAt(n)===126?(l="~",n++):(l=null,h('"~"')))))))))))),l!==null)for(e=[];l!==null;)e.push(l),l=ne(),l===null&&(o.charCodeAt(n)===45?(l="-",n++):(l=null,h('"-"')),l===null&&(o.charCodeAt(n)===46?(l=".",n++):(l=null,h('"."')),l===null&&(o.charCodeAt(n)===33?(l="!",n++):(l=null,h('"!"')),l===null&&(o.charCodeAt(n)===37?(l="%",n++):(l=null,h('"%"')),l===null&&(o.charCodeAt(n)===42?(l="*",n++):(l=null,h('"*"')),l===null&&(o.charCodeAt(n)===95?(l="_",n++):(l=null,h('"_"')),l===null&&(o.charCodeAt(n)===43?(l="+",n++):(l=null,h('"+"')),l===null&&(o.charCodeAt(n)===96?(l="`",n++):(l=null,h('"`"')),l===null&&(o.charCodeAt(n)===39?(l="'",n++):(l=null,h(`"'"`)),l===null&&(o.charCodeAt(n)===126?(l="~",n++):(l=null,h('"~"'))))))))))));else e=null;return e!==null&&(e=function(f){return o.substring(n,f)}(u)),e===null&&(n=u),e}function se(){var e,l,u;if(u=n,l=ne(),l===null&&(o.charCodeAt(n)===45?(l="-",n++):(l=null,h('"-"')),l===null&&(o.charCodeAt(n)===33?(l="!",n++):(l=null,h('"!"')),l===null&&(o.charCodeAt(n)===37?(l="%",n++):(l=null,h('"%"')),l===null&&(o.charCodeAt(n)===42?(l="*",n++):(l=null,h('"*"')),l===null&&(o.charCodeAt(n)===95?(l="_",n++):(l=null,h('"_"')),l===null&&(o.charCodeAt(n)===43?(l="+",n++):(l=null,h('"+"')),l===null&&(o.charCodeAt(n)===96?(l="`",n++):(l=null,h('"`"')),l===null&&(o.charCodeAt(n)===39?(l="'",n++):(l=null,h(`"'"`)),l===null&&(o.charCodeAt(n)===126?(l="~",n++):(l=null,h('"~"'))))))))))),l!==null)for(e=[];l!==null;)e.push(l),l=ne(),l===null&&(o.charCodeAt(n)===45?(l="-",n++):(l=null,h('"-"')),l===null&&(o.charCodeAt(n)===33?(l="!",n++):(l=null,h('"!"')),l===null&&(o.charCodeAt(n)===37?(l="%",n++):(l=null,h('"%"')),l===null&&(o.charCodeAt(n)===42?(l="*",n++):(l=null,h('"*"')),l===null&&(o.charCodeAt(n)===95?(l="_",n++):(l=null,h('"_"')),l===null&&(o.charCodeAt(n)===43?(l="+",n++):(l=null,h('"+"')),l===null&&(o.charCodeAt(n)===96?(l="`",n++):(l=null,h('"`"')),l===null&&(o.charCodeAt(n)===39?(l="'",n++):(l=null,h(`"'"`)),l===null&&(o.charCodeAt(n)===126?(l="~",n++):(l=null,h('"~"')))))))))));else e=null;return e!==null&&(e=function(f){return o.substring(n,f)}(u)),e===null&&(n=u),e}function st(){var e;return o.charCodeAt(n)===40?(e="(",n++):(e=null,h('"("')),e===null&&(o.charCodeAt(n)===41?(e=")",n++):(e=null,h('")"')),e===null&&(o.charCodeAt(n)===60?(e="<",n++):(e=null,h('"<"')),e===null&&(o.charCodeAt(n)===62?(e=">",n++):(e=null,h('">"')),e===null&&(o.charCodeAt(n)===64?(e="@",n++):(e=null,h('"@"')),e===null&&(o.charCodeAt(n)===44?(e=",",n++):(e=null,h('","')),e===null&&(o.charCodeAt(n)===59?(e=";",n++):(e=null,h('";"')),e===null&&(o.charCodeAt(n)===58?(e=":",n++):(e=null,h('":"')),e===null&&(o.charCodeAt(n)===92?(e="\\",n++):(e=null,h('"\\\\"')),e===null&&(e=C(),e===null&&(o.charCodeAt(n)===47?(e="/",n++):(e=null,h('"/"')),e===null&&(o.charCodeAt(n)===91?(e="[",n++):(e=null,h('"["')),e===null&&(o.charCodeAt(n)===93?(e="]",n++):(e=null,h('"]"')),e===null&&(o.charCodeAt(n)===63?(e="?",n++):(e=null,h('"?"')),e===null&&(o.charCodeAt(n)===61?(e="=",n++):(e=null,h('"="')),e===null&&(o.charCodeAt(n)===123?(e="{",n++):(e=null,h('"{"')),e===null&&(o.charCodeAt(n)===125?(e="}",n++):(e=null,h('"}"')),e===null&&(e=$(),e===null&&(e=L())))))))))))))))))),e}function ee(){var e,l,u;if(u=n,l=ne(),l===null&&(o.charCodeAt(n)===45?(l="-",n++):(l=null,h('"-"')),l===null&&(o.charCodeAt(n)===46?(l=".",n++):(l=null,h('"."')),l===null&&(o.charCodeAt(n)===33?(l="!",n++):(l=null,h('"!"')),l===null&&(o.charCodeAt(n)===37?(l="%",n++):(l=null,h('"%"')),l===null&&(o.charCodeAt(n)===42?(l="*",n++):(l=null,h('"*"')),l===null&&(o.charCodeAt(n)===95?(l="_",n++):(l=null,h('"_"')),l===null&&(o.charCodeAt(n)===43?(l="+",n++):(l=null,h('"+"')),l===null&&(o.charCodeAt(n)===96?(l="`",n++):(l=null,h('"`"')),l===null&&(o.charCodeAt(n)===39?(l="'",n++):(l=null,h(`"'"`)),l===null&&(o.charCodeAt(n)===126?(l="~",n++):(l=null,h('"~"')),l===null&&(o.charCodeAt(n)===40?(l="(",n++):(l=null,h('"("')),l===null&&(o.charCodeAt(n)===41?(l=")",n++):(l=null,h('")"')),l===null&&(o.charCodeAt(n)===60?(l="<",n++):(l=null,h('"<"')),l===null&&(o.charCodeAt(n)===62?(l=">",n++):(l=null,h('">"')),l===null&&(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l===null&&(o.charCodeAt(n)===92?(l="\\",n++):(l=null,h('"\\\\"')),l===null&&(l=C(),l===null&&(o.charCodeAt(n)===47?(l="/",n++):(l=null,h('"/"')),l===null&&(o.charCodeAt(n)===91?(l="[",n++):(l=null,h('"["')),l===null&&(o.charCodeAt(n)===93?(l="]",n++):(l=null,h('"]"')),l===null&&(o.charCodeAt(n)===63?(l="?",n++):(l=null,h('"?"')),l===null&&(o.charCodeAt(n)===123?(l="{",n++):(l=null,h('"{"')),l===null&&(o.charCodeAt(n)===125?(l="}",n++):(l=null,h('"}"'))))))))))))))))))))))))),l!==null)for(e=[];l!==null;)e.push(l),l=ne(),l===null&&(o.charCodeAt(n)===45?(l="-",n++):(l=null,h('"-"')),l===null&&(o.charCodeAt(n)===46?(l=".",n++):(l=null,h('"."')),l===null&&(o.charCodeAt(n)===33?(l="!",n++):(l=null,h('"!"')),l===null&&(o.charCodeAt(n)===37?(l="%",n++):(l=null,h('"%"')),l===null&&(o.charCodeAt(n)===42?(l="*",n++):(l=null,h('"*"')),l===null&&(o.charCodeAt(n)===95?(l="_",n++):(l=null,h('"_"')),l===null&&(o.charCodeAt(n)===43?(l="+",n++):(l=null,h('"+"')),l===null&&(o.charCodeAt(n)===96?(l="`",n++):(l=null,h('"`"')),l===null&&(o.charCodeAt(n)===39?(l="'",n++):(l=null,h(`"'"`)),l===null&&(o.charCodeAt(n)===126?(l="~",n++):(l=null,h('"~"')),l===null&&(o.charCodeAt(n)===40?(l="(",n++):(l=null,h('"("')),l===null&&(o.charCodeAt(n)===41?(l=")",n++):(l=null,h('")"')),l===null&&(o.charCodeAt(n)===60?(l="<",n++):(l=null,h('"<"')),l===null&&(o.charCodeAt(n)===62?(l=">",n++):(l=null,h('">"')),l===null&&(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l===null&&(o.charCodeAt(n)===92?(l="\\",n++):(l=null,h('"\\\\"')),l===null&&(l=C(),l===null&&(o.charCodeAt(n)===47?(l="/",n++):(l=null,h('"/"')),l===null&&(o.charCodeAt(n)===91?(l="[",n++):(l=null,h('"["')),l===null&&(o.charCodeAt(n)===93?(l="]",n++):(l=null,h('"]"')),l===null&&(o.charCodeAt(n)===63?(l="?",n++):(l=null,h('"?"')),l===null&&(o.charCodeAt(n)===123?(l="{",n++):(l=null,h('"{"')),l===null&&(o.charCodeAt(n)===125?(l="}",n++):(l=null,h('"}"')))))))))))))))))))))))));else e=null;return e!==null&&(e=function(f){return o.substring(n,f)}(u)),e===null&&(n=u),e}function W(){var e,l,u,f,_;return f=n,_=n,e=N(),e!==null?(o.charCodeAt(n)===42?(l="*",n++):(l=null,h('"*"')),l!==null?(u=N(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m){return"*"}()),e===null&&(n=f),e}function B(){var e,l,u,f,_;return f=n,_=n,e=N(),e!==null?(o.charCodeAt(n)===47?(l="/",n++):(l=null,h('"/"')),l!==null?(u=N(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m){return"/"}()),e===null&&(n=f),e}function ie(){var e,l,u,f,_;return f=n,_=n,e=N(),e!==null?(o.charCodeAt(n)===61?(l="=",n++):(l=null,h('"="')),l!==null?(u=N(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m){return"="}()),e===null&&(n=f),e}function ge(){var e,l,u,f,_;return f=n,_=n,e=N(),e!==null?(o.charCodeAt(n)===40?(l="(",n++):(l=null,h('"("')),l!==null?(u=N(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m){return"("}()),e===null&&(n=f),e}function be(){var e,l,u,f,_;return f=n,_=n,e=N(),e!==null?(o.charCodeAt(n)===41?(l=")",n++):(l=null,h('")"')),l!==null?(u=N(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m){return")"}()),e===null&&(n=f),e}function Me(){var e,l,u,f;return u=n,f=n,o.charCodeAt(n)===62?(e=">",n++):(e=null,h('">"')),e!==null?(l=N(),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e!==null&&(e=function(_){return">"}()),e===null&&(n=u),e}function Ce(){var e,l,u,f;return u=n,f=n,e=N(),e!==null?(o.charCodeAt(n)===60?(l="<",n++):(l=null,h('"<"')),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e!==null&&(e=function(_){return"<"}()),e===null&&(n=u),e}function oe(){var e,l,u,f,_;return f=n,_=n,e=N(),e!==null?(o.charCodeAt(n)===44?(l=",",n++):(l=null,h('","')),l!==null?(u=N(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m){return","}()),e===null&&(n=f),e}function ye(){var e,l,u,f,_;return f=n,_=n,e=N(),e!==null?(o.charCodeAt(n)===59?(l=";",n++):(l=null,h('";"')),l!==null?(u=N(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m){return";"}()),e===null&&(n=f),e}function nt(){var e,l,u,f,_;return f=n,_=n,e=N(),e!==null?(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=N(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m){return":"}()),e===null&&(n=f),e}function ot(){var e,l,u,f;return u=n,f=n,e=N(),e!==null?(l=C(),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e!==null&&(e=function(_){return'"'}()),e===null&&(n=u),e}function Ee(){var e,l,u,f;return u=n,f=n,e=C(),e!==null?(l=N(),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e!==null&&(e=function(_){return'"'}()),e===null&&(n=u),e}function Ae(){var e,l,u,f;if(f=n,e=ge(),e!==null){for(l=[],u=Ie(),u===null&&(u=_e(),u===null&&(u=Ae()));u!==null;)l.push(u),u=Ie(),u===null&&(u=_e(),u===null&&(u=Ae()));l!==null?(u=be(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)}else e=null,n=f;return e}function Ie(){var e;return/^[!-']/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[!-']")),e===null&&(/^[*-[]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[*-[]")),e===null&&(/^[\]-~]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[\\]-~]")),e===null&&(e=H(),e===null&&(e=M())))),e}function Oe(){var e,l,u,f,_,m;if(_=n,m=n,e=N(),e!==null)if(l=C(),l!==null){for(u=[],f=ue(),f===null&&(f=_e());f!==null;)u.push(f),f=ue(),f===null&&(f=_e());u!==null?(f=C(),f!==null?e=[e,l,u,f]:(e=null,n=m)):(e=null,n=m)}else e=null,n=m;else e=null,n=m;return e!==null&&(e=function(v){return o.substring(n,v)}(_)),e===null&&(n=_),e}function pe(){var e,l,u,f,_,m;if(_=n,m=n,e=N(),e!==null)if(l=C(),l!==null){for(u=[],f=ue(),f===null&&(f=_e());f!==null;)u.push(f),f=ue(),f===null&&(f=_e());u!==null?(f=C(),f!==null?e=[e,l,u,f]:(e=null,n=m)):(e=null,n=m)}else e=null,n=m;else e=null,n=m;return e!==null&&(e=function(v){var y=o.substring(n,v).trim();return y.substring(1,y.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1")}(_)),e===null&&(n=_),e}function ue(){var e;return e=M(),e===null&&(o.charCodeAt(n)===33?(e="!",n++):(e=null,h('"!"')),e===null&&(/^[#-[]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[#-[]")),e===null&&(/^[\]-~]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[\\]-~]")),e===null&&(e=H())))),e}function _e(){var e,l,u;return u=n,o.charCodeAt(n)===92?(e="\\",n++):(e=null,h('"\\\\"')),e!==null?(/^[\0-\t]/.test(o.charAt(n))?(l=o.charAt(n),n++):(l=null,h("[\\0-\\t]")),l===null&&(/^[\x0B-\f]/.test(o.charAt(n))?(l=o.charAt(n),n++):(l=null,h("[\\x0B-\\f]")),l===null&&(/^[\x0E-]/.test(o.charAt(n))?(l=o.charAt(n),n++):(l=null,h("[\\x0E-]")))),l!==null?e=[e,l]:(e=null,n=u)):(e=null,n=u),e}function we(){var e,l,u,f,_,m;return _=n,m=n,e=Qe(),e!==null?(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=_t(),u=u!==null?u:"",u!==null?(f=Qt(),f!==null?e=[e,l,u,f]:(e=null,n=m)):(e=null,n=m)):(e=null,n=m)):(e=null,n=m),e!==null&&(e=function(v){try{w.uri=new hs(w.scheme,w.user,w.host,w.port),delete w.scheme,delete w.user,delete w.host,delete w.host_type,delete w.port}catch{w=-1}}()),e===null&&(n=_),e}function Ne(){var e,l,u,f,_,m,v,y;return v=n,y=n,e=Qe(),e!==null?(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=_t(),u=u!==null?u:"",u!==null?(f=Qt(),f!==null?(_=Un(),_!==null?(m=Xs(),m=m!==null?m:"",m!==null?e=[e,l,u,f,_,m]:(e=null,n=y)):(e=null,n=y)):(e=null,n=y)):(e=null,n=y)):(e=null,n=y)):(e=null,n=y),e!==null&&(e=function(O){try{w.uri=new hs(w.scheme,w.user,w.host,w.port,w.uri_params,w.uri_headers),delete w.scheme,delete w.user,delete w.host,delete w.host_type,delete w.port,delete w.uri_params,a==="SIP_URI"&&(w=w.uri)}catch{w=-1}}()),e===null&&(n=v),e}function Qe(){var e;return e=$e(),e===null&&(e=Lt()),e}function $e(){var e,l;return l=n,o.substr(n,4).toLowerCase()==="sips"?(e=o.substr(n,4),n+=4):(e=null,h('"sips"')),e!==null&&(e=function(u,f){w.scheme=f.toLowerCase()}(l,e)),e===null&&(n=l),e}function Lt(){var e,l;return l=n,o.substr(n,3).toLowerCase()==="sip"?(e=o.substr(n,3),n+=3):(e=null,h('"sip"')),e!==null&&(e=function(u,f){w.scheme=f.toLowerCase()}(l,e)),e===null&&(n=l),e}function _t(){var e,l,u,f,_,m;return f=n,_=n,e=wn(),e!==null?(m=n,o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=Ys(),u!==null?l=[l,u]:(l=null,n=m)):(l=null,n=m),l=l!==null?l:"",l!==null?(o.charCodeAt(n)===64?(u="@",n++):(u=null,h('"@"')),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(v){w.user=decodeURIComponent(o.substring(n-1,v))}(f)),e===null&&(n=f),e}function wn(){var e,l;if(l=F(),l===null&&(l=ve(),l===null&&(l=On())),l!==null)for(e=[];l!==null;)e.push(l),l=F(),l===null&&(l=ve(),l===null&&(l=On()));else e=null;return e}function On(){var e;return o.charCodeAt(n)===38?(e="&",n++):(e=null,h('"&"')),e===null&&(o.charCodeAt(n)===61?(e="=",n++):(e=null,h('"="')),e===null&&(o.charCodeAt(n)===43?(e="+",n++):(e=null,h('"+"')),e===null&&(o.charCodeAt(n)===36?(e="$",n++):(e=null,h('"$"')),e===null&&(o.charCodeAt(n)===44?(e=",",n++):(e=null,h('","')),e===null&&(o.charCodeAt(n)===59?(e=";",n++):(e=null,h('";"')),e===null&&(o.charCodeAt(n)===63?(e="?",n++):(e=null,h('"?"')),e===null&&(o.charCodeAt(n)===47?(e="/",n++):(e=null,h('"/"'))))))))),e}function Ys(){var e,l,u;for(u=n,e=[],l=F(),l===null&&(l=ve(),l===null&&(o.charCodeAt(n)===38?(l="&",n++):(l=null,h('"&"')),l===null&&(o.charCodeAt(n)===61?(l="=",n++):(l=null,h('"="')),l===null&&(o.charCodeAt(n)===43?(l="+",n++):(l=null,h('"+"')),l===null&&(o.charCodeAt(n)===36?(l="$",n++):(l=null,h('"$"')),l===null&&(o.charCodeAt(n)===44?(l=",",n++):(l=null,h('","'))))))));l!==null;)e.push(l),l=F(),l===null&&(l=ve(),l===null&&(o.charCodeAt(n)===38?(l="&",n++):(l=null,h('"&"')),l===null&&(o.charCodeAt(n)===61?(l="=",n++):(l=null,h('"="')),l===null&&(o.charCodeAt(n)===43?(l="+",n++):(l=null,h('"+"')),l===null&&(o.charCodeAt(n)===36?(l="$",n++):(l=null,h('"$"')),l===null&&(o.charCodeAt(n)===44?(l=",",n++):(l=null,h('","'))))))));return e!==null&&(e=function(f){w.password=o.substring(n,f)}(u)),e===null&&(n=u),e}function Qt(){var e,l,u,f,_;return f=n,e=fs(),e!==null?(_=n,o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=vr(),u!==null?l=[l,u]:(l=null,n=_)):(l=null,n=_),l=l!==null?l:"",l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e}function fs(){var e,l;return l=n,e=zs(),e===null&&(e=Wt(),e===null&&(e=Js())),e!==null&&(e=function(u){return w.host=o.substring(n,u).toLowerCase(),w.host}(l)),e===null&&(n=l),e}function zs(){var e,l,u,f,_,m;for(f=n,_=n,e=[],m=n,l=Dn(),l!==null?(o.charCodeAt(n)===46?(u=".",n++):(u=null,h('"."')),u!==null?l=[l,u]:(l=null,n=m)):(l=null,n=m);l!==null;)e.push(l),m=n,l=Dn(),l!==null?(o.charCodeAt(n)===46?(u=".",n++):(u=null,h('"."')),u!==null?l=[l,u]:(l=null,n=m)):(l=null,n=m);return e!==null?(l=Nn(),l!==null?(o.charCodeAt(n)===46?(u=".",n++):(u=null,h('"."')),u=u!==null?u:"",u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(v){return w.host_type="domain",o.substring(n,v)}(f)),e===null&&(n=f),e}function Dn(){var e,l,u,f;if(f=n,e=ne(),e!==null){for(l=[],u=ne(),u===null&&(o.charCodeAt(n)===45?(u="-",n++):(u=null,h('"-"')),u===null&&(o.charCodeAt(n)===95?(u="_",n++):(u=null,h('"_"'))));u!==null;)l.push(u),u=ne(),u===null&&(o.charCodeAt(n)===45?(u="-",n++):(u=null,h('"-"')),u===null&&(o.charCodeAt(n)===95?(u="_",n++):(u=null,h('"_"'))));l!==null?e=[e,l]:(e=null,n=f)}else e=null,n=f;return e}function Nn(){var e,l,u,f;if(f=n,e=E(),e!==null){for(l=[],u=ne(),u===null&&(o.charCodeAt(n)===45?(u="-",n++):(u=null,h('"-"')),u===null&&(o.charCodeAt(n)===95?(u="_",n++):(u=null,h('"_"'))));u!==null;)l.push(u),u=ne(),u===null&&(o.charCodeAt(n)===45?(u="-",n++):(u=null,h('"-"')),u===null&&(o.charCodeAt(n)===95?(u="_",n++):(u=null,h('"_"'))));l!==null?e=[e,l]:(e=null,n=f)}else e=null,n=f;return e}function Js(){var e,l,u,f,_;return f=n,_=n,o.charCodeAt(n)===91?(e="[",n++):(e=null,h('"["')),e!==null?(l=me(),l!==null?(o.charCodeAt(n)===93?(u="]",n++):(u=null,h('"]"')),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m){return w.host_type="IPv6",o.substring(n,m)}(f)),e===null&&(n=f),e}function me(){var e,l,u,f,_,m,v,y,O,le,Ue,bt,Ls,k,I,Te;return k=n,I=n,e=ae(),e!==null?(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=ae(),u!==null?(o.charCodeAt(n)===58?(f=":",n++):(f=null,h('":"')),f!==null?(_=ae(),_!==null?(o.charCodeAt(n)===58?(m=":",n++):(m=null,h('":"')),m!==null?(v=ae(),v!==null?(o.charCodeAt(n)===58?(y=":",n++):(y=null,h('":"')),y!==null?(O=ae(),O!==null?(o.charCodeAt(n)===58?(le=":",n++):(le=null,h('":"')),le!==null?(Ue=ae(),Ue!==null?(o.charCodeAt(n)===58?(bt=":",n++):(bt=null,h('":"')),bt!==null?(Ls=at(),Ls!==null?e=[e,l,u,f,_,m,v,y,O,le,Ue,bt,Ls]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,o.substr(n,2)==="::"?(e="::",n+=2):(e=null,h('"::"')),e!==null?(l=ae(),l!==null?(o.charCodeAt(n)===58?(u=":",n++):(u=null,h('":"')),u!==null?(f=ae(),f!==null?(o.charCodeAt(n)===58?(_=":",n++):(_=null,h('":"')),_!==null?(m=ae(),m!==null?(o.charCodeAt(n)===58?(v=":",n++):(v=null,h('":"')),v!==null?(y=ae(),y!==null?(o.charCodeAt(n)===58?(O=":",n++):(O=null,h('":"')),O!==null?(le=ae(),le!==null?(o.charCodeAt(n)===58?(Ue=":",n++):(Ue=null,h('":"')),Ue!==null?(bt=at(),bt!==null?e=[e,l,u,f,_,m,v,y,O,le,Ue,bt]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,o.substr(n,2)==="::"?(e="::",n+=2):(e=null,h('"::"')),e!==null?(l=ae(),l!==null?(o.charCodeAt(n)===58?(u=":",n++):(u=null,h('":"')),u!==null?(f=ae(),f!==null?(o.charCodeAt(n)===58?(_=":",n++):(_=null,h('":"')),_!==null?(m=ae(),m!==null?(o.charCodeAt(n)===58?(v=":",n++):(v=null,h('":"')),v!==null?(y=ae(),y!==null?(o.charCodeAt(n)===58?(O=":",n++):(O=null,h('":"')),O!==null?(le=at(),le!==null?e=[e,l,u,f,_,m,v,y,O,le]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,o.substr(n,2)==="::"?(e="::",n+=2):(e=null,h('"::"')),e!==null?(l=ae(),l!==null?(o.charCodeAt(n)===58?(u=":",n++):(u=null,h('":"')),u!==null?(f=ae(),f!==null?(o.charCodeAt(n)===58?(_=":",n++):(_=null,h('":"')),_!==null?(m=ae(),m!==null?(o.charCodeAt(n)===58?(v=":",n++):(v=null,h('":"')),v!==null?(y=at(),y!==null?e=[e,l,u,f,_,m,v,y]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,o.substr(n,2)==="::"?(e="::",n+=2):(e=null,h('"::"')),e!==null?(l=ae(),l!==null?(o.charCodeAt(n)===58?(u=":",n++):(u=null,h('":"')),u!==null?(f=ae(),f!==null?(o.charCodeAt(n)===58?(_=":",n++):(_=null,h('":"')),_!==null?(m=at(),m!==null?e=[e,l,u,f,_,m]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,o.substr(n,2)==="::"?(e="::",n+=2):(e=null,h('"::"')),e!==null?(l=ae(),l!==null?(o.charCodeAt(n)===58?(u=":",n++):(u=null,h('":"')),u!==null?(f=at(),f!==null?e=[e,l,u,f]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,o.substr(n,2)==="::"?(e="::",n+=2):(e=null,h('"::"')),e!==null?(l=at(),l!==null?e=[e,l]:(e=null,n=I)):(e=null,n=I),e===null&&(I=n,o.substr(n,2)==="::"?(e="::",n+=2):(e=null,h('"::"')),e!==null?(l=ae(),l!==null?e=[e,l]:(e=null,n=I)):(e=null,n=I),e===null&&(I=n,e=ae(),e!==null?(o.substr(n,2)==="::"?(l="::",n+=2):(l=null,h('"::"')),l!==null?(u=ae(),u!==null?(o.charCodeAt(n)===58?(f=":",n++):(f=null,h('":"')),f!==null?(_=ae(),_!==null?(o.charCodeAt(n)===58?(m=":",n++):(m=null,h('":"')),m!==null?(v=ae(),v!==null?(o.charCodeAt(n)===58?(y=":",n++):(y=null,h('":"')),y!==null?(O=ae(),O!==null?(o.charCodeAt(n)===58?(le=":",n++):(le=null,h('":"')),le!==null?(Ue=at(),Ue!==null?e=[e,l,u,f,_,m,v,y,O,le,Ue]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,e=ae(),e!==null?(Te=n,o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=ae(),u!==null?l=[l,u]:(l=null,n=Te)):(l=null,n=Te),l=l!==null?l:"",l!==null?(o.substr(n,2)==="::"?(u="::",n+=2):(u=null,h('"::"')),u!==null?(f=ae(),f!==null?(o.charCodeAt(n)===58?(_=":",n++):(_=null,h('":"')),_!==null?(m=ae(),m!==null?(o.charCodeAt(n)===58?(v=":",n++):(v=null,h('":"')),v!==null?(y=ae(),y!==null?(o.charCodeAt(n)===58?(O=":",n++):(O=null,h('":"')),O!==null?(le=at(),le!==null?e=[e,l,u,f,_,m,v,y,O,le]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,e=ae(),e!==null?(Te=n,o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=ae(),u!==null?l=[l,u]:(l=null,n=Te)):(l=null,n=Te),l=l!==null?l:"",l!==null?(Te=n,o.charCodeAt(n)===58?(u=":",n++):(u=null,h('":"')),u!==null?(f=ae(),f!==null?u=[u,f]:(u=null,n=Te)):(u=null,n=Te),u=u!==null?u:"",u!==null?(o.substr(n,2)==="::"?(f="::",n+=2):(f=null,h('"::"')),f!==null?(_=ae(),_!==null?(o.charCodeAt(n)===58?(m=":",n++):(m=null,h('":"')),m!==null?(v=ae(),v!==null?(o.charCodeAt(n)===58?(y=":",n++):(y=null,h('":"')),y!==null?(O=at(),O!==null?e=[e,l,u,f,_,m,v,y,O]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,e=ae(),e!==null?(Te=n,o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=ae(),u!==null?l=[l,u]:(l=null,n=Te)):(l=null,n=Te),l=l!==null?l:"",l!==null?(Te=n,o.charCodeAt(n)===58?(u=":",n++):(u=null,h('":"')),u!==null?(f=ae(),f!==null?u=[u,f]:(u=null,n=Te)):(u=null,n=Te),u=u!==null?u:"",u!==null?(Te=n,o.charCodeAt(n)===58?(f=":",n++):(f=null,h('":"')),f!==null?(_=ae(),_!==null?f=[f,_]:(f=null,n=Te)):(f=null,n=Te),f=f!==null?f:"",f!==null?(o.substr(n,2)==="::"?(_="::",n+=2):(_=null,h('"::"')),_!==null?(m=ae(),m!==null?(o.charCodeAt(n)===58?(v=":",n++):(v=null,h('":"')),v!==null?(y=at(),y!==null?e=[e,l,u,f,_,m,v,y]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,e=ae(),e!==null?(Te=n,o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=ae(),u!==null?l=[l,u]:(l=null,n=Te)):(l=null,n=Te),l=l!==null?l:"",l!==null?(Te=n,o.charCodeAt(n)===58?(u=":",n++):(u=null,h('":"')),u!==null?(f=ae(),f!==null?u=[u,f]:(u=null,n=Te)):(u=null,n=Te),u=u!==null?u:"",u!==null?(Te=n,o.charCodeAt(n)===58?(f=":",n++):(f=null,h('":"')),f!==null?(_=ae(),_!==null?f=[f,_]:(f=null,n=Te)):(f=null,n=Te),f=f!==null?f:"",f!==null?(Te=n,o.charCodeAt(n)===58?(_=":",n++):(_=null,h('":"')),_!==null?(m=ae(),m!==null?_=[_,m]:(_=null,n=Te)):(_=null,n=Te),_=_!==null?_:"",_!==null?(o.substr(n,2)==="::"?(m="::",n+=2):(m=null,h('"::"')),m!==null?(v=at(),v!==null?e=[e,l,u,f,_,m,v]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,e=ae(),e!==null?(Te=n,o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=ae(),u!==null?l=[l,u]:(l=null,n=Te)):(l=null,n=Te),l=l!==null?l:"",l!==null?(Te=n,o.charCodeAt(n)===58?(u=":",n++):(u=null,h('":"')),u!==null?(f=ae(),f!==null?u=[u,f]:(u=null,n=Te)):(u=null,n=Te),u=u!==null?u:"",u!==null?(Te=n,o.charCodeAt(n)===58?(f=":",n++):(f=null,h('":"')),f!==null?(_=ae(),_!==null?f=[f,_]:(f=null,n=Te)):(f=null,n=Te),f=f!==null?f:"",f!==null?(Te=n,o.charCodeAt(n)===58?(_=":",n++):(_=null,h('":"')),_!==null?(m=ae(),m!==null?_=[_,m]:(_=null,n=Te)):(_=null,n=Te),_=_!==null?_:"",_!==null?(Te=n,o.charCodeAt(n)===58?(m=":",n++):(m=null,h('":"')),m!==null?(v=ae(),v!==null?m=[m,v]:(m=null,n=Te)):(m=null,n=Te),m=m!==null?m:"",m!==null?(o.substr(n,2)==="::"?(v="::",n+=2):(v=null,h('"::"')),v!==null?(y=ae(),y!==null?e=[e,l,u,f,_,m,v,y]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I),e===null&&(I=n,e=ae(),e!==null?(Te=n,o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=ae(),u!==null?l=[l,u]:(l=null,n=Te)):(l=null,n=Te),l=l!==null?l:"",l!==null?(Te=n,o.charCodeAt(n)===58?(u=":",n++):(u=null,h('":"')),u!==null?(f=ae(),f!==null?u=[u,f]:(u=null,n=Te)):(u=null,n=Te),u=u!==null?u:"",u!==null?(Te=n,o.charCodeAt(n)===58?(f=":",n++):(f=null,h('":"')),f!==null?(_=ae(),_!==null?f=[f,_]:(f=null,n=Te)):(f=null,n=Te),f=f!==null?f:"",f!==null?(Te=n,o.charCodeAt(n)===58?(_=":",n++):(_=null,h('":"')),_!==null?(m=ae(),m!==null?_=[_,m]:(_=null,n=Te)):(_=null,n=Te),_=_!==null?_:"",_!==null?(Te=n,o.charCodeAt(n)===58?(m=":",n++):(m=null,h('":"')),m!==null?(v=ae(),v!==null?m=[m,v]:(m=null,n=Te)):(m=null,n=Te),m=m!==null?m:"",m!==null?(Te=n,o.charCodeAt(n)===58?(v=":",n++):(v=null,h('":"')),v!==null?(y=ae(),y!==null?v=[v,y]:(v=null,n=Te)):(v=null,n=Te),v=v!==null?v:"",v!==null?(o.substr(n,2)==="::"?(y="::",n+=2):(y=null,h('"::"')),y!==null?e=[e,l,u,f,_,m,v,y]:(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I)):(e=null,n=I))))))))))))))),e!==null&&(e=function(th){return w.host_type="IPv6",o.substring(n,th)}(k)),e===null&&(n=k),e}function ae(){var e,l,u,f,_;return _=n,e=S(),e!==null?(l=S(),l=l!==null?l:"",l!==null?(u=S(),u=u!==null?u:"",u!==null?(f=S(),f=f!==null?f:"",f!==null?e=[e,l,u,f]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e}function at(){var e,l,u,f;return f=n,e=ae(),e!==null?(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=ae(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e===null&&(e=Wt()),e}function Wt(){var e,l,u,f,_,m,v,y,O;return y=n,O=n,e=Is(),e!==null?(o.charCodeAt(n)===46?(l=".",n++):(l=null,h('"."')),l!==null?(u=Is(),u!==null?(o.charCodeAt(n)===46?(f=".",n++):(f=null,h('"."')),f!==null?(_=Is(),_!==null?(o.charCodeAt(n)===46?(m=".",n++):(m=null,h('"."')),m!==null?(v=Is(),v!==null?e=[e,l,u,f,_,m,v]:(e=null,n=O)):(e=null,n=O)):(e=null,n=O)):(e=null,n=O)):(e=null,n=O)):(e=null,n=O)):(e=null,n=O),e!==null&&(e=function(le){return w.host_type="IPv4",o.substring(n,le)}(y)),e===null&&(n=y),e}function Is(){var e,l,u,f;return f=n,o.substr(n,2)==="25"?(e="25",n+=2):(e=null,h('"25"')),e!==null?(/^[0-5]/.test(o.charAt(n))?(l=o.charAt(n),n++):(l=null,h("[0-5]")),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e===null&&(f=n,o.charCodeAt(n)===50?(e="2",n++):(e=null,h('"2"')),e!==null?(/^[0-4]/.test(o.charAt(n))?(l=o.charAt(n),n++):(l=null,h("[0-4]")),l!==null?(u=T(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e===null&&(f=n,o.charCodeAt(n)===49?(e="1",n++):(e=null,h('"1"')),e!==null?(l=T(),l!==null?(u=T(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e===null&&(f=n,/^[1-9]/.test(o.charAt(n))?(e=o.charAt(n),n++):(e=null,h("[1-9]")),e!==null?(l=T(),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e===null&&(e=T())))),e}function vr(){var e,l,u,f,_,m,v;return m=n,v=n,e=T(),e=e!==null?e:"",e!==null?(l=T(),l=l!==null?l:"",l!==null?(u=T(),u=u!==null?u:"",u!==null?(f=T(),f=f!==null?f:"",f!==null?(_=T(),_=_!==null?_:"",_!==null?e=[e,l,u,f,_]:(e=null,n=v)):(e=null,n=v)):(e=null,n=v)):(e=null,n=v)):(e=null,n=v),e!==null&&(e=function(y,O){return O=parseInt(O.join("")),w.port=O,O}(m,e)),e===null&&(n=m),e}function Un(){var e,l,u,f;for(e=[],f=n,o.charCodeAt(n)===59?(l=";",n++):(l=null,h('";"')),l!==null?(u=Pn(),u!==null?l=[l,u]:(l=null,n=f)):(l=null,n=f);l!==null;)e.push(l),f=n,o.charCodeAt(n)===59?(l=";",n++):(l=null,h('";"')),l!==null?(u=Pn(),u!==null?l=[l,u]:(l=null,n=f)):(l=null,n=f);return e}function Pn(){var e;return e=Er(),e===null&&(e=Sr(),e===null&&(e=yr(),e===null&&(e=Ar(),e===null&&(e=Cr(),e===null&&(e=Rr(),e===null&&(e=Ir())))))),e}function Er(){var e,l,u,f;return u=n,f=n,o.substr(n,10).toLowerCase()==="transport="?(e=o.substr(n,10),n+=10):(e=null,h('"transport="')),e!==null?(o.substr(n,3).toLowerCase()==="udp"?(l=o.substr(n,3),n+=3):(l=null,h('"udp"')),l===null&&(o.substr(n,3).toLowerCase()==="tcp"?(l=o.substr(n,3),n+=3):(l=null,h('"tcp"')),l===null&&(o.substr(n,4).toLowerCase()==="sctp"?(l=o.substr(n,4),n+=4):(l=null,h('"sctp"')),l===null&&(o.substr(n,3).toLowerCase()==="tls"?(l=o.substr(n,3),n+=3):(l=null,h('"tls"')),l===null&&(l=P())))),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e!==null&&(e=function(_,m){w.uri_params||(w.uri_params={}),w.uri_params.transport=m.toLowerCase()}(u,e[1])),e===null&&(n=u),e}function Sr(){var e,l,u,f;return u=n,f=n,o.substr(n,5).toLowerCase()==="user="?(e=o.substr(n,5),n+=5):(e=null,h('"user="')),e!==null?(o.substr(n,5).toLowerCase()==="phone"?(l=o.substr(n,5),n+=5):(l=null,h('"phone"')),l===null&&(o.substr(n,2).toLowerCase()==="ip"?(l=o.substr(n,2),n+=2):(l=null,h('"ip"')),l===null&&(l=P())),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e!==null&&(e=function(_,m){w.uri_params||(w.uri_params={}),w.uri_params.user=m.toLowerCase()}(u,e[1])),e===null&&(n=u),e}function yr(){var e,l,u,f;return u=n,f=n,o.substr(n,7).toLowerCase()==="method="?(e=o.substr(n,7),n+=7):(e=null,h('"method="')),e!==null?(l=rn(),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e!==null&&(e=function(_,m){w.uri_params||(w.uri_params={}),w.uri_params.method=m}(u,e[1])),e===null&&(n=u),e}function Ar(){var e,l,u,f;return u=n,f=n,o.substr(n,4).toLowerCase()==="ttl="?(e=o.substr(n,4),n+=4):(e=null,h('"ttl="')),e!==null?(l=Ai(),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e!==null&&(e=function(_,m){w.params||(w.params={}),w.params.ttl=m}(u,e[1])),e===null&&(n=u),e}function Cr(){var e,l,u,f;return u=n,f=n,o.substr(n,6).toLowerCase()==="maddr="?(e=o.substr(n,6),n+=6):(e=null,h('"maddr="')),e!==null?(l=fs(),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e!==null&&(e=function(_,m){w.uri_params||(w.uri_params={}),w.uri_params.maddr=m}(u,e[1])),e===null&&(n=u),e}function Rr(){var e,l,u,f,_,m;return f=n,_=n,o.substr(n,2).toLowerCase()==="lr"?(e=o.substr(n,2),n+=2):(e=null,h('"lr"')),e!==null?(m=n,o.charCodeAt(n)===61?(l="=",n++):(l=null,h('"="')),l!==null?(u=P(),u!==null?l=[l,u]:(l=null,n=m)):(l=null,n=m),l=l!==null?l:"",l!==null?e=[e,l]:(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(v){w.uri_params||(w.uri_params={}),w.uri_params.lr=void 0}()),e===null&&(n=f),e}function Ir(){var e,l,u,f,_,m;return f=n,_=n,e=br(),e!==null?(m=n,o.charCodeAt(n)===61?(l="=",n++):(l=null,h('"="')),l!==null?(u=bs(),u!==null?l=[l,u]:(l=null,n=m)):(l=null,n=m),l=l!==null?l:"",l!==null?e=[e,l]:(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(v,y,O){w.uri_params||(w.uri_params={}),typeof O>"u"?O=void 0:O=O[1],w.uri_params[y.toLowerCase()]=O}(f,e[0],e[1])),e===null&&(n=f),e}function br(){var e,l,u;if(u=n,l=ws(),l!==null)for(e=[];l!==null;)e.push(l),l=ws();else e=null;return e!==null&&(e=function(f,_){return _.join("")}(u,e)),e===null&&(n=u),e}function bs(){var e,l,u;if(u=n,l=ws(),l!==null)for(e=[];l!==null;)e.push(l),l=ws();else e=null;return e!==null&&(e=function(f,_){return _.join("")}(u,e)),e===null&&(n=u),e}function ws(){var e;return e=wr(),e===null&&(e=F(),e===null&&(e=ve())),e}function wr(){var e;return o.charCodeAt(n)===91?(e="[",n++):(e=null,h('"["')),e===null&&(o.charCodeAt(n)===93?(e="]",n++):(e=null,h('"]"')),e===null&&(o.charCodeAt(n)===47?(e="/",n++):(e=null,h('"/"')),e===null&&(o.charCodeAt(n)===58?(e=":",n++):(e=null,h('":"')),e===null&&(o.charCodeAt(n)===38?(e="&",n++):(e=null,h('"&"')),e===null&&(o.charCodeAt(n)===43?(e="+",n++):(e=null,h('"+"')),e===null&&(o.charCodeAt(n)===36?(e="$",n++):(e=null,h('"$"')))))))),e}function Xs(){var e,l,u,f,_,m,v;if(m=n,o.charCodeAt(n)===63?(e="?",n++):(e=null,h('"?"')),e!==null)if(l=Qs(),l!==null){for(u=[],v=n,o.charCodeAt(n)===38?(f="&",n++):(f=null,h('"&"')),f!==null?(_=Qs(),_!==null?f=[f,_]:(f=null,n=v)):(f=null,n=v);f!==null;)u.push(f),v=n,o.charCodeAt(n)===38?(f="&",n++):(f=null,h('"&"')),f!==null?(_=Qs(),_!==null?f=[f,_]:(f=null,n=v)):(f=null,n=v);u!==null?e=[e,l,u]:(e=null,n=m)}else e=null,n=m;else e=null,n=m;return e}function Qs(){var e,l,u,f,_;return f=n,_=n,e=Or(),e!==null?(o.charCodeAt(n)===61?(l="=",n++):(l=null,h('"="')),l!==null?(u=Os(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v,y){v=v.join("").toLowerCase(),y=y.join(""),w.uri_headers||(w.uri_headers={}),w.uri_headers[v]?w.uri_headers[v].push(y):w.uri_headers[v]=[y]}(f,e[0],e[2])),e===null&&(n=f),e}function Or(){var e,l;if(l=Zs(),l===null&&(l=F(),l===null&&(l=ve())),l!==null)for(e=[];l!==null;)e.push(l),l=Zs(),l===null&&(l=F(),l===null&&(l=ve()));else e=null;return e}function Os(){var e,l;for(e=[],l=Zs(),l===null&&(l=F(),l===null&&(l=ve()));l!==null;)e.push(l),l=Zs(),l===null&&(l=F(),l===null&&(l=ve()));return e}function Zs(){var e;return o.charCodeAt(n)===91?(e="[",n++):(e=null,h('"["')),e===null&&(o.charCodeAt(n)===93?(e="]",n++):(e=null,h('"]"')),e===null&&(o.charCodeAt(n)===47?(e="/",n++):(e=null,h('"/"')),e===null&&(o.charCodeAt(n)===63?(e="?",n++):(e=null,h('"?"')),e===null&&(o.charCodeAt(n)===58?(e=":",n++):(e=null,h('":"')),e===null&&(o.charCodeAt(n)===43?(e="+",n++):(e=null,h('"+"')),e===null&&(o.charCodeAt(n)===36?(e="$",n++):(e=null,h('"$"')))))))),e}function Tl(){var e;return e=Gr(),e===null&&(e=Dr()),e}function Dr(){var e,l,u,f,_,m;return m=n,e=rn(),e!==null?(l=$(),l!==null?(u=xn(),u!==null?(f=$(),f!==null?(_=Ln(),_!==null?e=[e,l,u,f,_]:(e=null,n=m)):(e=null,n=m)):(e=null,n=m)):(e=null,n=m)):(e=null,n=m),e}function xn(){var e;return e=Ne(),e===null&&(e=Mn()),e}function Mn(){var e,l,u,f;return f=n,e=Pr(),e!==null?(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l!==null?(u=Nr(),u===null&&(u=Ds()),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function Nr(){var e,l,u,f,_;return f=n,e=en(),e===null&&(e=tn()),e!==null?(_=n,o.charCodeAt(n)===63?(l="?",n++):(l=null,h('"?"')),l!==null?(u=kn(),u!==null?l=[l,u]:(l=null,n=_)):(l=null,n=_),l=l!==null?l:"",l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e}function en(){var e,l,u,f;return f=n,o.substr(n,2)==="//"?(e="//",n+=2):(e=null,h('"//"')),e!==null?(l=xr(),l!==null?(u=tn(),u=u!==null?u:"",u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function tn(){var e,l,u;return u=n,o.charCodeAt(n)===47?(e="/",n++):(e=null,h('"/"')),e!==null?(l=sn(),l!==null?e=[e,l]:(e=null,n=u)):(e=null,n=u),e}function Ds(){var e,l,u,f;if(f=n,e=Ur(),e!==null){for(l=[],u=Ns();u!==null;)l.push(u),u=Ns();l!==null?e=[e,l]:(e=null,n=f)}else e=null,n=f;return e}function Ns(){var e;return e=D(),e===null&&(e=F(),e===null&&(e=ve())),e}function Ur(){var e;return e=F(),e===null&&(e=ve(),e===null&&(o.charCodeAt(n)===59?(e=";",n++):(e=null,h('";"')),e===null&&(o.charCodeAt(n)===63?(e="?",n++):(e=null,h('"?"')),e===null&&(o.charCodeAt(n)===58?(e=":",n++):(e=null,h('":"')),e===null&&(o.charCodeAt(n)===64?(e="@",n++):(e=null,h('"@"')),e===null&&(o.charCodeAt(n)===38?(e="&",n++):(e=null,h('"&"')),e===null&&(o.charCodeAt(n)===61?(e="=",n++):(e=null,h('"="')),e===null&&(o.charCodeAt(n)===43?(e="+",n++):(e=null,h('"+"')),e===null&&(o.charCodeAt(n)===36?(e="$",n++):(e=null,h('"$"')),e===null&&(o.charCodeAt(n)===44?(e=",",n++):(e=null,h('","')))))))))))),e}function sn(){var e,l,u,f,_,m;if(_=n,e=Us(),e!==null){for(l=[],m=n,o.charCodeAt(n)===47?(u="/",n++):(u=null,h('"/"')),u!==null?(f=Us(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,o.charCodeAt(n)===47?(u="/",n++):(u=null,h('"/"')),u!==null?(f=Us(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function Us(){var e,l,u,f,_,m;for(_=n,e=[],l=Ps();l!==null;)e.push(l),l=Ps();if(e!==null){for(l=[],m=n,o.charCodeAt(n)===59?(u=";",n++):(u=null,h('";"')),u!==null?(f=ds(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,o.charCodeAt(n)===59?(u=";",n++):(u=null,h('";"')),u!==null?(f=ds(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function ds(){var e,l;for(e=[],l=Ps();l!==null;)e.push(l),l=Ps();return e}function Ps(){var e;return e=F(),e===null&&(e=ve(),e===null&&(o.charCodeAt(n)===58?(e=":",n++):(e=null,h('":"')),e===null&&(o.charCodeAt(n)===64?(e="@",n++):(e=null,h('"@"')),e===null&&(o.charCodeAt(n)===38?(e="&",n++):(e=null,h('"&"')),e===null&&(o.charCodeAt(n)===61?(e="=",n++):(e=null,h('"="')),e===null&&(o.charCodeAt(n)===43?(e="+",n++):(e=null,h('"+"')),e===null&&(o.charCodeAt(n)===36?(e="$",n++):(e=null,h('"$"')),e===null&&(o.charCodeAt(n)===44?(e=",",n++):(e=null,h('","')))))))))),e}function Pr(){var e,l,u,f,_;if(f=n,_=n,e=E(),e!==null){for(l=[],u=E(),u===null&&(u=T(),u===null&&(o.charCodeAt(n)===43?(u="+",n++):(u=null,h('"+"')),u===null&&(o.charCodeAt(n)===45?(u="-",n++):(u=null,h('"-"')),u===null&&(o.charCodeAt(n)===46?(u=".",n++):(u=null,h('"."'))))));u!==null;)l.push(u),u=E(),u===null&&(u=T(),u===null&&(o.charCodeAt(n)===43?(u="+",n++):(u=null,h('"+"')),u===null&&(o.charCodeAt(n)===45?(u="-",n++):(u=null,h('"-"')),u===null&&(o.charCodeAt(n)===46?(u=".",n++):(u=null,h('"."'))))));l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e!==null&&(e=function(m){w.scheme=o.substring(n,m)}(f)),e===null&&(n=f),e}function xr(){var e;return e=Mr(),e===null&&(e=kr()),e}function Mr(){var e,l,u,f;return u=n,f=n,e=_t(),e!==null?(o.charCodeAt(n)===64?(l="@",n++):(l=null,h('"@"')),l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e=e!==null?e:"",e!==null?(l=Qt(),l!==null?e=[e,l]:(e=null,n=u)):(e=null,n=u),e=e!==null?e:"",e}function kr(){var e,l;if(l=F(),l===null&&(l=ve(),l===null&&(o.charCodeAt(n)===36?(l="$",n++):(l=null,h('"$"')),l===null&&(o.charCodeAt(n)===44?(l=",",n++):(l=null,h('","')),l===null&&(o.charCodeAt(n)===59?(l=";",n++):(l=null,h('";"')),l===null&&(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l===null&&(o.charCodeAt(n)===64?(l="@",n++):(l=null,h('"@"')),l===null&&(o.charCodeAt(n)===38?(l="&",n++):(l=null,h('"&"')),l===null&&(o.charCodeAt(n)===61?(l="=",n++):(l=null,h('"="')),l===null&&(o.charCodeAt(n)===43?(l="+",n++):(l=null,h('"+"'))))))))))),l!==null)for(e=[];l!==null;)e.push(l),l=F(),l===null&&(l=ve(),l===null&&(o.charCodeAt(n)===36?(l="$",n++):(l=null,h('"$"')),l===null&&(o.charCodeAt(n)===44?(l=",",n++):(l=null,h('","')),l===null&&(o.charCodeAt(n)===59?(l=";",n++):(l=null,h('";"')),l===null&&(o.charCodeAt(n)===58?(l=":",n++):(l=null,h('":"')),l===null&&(o.charCodeAt(n)===64?(l="@",n++):(l=null,h('"@"')),l===null&&(o.charCodeAt(n)===38?(l="&",n++):(l=null,h('"&"')),l===null&&(o.charCodeAt(n)===61?(l="=",n++):(l=null,h('"="')),l===null&&(o.charCodeAt(n)===43?(l="+",n++):(l=null,h('"+"')))))))))));else e=null;return e}function kn(){var e,l;for(e=[],l=Ns();l!==null;)e.push(l),l=Ns();return e}function Ln(){var e,l,u,f,_,m,v,y;if(v=n,y=n,o.substr(n,3).toLowerCase()==="sip"?(e=o.substr(n,3),n+=3):(e=null,h('"SIP"')),e!==null)if(o.charCodeAt(n)===47?(l="/",n++):(l=null,h('"/"')),l!==null){if(f=T(),f!==null)for(u=[];f!==null;)u.push(f),f=T();else u=null;if(u!==null)if(o.charCodeAt(n)===46?(f=".",n++):(f=null,h('"."')),f!==null){if(m=T(),m!==null)for(_=[];m!==null;)_.push(m),m=T();else _=null;_!==null?e=[e,l,u,f,_]:(e=null,n=y)}else e=null,n=y;else e=null,n=y}else e=null,n=y;else e=null,n=y;return e!==null&&(e=function(O){w.sip_version=o.substring(n,O)}(v)),e===null&&(n=v),e}function Lr(){var e;return o.substr(n,6)==="INVITE"?(e="INVITE",n+=6):(e=null,h('"INVITE"')),e}function $r(){var e;return o.substr(n,3)==="ACK"?(e="ACK",n+=3):(e=null,h('"ACK"')),e}function Hr(){var e;return o.substr(n,7)==="OPTIONS"?(e="OPTIONS",n+=7):(e=null,h('"OPTIONS"')),e}function Fr(){var e;return o.substr(n,3)==="BYE"?(e="BYE",n+=3):(e=null,h('"BYE"')),e}function jr(){var e;return o.substr(n,6)==="CANCEL"?(e="CANCEL",n+=6):(e=null,h('"CANCEL"')),e}function Vr(){var e;return o.substr(n,8)==="REGISTER"?(e="REGISTER",n+=8):(e=null,h('"REGISTER"')),e}function qr(){var e;return o.substr(n,9)==="SUBSCRIBE"?(e="SUBSCRIBE",n+=9):(e=null,h('"SUBSCRIBE"')),e}function Br(){var e;return o.substr(n,6)==="NOTIFY"?(e="NOTIFY",n+=6):(e=null,h('"NOTIFY"')),e}function nn(){var e;return o.substr(n,5)==="REFER"?(e="REFER",n+=5):(e=null,h('"REFER"')),e}function rn(){var e,l;return l=n,e=Lr(),e===null&&(e=$r(),e===null&&(e=Hr(),e===null&&(e=Fr(),e===null&&(e=jr(),e===null&&(e=Vr(),e===null&&(e=qr(),e===null&&(e=Br(),e===null&&(e=nn(),e===null&&(e=P()))))))))),e!==null&&(e=function(u){return w.method=o.substring(n,u),w.method}(l)),e===null&&(n=l),e}function Gr(){var e,l,u,f,_,m;return m=n,e=Ln(),e!==null?(l=$(),l!==null?(u=Wr(),u!==null?(f=$(),f!==null?(_=vl(),_!==null?e=[e,l,u,f,_]:(e=null,n=m)):(e=null,n=m)):(e=null,n=m)):(e=null,n=m)):(e=null,n=m),e}function Wr(){var e,l;return l=n,e=Kr(),e!==null&&(e=function(u,f){w.status_code=parseInt(f.join(""))}(l,e)),e===null&&(n=l),e}function Kr(){var e,l,u,f;return f=n,e=T(),e!==null?(l=T(),l!==null?(u=T(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function vl(){var e,l,u;for(u=n,e=[],l=D(),l===null&&(l=F(),l===null&&(l=ve(),l===null&&(l=H(),l===null&&(l=J(),l===null&&(l=$(),l===null&&(l=L()))))));l!==null;)e.push(l),l=D(),l===null&&(l=F(),l===null&&(l=ve(),l===null&&(l=H(),l===null&&(l=J(),l===null&&(l=$(),l===null&&(l=L()))))));return e!==null&&(e=function(f){w.reason_phrase=o.substring(n,f)}(u)),e===null&&(n=u),e}function zo(){var e,l,u,f,_,m;if(_=n,e=un(),e!==null){for(l=[],m=n,u=oe(),u!==null?(f=un(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=oe(),u!==null?(f=un(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function Jo(){var e,l,u,f,_,m;return f=n,_=n,e=ee(),e!==null?(m=n,o.charCodeAt(n)===64?(l="@",n++):(l=null,h('"@"')),l!==null?(u=ee(),u!==null?l=[l,u]:(l=null,n=m)):(l=null,n=m),l=l!==null?l:"",l!==null?e=[e,l]:(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(v){w=o.substring(n,v)}(f)),e===null&&(n=f),e}function $n(){var e,l,u,f,_,m,v;if(_=n,e=W(),e===null)if(m=n,e=$t(),e!==null){for(l=[],v=n,u=oe(),u!==null?(f=$t(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;)l.push(u),v=n,u=oe(),u!==null?(f=$t(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e!==null&&(e=function(y){var O,le;for(le=w.multi_header.length,O=0;O<le;O++)if(w.multi_header[O].parsed===null){w=null;break}w!==null?w=w.multi_header:w=-1}()),e===null&&(n=_),e}function $t(){var e,l,u,f,_,m,v;if(_=n,m=n,e=we(),e===null&&(e=Ht()),e!==null){for(l=[],v=n,u=ye(),u!==null?(f=Hn(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;)l.push(u),v=n,u=ye(),u!==null?(f=Hn(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e!==null&&(e=function(y){var O;w.multi_header||(w.multi_header=[]);try{O=new b(w.uri,w.display_name,w.params),delete w.uri,delete w.display_name,delete w.params}catch{O=null}w.multi_header.push({possition:n,offset:y,parsed:O})}(_)),e===null&&(n=_),e}function Ht(){var e,l,u,f,_;return _=n,e=xs(),e=e!==null?e:"",e!==null?(l=Ce(),l!==null?(u=Ne(),u!==null?(f=Me(),f!==null?e=[e,l,u,f]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e}function xs(){var e,l,u,f,_,m,v;if(_=n,m=n,e=P(),e!==null){for(l=[],v=n,u=M(),u!==null?(f=P(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;)l.push(u),v=n,u=M(),u!==null?(f=P(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e===null&&(e=pe()),e!==null&&(e=function(y,O){typeof O=="string"?w.display_name=O:w.display_name=O[1].reduce(function(le,Ue){return le+Ue[0]+Ue[1]},O[0])}(_,e)),e===null&&(n=_),e}function Hn(){var e;return e=Yr(),e===null&&(e=Zt(),e===null&&(e=Ke())),e}function Yr(){var e,l,u,f,_;return f=n,_=n,o.substr(n,1).toLowerCase()==="q"?(e=o.substr(n,1),n++):(e=null,h('"q"')),e!==null?(l=ie(),l!==null?(u=We(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.params||(w.params={}),w.params.q=v}(f,e[2])),e===null&&(n=f),e}function Zt(){var e,l,u,f,_;return f=n,_=n,o.substr(n,7).toLowerCase()==="expires"?(e=o.substr(n,7),n+=7):(e=null,h('"expires"')),e!==null?(l=ie(),l!==null?(u=es(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.params||(w.params={}),w.params.expires=v}(f,e[2])),e===null&&(n=f),e}function es(){var e,l,u;if(u=n,l=T(),l!==null)for(e=[];l!==null;)e.push(l),l=T();else e=null;return e!==null&&(e=function(f,_){return parseInt(_.join(""))}(u,e)),e===null&&(n=u),e}function We(){var e,l,u,f,_,m,v,y;return m=n,v=n,o.charCodeAt(n)===48?(e="0",n++):(e=null,h('"0"')),e!==null?(y=n,o.charCodeAt(n)===46?(l=".",n++):(l=null,h('"."')),l!==null?(u=T(),u=u!==null?u:"",u!==null?(f=T(),f=f!==null?f:"",f!==null?(_=T(),_=_!==null?_:"",_!==null?l=[l,u,f,_]:(l=null,n=y)):(l=null,n=y)):(l=null,n=y)):(l=null,n=y),l=l!==null?l:"",l!==null?e=[e,l]:(e=null,n=v)):(e=null,n=v),e!==null&&(e=function(O){return parseFloat(o.substring(n,O))}(m)),e===null&&(n=m),e}function Ke(){var e,l,u,f,_,m;return f=n,_=n,e=P(),e!==null?(m=n,l=ie(),l!==null?(u=El(),u!==null?l=[l,u]:(l=null,n=m)):(l=null,n=m),l=l!==null?l:"",l!==null?e=[e,l]:(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(v,y,O){w.params||(w.params={}),typeof O>"u"?O=void 0:O=O[1],w.params[y.toLowerCase()]=O}(f,e[0],e[1])),e===null&&(n=f),e}function El(){var e;return e=P(),e===null&&(e=fs(),e===null&&(e=Oe())),e}function Sl(){var e,l,u,f,_,m;if(_=n,e=Fn(),e!==null){for(l=[],m=n,u=ye(),u!==null?(f=jn(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=ye(),u!==null?(f=jn(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function Fn(){var e;return o.substr(n,6).toLowerCase()==="render"?(e=o.substr(n,6),n+=6):(e=null,h('"render"')),e===null&&(o.substr(n,7).toLowerCase()==="session"?(e=o.substr(n,7),n+=7):(e=null,h('"session"')),e===null&&(o.substr(n,4).toLowerCase()==="icon"?(e=o.substr(n,4),n+=4):(e=null,h('"icon"')),e===null&&(o.substr(n,5).toLowerCase()==="alert"?(e=o.substr(n,5),n+=5):(e=null,h('"alert"')),e===null&&(e=P())))),e}function jn(){var e;return e=yl(),e===null&&(e=Ke()),e}function yl(){var e,l,u,f;return f=n,o.substr(n,8).toLowerCase()==="handling"?(e=o.substr(n,8),n+=8):(e=null,h('"handling"')),e!==null?(l=ie(),l!==null?(o.substr(n,8).toLowerCase()==="optional"?(u=o.substr(n,8),n+=8):(u=null,h('"optional"')),u===null&&(o.substr(n,8).toLowerCase()==="required"?(u=o.substr(n,8),n+=8):(u=null,h('"required"')),u===null&&(u=P())),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function Xo(){var e,l,u,f,_,m;if(_=n,e=P(),e!==null){for(l=[],m=n,u=oe(),u!==null?(f=P(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=oe(),u!==null?(f=P(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function Qo(){var e,l,u;if(u=n,l=T(),l!==null)for(e=[];l!==null;)e.push(l),l=T();else e=null;return e!==null&&(e=function(f,_){w=parseInt(_.join(""))}(u,e)),e===null&&(n=u),e}function Al(){var e,l;return l=n,e=zr(),e!==null&&(e=function(u){w=o.substring(n,u)}(l)),e===null&&(n=l),e}function zr(){var e,l,u,f,_,m,v,y;if(v=n,e=Jr(),e!==null)if(l=B(),l!==null)if(u=Vn(),u!==null){for(f=[],y=n,_=ye(),_!==null?(m=qn(),m!==null?_=[_,m]:(_=null,n=y)):(_=null,n=y);_!==null;)f.push(_),y=n,_=ye(),_!==null?(m=qn(),m!==null?_=[_,m]:(_=null,n=y)):(_=null,n=y);f!==null?e=[e,l,u,f]:(e=null,n=v)}else e=null,n=v;else e=null,n=v;else e=null,n=v;return e}function Jr(){var e;return e=Xr(),e===null&&(e=ln()),e}function Xr(){var e;return o.substr(n,4).toLowerCase()==="text"?(e=o.substr(n,4),n+=4):(e=null,h('"text"')),e===null&&(o.substr(n,5).toLowerCase()==="image"?(e=o.substr(n,5),n+=5):(e=null,h('"image"')),e===null&&(o.substr(n,5).toLowerCase()==="audio"?(e=o.substr(n,5),n+=5):(e=null,h('"audio"')),e===null&&(o.substr(n,5).toLowerCase()==="video"?(e=o.substr(n,5),n+=5):(e=null,h('"video"')),e===null&&(o.substr(n,11).toLowerCase()==="application"?(e=o.substr(n,11),n+=11):(e=null,h('"application"')),e===null&&(e=on()))))),e}function ln(){var e;return o.substr(n,7).toLowerCase()==="message"?(e=o.substr(n,7),n+=7):(e=null,h('"message"')),e===null&&(o.substr(n,9).toLowerCase()==="multipart"?(e=o.substr(n,9),n+=9):(e=null,h('"multipart"')),e===null&&(e=on())),e}function on(){var e;return e=P(),e===null&&(e=Qr()),e}function Qr(){var e,l,u;return u=n,o.substr(n,2).toLowerCase()==="x-"?(e=o.substr(n,2),n+=2):(e=null,h('"x-"')),e!==null?(l=P(),l!==null?e=[e,l]:(e=null,n=u)):(e=null,n=u),e}function Vn(){var e;return e=on(),e===null&&(e=P()),e}function qn(){var e,l,u,f;return f=n,e=P(),e!==null?(l=ie(),l!==null?(u=Cl(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function Cl(){var e;return e=P(),e===null&&(e=Oe()),e}function Rl(){var e,l,u,f;return f=n,e=Il(),e!==null?(l=M(),l!==null?(u=rn(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function Il(){var e,l,u;if(u=n,l=T(),l!==null)for(e=[];l!==null;)e.push(l),l=T();else e=null;return e!==null&&(e=function(f,_){w.value=parseInt(_.join(""))}(u,e)),e===null&&(n=u),e}function Zo(){var e,l;return l=n,e=es(),e!==null&&(e=function(u,f){w=f}(l,e)),e===null&&(n=l),e}function an(){var e,l,u,f,_,m,v;if(_=n,m=n,e=un(),e!==null){for(l=[],v=n,u=ye(),u!==null?(f=Ke(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;)l.push(u),v=n,u=ye(),u!==null?(f=Ke(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e!==null&&(e=function(y,O){w.event=O.join("").toLowerCase()}(_,e[0])),e===null&&(n=_),e}function un(){var e,l,u,f,_,m;if(_=n,e=se(),e!==null){for(l=[],m=n,o.charCodeAt(n)===46?(u=".",n++):(u=null,h('"."')),u!==null?(f=se(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,o.charCodeAt(n)===46?(u=".",n++):(u=null,h('"."')),u!==null?(f=se(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function Zr(){var e,l,u,f,_,m,v;if(_=n,m=n,e=we(),e===null&&(e=Ht()),e!==null){for(l=[],v=n,u=ye(),u!==null?(f=cn(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;)l.push(u),v=n,u=ye(),u!==null?(f=cn(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e!==null&&(e=function(y){var O=w.tag;try{w=new b(w.uri,w.display_name,w.params),O&&w.setParam("tag",O)}catch{w=-1}}()),e===null&&(n=_),e}function cn(){var e;return e=ei(),e===null&&(e=Ke()),e}function ei(){var e,l,u,f,_;return f=n,_=n,o.substr(n,3).toLowerCase()==="tag"?(e=o.substr(n,3),n+=3):(e=null,h('"tag"')),e!==null?(l=ie(),l!==null?(u=P(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.tag=v}(f,e[2])),e===null&&(n=f),e}function ea(){var e,l,u;if(u=n,l=T(),l!==null)for(e=[];l!==null;)e.push(l),l=T();else e=null;return e!==null&&(e=function(f,_){w=parseInt(_.join(""))}(u,e)),e===null&&(n=u),e}function ta(){var e,l;return l=n,e=es(),e!==null&&(e=function(u,f){w=f}(l,e)),e===null&&(n=l),e}function sa(){var e,l,u,f,_,m,v,y,O,le;for(y=n,O=n,e=[],l=xs();l!==null;)e.push(l),l=xs();if(e!==null)if(l=Ce(),l!==null)if(u=Ne(),u!==null)if(f=Me(),f!==null){for(_=[],le=n,m=ye(),m!==null?(v=Ke(),v!==null?m=[m,v]:(m=null,n=le)):(m=null,n=le);m!==null;)_.push(m),le=n,m=ye(),m!==null?(v=Ke(),v!==null?m=[m,v]:(m=null,n=le)):(m=null,n=le);_!==null?e=[e,l,u,f,_]:(e=null,n=O)}else e=null,n=O;else e=null,n=O;else e=null,n=O;else e=null,n=O;return e!==null&&(e=function(Ue){try{w=new b(w.uri,w.display_name,w.params)}catch{w=-1}}()),e===null&&(n=y),e}function ti(){var e;return e=Bn(),e}function Bn(){var e,l,u,f,_,m,v,y;if(v=n,o.substr(n,6).toLowerCase()==="digest"?(e=o.substr(n,6),n+=6):(e=null,h('"Digest"')),e!==null)if(l=M(),l!==null)if(u=fn(),u!==null){for(f=[],y=n,_=oe(),_!==null?(m=fn(),m!==null?_=[_,m]:(_=null,n=y)):(_=null,n=y);_!==null;)f.push(_),y=n,_=oe(),_!==null?(m=fn(),m!==null?_=[_,m]:(_=null,n=y)):(_=null,n=y);f!==null?e=[e,l,u,f]:(e=null,n=v)}else e=null,n=v;else e=null,n=v;else e=null,n=v;return e===null&&(e=Ms()),e}function Ms(){var e,l,u,f,_,m,v,y;if(v=n,e=P(),e!==null)if(l=M(),l!==null)if(u=ts(),u!==null){for(f=[],y=n,_=oe(),_!==null?(m=ts(),m!==null?_=[_,m]:(_=null,n=y)):(_=null,n=y);_!==null;)f.push(_),y=n,_=oe(),_!==null?(m=ts(),m!==null?_=[_,m]:(_=null,n=y)):(_=null,n=y);f!==null?e=[e,l,u,f]:(e=null,n=v)}else e=null,n=v;else e=null,n=v;else e=null,n=v;return e}function ts(){var e,l,u,f;return f=n,e=P(),e!==null?(l=ie(),l!==null?(u=P(),u===null&&(u=Oe()),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function fn(){var e;return e=si(),e===null&&(e=dn(),e===null&&(e=ri(),e===null&&(e=li(),e===null&&(e=oi(),e===null&&(e=ai(),e===null&&(e=_n(),e===null&&(e=ts()))))))),e}function si(){var e,l,u,f;return f=n,o.substr(n,5).toLowerCase()==="realm"?(e=o.substr(n,5),n+=5):(e=null,h('"realm"')),e!==null?(l=ie(),l!==null?(u=ni(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function ni(){var e,l;return l=n,e=pe(),e!==null&&(e=function(u,f){w.realm=f}(l,e)),e===null&&(n=l),e}function dn(){var e,l,u,f,_,m,v,y,O;if(y=n,o.substr(n,6).toLowerCase()==="domain"?(e=o.substr(n,6),n+=6):(e=null,h('"domain"')),e!==null)if(l=ie(),l!==null)if(u=ot(),u!==null)if(f=hn(),f!==null){if(_=[],O=n,v=$(),v!==null)for(m=[];v!==null;)m.push(v),v=$();else m=null;for(m!==null?(v=hn(),v!==null?m=[m,v]:(m=null,n=O)):(m=null,n=O);m!==null;){if(_.push(m),O=n,v=$(),v!==null)for(m=[];v!==null;)m.push(v),v=$();else m=null;m!==null?(v=hn(),v!==null?m=[m,v]:(m=null,n=O)):(m=null,n=O)}_!==null?(m=Ee(),m!==null?e=[e,l,u,f,_,m]:(e=null,n=y)):(e=null,n=y)}else e=null,n=y;else e=null,n=y;else e=null,n=y;else e=null,n=y;return e}function hn(){var e;return e=Mn(),e===null&&(e=tn()),e}function ri(){var e,l,u,f;return f=n,o.substr(n,5).toLowerCase()==="nonce"?(e=o.substr(n,5),n+=5):(e=null,h('"nonce"')),e!==null?(l=ie(),l!==null?(u=ii(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function ii(){var e,l;return l=n,e=pe(),e!==null&&(e=function(u,f){w.nonce=f}(l,e)),e===null&&(n=l),e}function li(){var e,l,u,f,_;return f=n,_=n,o.substr(n,6).toLowerCase()==="opaque"?(e=o.substr(n,6),n+=6):(e=null,h('"opaque"')),e!==null?(l=ie(),l!==null?(u=pe(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.opaque=v}(f,e[2])),e===null&&(n=f),e}function oi(){var e,l,u,f,_;return f=n,o.substr(n,5).toLowerCase()==="stale"?(e=o.substr(n,5),n+=5):(e=null,h('"stale"')),e!==null?(l=ie(),l!==null?(_=n,o.substr(n,4).toLowerCase()==="true"?(u=o.substr(n,4),n+=4):(u=null,h('"true"')),u!==null&&(u=function(m){w.stale=!0}()),u===null&&(n=_),u===null&&(_=n,o.substr(n,5).toLowerCase()==="false"?(u=o.substr(n,5),n+=5):(u=null,h('"false"')),u!==null&&(u=function(m){w.stale=!1}()),u===null&&(n=_)),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function ai(){var e,l,u,f,_;return f=n,_=n,o.substr(n,9).toLowerCase()==="algorithm"?(e=o.substr(n,9),n+=9):(e=null,h('"algorithm"')),e!==null?(l=ie(),l!==null?(o.substr(n,3).toLowerCase()==="md5"?(u=o.substr(n,3),n+=3):(u=null,h('"MD5"')),u===null&&(o.substr(n,8).toLowerCase()==="md5-sess"?(u=o.substr(n,8),n+=8):(u=null,h('"MD5-sess"')),u===null&&(u=P())),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.algorithm=v.toUpperCase()}(f,e[2])),e===null&&(n=f),e}function _n(){var e,l,u,f,_,m,v,y,O,le;if(y=n,o.substr(n,3).toLowerCase()==="qop"?(e=o.substr(n,3),n+=3):(e=null,h('"qop"')),e!==null)if(l=ie(),l!==null)if(u=ot(),u!==null){if(O=n,f=Gn(),f!==null){for(_=[],le=n,o.charCodeAt(n)===44?(m=",",n++):(m=null,h('","')),m!==null?(v=Gn(),v!==null?m=[m,v]:(m=null,n=le)):(m=null,n=le);m!==null;)_.push(m),le=n,o.charCodeAt(n)===44?(m=",",n++):(m=null,h('","')),m!==null?(v=Gn(),v!==null?m=[m,v]:(m=null,n=le)):(m=null,n=le);_!==null?f=[f,_]:(f=null,n=O)}else f=null,n=O;f!==null?(_=Ee(),_!==null?e=[e,l,u,f,_]:(e=null,n=y)):(e=null,n=y)}else e=null,n=y;else e=null,n=y;else e=null,n=y;return e}function Gn(){var e,l;return l=n,o.substr(n,8).toLowerCase()==="auth-int"?(e=o.substr(n,8),n+=8):(e=null,h('"auth-int"')),e===null&&(o.substr(n,4).toLowerCase()==="auth"?(e=o.substr(n,4),n+=4):(e=null,h('"auth"')),e===null&&(e=P())),e!==null&&(e=function(u,f){w.qop||(w.qop=[]),w.qop.push(f.toLowerCase())}(l,e)),e===null&&(n=l),e}function na(){var e,l,u,f,_,m;if(_=n,e=P(),e!==null){for(l=[],m=n,u=oe(),u!==null?(f=P(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=oe(),u!==null?(f=P(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function Wn(){var e,l,u,f,_,m,v;if(_=n,m=n,e=Kn(),e!==null){for(l=[],v=n,u=oe(),u!==null?(f=Kn(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;)l.push(u),v=n,u=oe(),u!==null?(f=Kn(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e!==null&&(e=function(y){var O,le;for(le=w.multi_header.length,O=0;O<le;O++)if(w.multi_header[O].parsed===null){w=null;break}w!==null?w=w.multi_header:w=-1}()),e===null&&(n=_),e}function Kn(){var e,l,u,f,_,m,v;if(_=n,m=n,e=Ht(),e!==null){for(l=[],v=n,u=ye(),u!==null?(f=Ke(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;)l.push(u),v=n,u=ye(),u!==null?(f=Ke(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e!==null&&(e=function(y){var O;w.multi_header||(w.multi_header=[]);try{O=new b(w.uri,w.display_name,w.params),delete w.uri,delete w.display_name,delete w.params}catch{O=null}w.multi_header.push({possition:n,offset:y,parsed:O})}(_)),e===null&&(n=_),e}function ui(){var e,l,u,f,_,m,v;if(_=n,m=n,o.substr(n,3).toLowerCase()==="sip"?(e=o.substr(n,3),n+=3):(e=null,h('"SIP"')),e===null&&(e=P()),e!==null){for(l=[],v=n,u=ye(),u!==null?(f=Yn(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;)l.push(u),v=n,u=ye(),u!==null?(f=Yn(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e!==null&&(e=function(y,O){if(w.protocol=O.toLowerCase(),w.params||(w.params={}),w.params.text&&w.params.text[0]==='"'){var le=w.params.text;w.text=le.substring(1,le.length-1),delete w.params.text}}(_,e[0])),e===null&&(n=_),e}function Yn(){var e;return e=bl(),e===null&&(e=Ke()),e}function bl(){var e,l,u,f,_,m;if(_=n,m=n,o.substr(n,5).toLowerCase()==="cause"?(e=o.substr(n,5),n+=5):(e=null,h('"cause"')),e!==null)if(l=ie(),l!==null){if(f=T(),f!==null)for(u=[];f!==null;)u.push(f),f=T();else u=null;u!==null?e=[e,l,u]:(e=null,n=m)}else e=null,n=m;else e=null,n=m;return e!==null&&(e=function(v,y){w.cause=parseInt(y.join(""))}(_,e[2])),e===null&&(n=_),e}function ra(){var e,l,u,f,_,m;if(_=n,e=P(),e!==null){for(l=[],m=n,u=oe(),u!==null?(f=P(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=oe(),u!==null?(f=P(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function zn(){var e,l,u,f,_,m;if(_=n,e=Jn(),e!==null){for(l=[],m=n,u=oe(),u!==null?(f=Jn(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=oe(),u!==null?(f=Jn(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function Jn(){var e,l,u,f,_,m;if(_=n,e=Ht(),e!==null){for(l=[],m=n,u=ye(),u!==null?(f=Ke(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=ye(),u!==null?(f=Ke(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function wl(){var e,l,u,f,_,m;if(_=n,e=Xn(),e!==null){for(l=[],m=n,u=ye(),u!==null?(f=Qn(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=ye(),u!==null?(f=Qn(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function Xn(){var e,l;return l=n,o.substr(n,6).toLowerCase()==="active"?(e=o.substr(n,6),n+=6):(e=null,h('"active"')),e===null&&(o.substr(n,7).toLowerCase()==="pending"?(e=o.substr(n,7),n+=7):(e=null,h('"pending"')),e===null&&(o.substr(n,10).toLowerCase()==="terminated"?(e=o.substr(n,10),n+=10):(e=null,h('"terminated"')),e===null&&(e=P()))),e!==null&&(e=function(u){w.state=o.substring(n,u)}(l)),e===null&&(n=l),e}function Qn(){var e,l,u,f,_;return f=n,_=n,o.substr(n,6).toLowerCase()==="reason"?(e=o.substr(n,6),n+=6):(e=null,h('"reason"')),e!==null?(l=ie(),l!==null?(u=Ol(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){typeof v<"u"&&(w.reason=v)}(f,e[2])),e===null&&(n=f),e===null&&(f=n,_=n,o.substr(n,7).toLowerCase()==="expires"?(e=o.substr(n,7),n+=7):(e=null,h('"expires"')),e!==null?(l=ie(),l!==null?(u=es(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){typeof v<"u"&&(w.expires=v)}(f,e[2])),e===null&&(n=f),e===null&&(f=n,_=n,o.substr(n,11).toLowerCase()==="retry_after"?(e=o.substr(n,11),n+=11):(e=null,h('"retry_after"')),e!==null?(l=ie(),l!==null?(u=es(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){typeof v<"u"&&(w.retry_after=v)}(f,e[2])),e===null&&(n=f),e===null&&(e=Ke()))),e}function Ol(){var e;return o.substr(n,11).toLowerCase()==="deactivated"?(e=o.substr(n,11),n+=11):(e=null,h('"deactivated"')),e===null&&(o.substr(n,9).toLowerCase()==="probation"?(e=o.substr(n,9),n+=9):(e=null,h('"probation"')),e===null&&(o.substr(n,8).toLowerCase()==="rejected"?(e=o.substr(n,8),n+=8):(e=null,h('"rejected"')),e===null&&(o.substr(n,7).toLowerCase()==="timeout"?(e=o.substr(n,7),n+=7):(e=null,h('"timeout"')),e===null&&(o.substr(n,6).toLowerCase()==="giveup"?(e=o.substr(n,6),n+=6):(e=null,h('"giveup"')),e===null&&(o.substr(n,10).toLowerCase()==="noresource"?(e=o.substr(n,10),n+=10):(e=null,h('"noresource"')),e===null&&(o.substr(n,9).toLowerCase()==="invariant"?(e=o.substr(n,9),n+=9):(e=null,h('"invariant"')),e===null&&(e=P()))))))),e}function ia(){var e;return e=V(),e=e!==null?e:"",e}function la(){var e,l,u,f,_,m;if(_=n,e=P(),e!==null){for(l=[],m=n,u=oe(),u!==null?(f=P(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=oe(),u!==null?(f=P(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e=e!==null?e:"",e}function ci(){var e,l,u,f,_,m,v;if(_=n,m=n,e=we(),e===null&&(e=Ht()),e!==null){for(l=[],v=n,u=ye(),u!==null?(f=fi(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;)l.push(u),v=n,u=ye(),u!==null?(f=fi(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e!==null&&(e=function(y){var O=w.tag;try{w=new b(w.uri,w.display_name,w.params),O&&w.setParam("tag",O)}catch{w=-1}}()),e===null&&(n=_),e}function fi(){var e;return e=ei(),e===null&&(e=Ke()),e}function Zn(){var e,l,u,f,_,m;if(_=n,e=ks(),e!==null){for(l=[],m=n,u=oe(),u!==null?(f=ks(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=oe(),u!==null?(f=ks(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function ks(){var e,l,u,f,_,m,v,y;if(v=n,e=Ti(),e!==null)if(l=M(),l!==null)if(u=Si(),u!==null){for(f=[],y=n,_=ye(),_!==null?(m=er(),m!==null?_=[_,m]:(_=null,n=y)):(_=null,n=y);_!==null;)f.push(_),y=n,_=ye(),_!==null?(m=er(),m!==null?_=[_,m]:(_=null,n=y)):(_=null,n=y);f!==null?e=[e,l,u,f]:(e=null,n=v)}else e=null,n=v;else e=null,n=v;else e=null,n=v;return e}function er(){var e;return e=di(),e===null&&(e=hi(),e===null&&(e=_i(),e===null&&(e=pi(),e===null&&(e=mi(),e===null&&(e=Ke()))))),e}function di(){var e,l,u,f,_;return f=n,_=n,o.substr(n,3).toLowerCase()==="ttl"?(e=o.substr(n,3),n+=3):(e=null,h('"ttl"')),e!==null?(l=ie(),l!==null?(u=Ai(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.ttl=v}(f,e[2])),e===null&&(n=f),e}function hi(){var e,l,u,f,_;return f=n,_=n,o.substr(n,5).toLowerCase()==="maddr"?(e=o.substr(n,5),n+=5):(e=null,h('"maddr"')),e!==null?(l=ie(),l!==null?(u=fs(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.maddr=v}(f,e[2])),e===null&&(n=f),e}function _i(){var e,l,u,f,_;return f=n,_=n,o.substr(n,8).toLowerCase()==="received"?(e=o.substr(n,8),n+=8):(e=null,h('"received"')),e!==null?(l=ie(),l!==null?(u=Wt(),u===null&&(u=me()),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.received=v}(f,e[2])),e===null&&(n=f),e}function pi(){var e,l,u,f,_;return f=n,_=n,o.substr(n,6).toLowerCase()==="branch"?(e=o.substr(n,6),n+=6):(e=null,h('"branch"')),e!==null?(l=ie(),l!==null?(u=P(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.branch=v}(f,e[2])),e===null&&(n=f),e}function mi(){var e,l,u,f,_;return f=n,o.substr(n,5).toLowerCase()==="rport"?(e=o.substr(n,5),n+=5):(e=null,h('"rport"')),e!==null?(_=n,l=ie(),l!==null?(u=gi(),u!==null?l=[l,u]:(l=null,n=_)):(l=null,n=_),l=l!==null?l:"",l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e}function gi(){var e,l,u,f,_,m,v;return m=n,v=n,e=T(),e=e!==null?e:"",e!==null?(l=T(),l=l!==null?l:"",l!==null?(u=T(),u=u!==null?u:"",u!==null?(f=T(),f=f!==null?f:"",f!==null?(_=T(),_=_!==null?_:"",_!==null?e=[e,l,u,f,_]:(e=null,n=v)):(e=null,n=v)):(e=null,n=v)):(e=null,n=v)):(e=null,n=v),e!==null&&(e=function(y,O){w.rport=parseInt(O.join(""))}(m,e)),e===null&&(n=m),e}function Ti(){var e,l,u,f,_,m;return m=n,e=vi(),e!==null?(l=B(),l!==null?(u=P(),u!==null?(f=B(),f!==null?(_=Ei(),_!==null?e=[e,l,u,f,_]:(e=null,n=m)):(e=null,n=m)):(e=null,n=m)):(e=null,n=m)):(e=null,n=m),e}function vi(){var e,l;return l=n,o.substr(n,3).toLowerCase()==="sip"?(e=o.substr(n,3),n+=3):(e=null,h('"SIP"')),e===null&&(e=P()),e!==null&&(e=function(u,f){w.protocol=f}(l,e)),e===null&&(n=l),e}function Ei(){var e,l;return l=n,o.substr(n,3).toLowerCase()==="udp"?(e=o.substr(n,3),n+=3):(e=null,h('"UDP"')),e===null&&(o.substr(n,3).toLowerCase()==="tcp"?(e=o.substr(n,3),n+=3):(e=null,h('"TCP"')),e===null&&(o.substr(n,3).toLowerCase()==="tls"?(e=o.substr(n,3),n+=3):(e=null,h('"TLS"')),e===null&&(o.substr(n,4).toLowerCase()==="sctp"?(e=o.substr(n,4),n+=4):(e=null,h('"SCTP"')),e===null&&(e=P())))),e!==null&&(e=function(u,f){w.transport=f}(l,e)),e===null&&(n=l),e}function Si(){var e,l,u,f,_;return f=n,e=yi(),e!==null?(_=n,l=nt(),l!==null?(u=tr(),u!==null?l=[l,u]:(l=null,n=_)):(l=null,n=_),l=l!==null?l:"",l!==null?e=[e,l]:(e=null,n=f)):(e=null,n=f),e}function yi(){var e,l;return l=n,e=Wt(),e===null&&(e=Js(),e===null&&(e=zs())),e!==null&&(e=function(u){w.host=o.substring(n,u)}(l)),e===null&&(n=l),e}function tr(){var e,l,u,f,_,m,v;return m=n,v=n,e=T(),e=e!==null?e:"",e!==null?(l=T(),l=l!==null?l:"",l!==null?(u=T(),u=u!==null?u:"",u!==null?(f=T(),f=f!==null?f:"",f!==null?(_=T(),_=_!==null?_:"",_!==null?e=[e,l,u,f,_]:(e=null,n=v)):(e=null,n=v)):(e=null,n=v)):(e=null,n=v)):(e=null,n=v),e!==null&&(e=function(y,O){w.port=parseInt(O.join(""))}(m,e)),e===null&&(n=m),e}function Ai(){var e,l,u,f,_;return f=n,_=n,e=T(),e!==null?(l=T(),l=l!==null?l:"",l!==null?(u=T(),u=u!==null?u:"",u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){return parseInt(v.join(""))}(f,e)),e===null&&(n=f),e}function oa(){var e;return e=Bn(),e}function Dl(){var e,l,u,f,_,m;if(_=n,e=sr(),e!==null){for(l=[],m=n,u=ye(),u!==null?(f=nr(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=ye(),u!==null?(f=nr(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function sr(){var e,l;return l=n,e=es(),e!==null&&(e=function(u,f){w.expires=f}(l,e)),e===null&&(n=l),e}function nr(){var e;return e=Nl(),e===null&&(e=Ke()),e}function Nl(){var e,l,u,f,_;return f=n,_=n,o.substr(n,9).toLowerCase()==="refresher"?(e=o.substr(n,9),n+=9):(e=null,h('"refresher"')),e!==null?(l=ie(),l!==null?(o.substr(n,3).toLowerCase()==="uac"?(u=o.substr(n,3),n+=3):(u=null,h('"uac"')),u===null&&(o.substr(n,3).toLowerCase()==="uas"?(u=o.substr(n,3),n+=3):(u=null,h('"uas"'))),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.refresher=v.toLowerCase()}(f,e[2])),e===null&&(n=f),e}function Ul(){var e,l,u,f;return f=n,e=P(),e!==null?(l=q(),l!==null?(u=Pl(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function Pl(){var e,l;for(e=[],l=z(),l===null&&(l=J(),l===null&&(l=M()));l!==null;)e.push(l),l=z(),l===null&&(l=J(),l===null&&(l=M()));return e}function aa(){var e,l;for(e=[],l=R();l!==null;)e.push(l),l=R();return e}function xl(){var e,l,u;return u=n,o.substr(n,5)==="uuid:"?(e="uuid:",n+=5):(e=null,h('"uuid:"')),e!==null?(l=Ft(),l!==null?e=[e,l]:(e=null,n=u)):(e=null,n=u),e}function Ft(){var e,l,u,f,_,m,v,y,O,le,Ue;return le=n,Ue=n,e=Ci(),e!==null?(o.charCodeAt(n)===45?(l="-",n++):(l=null,h('"-"')),l!==null?(u=jt(),u!==null?(o.charCodeAt(n)===45?(f="-",n++):(f=null,h('"-"')),f!==null?(_=jt(),_!==null?(o.charCodeAt(n)===45?(m="-",n++):(m=null,h('"-"')),m!==null?(v=jt(),v!==null?(o.charCodeAt(n)===45?(y="-",n++):(y=null,h('"-"')),y!==null?(O=Ml(),O!==null?e=[e,l,u,f,_,m,v,y,O]:(e=null,n=Ue)):(e=null,n=Ue)):(e=null,n=Ue)):(e=null,n=Ue)):(e=null,n=Ue)):(e=null,n=Ue)):(e=null,n=Ue)):(e=null,n=Ue)):(e=null,n=Ue),e!==null&&(e=function(bt,Ls){w=o.substring(n+5,bt)}(le,e[0])),e===null&&(n=le),e}function jt(){var e,l,u,f,_;return _=n,e=S(),e!==null?(l=S(),l!==null?(u=S(),u!==null?(f=S(),f!==null?e=[e,l,u,f]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e}function Ci(){var e,l,u;return u=n,e=jt(),e!==null?(l=jt(),l!==null?e=[e,l]:(e=null,n=u)):(e=null,n=u),e}function Ml(){var e,l,u,f;return f=n,e=jt(),e!==null?(l=jt(),l!==null?(u=jt(),u!==null?e=[e,l,u]:(e=null,n=f)):(e=null,n=f)):(e=null,n=f),e}function ua(){var e,l,u,f,_,m,v;if(_=n,m=n,e=we(),e===null&&(e=Ht()),e!==null){for(l=[],v=n,u=ye(),u!==null?(f=Ke(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);u!==null;)l.push(u),v=n,u=ye(),u!==null?(f=Ke(),f!==null?u=[u,f]:(u=null,n=v)):(u=null,n=v);l!==null?e=[e,l]:(e=null,n=m)}else e=null,n=m;return e!==null&&(e=function(y){try{w=new b(w.uri,w.display_name,w.params)}catch{w=-1}}()),e===null&&(n=_),e}function kl(){var e,l,u,f,_,m;if(_=n,e=rr(),e!==null){for(l=[],m=n,u=ye(),u!==null?(f=ir(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);u!==null;)l.push(u),m=n,u=ye(),u!==null?(f=ir(),f!==null?u=[u,f]:(u=null,n=m)):(u=null,n=m);l!==null?e=[e,l]:(e=null,n=_)}else e=null,n=_;return e}function rr(){var e,l,u,f,_,m;return f=n,_=n,e=ee(),e!==null?(m=n,o.charCodeAt(n)===64?(l="@",n++):(l=null,h('"@"')),l!==null?(u=ee(),u!==null?l=[l,u]:(l=null,n=m)):(l=null,n=m),l=l!==null?l:"",l!==null?e=[e,l]:(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(v){w.call_id=o.substring(n,v)}(f)),e===null&&(n=f),e}function ir(){var e;return e=Ri(),e===null&&(e=Ii(),e===null&&(e=Ll(),e===null&&(e=Ke()))),e}function Ri(){var e,l,u,f,_;return f=n,_=n,o.substr(n,6)==="to-tag"?(e="to-tag",n+=6):(e=null,h('"to-tag"')),e!==null?(l=ie(),l!==null?(u=P(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.to_tag=v}(f,e[2])),e===null&&(n=f),e}function Ii(){var e,l,u,f,_;return f=n,_=n,o.substr(n,8)==="from-tag"?(e="from-tag",n+=8):(e=null,h('"from-tag"')),e!==null?(l=ie(),l!==null?(u=P(),u!==null?e=[e,l,u]:(e=null,n=_)):(e=null,n=_)):(e=null,n=_),e!==null&&(e=function(m,v){w.from_tag=v}(f,e[2])),e===null&&(n=f),e}function Ll(){var e,l;return l=n,o.substr(n,10)==="early-only"?(e="early-only",n+=10):(e=null,h('"early-only"')),e!==null&&(e=function(u){w.early_only=!0}()),e===null&&(n=l),e}function ca(e){e.sort();for(var l=null,u=[],f=0;f<e.length;f++)e[f]!==l&&(u.push(e[f]),l=e[f]);return u}function $l(){for(var e=1,l=1,u=!1,f=0;f<Math.max(n,p);f++){var _=o.charAt(f);_===`
`?(u||e++,l=1,u=!1):_==="\r"||_==="\u2028"||_==="\u2029"?(e++,l=1,u=!0):(l++,u=!1)}return{line:e,column:l}}var hs=Ks(),b=$u(),w={},bi=t[a]();if(bi===null||n!==o.length){var wi=Math.max(n,p),Hl=wi<o.length?o.charAt(wi):null,i=$l();return new this.SyntaxError(ca(d),Hl,wi,i.line,i.column),-1}return w},toSource:function(){return this._source}};return s.SyntaxError=function(r,o,a,t,n){function p(d,h){var g,T;switch(d.length){case 0:g="end of input";break;case 1:g=d[0];break;default:g=d.slice(0,d.length-1).join(", ")+" or "+d[d.length-1]}return T=h?c(h):"end of input","Expected "+g+" but "+T+" found."}this.name="SyntaxError",this.expected=r,this.found=o,this.message=p(r,o),this.offset=a,this.line=t,this.column=n},s.SyntaxError.prototype=Error.prototype,s}()),da}var ha,rc;function Ks(){if(rc)return ha;rc=1;function c(h,g){var T;if(typeof Symbol>"u"||h[Symbol.iterator]==null){if(Array.isArray(h)||(T=s(h))||g&&h&&typeof h.length=="number"){T&&(h=T);var E=0,S=function(){};return{s:S,n:function(){return E>=h.length?{done:!0}:{done:!1,value:h[E++]}},e:function(L){throw L},f:S}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A=!0,R=!1,C;return{s:function(){T=h[Symbol.iterator]()},n:function(){var L=T.next();return A=L.done,L},e:function(L){R=!0,C=L},f:function(){try{!A&&T.return!=null&&T.return()}finally{if(R)throw C}}}}function s(h,g){if(h){if(typeof h=="string")return r(h,g);var T=Object.prototype.toString.call(h).slice(8,-1);if(T==="Object"&&h.constructor&&(T=h.constructor.name),T==="Map"||T==="Set")return Array.from(h);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return r(h,g)}}function r(h,g){(g==null||g>h.length)&&(g=h.length);for(var T=0,E=new Array(g);T<g;T++)E[T]=h[T];return E}function o(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function a(h,g){for(var T=0;T<g.length;T++){var E=g[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(h,E.key,E)}}function t(h,g,T){return g&&a(h.prototype,g),T&&a(h,T),h}var n=lt,p=It(),d=us();return ha=function(){t(h,null,[{key:"parse",value:function(T){if(T=d.parse(T,"SIP_URI"),T!==-1)return T}}]);function h(g,T,E,S){var A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},R=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(o(this,h),!E)throw new TypeError('missing or invalid "host" parameter');this._parameters={},this._headers={},this._scheme=g||n.SIP,this._user=T,this._host=E,this._port=S;for(var C in A)Object.prototype.hasOwnProperty.call(A,C)&&this.setParam(C,A[C]);for(var $ in R)Object.prototype.hasOwnProperty.call(R,$)&&this.setHeader($,R[$])}return t(h,[{key:"setParam",value:function(T,E){T&&(this._parameters[T.toLowerCase()]=typeof E>"u"||E===null?null:E.toString())}},{key:"getParam",value:function(T){if(T)return this._parameters[T.toLowerCase()]}},{key:"hasParam",value:function(T){if(T)return this._parameters.hasOwnProperty(T.toLowerCase())&&!0||!1}},{key:"deleteParam",value:function(T){if(T=T.toLowerCase(),this._parameters.hasOwnProperty(T)){var E=this._parameters[T];return delete this._parameters[T],E}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"setHeader",value:function(T,E){this._headers[p.headerize(T)]=Array.isArray(E)?E:[E]}},{key:"getHeader",value:function(T){if(T)return this._headers[p.headerize(T)]}},{key:"hasHeader",value:function(T){if(T)return this._headers.hasOwnProperty(p.headerize(T))&&!0||!1}},{key:"deleteHeader",value:function(T){if(T=p.headerize(T),this._headers.hasOwnProperty(T)){var E=this._headers[T];return delete this._headers[T],E}}},{key:"clearHeaders",value:function(){this._headers={}}},{key:"clone",value:function(){return new h(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}},{key:"toString",value:function(){var T=[],E="".concat(this._scheme,":");this._user&&(E+="".concat(p.escapeUser(this._user),"@")),E+=this._host,(this._port||this._port===0)&&(E+=":".concat(this._port));for(var S in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,S)&&(E+=";".concat(S),this._parameters[S]!==null&&(E+="=".concat(this._parameters[S])));for(var A in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,A)){var R=c(this._headers[A]),C;try{for(R.s();!(C=R.n()).done;){var $=C.value;T.push("".concat(A,"=").concat($))}}catch(L){R.e(L)}finally{R.f()}}return T.length>0&&(E+="?".concat(T.join("&"))),E}},{key:"toAor",value:function(T){var E="".concat(this._scheme,":");return this._user&&(E+="".concat(p.escapeUser(this._user),"@")),E+=this._host,T&&(this._port||this._port===0)&&(E+=":".concat(this._port)),E}},{key:"scheme",get:function(){return this._scheme},set:function(T){this._scheme=T.toLowerCase()}},{key:"user",get:function(){return this._user},set:function(T){this._user=T}},{key:"host",get:function(){return this._host},set:function(T){this._host=T.toLowerCase()}},{key:"port",get:function(){return this._port},set:function(T){this._port=T===0?T:parseInt(T,10)||null}}]),h}(),ha}var ic;function It(){if(ic)return Ze;ic=1;function c(g){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(E){return typeof E}:c=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},c(g)}function s(g,T){var E;if(typeof Symbol>"u"||g[Symbol.iterator]==null){if(Array.isArray(g)||(E=r(g))||T&&g&&typeof g.length=="number"){E&&(g=E);var S=0,A=function(){};return{s:A,n:function(){return S>=g.length?{done:!0}:{done:!1,value:g[S++]}},e:function(ne){throw ne},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=!0,C=!1,$;return{s:function(){E=g[Symbol.iterator]()},n:function(){var ne=E.next();return R=ne.done,ne},e:function(ne){C=!0,$=ne},f:function(){try{!R&&E.return!=null&&E.return()}finally{if(C)throw $}}}}function r(g,T){if(g){if(typeof g=="string")return o(g,T);var E=Object.prototype.toString.call(g).slice(8,-1);if(E==="Object"&&g.constructor&&(E=g.constructor.name),E==="Map"||E==="Set")return Array.from(g);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return o(g,T)}}function o(g,T){(T==null||T>g.length)&&(T=g.length);for(var E=0,S=new Array(T);E<T;E++)S[E]=g[E];return S}var a=lt,t=Ks(),n=us();Ze.str_utf8_length=function(g){return unescape(encodeURIComponent(g)).length};var p=Ze.isFunction=function(g){return g!==void 0?Object.prototype.toString.call(g)==="[object Function]":!1};Ze.isString=function(g){return g!==void 0?Object.prototype.toString.call(g)==="[object String]":!1},Ze.isDecimal=function(g){return!isNaN(g)&&parseFloat(g)===parseInt(g,10)},Ze.isEmpty=function(g){return g===null||g===""||g===void 0||Array.isArray(g)&&g.length===0||typeof g=="number"&&isNaN(g)},Ze.hasMethods=function(g){for(var T=arguments.length,E=new Array(T>1?T-1:0),S=1;S<T;S++)E[S-1]=arguments[S];for(var A=0,R=E;A<R.length;A++){var C=R[A];if(p(g[C]))return!1}return!0};var d=Ze.createRandomToken=function(g){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32,E,S,A="";for(E=0;E<g;E++)S=Math.random()*T|0,A+=S.toString(T);return A};Ze.newTag=function(){return d(10)},Ze.newUUID=function(){var g="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(T){var E=Math.random()*16|0,S=T==="x"?E:E&3|8;return S.toString(16)});return g},Ze.hostType=function(g){if(g){if(g=n.parse(g,"host"),g!==-1)return g.host_type}else return};var h=Ze.escapeUser=function(g){return encodeURIComponent(decodeURIComponent(g)).replace(/%3A/ig,":").replace(/%2B/ig,"+").replace(/%3F/ig,"?").replace(/%2F/ig,"/")};return Ze.normalizeTarget=function(g,T){if(g){if(g instanceof t)return g;if(typeof g=="string"){var E=g.split("@"),S,A;switch(E.length){case 1:if(!T)return;S=g,A=T;break;case 2:S=E[0],A=E[1];break;default:S=E.slice(0,E.length-1).join("@"),A=E[E.length-1]}S=S.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(S)&&(S=S.replace(/[-.()]/g,"")),g="".concat(a.SIP,":").concat(h(S),"@").concat(A);var R;return(R=t.parse(g))?R:void 0}else return}else return},Ze.headerize=function(g){var T={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},E=g.toLowerCase().replace(/_/g,"-").split("-"),S="",A=E.length,R;for(R=0;R<A;R++)R!==0&&(S+="-"),S+=E[R].charAt(0).toUpperCase()+E[R].substring(1);return T[S]&&(S=T[S]),S},Ze.sipErrorCause=function(g){for(var T in a.SIP_ERROR_CAUSES)if(a.SIP_ERROR_CAUSES[T].indexOf(g)!==-1)return a.causes[T];return a.causes.SIP_FAILURE_CODE},Ze.getRandomTestNetIP=function(){function g(T,E){return Math.floor(Math.random()*(E-T+1)+T)}return"192.0.2.".concat(g(1,254))},Ze.calculateMD5=function(g){function T(pe,ue){return pe<<ue|pe>>>32-ue}function E(pe,ue){var _e=pe&2147483648,we=ue&2147483648,Ne=pe&1073741824,Qe=ue&1073741824,$e=(pe&1073741823)+(ue&1073741823);return Ne&Qe?$e^2147483648^_e^we:Ne|Qe?$e&1073741824?$e^3221225472^_e^we:$e^1073741824^_e^we:$e^_e^we}function S(pe,ue,_e){return pe&ue|~pe&_e}function A(pe,ue,_e){return pe&_e|ue&~_e}function R(pe,ue,_e){return pe^ue^_e}function C(pe,ue,_e){return ue^(pe|~_e)}function $(pe,ue,_e,we,Ne,Qe,$e){return pe=E(pe,E(E(S(ue,_e,we),Ne),$e)),E(T(pe,Qe),ue)}function L(pe,ue,_e,we,Ne,Qe,$e){return pe=E(pe,E(E(A(ue,_e,we),Ne),$e)),E(T(pe,Qe),ue)}function ne(pe,ue,_e,we,Ne,Qe,$e){return pe=E(pe,E(E(R(ue,_e,we),Ne),$e)),E(T(pe,Qe),ue)}function D(pe,ue,_e,we,Ne,Qe,$e){return pe=E(pe,E(E(C(ue,_e,we),Ne),$e)),E(T(pe,Qe),ue)}function F(pe){for(var ue,_e=pe.length,we=_e+8,Ne=(we-we%64)/64,Qe=(Ne+1)*16,$e=new Array(Qe-1),Lt=0,_t=0;_t<_e;)ue=(_t-_t%4)/4,Lt=_t%4*8,$e[ue]=$e[ue]|pe.charCodeAt(_t)<<Lt,_t++;return ue=(_t-_t%4)/4,Lt=_t%4*8,$e[ue]=$e[ue]|128<<Lt,$e[Qe-2]=_e<<3,$e[Qe-1]=_e>>>29,$e}function Se(pe){var ue="",_e="",we,Ne;for(Ne=0;Ne<=3;Ne++)we=pe>>>Ne*8&255,_e="0".concat(we.toString(16)),ue=ue+_e.substr(_e.length-2,2);return ue}function ve(pe){for(var ue="",_e=0;_e<pe.length;_e++){var we=pe.charCodeAt(_e);we<128?ue+=String.fromCharCode(we):we>127&&we<2048?(ue+=String.fromCharCode(we>>6|192),ue+=String.fromCharCode(we&63|128)):(ue+=String.fromCharCode(we>>12|224),ue+=String.fromCharCode(we>>6&63|128),ue+=String.fromCharCode(we&63|128))}return ue}var M=[],N,q,V,z,H,J,U,P,se,st=7,ee=12,W=17,B=22,ie=5,ge=9,be=14,Me=20,Ce=4,oe=11,ye=16,nt=23,ot=6,Ee=10,Ae=15,Ie=21;for(g=ve(g),M=F(g),J=1732584193,U=4023233417,P=2562383102,se=271733878,N=0;N<M.length;N+=16)q=J,V=U,z=P,H=se,J=$(J,U,P,se,M[N+0],st,3614090360),se=$(se,J,U,P,M[N+1],ee,3905402710),P=$(P,se,J,U,M[N+2],W,606105819),U=$(U,P,se,J,M[N+3],B,3250441966),J=$(J,U,P,se,M[N+4],st,4118548399),se=$(se,J,U,P,M[N+5],ee,1200080426),P=$(P,se,J,U,M[N+6],W,2821735955),U=$(U,P,se,J,M[N+7],B,4249261313),J=$(J,U,P,se,M[N+8],st,1770035416),se=$(se,J,U,P,M[N+9],ee,2336552879),P=$(P,se,J,U,M[N+10],W,4294925233),U=$(U,P,se,J,M[N+11],B,2304563134),J=$(J,U,P,se,M[N+12],st,1804603682),se=$(se,J,U,P,M[N+13],ee,4254626195),P=$(P,se,J,U,M[N+14],W,2792965006),U=$(U,P,se,J,M[N+15],B,1236535329),J=L(J,U,P,se,M[N+1],ie,4129170786),se=L(se,J,U,P,M[N+6],ge,3225465664),P=L(P,se,J,U,M[N+11],be,643717713),U=L(U,P,se,J,M[N+0],Me,3921069994),J=L(J,U,P,se,M[N+5],ie,3593408605),se=L(se,J,U,P,M[N+10],ge,38016083),P=L(P,se,J,U,M[N+15],be,3634488961),U=L(U,P,se,J,M[N+4],Me,3889429448),J=L(J,U,P,se,M[N+9],ie,568446438),se=L(se,J,U,P,M[N+14],ge,3275163606),P=L(P,se,J,U,M[N+3],be,4107603335),U=L(U,P,se,J,M[N+8],Me,1163531501),J=L(J,U,P,se,M[N+13],ie,2850285829),se=L(se,J,U,P,M[N+2],ge,4243563512),P=L(P,se,J,U,M[N+7],be,1735328473),U=L(U,P,se,J,M[N+12],Me,2368359562),J=ne(J,U,P,se,M[N+5],Ce,4294588738),se=ne(se,J,U,P,M[N+8],oe,2272392833),P=ne(P,se,J,U,M[N+11],ye,1839030562),U=ne(U,P,se,J,M[N+14],nt,4259657740),J=ne(J,U,P,se,M[N+1],Ce,2763975236),se=ne(se,J,U,P,M[N+4],oe,1272893353),P=ne(P,se,J,U,M[N+7],ye,4139469664),U=ne(U,P,se,J,M[N+10],nt,3200236656),J=ne(J,U,P,se,M[N+13],Ce,681279174),se=ne(se,J,U,P,M[N+0],oe,3936430074),P=ne(P,se,J,U,M[N+3],ye,3572445317),U=ne(U,P,se,J,M[N+6],nt,76029189),J=ne(J,U,P,se,M[N+9],Ce,3654602809),se=ne(se,J,U,P,M[N+12],oe,3873151461),P=ne(P,se,J,U,M[N+15],ye,530742520),U=ne(U,P,se,J,M[N+2],nt,3299628645),J=D(J,U,P,se,M[N+0],ot,4096336452),se=D(se,J,U,P,M[N+7],Ee,1126891415),P=D(P,se,J,U,M[N+14],Ae,2878612391),U=D(U,P,se,J,M[N+5],Ie,4237533241),J=D(J,U,P,se,M[N+12],ot,1700485571),se=D(se,J,U,P,M[N+3],Ee,2399980690),P=D(P,se,J,U,M[N+10],Ae,4293915773),U=D(U,P,se,J,M[N+1],Ie,2240044497),J=D(J,U,P,se,M[N+8],ot,1873313359),se=D(se,J,U,P,M[N+15],Ee,4264355552),P=D(P,se,J,U,M[N+6],Ae,2734768916),U=D(U,P,se,J,M[N+13],Ie,1309151649),J=D(J,U,P,se,M[N+4],ot,4149444226),se=D(se,J,U,P,M[N+11],Ee,3174756917),P=D(P,se,J,U,M[N+2],Ae,718787259),U=D(U,P,se,J,M[N+9],Ie,3951481745),J=E(J,q),U=E(U,V),P=E(P,z),se=E(se,H);var Oe=Se(J)+Se(U)+Se(P)+Se(se);return Oe.toLowerCase()},Ze.closeMediaStream=function(g){if(g)try{var T;if(g.getTracks){T=g.getTracks();var E=s(T),S;try{for(E.s();!(S=E.n()).done;){var A=S.value;A.stop()}}catch(F){E.e(F)}finally{E.f()}}else{T=g.getAudioTracks();var R=s(T),C;try{for(R.s();!(C=R.n()).done;){var $=C.value;$.stop()}}catch(F){R.e(F)}finally{R.f()}T=g.getVideoTracks();var L=s(T),ne;try{for(L.s();!(ne=L.n()).done;){var D=ne.value;D.stop()}}catch(F){L.e(F)}finally{L.f()}}}catch{(typeof g.stop=="function"||c(g.stop)==="object")&&g.stop()}},Ze.cloneArray=function(g){return g&&g.slice()||[]},Ze.cloneObject=function(g){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return g&&Object.assign({},g)||T},Ze}var Hu={exports:{}},_r=typeof Reflect=="object"?Reflect:null,lc=_r&&typeof _r.apply=="function"?_r.apply:function(s,r,o){return Function.prototype.apply.call(s,r,o)},go;_r&&typeof _r.ownKeys=="function"?go=_r.ownKeys:Object.getOwnPropertySymbols?go=function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:go=function(s){return Object.getOwnPropertyNames(s)};function Rh(c){console&&console.warn&&console.warn(c)}var td=Number.isNaN||function(s){return s!==s};function Le(){Le.init.call(this)}Hu.exports=Le;Hu.exports.once=Oh;Le.EventEmitter=Le;Le.prototype._events=void 0;Le.prototype._eventsCount=0;Le.prototype._maxListeners=void 0;var oc=10;function Go(c){if(typeof c!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}Object.defineProperty(Le,"defaultMaxListeners",{enumerable:!0,get:function(){return oc},set:function(c){if(typeof c!="number"||c<0||td(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");oc=c}});Le.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Le.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||td(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this};function sd(c){return c._maxListeners===void 0?Le.defaultMaxListeners:c._maxListeners}Le.prototype.getMaxListeners=function(){return sd(this)};Le.prototype.emit=function(s){for(var r=[],o=1;o<arguments.length;o++)r.push(arguments[o]);var a=s==="error",t=this._events;if(t!==void 0)a=a&&t.error===void 0;else if(!a)return!1;if(a){var n;if(r.length>0&&(n=r[0]),n instanceof Error)throw n;var p=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw p.context=n,p}var d=t[s];if(d===void 0)return!1;if(typeof d=="function")lc(d,this,r);else for(var h=d.length,g=od(d,h),o=0;o<h;++o)lc(g[o],this,r);return!0};function nd(c,s,r,o){var a,t,n;if(Go(r),t=c._events,t===void 0?(t=c._events=Object.create(null),c._eventsCount=0):(t.newListener!==void 0&&(c.emit("newListener",s,r.listener?r.listener:r),t=c._events),n=t[s]),n===void 0)n=t[s]=r,++c._eventsCount;else if(typeof n=="function"?n=t[s]=o?[r,n]:[n,r]:o?n.unshift(r):n.push(r),a=sd(c),a>0&&n.length>a&&!n.warned){n.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+n.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=c,p.type=s,p.count=n.length,Rh(p)}return c}Le.prototype.addListener=function(s,r){return nd(this,s,r,!1)};Le.prototype.on=Le.prototype.addListener;Le.prototype.prependListener=function(s,r){return nd(this,s,r,!0)};function Ih(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function rd(c,s,r){var o={fired:!1,wrapFn:void 0,target:c,type:s,listener:r},a=Ih.bind(o);return a.listener=r,o.wrapFn=a,a}Le.prototype.once=function(s,r){return Go(r),this.on(s,rd(this,s,r)),this};Le.prototype.prependOnceListener=function(s,r){return Go(r),this.prependListener(s,rd(this,s,r)),this};Le.prototype.removeListener=function(s,r){var o,a,t,n,p;if(Go(r),a=this._events,a===void 0)return this;if(o=a[s],o===void 0)return this;if(o===r||o.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[s],a.removeListener&&this.emit("removeListener",s,o.listener||r));else if(typeof o!="function"){for(t=-1,n=o.length-1;n>=0;n--)if(o[n]===r||o[n].listener===r){p=o[n].listener,t=n;break}if(t<0)return this;t===0?o.shift():bh(o,t),o.length===1&&(a[s]=o[0]),a.removeListener!==void 0&&this.emit("removeListener",s,p||r)}return this};Le.prototype.off=Le.prototype.removeListener;Le.prototype.removeAllListeners=function(s){var r,o,a;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[s]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[s]),this;if(arguments.length===0){var t=Object.keys(o),n;for(a=0;a<t.length;++a)n=t[a],n!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=o[s],typeof r=="function")this.removeListener(s,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(s,r[a]);return this};function id(c,s,r){var o=c._events;if(o===void 0)return[];var a=o[s];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?wh(a):od(a,a.length)}Le.prototype.listeners=function(s){return id(this,s,!0)};Le.prototype.rawListeners=function(s){return id(this,s,!1)};Le.listenerCount=function(c,s){return typeof c.listenerCount=="function"?c.listenerCount(s):ld.call(c,s)};Le.prototype.listenerCount=ld;function ld(c){var s=this._events;if(s!==void 0){var r=s[c];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Le.prototype.eventNames=function(){return this._eventsCount>0?go(this._events):[]};function od(c,s){for(var r=new Array(s),o=0;o<s;++o)r[o]=c[o];return r}function bh(c,s){for(;s+1<c.length;s++)c[s]=c[s+1];c.pop()}function wh(c){for(var s=new Array(c.length),r=0;r<s.length;++r)s[r]=c[r].listener||c[r];return s}function Oh(c,s){return new Promise(function(r,o){function a(n){c.removeListener(s,t),o(n)}function t(){typeof c.removeListener=="function"&&c.removeListener("error",a),r([].slice.call(arguments))}ad(c,s,t,{once:!0}),s!=="error"&&Dh(c,a,{once:!0})})}function Dh(c,s,r){typeof c.on=="function"&&ad(c,"error",s,r)}function ad(c,s,r,o){if(typeof c.on=="function")o.once?c.once(s,r):c.on(s,r);else if(typeof c.addEventListener=="function")c.addEventListener(s,function a(t){o.once&&c.removeEventListener(s,a),r(t)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c)}var dt=Hu.exports,mu={exports:{}},_a,ac;function Nh(){if(ac)return _a;ac=1;var c=1e3,s=c*60,r=s*60,o=r*24,a=o*7,t=o*365.25;_a=function(g,T){T=T||{};var E=typeof g;if(E==="string"&&g.length>0)return n(g);if(E==="number"&&isFinite(g))return T.long?d(g):p(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function n(g){if(g=String(g),!(g.length>100)){var T=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(T){var E=parseFloat(T[1]),S=(T[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return E*t;case"weeks":case"week":case"w":return E*a;case"days":case"day":case"d":return E*o;case"hours":case"hour":case"hrs":case"hr":case"h":return E*r;case"minutes":case"minute":case"mins":case"min":case"m":return E*s;case"seconds":case"second":case"secs":case"sec":case"s":return E*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return E;default:return}}}}function p(g){var T=Math.abs(g);return T>=o?Math.round(g/o)+"d":T>=r?Math.round(g/r)+"h":T>=s?Math.round(g/s)+"m":T>=c?Math.round(g/c)+"s":g+"ms"}function d(g){var T=Math.abs(g);return T>=o?h(g,T,o,"day"):T>=r?h(g,T,r,"hour"):T>=s?h(g,T,s,"minute"):T>=c?h(g,T,c,"second"):g+" ms"}function h(g,T,E,S){var A=T>=E*1.5;return Math.round(g/E)+" "+S+(A?"s":"")}return _a}function Uh(c){r.debug=r,r.default=r,r.coerce=d,r.disable=t,r.enable=a,r.enabled=n,r.humanize=Nh(),r.destroy=h,Object.keys(c).forEach(g=>{r[g]=c[g]}),r.names=[],r.skips=[],r.formatters={};function s(g){let T=0;for(let E=0;E<g.length;E++)T=(T<<5)-T+g.charCodeAt(E),T|=0;return r.colors[Math.abs(T)%r.colors.length]}r.selectColor=s;function r(g){let T,E=null,S,A;function R(...C){if(!R.enabled)return;const $=R,L=Number(new Date),ne=L-(T||L);$.diff=ne,$.prev=T,$.curr=L,T=L,C[0]=r.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let D=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(Se,ve)=>{if(Se==="%%")return"%";D++;const M=r.formatters[ve];if(typeof M=="function"){const N=C[D];Se=M.call($,N),C.splice(D,1),D--}return Se}),r.formatArgs.call($,C),($.log||r.log).apply($,C)}return R.namespace=g,R.useColors=r.useColors(),R.color=r.selectColor(g),R.extend=o,R.destroy=r.destroy,Object.defineProperty(R,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(S!==r.namespaces&&(S=r.namespaces,A=r.enabled(g)),A),set:C=>{E=C}}),typeof r.init=="function"&&r.init(R),R}function o(g,T){const E=r(this.namespace+(typeof T>"u"?":":T)+g);return E.log=this.log,E}function a(g){r.save(g),r.namespaces=g,r.names=[],r.skips=[];let T;const E=(typeof g=="string"?g:"").split(/[\s,]+/),S=E.length;for(T=0;T<S;T++)E[T]&&(g=E[T].replace(/\*/g,".*?"),g[0]==="-"?r.skips.push(new RegExp("^"+g.slice(1)+"$")):r.names.push(new RegExp("^"+g+"$")))}function t(){const g=[...r.names.map(p),...r.skips.map(p).map(T=>"-"+T)].join(",");return r.enable(""),g}function n(g){if(g[g.length-1]==="*")return!0;let T,E;for(T=0,E=r.skips.length;T<E;T++)if(r.skips[T].test(g))return!1;for(T=0,E=r.names.length;T<E;T++)if(r.names[T].test(g))return!0;return!1}function p(g){return g.toString().substring(2,g.toString().length-2).replace(/\.\*\?$/,"*")}function d(g){return g instanceof Error?g.stack||g.message:g}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var Ph=Uh;(function(c,s){s.formatArgs=o,s.save=a,s.load=t,s.useColors=r,s.storage=n(),s.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+c.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;d.splice(1,0,h,"color: inherit");let g=0,T=0;d[0].replace(/%[a-zA-Z%]/g,E=>{E!=="%%"&&(g++,E==="%c"&&(T=g))}),d.splice(T,0,h)}s.log=console.debug||console.log||(()=>{});function a(d){try{d?s.storage.setItem("debug",d):s.storage.removeItem("debug")}catch{}}function t(){let d;try{d=s.storage.getItem("debug")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d={}.DEBUG),d}function n(){try{return localStorage}catch{}}c.exports=Ph(s);const{formatters:p}=c.exports;p.j=function(d){try{return JSON.stringify(d)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}})(mu,mu.exports);var mr=mu.exports;function xh(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function uc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function Mh(c,s,r){return s&&uc(c.prototype,s),r&&uc(c,r),c}var lr=mr,or="JsSIP",ht=function(){function c(s){xh(this,c),s?(this._debug=lr.default("".concat(or,":").concat(s)),this._warn=lr.default("".concat(or,":WARN:").concat(s)),this._error=lr.default("".concat(or,":ERROR:").concat(s))):(this._debug=lr.default(or),this._warn=lr.default("".concat(or,":WARN")),this._error=lr.default("".concat(or,":ERROR"))),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return Mh(c,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),c}(),Pt={},ud={},cd={exports:{}},cc=cd.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(c){return c.encoding?"rtpmap:%d %s/%s/%s":c.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(c){return c.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(c){return c.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(c){return"extmap:%d"+(c.direction?"/%s":"%v")+(c["encrypt-uri"]?" %s":"%v")+" %s"+(c.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(c){return c.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(c){var s="candidate:%s %d %s %d %s %d typ %s";return s+=c.raddr!=null?" raddr %s rport %d":"%v%v",s+=c.tcptype!=null?" tcptype %s":"%v",c.generation!=null&&(s+=" generation %d"),s+=c["network-id"]!=null?" network-id %d":"%v",s+=c["network-cost"]!=null?" network-cost %d":"%v",s}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(c){var s="ssrc:%d";return c.attribute!=null&&(s+=" %s",c.value!=null&&(s+=":%s")),s}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(c){return c.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(c){return c.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(c){return"imageattr:%s %s %s"+(c.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(c){return"simulcast:%s %s"+(c.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(c){return"ts-refclk:%s"+(c.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(c){var s="mediaclk:";return s+=c.id!=null?"id=%s %s":"%v%s",s+=c.mediaClockValue!=null?"=%s":"",s+=c.rateNumerator!=null?" rate=%s":"",s+=c.rateDenominator!=null?"/%s":"",s}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(cc).forEach(function(c){var s=cc[c];s.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})});var fd=cd.exports;(function(c){var s=function(p){return String(Number(p))===p?Number(p):p},r=function(p,d,h,g){if(g&&!h)d[g]=s(p[1]);else for(var T=0;T<h.length;T+=1)p[T+1]!=null&&(d[h[T]]=s(p[T+1]))},o=function(p,d,h){var g=p.name&&p.names;p.push&&!d[p.push]?d[p.push]=[]:g&&!d[p.name]&&(d[p.name]={});var T=p.push?{}:g?d[p.name]:d;r(h.match(p.reg),T,p.names,p.name),p.push&&d[p.push].push(T)},a=fd,t=RegExp.prototype.test.bind(/^([a-z])=(.*)/);c.parse=function(p){var d={},h=[],g=d;return p.split(/(\r\n|\r|\n)/).filter(t).forEach(function(T){var E=T[0],S=T.slice(2);E==="m"&&(h.push({rtp:[],fmtp:[]}),g=h[h.length-1]);for(var A=0;A<(a[E]||[]).length;A+=1){var R=a[E][A];if(R.reg.test(S))return o(R,g,S)}}),d.media=h,d};var n=function(p,d){var h=d.split(/=(.+)/,2);return h.length===2?p[h[0]]=s(h[1]):h.length===1&&d.length>1&&(p[h[0]]=void 0),p};c.parseParams=function(p){return p.split(/;\s?/).reduce(n,{})},c.parseFmtpConfig=c.parseParams,c.parsePayloads=function(p){return p.toString().split(" ").map(Number)},c.parseRemoteCandidates=function(p){for(var d=[],h=p.split(" ").map(s),g=0;g<h.length;g+=3)d.push({component:h[g],ip:h[g+1],port:h[g+2]});return d},c.parseImageAttributes=function(p){return p.split(" ").map(function(d){return d.substring(1,d.length-1).split(",").reduce(n,{})})},c.parseSimulcastStreamList=function(p){return p.split(";").map(function(d){return d.split(",").map(function(h){var g,T=!1;return h[0]!=="~"?g=s(h):(g=s(h.substring(1,h.length)),T=!0),{scid:g,paused:T}})})}})(ud);var pa=fd,kh=/%[sdv%]/g,Lh=function(c){var s=1,r=arguments,o=r.length;return c.replace(kh,function(a){if(s>=o)return a;var t=r[s];switch(s+=1,a){case"%%":return"%";case"%s":return String(t);case"%d":return Number(t);case"%v":return""}})},Oi=function(c,s,r){var o=s.format instanceof Function?s.format(s.push?r:r[s.name]):s.format,a=[c+"="+o];if(s.names)for(var t=0;t<s.names.length;t+=1){var n=s.names[t];s.name?a.push(r[s.name][n]):a.push(r[s.names[t]])}else a.push(r[s.name]);return Lh.apply(null,a)},$h=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Hh=["i","c","b","a"],Fh=function(c,s){s=s||{},c.version==null&&(c.version=0),c.name==null&&(c.name=" "),c.media.forEach(function(t){t.payloads==null&&(t.payloads="")});var r=s.outerOrder||$h,o=s.innerOrder||Hh,a=[];return r.forEach(function(t){pa[t].forEach(function(n){n.name in c&&c[n.name]!=null?a.push(Oi(t,n,c)):n.push in c&&c[n.push]!=null&&c[n.push].forEach(function(p){a.push(Oi(t,n,p))})})}),c.media.forEach(function(t){a.push(Oi("m",pa.m[0],t)),o.forEach(function(n){pa[n].forEach(function(p){p.name in t&&t[p.name]!=null?a.push(Oi(n,p,t)):p.push in t&&t[p.push]!=null&&t[p.push].forEach(function(d){a.push(Oi(n,p,d))})})})}),a.join(`\r
`)+`\r
`},bn=ud,jh=Fh;Pt.write=jh;Pt.parse=bn.parse;Pt.parseParams=bn.parseParams;Pt.parseFmtpConfig=bn.parseFmtpConfig;Pt.parsePayloads=bn.parsePayloads;Pt.parseRemoteCandidates=bn.parseRemoteCandidates;Pt.parseImageAttributes=bn.parseImageAttributes;Pt.parseSimulcastStreamList=bn.parseSimulcastStreamList;function To(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?To=function(r){return typeof r}:To=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},To(c)}function Fu(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&gu(c,s)}function gu(c,s){return gu=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},gu(c,s)}function ju(c){var s=Bh();return function(){var o=Oo(c),a;if(s){var t=Oo(this).constructor;a=Reflect.construct(o,arguments,t)}else a=o.apply(this,arguments);return Vh(this,a)}}function Vh(c,s){return s&&(To(s)==="object"||typeof s=="function")?s:qh(c)}function qh(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Bh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Oo(c){return Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Oo(c)}function Bt(c,s){var r;if(typeof Symbol>"u"||c[Symbol.iterator]==null){if(Array.isArray(c)||(r=Gh(c))||s&&c&&typeof c.length=="number"){r&&(c=r);var o=0,a=function(){};return{s:a,n:function(){return o>=c.length?{done:!0}:{done:!1,value:c[o++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t=!0,n=!1,p;return{s:function(){r=c[Symbol.iterator]()},n:function(){var h=r.next();return t=h.done,h},e:function(h){n=!0,p=h},f:function(){try{!t&&r.return!=null&&r.return()}finally{if(n)throw p}}}}function Gh(c,s){if(c){if(typeof c=="string")return fc(c,s);var r=Object.prototype.toString.call(c).slice(8,-1);if(r==="Object"&&c.constructor&&(r=c.constructor.name),r==="Map"||r==="Set")return Array.from(c);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fc(c,s)}}function fc(c,s){(s==null||s>c.length)&&(s=c.length);for(var r=0,o=new Array(s);r<s;r++)o[r]=c[r];return o}function ll(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function dc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function Wo(c,s,r){return s&&dc(c.prototype,s),r&&dc(c,r),c}var dd=Pt,Wh=ht,Et=lt,rt=It(),hc=$u(),Kh=us(),ma=new Wh("SIPMessage"),hd=function(){function c(s,r,o,a,t,n){if(ll(this,c),!s||!r||!o)return null;a=a||{},this.ua=o,this.headers={},this.method=s,this.ruri=r,this.body=n,this.extraHeaders=rt.cloneArray(t),this.ua.configuration.extra_headers&&(this.extraHeaders=this.extraHeaders.concat(this.ua.configuration.extra_headers)),a.route_set?this.setHeader("route",a.route_set):o.configuration.use_preloaded_route&&this.setHeader("route","<".concat(o.transport.sip_uri,";lr>")),this.setHeader("via",""),this.setHeader("max-forwards",Et.MAX_FORWARDS);var p=a.to_uri||r,d=a.to_tag?{tag:a.to_tag}:null,h=typeof a.to_display_name<"u"?a.to_display_name:null;this.to=new hc(p,h,d),this.setHeader("to",this.to.toString());var g=a.from_uri||o.configuration.uri,T={tag:a.from_tag||rt.newTag()},E;typeof a.from_display_name<"u"?E=a.from_display_name:o.configuration.display_name?E=o.configuration.display_name:E=null,this.from=new hc(g,E,T),this.setHeader("from",this.from.toString());var S=a.call_id||o.configuration.jssip_id+rt.createRandomToken(15);this.call_id=S,this.setHeader("call-id",S);var A=a.cseq||Math.floor(Math.random()*1e4);this.cseq=A,this.setHeader("cseq","".concat(A," ").concat(s))}return Wo(c,[{key:"setHeader",value:function(r,o){for(var a=new RegExp("^\\s*".concat(r,"\\s*:"),"i"),t=0;t<this.extraHeaders.length;t++)a.test(this.extraHeaders[t])&&this.extraHeaders.splice(t,1);this.headers[rt.headerize(r)]=Array.isArray(o)?o:[o]}},{key:"getHeader",value:function(r){var o=this.headers[rt.headerize(r)];if(o){if(o[0])return o[0]}else{var a=new RegExp("^\\s*".concat(r,"\\s*:"),"i"),t=Bt(this.extraHeaders),n;try{for(t.s();!(n=t.n()).done;){var p=n.value;if(a.test(p))return p.substring(p.indexOf(":")+1).trim()}}catch(d){t.e(d)}finally{t.f()}}}},{key:"getHeaders",value:function(r){var o=this.headers[rt.headerize(r)],a=[];if(o){var t=Bt(o),n;try{for(t.s();!(n=t.n()).done;){var p=n.value;a.push(p)}}catch(E){t.e(E)}finally{t.f()}return a}else{var d=new RegExp("^\\s*".concat(r,"\\s*:"),"i"),h=Bt(this.extraHeaders),g;try{for(h.s();!(g=h.n()).done;){var T=g.value;d.test(T)&&a.push(T.substring(T.indexOf(":")+1).trim())}}catch(E){h.e(E)}finally{h.f()}return a}}},{key:"hasHeader",value:function(r){if(this.headers[rt.headerize(r)])return!0;var o=new RegExp("^\\s*".concat(r,"\\s*:"),"i"),a=Bt(this.extraHeaders),t;try{for(a.s();!(t=a.n()).done;){var n=t.value;if(o.test(n))return!0}}catch(p){a.e(p)}finally{a.f()}return!1}},{key:"parseSDP",value:function(r){return!r&&this.sdp?this.sdp:(this.sdp=dd.parse(this.body||""),this.sdp)}},{key:"toString",value:function(){var r="".concat(this.method," ").concat(this.ruri,` SIP/2.0\r
`);for(var o in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,o)){var a=Bt(this.headers[o]),t;try{for(a.s();!(t=a.n()).done;){var n=t.value;r+="".concat(o,": ").concat(n,`\r
`)}}catch(S){a.e(S)}finally{a.f()}}var p=Bt(this.extraHeaders),d;try{for(p.s();!(d=p.n()).done;){var h=d.value;r+="".concat(h.trim(),`\r
`)}}catch(S){p.e(S)}finally{p.f()}var g=[];switch(this.method){case Et.REGISTER:g.push("path","gruu");break;case Et.INVITE:this.ua.configuration.session_timers&&g.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&g.push("gruu"),g.push("ice","replaces");break;case Et.UPDATE:this.ua.configuration.session_timers&&g.push("timer"),g.push("ice");break}g.push("outbound");var T=this.ua.configuration.user_agent||Et.USER_AGENT;if(r+="Allow: ".concat(Et.ALLOWED_METHODS,`\r
`),r+="Supported: ".concat(g,`\r
`),r+="User-Agent: ".concat(T,`\r
`),this.body){var E=rt.str_utf8_length(this.body);r+="Content-Length: ".concat(E,`\r
\r
`),r+=this.body}else r+=`Content-Length: 0\r
\r
`;return r}},{key:"clone",value:function(){var r=new c(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach(function(o){r.headers[o]=this.headers[o].slice()},this),r.body=this.body,r.extraHeaders=rt.cloneArray(this.extraHeaders),r.to=this.to,r.from=this.from,r.call_id=this.call_id,r.cseq=this.cseq,r}}]),c}(),Yh=function(c){Fu(r,c);var s=ju(r);function r(o,a,t,n,p){var d;return ll(this,r),d=s.call(this,Et.INVITE,o,a,t,n,p),d.transaction=null,d}return Wo(r,[{key:"cancel",value:function(a){this.transaction.cancel(a)}},{key:"clone",value:function(){var a=new r(this.ruri,this.ua);return Object.keys(this.headers).forEach(function(t){a.headers[t]=this.headers[t].slice()},this),a.body=this.body,a.extraHeaders=rt.cloneArray(this.extraHeaders),a.to=this.to,a.from=this.from,a.call_id=this.call_id,a.cseq=this.cseq,a.transaction=this.transaction,a}}]),r}(hd),_d=function(){function c(){ll(this,c),this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}return Wo(c,[{key:"addHeader",value:function(r,o){var a={raw:o};r=rt.headerize(r),this.headers[r]?this.headers[r].push(a):this.headers[r]=[a]}},{key:"getHeader",value:function(r){var o=this.headers[rt.headerize(r)];if(o){if(o[0])return o[0].raw}else return}},{key:"getHeaders",value:function(r){var o=this.headers[rt.headerize(r)],a=[];if(!o)return[];var t=Bt(o),n;try{for(t.s();!(n=t.n()).done;){var p=n.value;a.push(p.raw)}}catch(d){t.e(d)}finally{t.f()}return a}},{key:"hasHeader",value:function(r){return!!this.headers[rt.headerize(r)]}},{key:"parseHeader",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(r=rt.headerize(r),this.headers[r]){if(o>=this.headers[r].length){ma.debug('not so many "'.concat(r,'" headers present'));return}}else{ma.debug('header "'.concat(r,'" not present'));return}var a=this.headers[r][o],t=a.raw;if(a.parsed)return a.parsed;var n=Kh.parse(t,r.replace(/-/g,"_"));if(n===-1){this.headers[r].splice(o,1),ma.debug('error parsing "'.concat(r,'" header field with value "').concat(t,'"'));return}else return a.parsed=n,n}},{key:"s",value:function(r,o){return this.parseHeader(r,o)}},{key:"setHeader",value:function(r,o){var a={raw:o};this.headers[rt.headerize(r)]=[a]}},{key:"parseSDP",value:function(r){return!r&&this.sdp?this.sdp:(this.sdp=dd.parse(this.body||""),this.sdp)}},{key:"toString",value:function(){return this.data}}]),c}(),zh=function(c){Fu(r,c);var s=ju(r);function r(o){var a;return ll(this,r),a=s.call(this),a.ua=o,a.headers={},a.ruri=null,a.transport=null,a.server_transaction=null,a}return Wo(r,[{key:"reply",value:function(a,t,n,p,d,h){var g=[],T=this.getHeader("To");if(a=a||null,t=t||null,!a||a<100||a>699)throw new TypeError("Invalid status_code: ".concat(a));if(t&&typeof t!="string"&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(t));t=t||Et.REASON_PHRASE[a]||"",n=rt.cloneArray(n),this.ua.configuration.extra_headers&&(n=n.concat(this.ua.configuration.extra_headers));var E="SIP/2.0 ".concat(a," ").concat(t,`\r
`);if(this.method===Et.INVITE&&a>100&&a<=200){var S=this.getHeaders("record-route"),A=Bt(S),R;try{for(A.s();!(R=A.n()).done;){var C=R.value;E+="Record-Route: ".concat(C,`\r
`)}}catch(N){A.e(N)}finally{A.f()}}var $=this.getHeaders("via"),L=Bt($),ne;try{for(L.s();!(ne=L.n()).done;){var D=ne.value;E+="Via: ".concat(D,`\r
`)}}catch(N){L.e(N)}finally{L.f()}!this.to_tag&&a>100?T+=";tag=".concat(rt.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(T+=";tag=".concat(this.to_tag)),E+="To: ".concat(T,`\r
`),E+="From: ".concat(this.getHeader("From"),`\r
`),E+="Call-ID: ".concat(this.call_id,`\r
`),E+="CSeq: ".concat(this.cseq," ").concat(this.method,`\r
`);var F=Bt(n),Se;try{for(F.s();!(Se=F.n()).done;){var ve=Se.value;E+="".concat(ve.trim(),`\r
`)}}catch(N){F.e(N)}finally{F.f()}switch(this.method){case Et.INVITE:this.ua.configuration.session_timers&&g.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&g.push("gruu"),g.push("ice","replaces");break;case Et.UPDATE:this.ua.configuration.session_timers&&g.push("timer"),p&&g.push("ice"),g.push("replaces")}if(g.push("outbound"),this.method===Et.OPTIONS?(E+="Allow: ".concat(Et.ALLOWED_METHODS,`\r
`),E+="Accept: ".concat(Et.ACCEPTED_BODY_TYPES,`\r
`)):a===405?E+="Allow: ".concat(Et.ALLOWED_METHODS,`\r
`):a===415&&(E+="Accept: ".concat(Et.ACCEPTED_BODY_TYPES,`\r
`)),E+="Supported: ".concat(g,`\r
`),p){var M=rt.str_utf8_length(p);E+=`Content-Type: application/sdp\r
`,E+="Content-Length: ".concat(M,`\r
\r
`),E+=p}else E+="Content-Length: ".concat(0,`\r
\r
`);this.server_transaction.receiveResponse(a,E,d,h)}},{key:"reply_sl",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=this.getHeaders("via");if(!a||a<100||a>699)throw new TypeError("Invalid status_code: ".concat(a));if(t&&typeof t!="string"&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(t));t=t||Et.REASON_PHRASE[a]||"";var p="SIP/2.0 ".concat(a," ").concat(t,`\r
`),d=Bt(n),h;try{for(d.s();!(h=d.n()).done;){var g=h.value;p+="Via: ".concat(g,`\r
`)}}catch(R){d.e(R)}finally{d.f()}var T=this.getHeader("To");if(!this.to_tag&&a>100?T+=";tag=".concat(rt.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(T+=";tag=".concat(this.to_tag)),p+="To: ".concat(T,`\r
`),p+="From: ".concat(this.getHeader("From"),`\r
`),p+="Call-ID: ".concat(this.call_id,`\r
`),p+="CSeq: ".concat(this.cseq," ").concat(this.method,`\r
`),this.ua.configuration.extra_headers){var E=Bt(this.ua.configuration.extra_headers),S;try{for(E.s();!(S=E.n()).done;){var A=S.value;p+="".concat(A.trim(),`\r
`)}}catch(R){E.e(R)}finally{E.f()}}p+="Content-Length: ".concat(0,`\r
\r
`),this.transport.send(p)}}]),r}(_d),Jh=function(c){Fu(r,c);var s=ju(r);function r(){var o;return ll(this,r),o=s.call(this),o.headers={},o.status_code=null,o.reason_phrase=null,o}return r}(_d),As={OutgoingRequest:hd,InitialOutgoingInviteRequest:Yh,IncomingRequest:zh,IncomingResponse:Jh};function Xh(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function _c(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function Qh(c,s,r){return s&&_c(c.prototype,s),r&&_c(c,r),c}var Zh=ht,_s=It(),Kt=new Zh("DigestAuthentication"),e_=function(){function c(s){Xh(this,c),this._credentials=s,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}return Qh(c,[{key:"get",value:function(r){switch(r){case"realm":return this._realm;case"ha1":return this._ha1;default:Kt.warn('get() | cannot get "%s" parameter',r);return}}},{key:"authenticate",value:function(r,o){var a=r.method,t=r.ruri,n=r.body,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(this._algorithm=o.algorithm,this._realm=o.realm,this._nonce=o.nonce,this._opaque=o.opaque,this._stale=o.stale,this._algorithm){if(this._algorithm!=="MD5")return Kt.warn('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return Kt.warn("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return Kt.warn("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return Kt.warn("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return Kt.warn('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(o.qop)if(o.qop.indexOf("auth-int")>-1)this._qop="auth-int";else if(o.qop.indexOf("auth")>-1)this._qop="auth";else return Kt.warn('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;else this._qop=null;this._method=a,this._uri=t,this._cnonce=p||_s.createRandomToken(12),this._nc+=1;var d=Number(this._nc).toString(16);this._ncHex="00000000".substr(0,8-d.length)+d,this._nc===4294967296&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=_s.calculateMD5("".concat(this._credentials.username,":").concat(this._realm,":").concat(this._credentials.password)):this._ha1=this._credentials.ha1;var h,g;return this._qop==="auth"?(h="".concat(this._method,":").concat(this._uri),g=_s.calculateMD5(h),Kt.debug('authenticate() | using qop=auth [a2:"%s"]',h),this._response=_s.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth:").concat(g))):this._qop==="auth-int"?(h="".concat(this._method,":").concat(this._uri,":").concat(_s.calculateMD5(n||"")),g=_s.calculateMD5(h),Kt.debug('authenticate() | using qop=auth-int [a2:"%s"]',h),this._response=_s.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth-int:").concat(g))):this._qop===null&&(h="".concat(this._method,":").concat(this._uri),g=_s.calculateMD5(h),Kt.debug('authenticate() | using qop=null [a2:"%s"]',h),this._response=_s.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(g))),Kt.debug("authenticate() | response generated"),!0}},{key:"toString",value:function(){var r=[];if(!this._response)throw new Error("response field does not exist, cannot generate Authorization header");return r.push("algorithm=".concat(this._algorithm)),r.push('username="'.concat(this._credentials.username,'"')),r.push('realm="'.concat(this._realm,'"')),r.push('nonce="'.concat(this._nonce,'"')),r.push('uri="'.concat(this._uri,'"')),r.push('response="'.concat(this._response,'"')),this._opaque&&r.push('opaque="'.concat(this._opaque,'"')),this._qop&&(r.push("qop=".concat(this._qop)),r.push('cnonce="'.concat(this._cnonce,'"')),r.push("nc=".concat(this._ncHex))),"Digest ".concat(r.join(", "))}}]),c}(),ps=500,t_=4e3,pc=5e3,pd={T1:ps,T2:t_,T4:pc,TIMER_B:64*ps,TIMER_D:0*ps,TIMER_F:64*ps,TIMER_H:64*ps,TIMER_I:0*ps,TIMER_J:0*ps,TIMER_K:0*pc,TIMER_L:64*ps,TIMER_M:64*ps,PROVISIONAL_RESPONSE_INTERVAL:6e4};function vo(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vo=function(r){return typeof r}:vo=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vo(c)}function ol(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function mc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function al(c,s,r){return s&&mc(c.prototype,s),r&&mc(c,r),c}function ul(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&Tu(c,s)}function Tu(c,s){return Tu=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},Tu(c,s)}function cl(c){var s=n_();return function(){var o=Do(c),a;if(s){var t=Do(this).constructor;a=Reflect.construct(o,arguments,t)}else a=o.apply(this,arguments);return s_(this,a)}}function s_(c,s){return s&&(vo(s)==="object"||typeof s=="function")?s:Bs(c)}function Bs(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function n_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Do(c){return Do=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Do(c)}var fl=dt.EventEmitter,dl=ht,Yi=lt,gc=As,os=pd,Tc=new dl("NonInviteClientTransaction"),Fl=new dl("InviteClientTransaction"),r_=new dl("AckClientTransaction"),vc=new dl("NonInviteServerTransaction"),jl=new dl("InviteServerTransaction"),de={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},i_=function(c){ul(r,c);var s=cl(r);function r(o,a,t,n){var p;ol(this,r),p=s.call(this),p.type=de.NON_INVITE_CLIENT,p.id="z9hG4bK".concat(Math.floor(Math.random()*1e7)),p.ua=o,p.transport=a,p.request=t,p.eventHandlers=n;var d="SIP/2.0/".concat(a.via_transport);return d+=" ".concat(o.configuration.via_host,";branch=").concat(p.id),p.request.setHeader("via",d),p.ua.newTransaction(Bs(p)),p}return al(r,[{key:"stateChanged",value:function(a){this.state=a,this.emit("stateChanged")}},{key:"send",value:function(){var a=this;this.stateChanged(de.STATUS_TRYING),this.F=setTimeout(function(){a.timer_F()},os.TIMER_F),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){Tc.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}},{key:"timer_F",value:function(){Tc.debug("Timer F expired for transaction ".concat(this.id)),this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}},{key:"timer_K",value:function(){this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"receiveResponse",value:function(a){var t=this,n=a.status_code;if(n<200)switch(this.state){case de.STATUS_TRYING:case de.STATUS_PROCEEDING:this.stateChanged(de.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(a);break}else switch(this.state){case de.STATUS_TRYING:case de.STATUS_PROCEEDING:this.stateChanged(de.STATUS_COMPLETED),clearTimeout(this.F),n===408?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(a),this.K=setTimeout(function(){t.timer_K()},os.TIMER_K);break;case de.STATUS_COMPLETED:break}}},{key:"C",get:function(){return de}}]),r}(fl),l_=function(c){ul(r,c);var s=cl(r);function r(o,a,t,n){var p;ol(this,r),p=s.call(this),p.type=de.INVITE_CLIENT,p.id="z9hG4bK".concat(Math.floor(Math.random()*1e7)),p.ua=o,p.transport=a,p.request=t,p.eventHandlers=n,t.transaction=Bs(p);var d="SIP/2.0/".concat(a.via_transport);return d+=" ".concat(o.configuration.via_host,";branch=").concat(p.id),p.request.setHeader("via",d),p.ua.newTransaction(Bs(p)),p}return al(r,[{key:"stateChanged",value:function(a){this.state=a,this.emit("stateChanged")}},{key:"send",value:function(){var a=this;this.stateChanged(de.STATUS_CALLING),this.B=setTimeout(function(){a.timer_B()},os.TIMER_B),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==de.STATUS_ACCEPTED&&(Fl.debug("transport error occurred, deleting transaction ".concat(this.id)),this.eventHandlers.onTransportError()),this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_M",value:function(){Fl.debug("Timer M expired for transaction ".concat(this.id)),this.state===de.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"timer_B",value:function(){Fl.debug("Timer B expired for transaction ".concat(this.id)),this.state===de.STATUS_CALLING&&(this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}},{key:"timer_D",value:function(){Fl.debug("Timer D expired for transaction ".concat(this.id)),clearTimeout(this.B),this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"sendACK",value:function(a){var t=this,n=new gc.OutgoingRequest(Yi.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});n.setHeader("from",this.request.getHeader("from")),n.setHeader("via",this.request.getHeader("via")),n.setHeader("to",a.getHeader("to")),this.D=setTimeout(function(){t.timer_D()},os.TIMER_D),this.transport.send(n)}},{key:"cancel",value:function(a){if(this.state===de.STATUS_PROCEEDING){var t=new gc.OutgoingRequest(Yi.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});t.setHeader("from",this.request.getHeader("from")),t.setHeader("via",this.request.getHeader("via")),t.setHeader("to",this.request.getHeader("to")),a&&t.setHeader("reason",a),this.transport.send(t)}}},{key:"receiveResponse",value:function(a){var t=this,n=a.status_code;if(n>=100&&n<=199)switch(this.state){case de.STATUS_CALLING:this.stateChanged(de.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(a);break;case de.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(a);break}else if(n>=200&&n<=299)switch(this.state){case de.STATUS_CALLING:case de.STATUS_PROCEEDING:this.stateChanged(de.STATUS_ACCEPTED),this.M=setTimeout(function(){t.timer_M()},os.TIMER_M),this.eventHandlers.onReceiveResponse(a);break;case de.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(a);break}else if(n>=300&&n<=699)switch(this.state){case de.STATUS_CALLING:case de.STATUS_PROCEEDING:this.stateChanged(de.STATUS_COMPLETED),this.sendACK(a),this.eventHandlers.onReceiveResponse(a);break;case de.STATUS_COMPLETED:this.sendACK(a);break}}},{key:"C",get:function(){return de}}]),r}(fl),o_=function(c){ul(r,c);var s=cl(r);function r(o,a,t,n){var p;ol(this,r),p=s.call(this),p.id="z9hG4bK".concat(Math.floor(Math.random()*1e7)),p.transport=a,p.request=t,p.eventHandlers=n;var d="SIP/2.0/".concat(a.via_transport);return d+=" ".concat(o.configuration.via_host,";branch=").concat(p.id),p.request.setHeader("via",d),p}return al(r,[{key:"send",value:function(){this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){r_.debug("transport error occurred for transaction ".concat(this.id)),this.eventHandlers.onTransportError()}},{key:"C",get:function(){return de}}]),r}(fl),a_=function(c){ul(r,c);var s=cl(r);function r(o,a,t){var n;return ol(this,r),n=s.call(this),n.type=de.NON_INVITE_SERVER,n.id=t.via_branch,n.ua=o,n.transport=a,n.request=t,n.last_response="",t.server_transaction=Bs(n),n.state=de.STATUS_TRYING,o.newTransaction(Bs(n)),n}return al(r,[{key:"stateChanged",value:function(a){this.state=a,this.emit("stateChanged")}},{key:"timer_J",value:function(){vc.debug("Timer J expired for transaction ".concat(this.id)),this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,vc.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.J),this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"receiveResponse",value:function(a,t,n,p){var d=this;if(a===100)switch(this.state){case de.STATUS_TRYING:this.stateChanged(de.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case de.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),p&&p());break}else if(a>=200&&a<=699)switch(this.state){case de.STATUS_TRYING:case de.STATUS_PROCEEDING:this.stateChanged(de.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout(function(){d.timer_J()},os.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),p&&p());break;case de.STATUS_COMPLETED:break}}},{key:"C",get:function(){return de}}]),r}(fl),u_=function(c){ul(r,c);var s=cl(r);function r(o,a,t){var n;return ol(this,r),n=s.call(this),n.type=de.INVITE_SERVER,n.id=t.via_branch,n.ua=o,n.transport=a,n.request=t,n.last_response="",t.server_transaction=Bs(n),n.state=de.STATUS_PROCEEDING,o.newTransaction(Bs(n)),n.resendProvisionalTimer=null,t.reply(100),n}return al(r,[{key:"stateChanged",value:function(a){this.state=a,this.emit("stateChanged")}},{key:"timer_H",value:function(){jl.debug("Timer H expired for transaction ".concat(this.id)),this.state===de.STATUS_COMPLETED&&jl.debug("ACK not received, dialog will be terminated"),this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_I",value:function(){this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_L",value:function(){jl.debug("Timer L expired for transaction ".concat(this.id)),this.state===de.STATUS_ACCEPTED&&(this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,jl.debug("transport error occurred, deleting transaction ".concat(this.id)),this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(de.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"resend_provisional",value:function(){this.transport.send(this.last_response)||this.onTransportError()}},{key:"receiveResponse",value:function(a,t,n,p){var d=this;if(a>=100&&a<=199)switch(this.state){case de.STATUS_PROCEEDING:this.transport.send(t)||this.onTransportError(),this.last_response=t;break}if(a>100&&a<=199&&this.state===de.STATUS_PROCEEDING)this.resendProvisionalTimer===null&&(this.resendProvisionalTimer=setInterval(function(){d.resend_provisional()},os.PROVISIONAL_RESPONSE_INTERVAL));else if(a>=200&&a<=299)switch(this.state){case de.STATUS_PROCEEDING:this.stateChanged(de.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout(function(){d.timer_L()},os.TIMER_L),this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case de.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),p&&p());break}else if(a>=300&&a<=699)switch(this.state){case de.STATUS_PROCEEDING:this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(de.STATUS_COMPLETED),this.H=setTimeout(function(){d.timer_H()},os.TIMER_H),n&&n()):(this.onTransportError(),p&&p());break}}},{key:"C",get:function(){return de}}]),r}(fl);function c_(c,s){var r=c._transactions,o;switch(s.method){case Yi.INVITE:if(o=r.ist[s.via_branch],o){switch(o.state){case de.STATUS_PROCEEDING:o.transport.send(o.last_response);break;case de.STATUS_ACCEPTED:break}return!0}break;case Yi.ACK:if(o=r.ist[s.via_branch],o){if(o.state===de.STATUS_ACCEPTED)return!1;if(o.state===de.STATUS_COMPLETED)return o.state=de.STATUS_CONFIRMED,o.I=setTimeout(function(){o.timer_I()},os.TIMER_I),!0}else return!1;break;case Yi.CANCEL:return o=r.ist[s.via_branch],o?(s.reply_sl(200),o.state!==de.STATUS_PROCEEDING):(s.reply_sl(481),!0);default:if(o=r.nist[s.via_branch],o){switch(o.state){case de.STATUS_TRYING:break;case de.STATUS_PROCEEDING:case de.STATUS_COMPLETED:o.transport.send(o.last_response);break}return!0}break}}var hl={C:de,NonInviteClientTransaction:i_,InviteClientTransaction:l_,AckClientTransaction:o_,NonInviteServerTransaction:a_,InviteServerTransaction:u_,checkTransaction:c_};function f_(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function Ec(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function d_(c,s,r){return s&&Ec(c.prototype,s),r&&Ec(c,r),c}var h_=ht,Sc=lt,__=e_,ga=hl,p_=new h_("RequestSender"),Ta={onRequestTimeout:function(){},onTransportError:function(){},onReceiveResponse:function(){},onAuthenticated:function(){}},_l=function(){function c(s,r,o){f_(this,c),this._ua=s,this._eventHandlers=o,this._method=r.method,this._request=r,this._auth=null,this._challenged=!1,this._staled=!1;for(var a in Ta)Object.prototype.hasOwnProperty.call(Ta,a)&&(this._eventHandlers[a]||(this._eventHandlers[a]=Ta[a]));s.status===s.C.STATUS_USER_CLOSED&&(this._method!==Sc.BYE||this._method!==Sc.ACK)&&this._eventHandlers.onTransportError()}return d_(c,[{key:"send",value:function(){var r=this,o={onRequestTimeout:function(){r._eventHandlers.onRequestTimeout()},onTransportError:function(){r._eventHandlers.onTransportError()},onReceiveResponse:function(t){r._receiveResponse(t)}};switch(this._method){case"INVITE":this.clientTransaction=new ga.InviteClientTransaction(this._ua,this._ua.transport,this._request,o);break;case"ACK":this.clientTransaction=new ga.AckClientTransaction(this._ua,this._ua.transport,this._request,o);break;default:this.clientTransaction=new ga.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,o)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}},{key:"_receiveResponse",value:function(r){var o,a,t=r.status_code;if((t===401||t===407)&&(this._ua.configuration.password!==null||this._ua.configuration.ha1!==null)){if(r.status_code===401?(o=r.parseHeader("www-authenticate"),a="authorization"):(o=r.parseHeader("proxy-authenticate"),a="proxy-authorization"),!o){p_.debug("".concat(r.status_code," with wrong or missing challenge, cannot authenticate")),this._eventHandlers.onReceiveResponse(r);return}if(!this._challenged||!this._staled&&o.stale===!0){if(this._auth||(this._auth=new __({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),!this._auth.authenticate(this._request,o)){this._eventHandlers.onReceiveResponse(r);return}this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),o.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq","".concat(this._request.cseq," ").concat(this._method)),this._request.setHeader(a,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()}else this._eventHandlers.onReceiveResponse(r)}else this._eventHandlers.onReceiveResponse(r)}}]),c}();function m_(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function yc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function g_(c,s,r){return s&&yc(c.prototype,s),r&&yc(c,r),c}var T_=ht,va=It(),pn=lt,Ac=As,Cc=_l,Di=new T_("Registrator"),Vl=10,v_=function(){function c(s,r){m_(this,c),this._reg_id=1,this._ua=s,this._transport=r,this._registrar=s.configuration.registrar_server,this._expires=s.configuration.register_expires,this._call_id=va.createRandomToken(22),this._cseq=0,this._to_uri=s.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=";+sip.ice",this._extraHeaders=[],this._extraContactParams="",this._sipInstance='"<urn:uuid:'.concat(this._ua.configuration.instance_id,'>"'),this._contact+=";reg-id=".concat(this._reg_id),this._contact+=";+sip.instance=".concat(this._sipInstance)}return g_(c,[{key:"setExtraHeaders",value:function(r){Array.isArray(r)||(r=[]),this._extraHeaders=r.slice()}},{key:"setExtraContactParams",value:function(r){r instanceof Object||(r={}),this._extraContactParams="";for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var a=r[o];this._extraContactParams+=";".concat(o),a&&(this._extraContactParams+="=".concat(a))}}},{key:"register",value:function(){var r=this;if(this._registering){Di.debug("Register request in progress...");return}var o=this._extraHeaders.slice();o.push("Contact: ".concat(this._contact,";expires=").concat(this._expires).concat(this._extraContactParams)),o.push("Expires: ".concat(this._expires));var a=new Ac.OutgoingRequest(pn.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},o),t=new Cc(this._ua,a,{onRequestTimeout:function(){r._registrationFailure(null,pn.causes.REQUEST_TIMEOUT)},onTransportError:function(){r._registrationFailure(null,pn.causes.CONNECTION_ERROR)},onAuthenticated:function(){r._cseq+=1},onReceiveResponse:function(p){if(p.cseq===r._cseq)switch(r._registrationTimer!==null&&(clearTimeout(r._registrationTimer),r._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(p.status_code):break;case/^2[0-9]{2}$/.test(p.status_code):{if(r._registering=!1,!p.hasHeader("Contact")){Di.debug("no Contact header in response to REGISTER, response ignored");break}var d=p.headers.Contact.reduce(function(S,A){return S.concat(A.parsed)},[]),h=d.find(function(S){return r._sipInstance===S.getParam("+sip.instance")&&r._reg_id===parseInt(S.getParam("reg-id"))});if(h||(h=d.find(function(S){return S.uri.user===r._ua.contact.uri.user})),!h){Di.debug("no Contact header pointing to us, response ignored");break}var g=h.getParam("expires");!g&&p.hasHeader("expires")&&(g=p.getHeader("expires")),g||(g=r._expires),g=Number(g),g<Vl&&(g=Vl);var T=g>64?g*1e3/2+Math.floor((g/2-32)*1e3*Math.random()):g*1e3-5e3;r._registrationTimer=setTimeout(function(){r._registrationTimer=null,r._ua.listeners("registrationExpiring").length===0?r.register():r._ua.emit("registrationExpiring")},T),h.hasParam("temp-gruu")&&(r._ua.contact.temp_gruu=h.getParam("temp-gruu").replace(/"/g,"")),h.hasParam("pub-gruu")&&(r._ua.contact.pub_gruu=h.getParam("pub-gruu").replace(/"/g,"")),r._registered||(r._registered=!0,r._ua.registered({response:p}));break}case/^423$/.test(p.status_code):{p.hasHeader("min-expires")?(r._expires=Number(p.getHeader("min-expires")),r._expires<Vl&&(r._expires=Vl),r.register()):(Di.debug("423 response received for REGISTER without Min-Expires"),r._registrationFailure(p,pn.causes.SIP_FAILURE_CODE));break}default:{var E=va.sipErrorCause(p.status_code);r._registrationFailure(p,E)}}}});this._registering=!0,t.send()}},{key:"unregister",value:function(){var r=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._registered){Di.debug("already unregistered");return}this._registered=!1,this._registrationTimer!==null&&(clearTimeout(this._registrationTimer),this._registrationTimer=null);var a=this._extraHeaders.slice();o.all?a.push("Contact: *".concat(this._extraContactParams)):a.push("Contact: ".concat(this._contact,";expires=0").concat(this._extraContactParams)),a.push("Expires: 0");var t=new Ac.OutgoingRequest(pn.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},a),n=new Cc(this._ua,t,{onRequestTimeout:function(){r._unregistered(null,pn.causes.REQUEST_TIMEOUT)},onTransportError:function(){r._unregistered(null,pn.causes.CONNECTION_ERROR)},onAuthenticated:function(){r._cseq+=1},onReceiveResponse:function(d){switch(!0){case/^1[0-9]{2}$/.test(d.status_code):break;case/^2[0-9]{2}$/.test(d.status_code):r._unregistered(d);break;default:{var h=va.sipErrorCause(d.status_code);r._unregistered(d,h)}}}});n.send()}},{key:"close",value:function(){this._registered&&this.unregister()}},{key:"onTransportClosed",value:function(){this._registering=!1,this._registrationTimer!==null&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}},{key:"_registrationFailure",value:function(r,o){this._registering=!1,this._ua.registrationFailed({response:r||null,cause:o}),this._registered&&(this._registered=!1,this._ua.unregistered({response:r||null,cause:o}))}},{key:"_unregistered",value:function(r,o){this._registering=!1,this._registered=!1,this._ua.unregistered({response:r||null,cause:o||null})}},{key:"registered",get:function(){return this._registered}}]),c}();function E_(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function Rc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function S_(c,s,r){return s&&Rc(c.prototype,s),r&&Rc(c,r),c}var Ea=lt,ql=hl,y_=_l,Sa={onRequestTimeout:function(){},onTransportError:function(){},onSuccessResponse:function(){},onErrorResponse:function(){},onAuthenticated:function(){},onDialogError:function(){}},A_=function(){function c(s,r,o){E_(this,c),this._dialog=s,this._ua=s._ua,this._request=r,this._eventHandlers=o,this._reattempt=!1,this._reattemptTimer=null;for(var a in Sa)Object.prototype.hasOwnProperty.call(Sa,a)&&(this._eventHandlers[a]||(this._eventHandlers[a]=Sa[a]))}return S_(c,[{key:"send",value:function(){var r=this,o=new y_(this._ua,this._request,{onRequestTimeout:function(){r._eventHandlers.onRequestTimeout()},onTransportError:function(){r._eventHandlers.onTransportError()},onAuthenticated:function(n){r._eventHandlers.onAuthenticated(n)},onReceiveResponse:function(n){r._receiveResponse(n)}});if(o.send(),(this._request.method===Ea.INVITE||this._request.method===Ea.UPDATE&&this._request.body)&&o.clientTransaction.state!==ql.C.STATUS_TERMINATED){this._dialog.uac_pending_reply=!0;var a=function t(){(o.clientTransaction.state===ql.C.STATUS_ACCEPTED||o.clientTransaction.state===ql.C.STATUS_COMPLETED||o.clientTransaction.state===ql.C.STATUS_TERMINATED)&&(o.clientTransaction.removeListener("stateChanged",t),r._dialog.uac_pending_reply=!1)};o.clientTransaction.on("stateChanged",a)}}},{key:"_receiveResponse",value:function(r){var o=this;r.status_code===408||r.status_code===481?this._eventHandlers.onDialogError(r):r.method===Ea.INVITE&&r.status_code===491?this._reattempt?r.status_code>=200&&r.status_code<300?this._eventHandlers.onSuccessResponse(r):r.status_code>=300&&this._eventHandlers.onErrorResponse(r):(this._request.cseq=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout(function(){o._dialog.isTerminated()||(o._reattempt=!0,o.send())},1e3)):r.status_code>=200&&r.status_code<300?this._eventHandlers.onSuccessResponse(r):r.status_code>=300&&this._eventHandlers.onErrorResponse(r)}},{key:"request",get:function(){return this._request}}]),c}();function C_(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function Ic(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function bc(c,s,r){return s&&Ic(c.prototype,s),r&&Ic(c,r),c}var R_=ht,wc=As,$s=lt,Ni=hl,I_=A_,ya=It(),Aa=new R_("Dialog"),Hs={STATUS_EARLY:1,STATUS_CONFIRMED:2,STATUS_TERMINATED:3},b_=function(){bc(c,null,[{key:"C",get:function(){return Hs}}]);function c(s,r,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Hs.STATUS_CONFIRMED;if(C_(this,c),this._owner=s,this._ua=s._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!r.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};r instanceof wc.IncomingResponse&&(a=r.status_code<200?Hs.STATUS_EARLY:Hs.STATUS_CONFIRMED);var t=r.parseHeader("contact");o==="UAS"?(this._id={call_id:r.call_id,local_tag:r.to_tag,remote_tag:r.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=a,this._remote_seqnum=r.cseq,this._local_uri=r.parseHeader("to").uri,this._remote_uri=r.parseHeader("from").uri,this._remote_target=t.uri,this._route_set=r.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):o==="UAC"&&(this._id={call_id:r.call_id,local_tag:r.from_tag,remote_tag:r.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=a,this._local_seqnum=r.cseq,this._local_uri=r.parseHeader("from").uri,this._remote_uri=r.parseHeader("to").uri,this._remote_target=t.uri,this._route_set=r.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),Aa.debug("new ".concat(o," dialog created with status ").concat(this._state===Hs.STATUS_EARLY?"EARLY":"CONFIRMED"))}return bc(c,[{key:"isTerminated",value:function(){return this._status===Hs.STATUS_TERMINATED}},{key:"update",value:function(r,o){this._state=Hs.STATUS_CONFIRMED,Aa.debug("dialog ".concat(this._id.toString(),"  changed to CONFIRMED state")),o==="UAC"&&(this._route_set=r.getHeaders("record-route").reverse())}},{key:"terminate",value:function(){Aa.debug("dialog ".concat(this._id.toString()," deleted")),this._ua.destroyDialog(this),this._state=Hs.STATUS_TERMINATED}},{key:"sendRequest",value:function(r){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=ya.cloneArray(a.extraHeaders),n=ya.cloneObject(a.eventHandlers),p=a.body||null,d=this._createRequest(r,t,p);n.onAuthenticated=function(){o._local_seqnum+=1};var h=new I_(this,d,n);return h.send(),d}},{key:"receiveRequest",value:function(r){this._checkInDialogRequest(r)&&(r.method===$s.ACK&&this._ack_seqnum!==null?this._ack_seqnum=null:r.method===$s.INVITE&&(this._ack_seqnum=r.cseq),this._owner.receiveRequest(r))}},{key:"_createRequest",value:function(r,o,a){o=ya.cloneArray(o),this._local_seqnum||(this._local_seqnum=Math.floor(Math.random()*1e4));var t=r===$s.CANCEL||r===$s.ACK?this._local_seqnum:this._local_seqnum+=1,n=new wc.OutgoingRequest(r,this._remote_target,this._ua,{cseq:t,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},o,a);return n}},{key:"_checkInDialogRequest",value:function(r){var o=this;if(!this._remote_seqnum)this._remote_seqnum=r.cseq;else if(r.cseq<this._remote_seqnum)if(r.method===$s.ACK){if(this._ack_seqnum===null||r.cseq!==this._ack_seqnum)return!1}else return r.reply(500),!1;else r.cseq>this._remote_seqnum&&(this._remote_seqnum=r.cseq);if(r.method===$s.INVITE||r.method===$s.UPDATE&&r.body){if(this._uac_pending_reply===!0)r.reply(491);else if(this._uas_pending_reply===!0){var a=(Math.random()*10|0)+1;return r.reply(500,null,["Retry-After:".concat(a)]),!1}else{this._uas_pending_reply=!0;var t=function n(){(r.server_transaction.state===Ni.C.STATUS_ACCEPTED||r.server_transaction.state===Ni.C.STATUS_COMPLETED||r.server_transaction.state===Ni.C.STATUS_TERMINATED)&&(r.server_transaction.removeListener("stateChanged",n),o._uas_pending_reply=!1)};r.server_transaction.on("stateChanged",t)}r.hasHeader("contact")&&r.server_transaction.on("stateChanged",function(){r.server_transaction.state===Ni.C.STATUS_ACCEPTED&&(o._remote_target=r.parseHeader("contact").uri)})}else r.method===$s.NOTIFY&&r.hasHeader("contact")&&r.server_transaction.on("stateChanged",function(){r.server_transaction.state===Ni.C.STATUS_COMPLETED&&(o._remote_target=r.parseHeader("contact").uri)});return!0}},{key:"id",get:function(){return this._id}},{key:"local_seqnum",get:function(){return this._local_seqnum},set:function(r){this._local_seqnum=r}},{key:"owner",get:function(){return this._owner}},{key:"uac_pending_reply",get:function(){return this._uac_pending_reply},set:function(r){this._uac_pending_reply=r}},{key:"uas_pending_reply",get:function(){return this._uas_pending_reply}}]),c}(),Vu={exports:{}};function Eo(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Eo=function(r){return typeof r}:Eo=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Eo(c)}function w_(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function Oc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function O_(c,s,r){return s&&Oc(c.prototype,s),r&&Oc(c,r),c}function D_(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&vu(c,s)}function vu(c,s){return vu=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},vu(c,s)}function N_(c){var s=x_();return function(){var o=No(c),a;if(s){var t=No(this).constructor;a=Reflect.construct(o,arguments,t)}else a=o.apply(this,arguments);return U_(this,a)}}function U_(c,s){return s&&(Eo(s)==="object"||typeof s=="function")?s:P_(c)}function P_(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function x_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function No(c){return No=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},No(c)}var M_=dt.EventEmitter,k_=ht,L_=lt,$_=Ws,Dc=It(),H_=new k_("RTCSession:DTMF"),md={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};Vu.exports=function(c){D_(r,c);var s=N_(r);function r(o){var a;return w_(this,r),a=s.call(this),a._session=o,a._direction=null,a._tone=null,a._duration=null,a._request=null,a}return O_(r,[{key:"send",value:function(a){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a===void 0)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new $_.InvalidStateError(this._session.status);var p=Dc.cloneArray(n.extraHeaders);if(this.eventHandlers=Dc.cloneObject(n.eventHandlers),typeof a=="string")a=a.toUpperCase();else if(typeof a=="number")a=a.toString();else throw new TypeError("Invalid tone: ".concat(a));if(a.match(/^[0-9A-DR#*]$/))this._tone=a;else throw new TypeError("Invalid tone: ".concat(a));this._duration=n.duration,p.push("Content-Type: application/dtmf-relay");var d="Signal=".concat(this._tone,`\r
`);d+="Duration=".concat(this._duration),this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(L_.INFO,{extraHeaders:p,eventHandlers:{onSuccessResponse:function(g){t.emit("succeeded",{originator:"remote",response:g})},onErrorResponse:function(g){t.eventHandlers.onFailed&&t.eventHandlers.onFailed(),t.emit("failed",{originator:"remote",response:g})},onRequestTimeout:function(){t._session.onRequestTimeout()},onTransportError:function(){t._session.onTransportError()},onDialogError:function(){t._session.onDialogError()}},body:d})}},{key:"init_incoming",value:function(a){var t=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,n=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;if(this._direction="incoming",this._request=a,a.reply(200),a.body){var p=a.body.split(`
`);p.length>=1&&t.test(p[0])&&(this._tone=p[0].replace(t,"$2")),p.length>=2&&n.test(p[1])&&(this._duration=parseInt(p[1].replace(n,"$2"),10))}this._duration||(this._duration=md.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:a}):H_.debug("invalid INFO DTMF received, discarded")}},{key:"tone",get:function(){return this._tone}},{key:"duration",get:function(){return this._duration}}]),r}(M_);Vu.exports.C=md;var F_=Vu.exports;function So(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?So=function(r){return typeof r}:So=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},So(c)}function j_(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function Nc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function V_(c,s,r){return s&&Nc(c.prototype,s),r&&Nc(c,r),c}function q_(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&Eu(c,s)}function Eu(c,s){return Eu=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},Eu(c,s)}function B_(c){var s=K_();return function(){var o=Uo(c),a;if(s){var t=Uo(this).constructor;a=Reflect.construct(o,arguments,t)}else a=o.apply(this,arguments);return G_(this,a)}}function G_(c,s){return s&&(So(s)==="object"||typeof s=="function")?s:W_(c)}function W_(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function K_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Uo(c){return Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Uo(c)}var Y_=dt.EventEmitter,z_=lt,J_=Ws,X_=It(),Q_=function(c){q_(r,c);var s=B_(r);function r(o){var a;return j_(this,r),a=s.call(this),a._session=o,a._direction=null,a._contentType=null,a._body=null,a}return V_(r,[{key:"send",value:function(a,t){var n=this,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this._direction="outgoing",a===void 0)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new J_.InvalidStateError(this._session.status);this._contentType=a,this._body=t;var d=X_.cloneArray(p.extraHeaders);d.push("Content-Type: ".concat(a)),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(z_.INFO,{extraHeaders:d,eventHandlers:{onSuccessResponse:function(g){n.emit("succeeded",{originator:"remote",response:g})},onErrorResponse:function(g){n.emit("failed",{originator:"remote",response:g})},onTransportError:function(){n._session.onTransportError()},onRequestTimeout:function(){n._session.onRequestTimeout()},onDialogError:function(){n._session.onDialogError()}},body:t})}},{key:"init_incoming",value:function(a){this._direction="incoming",this.request=a,a.reply(200),this._contentType=a.hasHeader("Content-Type")?a.getHeader("Content-Type").toLowerCase():void 0,this._body=a.body,this._session.newInfo({originator:"remote",info:this,request:a})}},{key:"contentType",get:function(){return this._contentType}},{key:"body",get:function(){return this._body}}]),r}(Y_);function Z_(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function Uc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function ep(c,s,r){return s&&Uc(c.prototype,s),r&&Uc(c,r),c}var tp=ht,Pc=lt,sp=new tp("RTCSession:ReferNotifier"),Ca={event_type:"refer",body_type:"message/sipfrag;version=2.0",expires:300},np=function(){function c(s,r,o){Z_(this,c),this._session=s,this._id=r,this._expires=o||Ca.expires,this._active=!0,this.notify(100)}return ep(c,[{key:"notify",value:function(r,o){if(sp.debug("notify()"),this._active!==!1){o=o||Pc.REASON_PHRASE[r]||"";var a;r>=200?a="terminated;reason=noresource":a="active;expires=".concat(this._expires),this._session.sendRequest(Pc.NOTIFY,{extraHeaders:["Event: ".concat(Ca.event_type,";id=").concat(this._id),"Subscription-State: ".concat(a),"Content-Type: ".concat(Ca.body_type)],body:"SIP/2.0 ".concat(r," ").concat(o),eventHandlers:{onErrorResponse:function(){this._active=!1}}})}}}]),c}();function yo(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yo=function(r){return typeof r}:yo=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},yo(c)}function rp(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function xc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function ip(c,s,r){return s&&xc(c.prototype,s),r&&xc(c,r),c}function lp(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&Su(c,s)}function Su(c,s){return Su=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},Su(c,s)}function op(c){var s=cp();return function(){var o=Po(c),a;if(s){var t=Po(this).constructor;a=Reflect.construct(o,arguments,t)}else a=o.apply(this,arguments);return ap(this,a)}}function ap(c,s){return s&&(yo(s)==="object"||typeof s=="function")?s:up(c)}function up(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function cp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Po(c){return Po=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Po(c)}var fp=dt.EventEmitter,dp=ht,Ui=lt,hp=us(),Mc=It(),mn=new dp("RTCSession:ReferSubscriber"),_p=function(c){lp(r,c);var s=op(r);function r(o){var a;return rp(this,r),a=s.call(this),a._id=null,a._session=o,a}return ip(r,[{key:"sendRefer",value:function(a){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};mn.debug("sendRefer()");var p=Mc.cloneArray(n.extraHeaders),d=Mc.cloneObject(n.eventHandlers);for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&this.on(h,d[h]);var g=null;n.replaces&&(g=n.replaces._request.call_id,g+=";to-tag=".concat(n.replaces._to_tag),g+=";from-tag=".concat(n.replaces._from_tag),g=encodeURIComponent(g));var T="Refer-To: <".concat(a).concat(g?"?Replaces=".concat(g):"",">");if(p.push(T),!p.some(function(A){return A.toLowerCase().startsWith("referred-by:")})){var E="Referred-By: <".concat(this._session._ua._configuration.uri._scheme,":").concat(this._session._ua._configuration.uri._user,"@").concat(this._session._ua._configuration.uri._host,">");p.push(E)}p.push("Contact: ".concat(this._session.contact));var S=this._session.sendRequest(Ui.REFER,{extraHeaders:p,eventHandlers:{onSuccessResponse:function(R){t._requestSucceeded(R)},onErrorResponse:function(R){t._requestFailed(R,Ui.causes.REJECTED)},onTransportError:function(){t._requestFailed(null,Ui.causes.CONNECTION_ERROR)},onRequestTimeout:function(){t._requestFailed(null,Ui.causes.REQUEST_TIMEOUT)},onDialogError:function(){t._requestFailed(null,Ui.causes.DIALOG_ERROR)}}});this._id=S.cseq}},{key:"receiveNotify",value:function(a){if(mn.debug("receiveNotify()"),!!a.body){var t=hp.parse(a.body.trim().split(`\r
`,1)[0],"Status_Line");if(t===-1){mn.debug('receiveNotify() | error parsing NOTIFY body: "'.concat(a.body,'"'));return}switch(!0){case/^100$/.test(t.status_code):this.emit("trying",{request:a,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",{request:a,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("accepted",{request:a,status_line:t});break;default:this.emit("failed",{request:a,status_line:t});break}}}},{key:"_requestSucceeded",value:function(a){mn.debug("REFER succeeded"),mn.debug('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:a})}},{key:"_requestFailed",value:function(a,t){mn.debug("REFER failed"),mn.debug('emit "requestFailed"'),this.emit("requestFailed",{response:a||null,cause:t})}},{key:"id",get:function(){return this._id}}]),r}(fp);function Ao(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ao=function(r){return typeof r}:Ao=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ao(c)}function ms(c,s){var r;if(typeof Symbol>"u"||c[Symbol.iterator]==null){if(Array.isArray(c)||(r=pp(c))||s&&c&&typeof c.length=="number"){r&&(c=r);var o=0,a=function(){};return{s:a,n:function(){return o>=c.length?{done:!0}:{done:!1,value:c[o++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t=!0,n=!1,p;return{s:function(){r=c[Symbol.iterator]()},n:function(){var h=r.next();return t=h.done,h},e:function(h){n=!0,p=h},f:function(){try{!t&&r.return!=null&&r.return()}finally{if(n)throw p}}}}function pp(c,s){if(c){if(typeof c=="string")return kc(c,s);var r=Object.prototype.toString.call(c).slice(8,-1);if(r==="Object"&&c.constructor&&(r=c.constructor.name),r==="Map"||r==="Set")return Array.from(c);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kc(c,s)}}function kc(c,s){(s==null||s>c.length)&&(s=c.length);for(var r=0,o=new Array(s);r<s;r++)o[r]=c[r];return o}function mp(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function Lc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function $c(c,s,r){return s&&Lc(c.prototype,s),r&&Lc(c,r),c}function gp(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&yu(c,s)}function yu(c,s){return yu=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},yu(c,s)}function Tp(c){var s=Sp();return function(){var o=xo(c),a;if(s){var t=xo(this).constructor;a=Reflect.construct(o,arguments,t)}else a=o.apply(this,arguments);return vp(this,a)}}function vp(c,s){return s&&(Ao(s)==="object"||typeof s=="function")?s:Ep(c)}function Ep(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Sp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function xo(c){return xo=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},xo(c)}var yp=dt.EventEmitter,Hc=Pt,Ap=ht,ce=lt,gn=Ws,Fc=hl,Be=It(),Pi=pd,Cp=As,Bl=b_,Rp=_l,xt=F_,jc=Q_,Ip=np,bp=_p,Vc=Ks(),K=new Ap("RTCSession"),X={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},Gl=["audio","video"],wp=function(c){gp(r,c);var s=Tp(r);$c(r,null,[{key:"C",get:function(){return X}}]);function r(o){var a;return mp(this,r),K.debug("new"),a=s.call(this),a._id=null,a._ua=o,a._status=X.STATUS_NULL,a._dialog=null,a._earlyDialogs={},a._contact=null,a._from_tag=null,a._to_tag=null,a._connection=null,a._connectionPromiseQueue=Promise.resolve(),a._request=null,a._is_canceled=!1,a._cancel_reason="",a._is_confirmed=!1,a._late_sdp=!1,a._rtcOfferConstraints=null,a._rtcAnswerConstraints=null,a._localMediaStream=null,a._localMediaStreamLocallyGenerated=!1,a._rtcReady=!0,a._iceReady=!1,a._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},a._direction=null,a._local_identity=null,a._remote_identity=null,a._start_time=null,a._end_time=null,a._tones=null,a._audioMuted=!1,a._videoMuted=!1,a._localHold=!1,a._remoteHold=!1,a._sessionTimers={enabled:a._ua.configuration.session_timers,refreshMethod:a._ua.configuration.session_timers_refresh_method,defaultExpires:ce.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},a._referSubscribers={},a._data={},a}return $c(r,[{key:"isInProgress",value:function(){switch(this._status){case X.STATUS_NULL:case X.STATUS_INVITE_SENT:case X.STATUS_1XX_RECEIVED:case X.STATUS_INVITE_RECEIVED:case X.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}},{key:"isEstablished",value:function(){switch(this._status){case X.STATUS_ANSWERED:case X.STATUS_WAITING_FOR_ACK:case X.STATUS_CONFIRMED:return!0;default:return!1}}},{key:"isEnded",value:function(){switch(this._status){case X.STATUS_CANCELED:case X.STATUS_TERMINATED:return!0;default:return!1}}},{key:"isMuted",value:function(){return{audio:this._audioMuted,video:this._videoMuted}}},{key:"isOnHold",value:function(){return{local:this._localHold,remote:this._remoteHold}}},{key:"connect",value:function(a){console.log("rtcOfferConstraints connect");var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;K.debug("connect()");var p=a,d=Be.cloneObject(t.eventHandlers),h=Be.cloneArray(t.extraHeaders),g=Be.cloneObject(t.mediaConstraints,{audio:!0,video:!0}),T=t.mediaStream||null,E=Be.cloneObject(t.pcConfig,{iceServers:[]}),S=t.rtcConstraints||null,A=t.rtcOfferConstraints||null;if(this._rtcOfferConstraints=A,this._rtcAnswerConstraints=t.rtcAnswerConstraints||null,this._data=t.data||this._data,a===void 0)throw new TypeError("Not enough arguments");if(this._status!==X.STATUS_NULL)throw new gn.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new gn.NotSupportedError("WebRTC not supported");if(a=this._ua.normalizeTarget(a),!a)throw new TypeError("Invalid target: ".concat(p));this._sessionTimers.enabled&&Be.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=ce.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=ce.SESSION_EXPIRES);for(var R in d)Object.prototype.hasOwnProperty.call(d,R)&&this.on(R,d[R]);this._from_tag=Be.newTag();var C=t.anonymous||!1,$={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:C,outbound:!0}),C?($.from_display_name="Anonymous",$.from_uri=new Vc("sip","anonymous","anonymous.invalid"),h.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString())),h.push("Privacy: id")):t.fromUserName&&($.from_uri=new Vc("sip",t.fromUserName,this._ua.configuration.uri.host),h.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),t.fromDisplayName&&($.from_display_name=t.fromDisplayName),h.push("Contact: ".concat(this._contact)),h.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&h.push("Session-Expires: ".concat(this._sessionTimers.defaultExpires).concat(this._ua.configuration.session_timers_force_refresher?";refresher=uac":"")),this._request=new Cp.InitialOutgoingInviteRequest(a,this._ua,$,h),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(E,S),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,n&&n(this),this._newRTCSession("local",this._request),this._sendInitialRequest(g,A,T)}},{key:"init_incoming",value:function(a,t){var n=this;K.debug("init_incoming()");var p,d=a.hasHeader("Content-Type")?a.getHeader("Content-Type").toLowerCase():void 0;if(a.body&&d!=="application/sdp"){a.reply(415);return}if(this._status=X.STATUS_INVITE_RECEIVED,this._from_tag=a.from_tag,this._id=a.call_id+this._from_tag,this._request=a,this._contact=this._ua.contact.toString(),a.hasHeader("expires")&&(p=a.getHeader("expires")*1e3),a.to_tag=Be.newTag(),!this._createDialog(a,"UAS",!0)){a.reply(500,"Missing Contact header field");return}a.body?this._late_sdp=!1:this._late_sdp=!0,this._status=X.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout(function(){a.reply(408),n._failed("local",null,ce.causes.NO_ANSWER)},this._ua.configuration.no_answer_timeout),p&&(this._timers.expiresTimer=setTimeout(function(){n._status===X.STATUS_WAITING_FOR_ANSWER&&(a.reply(487),n._failed("system",null,ce.causes.EXPIRES))},p)),this._direction="incoming",this._local_identity=a.to,this._remote_identity=a.from,t&&t(this),this._newRTCSession("remote",a),this._status!==X.STATUS_TERMINATED&&(a.reply(180,null,["Contact: ".concat(this._contact)]),this._progress("local",null))}},{key:"answer",value:function(){var a=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K.debug("answer()");var n=this._request,p=Be.cloneArray(t.extraHeaders),d=Be.cloneObject(t.mediaConstraints),h=t.mediaStream||null,g=Be.cloneObject(t.pcConfig,{iceServers:[]}),T=t.rtcConstraints||null,E=t.rtcAnswerConstraints||null,S=Be.cloneObject(t.rtcOfferConstraints),A,R=!1,C=!1,$=!1,L=!1;if(this._rtcAnswerConstraints=E,this._rtcOfferConstraints=t.rtcOfferConstraints||null,this._data=t.data||this._data,this._direction!=="incoming")throw new gn.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==X.STATUS_WAITING_FOR_ANSWER)throw new gn.InvalidStateError(this._status);if(this._sessionTimers.enabled&&Be.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=ce.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=ce.SESSION_EXPIRES),this._status=X.STATUS_ANSWERED,!this._createDialog(n,"UAS")){n.reply(500,"Error creating dialog");return}clearTimeout(this._timers.userNoAnswerTimer),p.unshift("Contact: ".concat(this._contact));var ne=n.parseSDP();Array.isArray(ne.media)||(ne.media=[ne.media]);var D=ms(ne.media),F;try{for(D.s();!(F=D.n()).done;){var Se=F.value;Se.type==="audio"&&(R=!0,(!Se.direction||Se.direction==="sendrecv")&&($=!0)),Se.type==="video"&&(C=!0,(!Se.direction||Se.direction==="sendrecv")&&(L=!0))}}catch(H){D.e(H)}finally{D.f()}if(h&&d.audio===!1){A=h.getAudioTracks();var ve=ms(A),M;try{for(ve.s();!(M=ve.n()).done;){var N=M.value;h.removeTrack(N)}}catch(H){ve.e(H)}finally{ve.f()}}if(h&&d.video===!1){A=h.getVideoTracks();var q=ms(A),V;try{for(q.s();!(V=q.n()).done;){var z=V.value;h.removeTrack(z)}}catch(H){q.e(H)}finally{q.f()}}!h&&d.audio===void 0&&(d.audio=$),!h&&d.video===void 0&&(d.video=L),!h&&!R&&!S.offerToReceiveAudio&&(d.audio=!1),!h&&!C&&!S.offerToReceiveVideo&&(d.video=!1),this._createRTCConnection(g,T),Promise.resolve().then(function(){if(h)return h;if(d.audio||d.video)return a._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(d).catch(function(H){throw a._status===X.STATUS_TERMINATED?new Error("terminated"):(n.reply(480),a._failed("local",null,ce.causes.USER_DENIED_MEDIA_ACCESS),K.warn('emit "getusermediafailed" [error:%o]',H),a.emit("getusermediafailed",H),new Error("getUserMedia() failed"))})}).then(function(H){if(a._status===X.STATUS_TERMINATED)throw new Error("terminated");a._localMediaStream=H,H&&H.getTracks().forEach(function(J){a._connection.addTrack(J,H)})}).then(function(){if(!a._late_sdp){var H={originator:"remote",type:"offer",sdp:n.body};K.debug('emit "sdp"'),a.emit("sdp",H);var J=new RTCSessionDescription({type:"offer",sdp:H.sdp});return a._connectionPromiseQueue=a._connectionPromiseQueue.then(function(){return a._connection.setRemoteDescription(J)}).catch(function(U){throw n.reply(488),a._failed("system",null,ce.causes.WEBRTC_ERROR),K.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',U),a.emit("peerconnection:setremotedescriptionfailed",U),new Error("peerconnection.setRemoteDescription() failed")}),a._connectionPromiseQueue}}).then(function(){if(a._status===X.STATUS_TERMINATED)throw new Error("terminated");return a._connecting(n),a._late_sdp?a._createLocalDescription("offer",a._rtcOfferConstraints).catch(function(){throw n.reply(500),new Error("_createLocalDescription() failed")}):a._createLocalDescription("answer",E).catch(function(){throw n.reply(500),new Error("_createLocalDescription() failed")})}).then(function(H){if(a._status===X.STATUS_TERMINATED)throw new Error("terminated");a._handleSessionTimersInIncomingRequest(n,p),n.reply(200,null,p,H,function(){a._status=X.STATUS_WAITING_FOR_ACK,a._setInvite2xxTimer(n,H),a._setACKTimer(),a._accepted("local")},function(){a._failed("system",null,ce.causes.CONNECTION_ERROR)})}).catch(function(H){a._status!==X.STATUS_TERMINATED&&K.warn(H)})}},{key:"terminate",value:function(){var a=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K.debug("terminate()");var n=t.cause||ce.causes.BYE,p=Be.cloneArray(t.extraHeaders),d=t.body,h,g=t.status_code,T=t.reason_phrase;if(this._status===X.STATUS_TERMINATED)throw new gn.InvalidStateError(this._status);switch(this._status){case X.STATUS_NULL:case X.STATUS_INVITE_SENT:case X.STATUS_1XX_RECEIVED:if(K.debug("canceling session"),g&&(g<200||g>=700))throw new TypeError("Invalid status_code: ".concat(g));g&&(T=T||ce.REASON_PHRASE[g]||"",h="SIP ;cause=".concat(g,' ;text="').concat(T,'"')),this._status===X.STATUS_NULL||this._status===X.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=h):this._status===X.STATUS_1XX_RECEIVED&&this._request.cancel(h),this._status=X.STATUS_CANCELED,this._failed("local",null,ce.causes.CANCELED);break;case X.STATUS_WAITING_FOR_ANSWER:case X.STATUS_ANSWERED:if(K.debug("rejecting session"),g=g||480,g<300||g>=700)throw new TypeError("Invalid status_code: ".concat(g));this._request.reply(g,T,p,d),this._failed("local",null,ce.causes.REJECTED);break;case X.STATUS_WAITING_FOR_ACK:case X.STATUS_CONFIRMED:if(K.debug("terminating session"),T=t.reason_phrase||ce.REASON_PHRASE[g]||"",g&&(g<200||g>=700))throw new TypeError("Invalid status_code: ".concat(g));if(g&&p.push("Reason: SIP ;cause=".concat(g,'; text="').concat(T,'"')),this._status===X.STATUS_WAITING_FOR_ACK&&this._direction==="incoming"&&this._request.server_transaction.state!==Fc.C.STATUS_TERMINATED){var E=this._dialog;this.receiveRequest=function(S){var A=S.method;A===ce.ACK&&(a.sendRequest(ce.BYE,{extraHeaders:p,body:d}),E.terminate())},this._request.server_transaction.on("stateChanged",function(){a._request.server_transaction.state===Fc.C.STATUS_TERMINATED&&(a.sendRequest(ce.BYE,{extraHeaders:p,body:d}),E.terminate())}),this._ended("local",null,n),this._dialog=E,this._ua.newDialog(E)}else this.sendRequest(ce.BYE,{extraHeaders:p,body:d}),this._ended("local",null,n)}}},{key:"sendDTMF",value:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K.debug("sendDTMF() | tones: %s",a);var n=0,p=t.duration||null,d=t.interToneGap||null,h=t.transportType||ce.DTMF_TRANSPORT.INFO;if(a===void 0)throw new TypeError("Not enough arguments");if(this._status!==X.STATUS_CONFIRMED&&this._status!==X.STATUS_WAITING_FOR_ACK&&this._status!==X.STATUS_1XX_RECEIVED)throw new gn.InvalidStateError(this._status);if(h!==ce.DTMF_TRANSPORT.INFO&&h!==ce.DTMF_TRANSPORT.RFC2833)throw new TypeError("invalid transportType: ".concat(h));if(typeof a=="number"&&(a=a.toString()),!a||typeof a!="string"||!a.match(/^[0-9A-DR#*,]+$/i))throw new TypeError("Invalid tones: ".concat(a));if(p&&!Be.isDecimal(p))throw new TypeError("Invalid tone duration: ".concat(p));if(p?p<xt.C.MIN_DURATION?(K.debug('"duration" value is lower than the minimum allowed, setting it to '.concat(xt.C.MIN_DURATION," milliseconds")),p=xt.C.MIN_DURATION):p>xt.C.MAX_DURATION?(K.debug('"duration" value is greater than the maximum allowed, setting it to '.concat(xt.C.MAX_DURATION," milliseconds")),p=xt.C.MAX_DURATION):p=Math.abs(p):p=xt.C.DEFAULT_DURATION,t.duration=p,d&&!Be.isDecimal(d))throw new TypeError("Invalid interToneGap: ".concat(d));if(d?d<xt.C.MIN_INTER_TONE_GAP?(K.debug('"interToneGap" value is lower than the minimum allowed, setting it to '.concat(xt.C.MIN_INTER_TONE_GAP," milliseconds")),d=xt.C.MIN_INTER_TONE_GAP):d=Math.abs(d):d=xt.C.DEFAULT_INTER_TONE_GAP,h===ce.DTMF_TRANSPORT.RFC2833){var g=this._getDTMFRTPSender();g&&(a=g.toneBuffer+a,g.insertDTMF(a,p,d));return}if(this._tones){this._tones+=a;return}this._tones=a,T.call(this);function T(){var E=this,S;if(this._status===X.STATUS_TERMINATED||!this._tones||n>=this._tones.length){this._tones=null;return}var A=this._tones[n];if(n+=1,A===",")S=2e3;else{var R=new xt(this);t.eventHandlers={onFailed:function(){E._tones=null}},R.send(A,t),S=p+d}setTimeout(T.bind(this),S)}}},{key:"sendInfo",value:function(a,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(K.debug("sendInfo()"),this._status!==X.STATUS_CONFIRMED&&this._status!==X.STATUS_WAITING_FOR_ACK&&this._status!==X.STATUS_1XX_RECEIVED)throw new gn.InvalidStateError(this._status);var p=new jc(this);p.send(a,t,n)}},{key:"mute",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{audio:!0,video:!1};K.debug("mute()");var t=!1,n=!1;this._audioMuted===!1&&a.audio&&(t=!0,this._audioMuted=!0,this._toggleMuteAudio(!0)),this._videoMuted===!1&&a.video&&(n=!0,this._videoMuted=!0,this._toggleMuteVideo(!0)),(t===!0||n===!0)&&this._onmute({audio:t,video:n})}},{key:"unmute",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{audio:!0,video:!0};K.debug("unmute()");var t=!1,n=!1;this._audioMuted===!0&&a.audio&&(t=!0,this._audioMuted=!1,this._localHold===!1&&this._toggleMuteAudio(!1)),this._videoMuted===!0&&a.video&&(n=!0,this._videoMuted=!1,this._localHold===!1&&this._toggleMuteVideo(!1)),(t===!0||n===!0)&&this._onunmute({audio:t,video:n})}},{key:"hold",value:function(){var a=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(K.debug("hold()"),this._status!==X.STATUS_WAITING_FOR_ACK&&this._status!==X.STATUS_CONFIRMED||this._localHold===!0||!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");var p={succeeded:function(){n&&n()},failed:function(){a.terminate({cause:ce.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:p,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:p,extraHeaders:t.extraHeaders}),!0}},{key:"unhold",value:function(){var a=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(K.debug("unhold()"),this._status!==X.STATUS_WAITING_FOR_ACK&&this._status!==X.STATUS_CONFIRMED||this._localHold===!1||!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");var p={succeeded:function(){n&&n()},failed:function(){a.terminate({cause:ce.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:p,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:p,extraHeaders:t.extraHeaders}),!0}},{key:"renegotiate",value:function(){var a=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;K.debug("renegotiate()");var p=t.rtcOfferConstraints||null;if(this._status!==X.STATUS_WAITING_FOR_ACK&&this._status!==X.STATUS_CONFIRMED||!this._isReadyToReOffer())return!1;var d={succeeded:function(){n&&n()},failed:function(){a.terminate({cause:ce.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return this._setLocalMediaStatus(),t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:d,rtcOfferConstraints:p,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:d,rtcOfferConstraints:p,extraHeaders:t.extraHeaders}),!0}},{key:"refer",value:function(a,t){var n=this;K.debug("refer()");var p=a;if(this._status!==X.STATUS_WAITING_FOR_ACK&&this._status!==X.STATUS_CONFIRMED)return!1;if(a=this._ua.normalizeTarget(a),!a)throw new TypeError("Invalid target: ".concat(p));var d=new bp(this);d.sendRefer(a,t);var h=d.id;return this._referSubscribers[h]=d,d.on("requestFailed",function(){delete n._referSubscribers[h]}),d.on("accepted",function(){delete n._referSubscribers[h]}),d.on("failed",function(){delete n._referSubscribers[h]}),d}},{key:"sendRequest",value:function(a,t){return K.debug("sendRequest()"),this._dialog.sendRequest(a,t)}},{key:"receiveRequest",value:function(a){var t=this;if(K.debug("receiveRequest()"),a.method===ce.CANCEL)(this._status===X.STATUS_WAITING_FOR_ANSWER||this._status===X.STATUS_ANSWERED)&&(this._status=X.STATUS_CANCELED,this._request.reply(487),this._failed("remote",a,ce.causes.CANCELED));else switch(a.method){case ce.ACK:if(this._status!==X.STATUS_WAITING_FOR_ACK)return;if(this._status=X.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!a.body){this.terminate({cause:ce.causes.MISSING_SDP,status_code:400});break}var n={originator:"remote",type:"answer",sdp:a.body};K.debug('emit "sdp"'),this.emit("sdp",n);var p=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return t._connection.setRemoteDescription(p)}).then(function(){t._is_confirmed||t._confirmed("remote",a)}).catch(function(h){t.terminate({cause:ce.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),K.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',h),t.emit("peerconnection:setremotedescriptionfailed",h)})}else this._is_confirmed||this._confirmed("remote",a);break;case ce.BYE:this._status===X.STATUS_CONFIRMED||this._status===X.STATUS_WAITING_FOR_ACK?(a.reply(200),this._ended("remote",a,ce.causes.BYE)):this._status===X.STATUS_INVITE_RECEIVED||this._status===X.STATUS_WAITING_FOR_ANSWER?(a.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",a,ce.causes.BYE)):a.reply(403,"Wrong Status");break;case ce.INVITE:this._status===X.STATUS_CONFIRMED?a.hasHeader("replaces")?this._receiveReplaces(a):this._receiveReinvite(a):a.reply(403,"Wrong Status");break;case ce.INFO:if(this._status===X.STATUS_1XX_RECEIVED||this._status===X.STATUS_WAITING_FOR_ANSWER||this._status===X.STATUS_ANSWERED||this._status===X.STATUS_WAITING_FOR_ACK||this._status===X.STATUS_CONFIRMED){var d=a.hasHeader("Content-Type")?a.getHeader("Content-Type").toLowerCase():void 0;d&&d.match(/^application\/dtmf-relay/i)?new xt(this).init_incoming(a):d!==void 0?new jc(this).init_incoming(a):a.reply(415)}else a.reply(403,"Wrong Status");break;case ce.UPDATE:this._status===X.STATUS_CONFIRMED?this._receiveUpdate(a):a.reply(403,"Wrong Status");break;case ce.REFER:this._status===X.STATUS_CONFIRMED?this._receiveRefer(a):a.reply(403,"Wrong Status");break;case ce.NOTIFY:this._status===X.STATUS_CONFIRMED?this._receiveNotify(a):a.reply(403,"Wrong Status");break;default:a.reply(501)}}},{key:"onTransportError",value:function(){K.warn("onTransportError()"),this._status!==X.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:ce.causes.CONNECTION_ERROR,cause:ce.causes.CONNECTION_ERROR})}},{key:"onRequestTimeout",value:function(){K.warn("onRequestTimeout()"),this._status!==X.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:ce.causes.REQUEST_TIMEOUT,cause:ce.causes.REQUEST_TIMEOUT})}},{key:"onDialogError",value:function(){K.warn("onDialogError()"),this._status!==X.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:ce.causes.DIALOG_ERROR,cause:ce.causes.DIALOG_ERROR})}},{key:"newDTMF",value:function(a){K.debug("newDTMF()"),this.emit("newDTMF",a)}},{key:"newInfo",value:function(a){K.debug("newInfo()"),this.emit("newInfo",a)}},{key:"_isReadyToReOffer",value:function(){return this._rtcReady?this._dialog?this._dialog.uac_pending_reply===!0||this._dialog.uas_pending_reply===!0?(K.debug("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):!0:(K.debug("_isReadyToReOffer() | session not established yet"),!1):(K.debug("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}},{key:"_close",value:function(){if(K.debug("close()"),this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(K.debug("close() | closing local MediaStream"),Be.closeMediaStream(this._localMediaStream)),this._status!==X.STATUS_TERMINATED){if(this._status=X.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(p){K.warn("close() | error closing the RTCPeerConnection: %o",p)}for(var a in this._timers)Object.prototype.hasOwnProperty.call(this._timers,a)&&clearTimeout(this._timers[a]);clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog);for(var t in this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,t)&&(this._earlyDialogs[t].terminate(),delete this._earlyDialogs[t]);for(var n in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,n)&&delete this._referSubscribers[n];this._ua.destroyRTCSession(this)}}},{key:"_setInvite2xxTimer",value:function(a,t){var n=Pi.T1;function p(){this._status===X.STATUS_WAITING_FOR_ACK&&(a.reply(200,null,["Contact: ".concat(this._contact)],t),n<Pi.T2&&(n=n*2,n>Pi.T2&&(n=Pi.T2)),this._timers.invite2xxTimer=setTimeout(p.bind(this),n))}this._timers.invite2xxTimer=setTimeout(p.bind(this),n)}},{key:"_setACKTimer",value:function(){var a=this;this._timers.ackTimer=setTimeout(function(){a._status===X.STATUS_WAITING_FOR_ACK&&(K.debug("no ACK received, terminating the session"),clearTimeout(a._timers.invite2xxTimer),a.sendRequest(ce.BYE),a._ended("remote",null,ce.causes.NO_ACK))},Pi.TIMER_H)}},{key:"_createRTCConnection",value:function(a,t){var n=this;this._connection=new RTCPeerConnection(a,t),this._connection.addEventListener("iceconnectionstatechange",function(){var p=n._connection.iceConnectionState;p==="failed"&&n.terminate({cause:ce.causes.RTP_TIMEOUT,status_code:408,reason_phrase:ce.causes.RTP_TIMEOUT})}),K.debug('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}},{key:"_createLocalDescription",value:function(a,t){var n=this;if(K.debug("createLocalDescription()"),a!=="offer"&&a!=="answer")throw new Error('createLocalDescription() | invalid type "'.concat(a,'"'));var p=this._connection;return this._rtcReady=!1,Promise.resolve().then(function(){return a==="offer"?p.createOffer(t).catch(function(d){return K.warn('emit "peerconnection:createofferfailed" [error:%o]',d),n.emit("peerconnection:createofferfailed",d),Promise.reject(d)}):p.createAnswer(t).catch(function(d){return K.warn('emit "peerconnection:createanswerfailed" [error:%o]',d),n.emit("peerconnection:createanswerfailed",d),Promise.reject(d)})}).then(function(d){return p.setLocalDescription(d).catch(function(h){return n._rtcReady=!0,K.warn('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',h),n.emit("peerconnection:setlocaldescriptionfailed",h),Promise.reject(h)})}).then(function(){var d=t&&t.iceRestart;if(p.iceGatheringState==="complete"&&!d||p.iceGatheringState==="gathering"&&n._iceReady){n._rtcReady=!0;var h={originator:"local",type:a,sdp:p.localDescription.sdp};return K.debug('emit "sdp"'),n.emit("sdp",h),Promise.resolve(h.sdp)}return new Promise(function(g){var T=!1,E,S;n._iceReady=!1;var A=function(){p.removeEventListener("icecandidate",E),p.removeEventListener("icegatheringstatechange",S),T=!0,n._rtcReady=!0,n._iceReady=!0;var C={originator:"local",type:a,sdp:p.localDescription.sdp};K.debug('emit "sdp"'),n.emit("sdp",C),g(C.sdp)};p.addEventListener("icecandidate",E=function(C){var $=C.candidate;$?n.emit("icecandidate",{candidate:$,ready:A}):T||A()}),p.addEventListener("icegatheringstatechange",S=function(){p.iceGatheringState==="complete"&&!T&&A()})})})}},{key:"_createDialog",value:function(a,t,n){var p=t==="UAS"?a.to_tag:a.from_tag,d=t==="UAS"?a.from_tag:a.to_tag,h=a.call_id+p+d,g=this._earlyDialogs[h];if(n)return g?!0:(g=new Bl(this,a,t,Bl.C.STATUS_EARLY),g.error?(K.debug(g.error),this._failed("remote",a,ce.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[h]=g,!0));if(this._from_tag=a.from_tag,this._to_tag=a.to_tag,g)return g.update(a,t),this._dialog=g,delete this._earlyDialogs[h],!0;var T=new Bl(this,a,t);return T.error?(K.debug(T.error),this._failed("remote",a,ce.causes.INTERNAL_ERROR),!1):(this._dialog=T,!0)}},{key:"_receiveReinvite",value:function(a){var t=this;K.debug("receiveReinvite()");var n=a.hasHeader("Content-Type")?a.getHeader("Content-Type").toLowerCase():void 0,p={request:a,callback:void 0,reject:h.bind(this)},d=!1;function h(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};d=!0;var E=T.status_code||403,S=T.reason_phrase||"",A=Be.cloneArray(T.extraHeaders);if(this._status!==X.STATUS_CONFIRMED)return!1;if(E<300||E>=700)throw new TypeError("Invalid status_code: ".concat(E));a.reply(E,S,A)}if(this.emit("reinvite",p),d)return;if(this._late_sdp=!1,!a.body){this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return t._createLocalDescription("offer",t._rtcOfferConstraints)}).then(function(T){g.call(t,T)}).catch(function(){a.reply(500)});return}if(n!=="application/sdp"){K.debug("invalid Content-Type"),a.reply(415);return}this._processInDialogSdpOffer(a).then(function(T){t._status!==X.STATUS_TERMINATED&&g.call(t,T)}).catch(function(T){K.warn(T)});function g(T){var E=this,S=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(a,S),this._late_sdp&&(T=this._mangleOffer(T)),a.reply(200,null,S,T,function(){E._status=X.STATUS_WAITING_FOR_ACK,E._setInvite2xxTimer(a,T),E._setACKTimer()}),typeof p.callback=="function"&&p.callback()}}},{key:"_receiveUpdate",value:function(a){var t=this;K.debug("receiveUpdate()");var n=a.hasHeader("Content-Type")?a.getHeader("Content-Type").toLowerCase():void 0,p={request:a,callback:void 0,reject:h.bind(this)},d=!1;function h(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};d=!0;var E=T.status_code||403,S=T.reason_phrase||"",A=Be.cloneArray(T.extraHeaders);if(this._status!==X.STATUS_CONFIRMED)return!1;if(E<300||E>=700)throw new TypeError("Invalid status_code: ".concat(E));a.reply(E,S,A)}if(this.emit("update",p),d)return;if(!a.body){g.call(this,null);return}if(n!=="application/sdp"){K.debug("invalid Content-Type"),a.reply(415);return}this._processInDialogSdpOffer(a).then(function(T){t._status!==X.STATUS_TERMINATED&&g.call(t,T)}).catch(function(T){K.warn(T)});function g(T){var E=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(a,E),a.reply(200,null,E,T),typeof p.callback=="function"&&p.callback()}}},{key:"_processInDialogSdpOffer",value:function(a){var t=this;K.debug("_processInDialogSdpOffer()");var n=a.parseSDP(),p=!1,d=ms(n.media),h;try{for(d.s();!(h=d.n()).done;){var g=h.value;if(Gl.indexOf(g.type)!==-1){var T=g.direction||n.direction||"sendrecv";if(T==="sendonly"||T==="inactive")p=!0;else{p=!1;break}}}}catch(A){d.e(A)}finally{d.f()}var E={originator:"remote",type:"offer",sdp:a.body};K.debug('emit "sdp"'),this.emit("sdp",E);var S=new RTCSessionDescription({type:"offer",sdp:E.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){if(t._status===X.STATUS_TERMINATED)throw new Error("terminated");return t._connection.setRemoteDescription(S).catch(function(A){throw a.reply(488),K.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',A),t.emit("peerconnection:setremotedescriptionfailed",A),A})}).then(function(){if(t._status===X.STATUS_TERMINATED)throw new Error("terminated");t._remoteHold===!0&&p===!1?(t._remoteHold=!1,t._onunhold("remote")):t._remoteHold===!1&&p===!0&&(t._remoteHold=!0,t._onhold("remote"))}).then(function(){if(t._status===X.STATUS_TERMINATED)throw new Error("terminated");return t._createLocalDescription("answer",t._rtcAnswerConstraints).catch(function(A){throw a.reply(500),K.warn('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',A),A})}).catch(function(A){K.warn("_processInDialogSdpOffer() failed [error: %o]",A)}),this._connectionPromiseQueue}},{key:"_receiveRefer",value:function(a){var t=this;if(K.debug("receiveRefer()"),!a.refer_to){K.debug("no Refer-To header field present in REFER"),a.reply(400);return}if(a.refer_to.uri.scheme!==ce.SIP){K.debug("Refer-To header field points to a non-SIP URI scheme"),a.reply(416);return}a.reply(202);var n=new Ip(this,a.cseq);K.debug('emit "refer"'),this.emit("refer",{request:a,accept:function(g,T){p.call(t,g,T)},reject:function(){d.call(t)}});function p(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(h=typeof h=="function"?h:null,this._status!==X.STATUS_WAITING_FOR_ACK&&this._status!==X.STATUS_CONFIRMED)return!1;var T=new r(this._ua);if(T.on("progress",function(S){var A=S.response;n.notify(A.status_code,A.reason_phrase)}),T.on("accepted",function(S){var A=S.response;n.notify(A.status_code,A.reason_phrase)}),T.on("_failed",function(S){var A=S.message,R=S.cause;A?n.notify(A.status_code,A.reason_phrase):n.notify(487,R)}),a.refer_to.uri.hasHeader("replaces")){var E=decodeURIComponent(a.refer_to.uri.getHeader("replaces"));g.extraHeaders=Be.cloneArray(g.extraHeaders),g.extraHeaders.push("Replaces: ".concat(E))}T.connect(a.refer_to.uri.toAor(),g,h)}function d(){n.notify(603)}}},{key:"_receiveNotify",value:function(a){switch(K.debug("receiveNotify()"),a.event||a.reply(400),a.event.event){case"refer":{var t,n;if(a.event.params&&a.event.params.id)t=a.event.params.id,n=this._referSubscribers[t];else if(Object.keys(this._referSubscribers).length===1)n=this._referSubscribers[Object.keys(this._referSubscribers)[0]];else{a.reply(400,"Missing event id parameter");return}if(!n){a.reply(481,"Subscription does not exist");return}n.receiveNotify(a),a.reply(200);break}default:a.reply(489)}}},{key:"_receiveReplaces",value:function(a){var t=this;K.debug("receiveReplaces()");function n(d){var h=this;if(this._status!==X.STATUS_WAITING_FOR_ACK&&this._status!==X.STATUS_CONFIRMED)return!1;var g=new r(this._ua);g.on("confirmed",function(){h.terminate()}),g.init_incoming(a,d)}function p(){K.debug("Replaced INVITE rejected by the user"),a.reply(486)}this.emit("replaces",{request:a,accept:function(h){n.call(t,h)},reject:function(){p.call(t)}})}},{key:"_sendInitialRequest",value:function(a,t,n){var p=this;console.log("rtcOfferConstraints",t);var d=new Rp(this._ua,this._request,{onRequestTimeout:function(){p.onRequestTimeout()},onTransportError:function(){p.onTransportError()},onAuthenticated:function(g){p._request=g},onReceiveResponse:function(g){p._receiveInviteResponse(g)}});Promise.resolve().then(function(){if(n)return n;if(a.audio||a.video)return p._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(a).catch(function(h){throw p._status===X.STATUS_TERMINATED?new Error("terminated"):(p._failed("local",null,ce.causes.USER_DENIED_MEDIA_ACCESS),K.warn('emit "getusermediafailed" [error:%o]',h),p.emit("getusermediafailed",h),h)})}).then(function(h){if(p._status===X.STATUS_TERMINATED)throw new Error("terminated");return p._localMediaStream=h,h&&h.getTracks().forEach(function(g){p._connection.addTrack(g,h)}),p._connecting(p._request),p._createLocalDescription("offer",t).catch(function(g){throw p._failed("local",null,ce.causes.WEBRTC_ERROR),g})}).then(function(h){if(p._is_canceled||p._status===X.STATUS_TERMINATED)throw new Error("terminated");p._request.body=h,p._status=X.STATUS_INVITE_SENT,K.debug('emit "sending" [request:%o]',p._request),p.emit("sending",{request:p._request}),d.send()}).catch(function(h){p._status!==X.STATUS_TERMINATED&&K.warn(h)})}},{key:"_getDTMFRTPSender",value:function(){var a=this._connection.getSenders().find(function(t){return t.track&&t.track.kind==="audio"});if(!(a&&a.dtmf)){K.warn("sendDTMF() | no local audio track to send DTMF with");return}return a.dtmf}},{key:"_receiveInviteResponse",value:function(a){var t=this;if(K.debug("receiveInviteResponse()"),this._dialog&&a.status_code>=200&&a.status_code<=299)if(this._dialog.id.call_id===a.call_id&&this._dialog.id.local_tag===a.from_tag&&this._dialog.id.remote_tag===a.to_tag){this.sendRequest(ce.ACK);return}else{var n=new Bl(this,a,"UAC");if(n.error!==void 0){K.debug(n.error);return}this.sendRequest(ce.ACK),this.sendRequest(ce.BYE);return}if(this._is_canceled){a.status_code>=100&&a.status_code<200?this._request.cancel(this._cancel_reason):a.status_code>=200&&a.status_code<299&&this._acceptAndTerminate(a);return}if(!(this._status!==X.STATUS_INVITE_SENT&&this._status!==X.STATUS_1XX_RECEIVED))switch(!0){case/^100$/.test(a.status_code):this._status=X.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(a.status_code):{if(!a.to_tag){K.debug("1xx response received without to tag");break}if(a.hasHeader("contact")&&!this._createDialog(a,"UAC",!0))break;if(this._status=X.STATUS_1XX_RECEIVED,!a.body){this._progress("remote",a);break}var p={originator:"remote",type:"answer",sdp:a.body};K.debug('emit "sdp"'),this.emit("sdp",p);var d=new RTCSessionDescription({type:"answer",sdp:p.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return t._connection.setRemoteDescription(d)}).then(function(){return t._progress("remote",a)}).catch(function(E){K.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',E),t.emit("peerconnection:setremotedescriptionfailed",E)});break}case/^2[0-9]{2}$/.test(a.status_code):{if(this._status=X.STATUS_CONFIRMED,!a.body){this._acceptAndTerminate(a,400,ce.causes.MISSING_SDP),this._failed("remote",a,ce.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(a,"UAC"))break;var h={originator:"remote",type:"answer",sdp:a.body};K.debug('emit "sdp"'),this.emit("sdp",h);var g=new RTCSessionDescription({type:"answer",sdp:h.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){if(t._connection.signalingState==="stable")return t._connection.createOffer(t._rtcOfferConstraints).then(function(E){return t._connection.setLocalDescription(E)}).catch(function(E){t._acceptAndTerminate(a,500,E.toString()),t._failed("local",a,ce.causes.WEBRTC_ERROR)})}).then(function(){t._connection.setRemoteDescription(g).then(function(){t._handleSessionTimersInIncomingResponse(a),t._accepted("remote",a),t.sendRequest(ce.ACK),t._confirmed("local",null)}).catch(function(E){t._acceptAndTerminate(a,488,"Not Acceptable Here"),t._failed("remote",a,ce.causes.BAD_MEDIA_DESCRIPTION),K.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',E),t.emit("peerconnection:setremotedescriptionfailed",E)})});break}default:{var T=Be.sipErrorCause(a.status_code);this._failed("remote",a,T)}}}},{key:"_sendReinvite",value:function(){var a=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K.debug("sendReinvite()");var n=Be.cloneArray(t.extraHeaders),p=Be.cloneObject(t.eventHandlers),d=t.rtcOfferConstraints||this._rtcOfferConstraints||null,h=!1;n.push("Contact: ".concat(this._contact)),n.push("Content-Type: application/sdp"),this._sessionTimers.running&&n.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return a._createLocalDescription("offer",d)}).then(function(E){E=a._mangleOffer(E);var S={originator:"local",type:"offer",sdp:E};K.debug('emit "sdp"'),a.emit("sdp",S),a.sendRequest(ce.INVITE,{extraHeaders:n,body:E,eventHandlers:{onSuccessResponse:function(R){g.call(a,R),h=!0},onErrorResponse:function(R){T.call(a,R)},onTransportError:function(){a.onTransportError()},onRequestTimeout:function(){a.onRequestTimeout()},onDialogError:function(){a.onDialogError()}}})}).catch(function(){T()});function g(E){var S=this;if(this._status!==X.STATUS_TERMINATED&&(this.sendRequest(ce.ACK),!h)){if(this._handleSessionTimersInIncomingResponse(E),E.body){if(!E.hasHeader("Content-Type")||E.getHeader("Content-Type").toLowerCase()!=="application/sdp"){T.call(this);return}}else{T.call(this);return}var A={originator:"remote",type:"answer",sdp:E.body};K.debug('emit "sdp"'),this.emit("sdp",A);var R=new RTCSessionDescription({type:"answer",sdp:A.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return S._connection.setRemoteDescription(R)}).then(function(){p.succeeded&&p.succeeded(E)}).catch(function(C){T.call(S),K.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',C),S.emit("peerconnection:setremotedescriptionfailed",C)})}}function T(E){p.failed&&p.failed(E)}}},{key:"_sendUpdate",value:function(){var a=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K.debug("sendUpdate()");var n=Be.cloneArray(t.extraHeaders),p=Be.cloneObject(t.eventHandlers),d=t.rtcOfferConstraints||this._rtcOfferConstraints||null,h=t.sdpOffer||!1,g=!1;n.push("Contact: ".concat(this._contact)),this._sessionTimers.running&&n.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),h?(n.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return a._createLocalDescription("offer",d)}).then(function(S){S=a._mangleOffer(S);var A={originator:"local",type:"offer",sdp:S};K.debug('emit "sdp"'),a.emit("sdp",A),a.sendRequest(ce.UPDATE,{extraHeaders:n,body:S,eventHandlers:{onSuccessResponse:function(C){T.call(a,C),g=!0},onErrorResponse:function(C){E.call(a,C)},onTransportError:function(){a.onTransportError()},onRequestTimeout:function(){a.onRequestTimeout()},onDialogError:function(){a.onDialogError()}}})}).catch(function(){E.call(a)})):this.sendRequest(ce.UPDATE,{extraHeaders:n,eventHandlers:{onSuccessResponse:function(A){T.call(a,A)},onErrorResponse:function(A){E.call(a,A)},onTransportError:function(){a.onTransportError()},onRequestTimeout:function(){a.onRequestTimeout()},onDialogError:function(){a.onDialogError()}}});function T(S){var A=this;if(this._status!==X.STATUS_TERMINATED&&!g)if(this._handleSessionTimersInIncomingResponse(S),h){if(S.body){if(!S.hasHeader("Content-Type")||S.getHeader("Content-Type").toLowerCase()!=="application/sdp"){E.call(this);return}}else{E.call(this);return}var R={originator:"remote",type:"answer",sdp:S.body};K.debug('emit "sdp"'),this.emit("sdp",R);var C=new RTCSessionDescription({type:"answer",sdp:R.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return A._connection.setRemoteDescription(C)}).then(function(){p.succeeded&&p.succeeded(S)}).catch(function($){E.call(A),K.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',$),A.emit("peerconnection:setremotedescriptionfailed",$)})}else p.succeeded&&p.succeeded(S)}function E(S){p.failed&&p.failed(S)}}},{key:"_acceptAndTerminate",value:function(a,t,n){K.debug("acceptAndTerminate()");var p=[];t&&(n=n||ce.REASON_PHRASE[t]||"",p.push("Reason: SIP ;cause=".concat(t,'; text="').concat(n,'"'))),(this._dialog||this._createDialog(a,"UAC"))&&(this.sendRequest(ce.ACK),this.sendRequest(ce.BYE,{extraHeaders:p})),this._status=X.STATUS_TERMINATED}},{key:"_mangleOffer",value:function(a){if(!this._localHold&&!this._remoteHold)return a;if(a=Hc.parse(a),this._localHold&&!this._remoteHold){K.debug("mangleOffer() | me on hold, mangling offer");var t=ms(a.media),n;try{for(t.s();!(n=t.n()).done;){var p=n.value;Gl.indexOf(p.type)!==-1&&(p.direction?p.direction==="sendrecv"?p.direction="sendonly":p.direction==="recvonly"&&(p.direction="inactive"):p.direction="sendonly")}}catch(A){t.e(A)}finally{t.f()}}else if(this._localHold&&this._remoteHold){K.debug("mangleOffer() | both on hold, mangling offer");var d=ms(a.media),h;try{for(d.s();!(h=d.n()).done;){var g=h.value;Gl.indexOf(g.type)!==-1&&(g.direction="inactive")}}catch(A){d.e(A)}finally{d.f()}}else if(this._remoteHold){K.debug("mangleOffer() | remote on hold, mangling offer");var T=ms(a.media),E;try{for(T.s();!(E=T.n()).done;){var S=E.value;Gl.indexOf(S.type)!==-1&&(S.direction?S.direction==="sendrecv"?S.direction="recvonly":S.direction==="recvonly"&&(S.direction="inactive"):S.direction="recvonly")}}catch(A){T.e(A)}finally{T.f()}}return Hc.write(a)}},{key:"_setLocalMediaStatus",value:function(){var a=!0,t=!0;(this._localHold||this._remoteHold)&&(a=!1,t=!1),this._audioMuted&&(a=!1),this._videoMuted&&(t=!1),this._toggleMuteAudio(!a),this._toggleMuteVideo(!t)}},{key:"_handleSessionTimersInIncomingRequest",value:function(a,t){if(this._sessionTimers.enabled){var n;a.session_expires&&a.session_expires>=ce.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=a.session_expires,n=a.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,n="uas"),t.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(n)),this._sessionTimers.refresher=n==="uas",this._runSessionTimer()}}},{key:"_handleSessionTimersInIncomingResponse",value:function(a){if(this._sessionTimers.enabled){var t;a.session_expires&&a.session_expires>=ce.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=a.session_expires,t=a.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,t="uac"),this._sessionTimers.refresher=t==="uac",this._runSessionTimer()}}},{key:"_runSessionTimer",value:function(){var a=this,t=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout(function(){a._status!==X.STATUS_TERMINATED&&a._isReadyToReOffer()&&(K.debug("runSessionTimer() | sending session refresh request"),a._sessionTimers.refreshMethod===ce.UPDATE?a._sendUpdate():a._sendReinvite())},t*500):this._sessionTimers.timer=setTimeout(function(){a._status!==X.STATUS_TERMINATED&&(K.warn("runSessionTimer() | timer expired, terminating the session"),a.terminate({cause:ce.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))},t*1100)}},{key:"_toggleMuteAudio",value:function(a){var t=this._connection.getSenders().filter(function(h){return h.track&&h.track.kind==="audio"}),n=ms(t),p;try{for(n.s();!(p=n.n()).done;){var d=p.value;d.track.enabled=!a}}catch(h){n.e(h)}finally{n.f()}}},{key:"_toggleMuteVideo",value:function(a){var t=this._connection.getSenders().filter(function(h){return h.track&&h.track.kind==="video"}),n=ms(t),p;try{for(n.s();!(p=n.n()).done;){var d=p.value;d.track.enabled=!a}}catch(h){n.e(h)}finally{n.f()}}},{key:"_newRTCSession",value:function(a,t){K.debug("newRTCSession()"),this._ua.newRTCSession(this,{originator:a,session:this,request:t})}},{key:"_connecting",value:function(a){K.debug("session connecting"),K.debug('emit "connecting"'),this.emit("connecting",{request:a})}},{key:"_progress",value:function(a,t){K.debug("session progress"),K.debug('emit "progress"'),this.emit("progress",{originator:a,response:t||null})}},{key:"_accepted",value:function(a,t){K.debug("session accepted"),this._start_time=new Date,K.debug('emit "accepted"'),this.emit("accepted",{originator:a,response:t||null})}},{key:"_confirmed",value:function(a,t){K.debug("session confirmed"),this._is_confirmed=!0,K.debug('emit "confirmed"'),this.emit("confirmed",{originator:a,ack:t||null})}},{key:"_ended",value:function(a,t,n){K.debug("session ended"),this._end_time=new Date,this._close(),K.debug('emit "ended"'),this.emit("ended",{originator:a,message:t||null,cause:n})}},{key:"_failed",value:function(a,t,n){K.debug("session failed"),K.debug('emit "_failed"'),this.emit("_failed",{originator:a,message:t||null,cause:n}),this._close(),K.debug('emit "failed"'),this.emit("failed",{originator:a,message:t||null,cause:n})}},{key:"_onhold",value:function(a){K.debug("session onhold"),this._setLocalMediaStatus(),K.debug('emit "hold"'),this.emit("hold",{originator:a})}},{key:"_onunhold",value:function(a){K.debug("session onunhold"),this._setLocalMediaStatus(),K.debug('emit "unhold"'),this.emit("unhold",{originator:a})}},{key:"_onmute",value:function(a){var t=a.audio,n=a.video;K.debug("session onmute"),this._setLocalMediaStatus(),K.debug('emit "muted"'),this.emit("muted",{audio:t,video:n})}},{key:"_onunmute",value:function(a){var t=a.audio,n=a.video;K.debug("session onunmute"),this._setLocalMediaStatus(),K.debug('emit "unmuted"'),this.emit("unmuted",{audio:t,video:n})}},{key:"C",get:function(){return X}},{key:"causes",get:function(){return ce.causes}},{key:"id",get:function(){return this._id}},{key:"connection",get:function(){return this._connection}},{key:"contact",get:function(){return this._contact}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"start_time",get:function(){return this._start_time}},{key:"end_time",get:function(){return this._end_time}},{key:"data",get:function(){return this._data},set:function(a){this._data=a}},{key:"status",get:function(){return this._status}}]),r}(yp);function Co(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Co=function(r){return typeof r}:Co=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Co(c)}function Op(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function qc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function Dp(c,s,r){return s&&qc(c.prototype,s),r&&qc(c,r),c}function Np(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&Au(c,s)}function Au(c,s){return Au=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},Au(c,s)}function Up(c){var s=Mp();return function(){var o=Mo(c),a;if(s){var t=Mo(this).constructor;a=Reflect.construct(o,arguments,t)}else a=o.apply(this,arguments);return Pp(this,a)}}function Pp(c,s){return s&&(Co(s)==="object"||typeof s=="function")?s:xp(c)}function xp(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Mp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Mo(c){return Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Mo(c)}var kp=dt.EventEmitter,Lp=ht,Ra=lt,$p=As,xi=It(),Hp=_l,Bc=Ws,Fp=Ks(),Wl=new Lp("Message"),jp=function(c){Np(r,c);var s=Up(r);function r(o){var a;return Op(this,r),a=s.call(this),a._ua=o,a._request=null,a._closed=!1,a._direction=null,a._local_identity=null,a._remote_identity=null,a._is_replied=!1,a._data={},a}return Dp(r,[{key:"send",value:function(a,t){var n=this,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=a;if(a===void 0||t===void 0)throw new TypeError("Not enough arguments");if(a=this._ua.normalizeTarget(a),!a)throw new TypeError("Invalid target: ".concat(d));var h=xi.cloneArray(p.extraHeaders),g=xi.cloneObject(p.eventHandlers),T=p.contentType||"text/plain",E={};p.fromUserName&&(E.from_uri=new Fp("sip",p.fromUserName,this._ua.configuration.uri.host),h.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),p.fromDisplayName&&(E.from_display_name=p.fromDisplayName);for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&this.on(S,g[S]);h.push("Content-Type: ".concat(T)),this._request=new $p.OutgoingRequest(Ra.MESSAGE,a,this._ua,E,h),t&&(this._request.body=t);var A=new Hp(this._ua,this._request,{onRequestTimeout:function(){n._onRequestTimeout()},onTransportError:function(){n._onTransportError()},onReceiveResponse:function(C){n._receiveResponse(C)}});this._newMessage("local",this._request),A.send()}},{key:"init_incoming",value:function(a){this._request=a,this._newMessage("remote",a),this._is_replied||(this._is_replied=!0,a.reply(200)),this._close()}},{key:"accept",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=xi.cloneArray(a.extraHeaders),n=a.body;if(this._direction!=="incoming")throw new Bc.NotSupportedError('"accept" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");this._is_replied=!0,this._request.reply(200,null,t,n)}},{key:"reject",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=a.status_code||480,n=a.reason_phrase,p=xi.cloneArray(a.extraHeaders),d=a.body;if(this._direction!=="incoming")throw new Bc.NotSupportedError('"reject" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");if(t<300||t>=700)throw new TypeError("Invalid status_code: ".concat(t));this._is_replied=!0,this._request.reply(t,n,p,d)}},{key:"_receiveResponse",value:function(a){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(a.status_code):break;case/^2[0-9]{2}$/.test(a.status_code):this._succeeded("remote",a);break;default:{var t=xi.sipErrorCause(a.status_code);this._failed("remote",a,t);break}}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,Ra.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,Ra.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newMessage",value:function(a,t){a==="remote"?(this._direction="incoming",this._local_identity=t.to,this._remote_identity=t.from):a==="local"&&(this._direction="outgoing",this._local_identity=t.from,this._remote_identity=t.to),this._ua.newMessage(this,{originator:a,message:this,request:t})}},{key:"_failed",value:function(a,t,n){Wl.debug("MESSAGE failed"),this._close(),Wl.debug('emit "failed"'),this.emit("failed",{originator:a,response:t||null,cause:n})}},{key:"_succeeded",value:function(a,t){Wl.debug("MESSAGE succeeded"),this._close(),Wl.debug('emit "succeeded"'),this.emit("succeeded",{originator:a,response:t})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}]),r}(kp);function Ro(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ro=function(r){return typeof r}:Ro=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ro(c)}function Vp(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function Gc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function qp(c,s,r){return s&&Gc(c.prototype,s),r&&Gc(c,r),c}function Bp(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&Cu(c,s)}function Cu(c,s){return Cu=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},Cu(c,s)}function Gp(c){var s=Yp();return function(){var o=ko(c),a;if(s){var t=ko(this).constructor;a=Reflect.construct(o,arguments,t)}else a=o.apply(this,arguments);return Wp(this,a)}}function Wp(c,s){return s&&(Ro(s)==="object"||typeof s=="function")?s:Kp(c)}function Kp(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Yp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ko(c){return ko=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ko(c)}var zp=dt.EventEmitter,Jp=ht,Ia=lt,Xp=As,Mi=It(),Qp=_l,Wc=Ws,Kl=new Jp("Options"),Zp=function(c){Bp(r,c);var s=Gp(r);function r(o){var a;return Vp(this,r),a=s.call(this),a._ua=o,a._request=null,a._closed=!1,a._direction=null,a._local_identity=null,a._remote_identity=null,a._is_replied=!1,a._data={},a}return qp(r,[{key:"send",value:function(a,t){var n=this,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=a;if(a===void 0)throw new TypeError("A target is required for OPTIONS");if(a=this._ua.normalizeTarget(a),!a)throw new TypeError("Invalid target: ".concat(d));var h=Mi.cloneArray(p.extraHeaders),g=Mi.cloneObject(p.eventHandlers),T=p.contentType||"application/sdp";for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&this.on(E,g[E]);h.push("Content-Type: ".concat(T)),this._request=new Xp.OutgoingRequest(Ia.OPTIONS,a,this._ua,null,h),t&&(this._request.body=t);var S=new Qp(this._ua,this._request,{onRequestTimeout:function(){n._onRequestTimeout()},onTransportError:function(){n._onTransportError()},onReceiveResponse:function(R){n._receiveResponse(R)}});this._newOptions("local",this._request),S.send()}},{key:"init_incoming",value:function(a){this._request=a,this._newOptions("remote",a),this._is_replied||(this._is_replied=!0,a.reply(200)),this._close()}},{key:"accept",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Mi.cloneArray(a.extraHeaders),n=a.body;if(this._direction!=="incoming")throw new Wc.NotSupportedError('"accept" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");this._is_replied=!0,this._request.reply(200,null,t,n)}},{key:"reject",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=a.status_code||480,n=a.reason_phrase,p=Mi.cloneArray(a.extraHeaders),d=a.body;if(this._direction!=="incoming")throw new Wc.NotSupportedError('"reject" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");if(t<300||t>=700)throw new TypeError("Invalid status_code: ".concat(t));this._is_replied=!0,this._request.reply(t,n,p,d)}},{key:"_receiveResponse",value:function(a){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(a.status_code):break;case/^2[0-9]{2}$/.test(a.status_code):this._succeeded("remote",a);break;default:{var t=Mi.sipErrorCause(a.status_code);this._failed("remote",a,t);break}}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,Ia.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,Ia.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newOptions",value:function(a,t){a==="remote"?(this._direction="incoming",this._local_identity=t.to,this._remote_identity=t.from):a==="local"&&(this._direction="outgoing",this._local_identity=t.from,this._remote_identity=t.to),this._ua.newOptions(this,{originator:a,message:this,request:t})}},{key:"_failed",value:function(a,t,n){Kl.debug("OPTIONS failed"),this._close(),Kl.debug('emit "failed"'),this.emit("failed",{originator:a,response:t||null,cause:n})}},{key:"_succeeded",value:function(a,t){Kl.debug("OPTIONS succeeded"),this._close(),Kl.debug('emit "succeeded"'),this.emit("succeeded",{originator:a,response:t})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}]),r}(zp),qu={},em=ht,ba=It(),tm=us(),ki=new em("Socket");qu.isSocket=function(c){if(Array.isArray(c))return!1;if(typeof c>"u")return ki.warn("undefined JsSIP.Socket instance"),!1;try{if(!ba.isString(c.url))throw ki.warn("missing or invalid JsSIP.Socket url property"),new Error("Missing or invalid JsSIP.Socket url property");if(!ba.isString(c.via_transport))throw ki.warn("missing or invalid JsSIP.Socket via_transport property"),new Error("Missing or invalid JsSIP.Socket via_transport property");if(tm.parse(c.sip_uri,"SIP_URI")===-1)throw ki.warn("missing or invalid JsSIP.Socket sip_uri property"),new Error("missing or invalid JsSIP.Socket sip_uri property")}catch{return!1}try{["connect","disconnect","send"].forEach(function(s){if(!ba.isFunction(c[s]))throw ki.warn("missing or invalid JsSIP.Socket method: ".concat(s)),new Error("Missing or invalid JsSIP.Socket method: ".concat(s))})}catch{return!1}return!0};function sm(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function Kc(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function nm(c,s,r){return s&&Kc(c.prototype,s),r&&Kc(c,r),c}var rm=ht,im=qu,Yc=lt,Dt=new rm("Transport"),Vt={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:Yc.CONNECTION_RECOVERY_MIN_INTERVAL,max_interval:Yc.CONNECTION_RECOVERY_MAX_INTERVAL}},lm=function(){function c(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt.recovery_options;sm(this,c),Dt.debug("new()"),this.status=Vt.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=r,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1;try{this.textDecoder=new TextDecoder("utf8")}catch(o){Dt.warn("cannot use TextDecoder: ".concat(o))}if(typeof s>"u")throw new TypeError("Invalid argument. undefined 'sockets' argument");s instanceof Array||(s=[s]),s.forEach(function(o){if(!im.isSocket(o.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(o.weight&&!Number(o.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:o.socket,weight:o.weight||0,status:Vt.SOCKET_STATUS_READY})},this),this._getSocket()}return nm(c,[{key:"connect",value:function(){if(Dt.debug("connect()"),this.isConnected()){Dt.debug("Transport is already connected");return}else if(this.isConnecting()){Dt.debug("Transport is connecting");return}this.close_requested=!1,this.status=Vt.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect())}},{key:"disconnect",value:function(){Dt.debug("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=Vt.STATUS_DISCONNECTED,this.recovery_timer!==null&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}},{key:"send",value:function(r){if(Dt.debug("send()"),!this.isConnected())return Dt.warn("unable to send message, transport is not connected"),!1;var o=r.toString();return Dt.debug(`sending message:

`.concat(o,`
`)),this.socket.send(o)}},{key:"isConnected",value:function(){return this.status===Vt.STATUS_CONNECTED}},{key:"isConnecting",value:function(){return this.status===Vt.STATUS_CONNECTING}},{key:"_reconnect",value:function(){var r=this;this.recover_attempts+=1;var o=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1);o<this.recovery_options.min_interval?o=this.recovery_options.min_interval:o>this.recovery_options.max_interval&&(o=this.recovery_options.max_interval),Dt.debug("reconnection attempt: ".concat(this.recover_attempts,". next connection attempt in ").concat(o," seconds")),this.recovery_timer=setTimeout(function(){!r.close_requested&&!(r.isConnected()||r.isConnecting())&&(r._getSocket(),r.connect())},o*1e3)}},{key:"_getSocket",value:function(){var r=[];if(this.sockets.forEach(function(a){a.status!==Vt.SOCKET_STATUS_ERROR&&(r.length===0?r.push(a):a.weight>r[0].weight?r=[a]:a.weight===r[0].weight&&r.push(a))}),r.length===0){this.sockets.forEach(function(a){a.status=Vt.SOCKET_STATUS_READY}),this._getSocket();return}var o=Math.floor(Math.random()*r.length);this.socket=r[o].socket}},{key:"_onConnect",value:function(){this.recover_attempts=0,this.status=Vt.STATUS_CONNECTED,this.recovery_timer!==null&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}},{key:"_onDisconnect",value:function(r,o,a){this.status=Vt.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:r,code:o,reason:a}),!this.close_requested&&(this.sockets.forEach(function(t){this.socket===t.socket&&(t.status=Vt.SOCKET_STATUS_ERROR)},this),this._reconnect(r))}},{key:"_onData",value:function(r){if(r===`\r
`){Dt.debug("received message with CRLF Keep Alive response");return}else if(typeof r!="string"){try{this.textDecoder?r=this.textDecoder.decode(r):r=String.fromCharCode.apply(null,new Uint8Array(r))}catch{Dt.debug("received binary message failed to be converted into string, message discarded");return}Dt.debug(`received binary message:

`.concat(r,`
`))}else Dt.debug(`received text message:

`.concat(r,`
`));this.ondata({transport:this,message:r})}},{key:"via_transport",get:function(){return this.socket.via_transport}},{key:"url",get:function(){return this.socket.url}},{key:"sip_uri",get:function(){return this.socket.sip_uri}}]),c}(),gd={};function zc(c,s){var r;if(typeof Symbol>"u"||c[Symbol.iterator]==null){if(Array.isArray(c)||(r=om(c))||s&&c&&typeof c.length=="number"){r&&(c=r);var o=0,a=function(){};return{s:a,n:function(){return o>=c.length?{done:!0}:{done:!1,value:c[o++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t=!0,n=!1,p;return{s:function(){r=c[Symbol.iterator]()},n:function(){var h=r.next();return t=h.done,h},e:function(h){n=!0,p=h},f:function(){try{!t&&r.return!=null&&r.return()}finally{if(n)throw p}}}}function om(c,s){if(c){if(typeof c=="string")return Jc(c,s);var r=Object.prototype.toString.call(c).slice(8,-1);if(r==="Object"&&c.constructor&&(r=c.constructor.name),r==="Map"||r==="Set")return Array.from(c);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jc(c,s)}}function Jc(c,s){(s==null||s>c.length)&&(s=c.length);for(var r=0,o=new Array(s);r<s;r++)o[r]=c[r];return o}var am=ht,Ru=us(),Iu=As,Yl=new am("Parser");gd.parseMessage=function(c,s){var r,o,a=c.indexOf(`\r
`);if(a===-1){Yl.warn("parseMessage() | no CRLF found, not a SIP message");return}var t=c.substring(0,a),n=Ru.parse(t,"Request_Response");if(n===-1){Yl.warn('parseMessage() | error parsing first line of SIP message: "'.concat(t,'"'));return}else n.status_code?(r=new Iu.IncomingResponse,r.status_code=n.status_code,r.reason_phrase=n.reason_phrase):(r=new Iu.IncomingRequest(s),r.method=n.method,r.ruri=n.uri);r.data=c;for(var p=a+2;;){if(a=um(c,p),a===-2){o=p+2;break}else if(a===-1){Yl.warn("parseMessage() | malformed message");return}if(n=cm(r,c,p,a),n!==!0){Yl.warn("parseMessage() |",n.error);return}p=a+2}if(r.hasHeader("content-length")){var d=r.getHeader("content-length");r.body=c.substr(o,d)}else r.body=c.substring(o);return r};function um(c,s){var r=s,o=0,a=0;if(c.substring(r,r+2).match(/(^\r\n)/))return-2;for(;o===0;){if(a=c.indexOf(`\r
`,r),a===-1)return a;!c.substring(a+2,a+4).match(/(^\r\n)/)&&c.charAt(a+2).match(/(^\s+)/)?r=a+2:o=a}return o}function cm(c,s,r,o){var a,t=s.indexOf(":",r),n=s.substring(r,t).trim(),p=s.substring(t+1,o).trim();switch(n.toLowerCase()){case"via":case"v":c.addHeader("via",p),c.getHeaders("via").length===1?(a=c.parseHeader("Via"),a&&(c.via=a,c.via_branch=a.branch)):a=0;break;case"from":case"f":c.setHeader("from",p),a=c.parseHeader("from"),a&&(c.from=a,c.from_tag=a.getParam("tag"));break;case"to":case"t":c.setHeader("to",p),a=c.parseHeader("to"),a&&(c.to=a,c.to_tag=a.getParam("tag"));break;case"record-route":if(a=Ru.parse(p,"Record_Route"),a===-1)a=void 0;else{var d=zc(a),h;try{for(d.s();!(h=d.n()).done;){var g=h.value;c.addHeader("record-route",p.substring(g.possition,g.offset)),c.headers["Record-Route"][c.getHeaders("record-route").length-1].parsed=g.parsed}}catch(A){d.e(A)}finally{d.f()}}break;case"call-id":case"i":c.setHeader("call-id",p),a=c.parseHeader("call-id"),a&&(c.call_id=p);break;case"contact":case"m":if(a=Ru.parse(p,"Contact"),a===-1)a=void 0;else{var T=zc(a),E;try{for(T.s();!(E=T.n()).done;){var S=E.value;c.addHeader("contact",p.substring(S.possition,S.offset)),c.headers.Contact[c.getHeaders("contact").length-1].parsed=S.parsed}}catch(A){T.e(A)}finally{T.f()}}break;case"content-length":case"l":c.setHeader("content-length",p),a=c.parseHeader("content-length");break;case"content-type":case"c":c.setHeader("content-type",p),a=c.parseHeader("content-type");break;case"cseq":c.setHeader("cseq",p),a=c.parseHeader("cseq"),a&&(c.cseq=a.value),c instanceof Iu.IncomingResponse&&(c.method=a.method);break;case"max-forwards":c.setHeader("max-forwards",p),a=c.parseHeader("max-forwards");break;case"www-authenticate":c.setHeader("www-authenticate",p),a=c.parseHeader("www-authenticate");break;case"proxy-authenticate":c.setHeader("proxy-authenticate",p),a=c.parseHeader("proxy-authenticate");break;case"session-expires":case"x":c.setHeader("session-expires",p),a=c.parseHeader("session-expires"),a&&(c.session_expires=a.expires,c.session_expires_refresher=a.refresher);break;case"refer-to":case"r":c.setHeader("refer-to",p),a=c.parseHeader("refer-to"),a&&(c.refer_to=a);break;case"replaces":c.setHeader("replaces",p),a=c.parseHeader("replaces"),a&&(c.replaces=a);break;case"event":case"o":c.setHeader("event",p),a=c.parseHeader("event"),a&&(c.event=a);break;default:c.addHeader(n,p),a=0}return a===void 0?{error:'error parsing header "'.concat(n,'"')}:!0}function Io(c,s){var r;if(typeof Symbol>"u"||c[Symbol.iterator]==null){if(Array.isArray(c)||(r=fm(c))||s&&c&&typeof c.length=="number"){r&&(c=r);var o=0,a=function(){};return{s:a,n:function(){return o>=c.length?{done:!0}:{done:!1,value:c[o++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t=!0,n=!1,p;return{s:function(){r=c[Symbol.iterator]()},n:function(){var h=r.next();return t=h.done,h},e:function(h){n=!0,p=h},f:function(){try{!t&&r.return!=null&&r.return()}finally{if(n)throw p}}}}function fm(c,s){if(c){if(typeof c=="string")return Xc(c,s);var r=Object.prototype.toString.call(c).slice(8,-1);if(r==="Object"&&c.constructor&&(r=c.constructor.name),r==="Map"||r==="Set")return Array.from(c);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xc(c,s)}}function Xc(c,s){(s==null||s>c.length)&&(s=c.length);for(var r=0,o=new Array(s);r<s;r++)o[r]=c[r];return o}var dm=ht,Td=lt,Qc=As,Bu=It(),Gu=new dm("sanityCheck"),hm=[Am],_m=[gm,Tm,vm,Em],pm=[Sm,ym],Fe,ss,vd,mm=function(c,s,r){Fe=c,ss=s,vd=r;var o=Io(hm),a;try{for(o.s();!(a=o.n()).done;){var t=a.value;if(t()===!1)return!1}}catch(E){o.e(E)}finally{o.f()}if(Fe instanceof Qc.IncomingRequest){var n=Io(_m),p;try{for(n.s();!(p=n.n()).done;){var d=p.value;if(d()===!1)return!1}}catch(E){n.e(E)}finally{n.f()}}else if(Fe instanceof Qc.IncomingResponse){var h=Io(pm),g;try{for(h.s();!(g=h.n()).done;){var T=g.value;if(T()===!1)return!1}}catch(E){h.e(E)}finally{h.f()}}return!0};function gm(){if(Fe.s("to").uri.scheme!=="sip")return rl(416),!1}function Tm(){if(!Fe.to_tag&&Fe.call_id.substr(0,5)===ss.configuration.jssip_id)return rl(482),!1}function vm(){var c=Bu.str_utf8_length(Fe.body),s=Fe.getHeader("content-length");if(c<s)return rl(400),!1}function Em(){var c=Fe.from_tag,s=Fe.call_id,r=Fe.cseq,o;if(!Fe.to_tag)if(Fe.method===Td.INVITE){if(ss._transactions.ist[Fe.via_branch])return!1;for(var a in ss._transactions.ist)if(Object.prototype.hasOwnProperty.call(ss._transactions.ist,a)&&(o=ss._transactions.ist[a],o.request.from_tag===c&&o.request.call_id===s&&o.request.cseq===r))return rl(482),!1}else{if(ss._transactions.nist[Fe.via_branch])return!1;for(var t in ss._transactions.nist)if(Object.prototype.hasOwnProperty.call(ss._transactions.nist,t)&&(o=ss._transactions.nist[t],o.request.from_tag===c&&o.request.call_id===s&&o.request.cseq===r))return rl(482),!1}}function Sm(){if(Fe.getHeaders("via").length>1)return Gu.debug("more than one Via header field present in the response, dropping the response"),!1}function ym(){var c=Bu.str_utf8_length(Fe.body),s=Fe.getHeader("content-length");if(c<s)return Gu.debug("message body length is lower than the value in Content-Length header field, dropping the response"),!1}function Am(){for(var c=["from","to","call_id","cseq","via"],s=0,r=c;s<r.length;s++){var o=r[s];if(!Fe.hasHeader(o))return Gu.debug("missing mandatory header field : ".concat(o,", dropping the response")),!1}}function rl(c){var s=Fe.getHeaders("via"),r,o="SIP/2.0 ".concat(c," ").concat(Td.REASON_PHRASE[c],`\r
`),a=Io(s),t;try{for(a.s();!(t=a.n()).done;){var n=t.value;o+="Via: ".concat(n,`\r
`)}}catch(p){a.e(p)}finally{a.f()}r=Fe.getHeader("To"),Fe.to_tag||(r+=";tag=".concat(Bu.newTag())),o+="To: ".concat(r,`\r
`),o+="From: ".concat(Fe.getHeader("From"),`\r
`),o+="Call-ID: ".concat(Fe.call_id,`\r
`),o+="CSeq: ".concat(Fe.cseq," ").concat(Fe.method,`\r
`),o+=`\r
`,vd.send(o)}var Wu={};function Zc(c,s){var r;if(typeof Symbol>"u"||c[Symbol.iterator]==null){if(Array.isArray(c)||(r=Cm(c))||s&&c&&typeof c.length=="number"){r&&(c=r);var o=0,a=function(){};return{s:a,n:function(){return o>=c.length?{done:!0}:{done:!1,value:c[o++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t=!0,n=!1,p;return{s:function(){r=c[Symbol.iterator]()},n:function(){var h=r.next();return t=h.done,h},e:function(h){n=!0,p=h},f:function(){try{!t&&r.return!=null&&r.return()}finally{if(n)throw p}}}}function Cm(c,s){if(c){if(typeof c=="string")return ef(c,s);var r=Object.prototype.toString.call(c).slice(8,-1);if(r==="Object"&&c.constructor&&(r=c.constructor.name),r==="Map"||r==="Set")return Array.from(c);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ef(c,s)}}function ef(c,s){(s==null||s>c.length)&&(s=c.length);for(var r=0,o=new Array(s);r<s;r++)o[r]=c[r];return o}var fr=It(),An=lt,wa=us(),tf=Ks(),Oa=qu,Da=Ws;Wu.settings={authorization_user:null,password:null,realm:null,ha1:null,authorization_jwt:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:An.UPDATE,session_timers_force_refresher:!1,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:An.CONNECTION_RECOVERY_MAX_INTERVAL,connection_recovery_min_interval:An.CONNECTION_RECOVERY_MIN_INTERVAL,extra_headers:null,via_host:"".concat(fr.createRandomToken(12),".invalid")};var zl={mandatory:{sockets:function(s){var r=[];if(Oa.isSocket(s))r.push({socket:s});else if(Array.isArray(s)&&s.length){var o=Zc(s),a;try{for(o.s();!(a=o.n()).done;){var t=a.value;Object.prototype.hasOwnProperty.call(t,"socket")&&Oa.isSocket(t.socket)?r.push(t):Oa.isSocket(t)&&r.push({socket:t})}}catch(n){o.e(n)}finally{o.f()}}else return;return r},uri:function(s){/^sip:/i.test(s)||(s="".concat(An.SIP,":").concat(s));var r=tf.parse(s);if(r)return r.user?r:void 0}},optional:{authorization_user:function(s){if(wa.parse('"'.concat(s,'"'),"quoted_string")!==-1)return s},authorization_jwt:function(s){if(typeof s=="string")return s},user_agent:function(s){if(typeof s=="string")return s},connection_recovery_max_interval:function(s){if(fr.isDecimal(s)){var r=Number(s);if(r>0)return r}},connection_recovery_min_interval:function(s){if(fr.isDecimal(s)){var r=Number(s);if(r>0)return r}},contact_uri:function(s){if(typeof s=="string"){var r=wa.parse(s,"SIP_URI");if(r!==-1)return r}},display_name:function(s){return s},instance_id:function(s){if(/^uuid:/i.test(s)&&(s=s.substr(5)),wa.parse(s,"uuid")!==-1)return s},no_answer_timeout:function(s){if(fr.isDecimal(s)){var r=Number(s);if(r>0)return r}},session_timers:function(s){if(typeof s=="boolean")return s},session_timers_refresh_method:function(s){if(typeof s=="string"&&(s=s.toUpperCase(),s===An.INVITE||s===An.UPDATE))return s},session_timers_force_refresher:function(s){if(typeof s=="boolean")return s},password:function(s){return String(s)},realm:function(s){return String(s)},ha1:function(s){return String(s)},register:function(s){if(typeof s=="boolean")return s},register_expires:function(s){if(fr.isDecimal(s)){var r=Number(s);if(r>0)return r}},registrar_server:function(s){/^sip:/i.test(s)||(s="".concat(An.SIP,":").concat(s));var r=tf.parse(s);if(r)return r.user?void 0:r},use_preloaded_route:function(s){if(typeof s=="boolean")return s},extra_headers:function(s){var r=[];if(Array.isArray(s)&&s.length){var o=Zc(s),a;try{for(o.s();!(a=o.n()).done;){var t=a.value;typeof t=="string"&&r.push(t)}}catch(n){o.e(n)}finally{o.f()}}else return;return r}}};Wu.load=function(c,s){for(var r in zl.mandatory)if(s.hasOwnProperty(r)){var o=s[r],a=zl.mandatory[r](o);if(a!==void 0)c[r]=a;else throw new Da.ConfigurationError(r,o)}else throw new Da.ConfigurationError(r);for(var t in zl.optional)if(s.hasOwnProperty(t)){var n=s[t];if(fr.isEmpty(n))continue;var p=zl.optional[t](n);if(p!==void 0)c[t]=p;else throw new Da.ConfigurationError(t,n)}};function bo(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bo=function(r){return typeof r}:bo=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},bo(c)}function Rm(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function sf(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function nf(c,s,r){return s&&sf(c.prototype,s),r&&sf(c,r),c}function Im(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&bu(c,s)}function bu(c,s){return bu=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},bu(c,s)}function bm(c){var s=Om();return function(){var o=Lo(c),a;if(s){var t=Lo(this).constructor;a=Reflect.construct(o,arguments,t)}else a=o.apply(this,arguments);return wm(this,a)}}function wm(c,s){return s&&(bo(s)==="object"||typeof s=="function")?s:Ed(c)}function Ed(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Om(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Lo(c){return Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Lo(c)}var Dm=dt.EventEmitter,Nm=ht,pt=lt,Um=v_,rf=wp,lf=jp,of=Zp,Na=hl,Pm=lm,Jl=It(),xm=Ws,Mm=Ks(),km=gd,Ua=As,Lm=mm,Pa=Wu,Ve=new Nm("UA"),Tt={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2},$m=function(c){Im(r,c);var s=bm(r);nf(r,null,[{key:"C",get:function(){return Tt}}]);function r(o){var a;if(Rm(this,r),Ve.debug("new() [configuration:%o]",o),a=s.call(this),a._cache={credentials:{}},a._configuration=Object.assign({},Pa.settings),a._dynConfiguration={},a._dialogs={},a._applicants={},a._sessions={},a._transport=null,a._contact=null,a._status=Tt.STATUS_INIT,a._error=null,a._transactions={nist:{},nict:{},ist:{},ict:{}},a._data={},a._closeTimer=null,o===void 0)throw new TypeError("Not enough arguments");try{a._loadConfig(o)}catch(t){throw a._status=Tt.STATUS_NOT_READY,a._error=Tt.CONFIGURATION_ERROR,t}return a._registrator=new Um(Ed(a)),a}return nf(r,[{key:"start",value:function(){Ve.debug("start()"),this._status===Tt.STATUS_INIT?this._transport.connect():this._status===Tt.STATUS_USER_CLOSED?(Ve.debug("restarting UA"),this._closeTimer!==null&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=Tt.STATUS_INIT,this._transport.connect()):this._status===Tt.STATUS_READY?Ve.debug("UA is in READY status, not restarted"):Ve.debug("ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this._dynConfiguration.register=this._configuration.register}},{key:"register",value:function(){Ve.debug("register()"),this._dynConfiguration.register=!0,this._registrator.register()}},{key:"unregister",value:function(a){Ve.debug("unregister()"),this._dynConfiguration.register=!1,this._registrator.unregister(a)}},{key:"registrator",value:function(){return this._registrator}},{key:"isRegistered",value:function(){return this._registrator.registered}},{key:"isConnected",value:function(){return this._transport.isConnected()}},{key:"call",value:function(a,t){Ve.debug("call()");var n=new rf(this);return n.connect(a,t),n}},{key:"sendMessage",value:function(a,t,n){Ve.debug("sendMessage()");var p=new lf(this);return p.send(a,t,n),p}},{key:"sendOptions",value:function(a,t,n){Ve.debug("sendOptions()");var p=new of(this);return p.send(a,t,n),p}},{key:"terminateSessions",value:function(a){Ve.debug("terminateSessions()");for(var t in this._sessions)this._sessions[t].isEnded()||this._sessions[t].terminate(a)}},{key:"stop",value:function(){var a=this;if(Ve.debug("stop()"),this._dynConfiguration={},this._status===Tt.STATUS_USER_CLOSED){Ve.debug("UA already closed");return}this._registrator.close();var t=Object.keys(this._sessions).length;for(var n in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,n)){Ve.debug("closing session ".concat(n));try{this._sessions[n].terminate()}catch{}}for(var p in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,p))try{this._applicants[p].close()}catch{}this._status=Tt.STATUS_USER_CLOSED;var d=Object.keys(this._transactions.nict).length+Object.keys(this._transactions.nist).length+Object.keys(this._transactions.ict).length+Object.keys(this._transactions.ist).length;d===0&&t===0?this._transport.disconnect():this._closeTimer=setTimeout(function(){a._closeTimer=null,a._transport.disconnect()},2e3)}},{key:"normalizeTarget",value:function(a){return Jl.normalizeTarget(a,this._configuration.hostport_params)}},{key:"get",value:function(a){switch(a){case"authorization_user":return this._configuration.authorization_user;case"realm":return this._configuration.realm;case"ha1":return this._configuration.ha1;case"authorization_jwt":return this._configuration.authorization_jwt;default:Ve.warn('get() | cannot get "%s" parameter in runtime',a);return}}},{key:"set",value:function(a,t){switch(a){case"authorization_user":{this._configuration.authorization_user=String(t);break}case"password":{this._configuration.password=String(t);break}case"realm":{this._configuration.realm=String(t);break}case"ha1":{this._configuration.ha1=String(t),this._configuration.password=null;break}case"authorization_jwt":{this._configuration.authorization_jwt=String(t);break}case"display_name":{this._configuration.display_name=t;break}default:return Ve.warn('set() | cannot set "%s" parameter in runtime',a),!1}return!0}},{key:"newTransaction",value:function(a){this._transactions[a.type][a.id]=a,this.emit("newTransaction",{transaction:a})}},{key:"destroyTransaction",value:function(a){delete this._transactions[a.type][a.id],this.emit("transactionDestroyed",{transaction:a})}},{key:"newDialog",value:function(a){this._dialogs[a.id]=a}},{key:"destroyDialog",value:function(a){delete this._dialogs[a.id]}},{key:"newMessage",value:function(a,t){this._applicants[a]=a,this.emit("newMessage",t)}},{key:"newOptions",value:function(a,t){this._applicants[a]=a,this.emit("newOptions",t)}},{key:"destroyMessage",value:function(a){delete this._applicants[a]}},{key:"newRTCSession",value:function(a,t){this._sessions[a.id]=a,this.emit("newRTCSession",t)}},{key:"destroyRTCSession",value:function(a){delete this._sessions[a.id]}},{key:"registered",value:function(a){this.emit("registered",a)}},{key:"unregistered",value:function(a){this.emit("unregistered",a)}},{key:"registrationFailed",value:function(a){this.emit("registrationFailed",a)}},{key:"receiveRequest",value:function(a){var t=a.method;if(a.ruri.user!==this._configuration.uri.user&&a.ruri.user!==this._contact.uri.user){Ve.debug("Request-URI does not point to us"),a.method!==pt.ACK&&a.reply_sl(404);return}if(a.ruri.scheme===pt.SIPS){a.reply_sl(416);return}if(!Na.checkTransaction(this,a)){if(t===pt.INVITE?new Na.InviteServerTransaction(this,this._transport,a):t!==pt.ACK&&t!==pt.CANCEL&&new Na.NonInviteServerTransaction(this,this._transport,a),t===pt.OPTIONS){if(this.listeners("newOptions").length===0){a.reply(200);return}var n=new of(this);n.init_incoming(a)}else if(t===pt.MESSAGE){if(this.listeners("newMessage").length===0){a.reply(405);return}var p=new lf(this);p.init_incoming(a)}else if(t===pt.INVITE&&!a.to_tag&&this.listeners("newRTCSession").length===0){a.reply(405);return}var d,h;if(a.to_tag)d=this._findDialog(a.call_id,a.from_tag,a.to_tag),d?d.receiveRequest(a):t===pt.NOTIFY?(h=this._findSession(a),h?h.receiveRequest(a):(Ve.debug("received NOTIFY request for a non existent subscription"),a.reply(481,"Subscription does not exist"))):t!==pt.ACK&&a.reply(481);else switch(t){case pt.INVITE:if(window.RTCPeerConnection)if(a.hasHeader("replaces")){var g=a.replaces;d=this._findDialog(g.call_id,g.from_tag,g.to_tag),d?(h=d.owner,h.isEnded()?a.reply(603):h.receiveRequest(a)):a.reply(481)}else h=new rf(this),h.init_incoming(a);else Ve.warn("INVITE received but WebRTC is not supported"),a.reply(488);break;case pt.BYE:a.reply(481);break;case pt.CANCEL:h=this._findSession(a),h?h.receiveRequest(a):Ve.debug("received CANCEL request for a non existent session");break;case pt.ACK:break;case pt.NOTIFY:this.emit("sipEvent",{event:a.event,request:a}),a.reply(200);break;default:a.reply(405);break}}}},{key:"_findSession",value:function(a){var t=a.call_id,n=a.from_tag,p=a.to_tag,d=t+n,h=this._sessions[d],g=t+p,T=this._sessions[g];return h||T||null}},{key:"_findDialog",value:function(a,t,n){var p=a+t+n,d=this._dialogs[p];return d||(p=a+n+t,d=this._dialogs[p],d||null)}},{key:"_loadConfig",value:function(a){try{Pa.load(this._configuration,a)}catch(g){throw g}this._configuration.display_name===0&&(this._configuration.display_name="0"),this._configuration.instance_id||(this._configuration.instance_id=Jl.newUUID()),this._configuration.jssip_id=Jl.createRandomToken(5);var t=this._configuration.uri.clone();t.user=null,this._configuration.hostport_params=t.toString().replace(/^sip:/i,"");try{this._transport=new Pm(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=Hm.bind(this),this._transport.onconnect=Fm.bind(this),this._transport.ondisconnect=jm.bind(this),this._transport.ondata=Vm.bind(this)}catch(g){throw Ve.warn(g),new xm.ConfigurationError("sockets",this._configuration.sockets)}if(delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),!this._configuration.registrar_server){var n=this._configuration.uri.clone();n.user=null,n.clearParams(),n.clearHeaders(),this._configuration.registrar_server=n}this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new Mm("sip",Jl.createRandomToken(8),this._configuration.via_host,null,{transport:"ws"}),this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=T.anonymous||null,S=T.outbound||null,A="<";return E?A+=this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":A+=this.pub_gruu||this.uri.toString(),S&&(E?!this.temp_gruu:!this.pub_gruu)&&(A+=";ob"),A+=">",A}};var p=["authorization_user","password","realm","ha1","authorization_jwt","display_name","register"];for(var d in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,d)&&(p.indexOf(d)!==-1?Object.defineProperty(this._configuration,d,{writable:!0,configurable:!1}):Object.defineProperty(this._configuration,d,{writable:!1,configurable:!1}));Ve.debug("configuration parameters after validation:");for(var h in this._configuration)if(Object.prototype.hasOwnProperty.call(Pa.settings,h))switch(h){case"uri":case"registrar_server":Ve.debug("- ".concat(h,": ").concat(this._configuration[h]));break;case"password":case"ha1":case"authorization_jwt":Ve.debug("- ".concat(h,": NOT SHOWN"));break;default:Ve.debug("- ".concat(h,": ").concat(JSON.stringify(this._configuration[h])))}}},{key:"C",get:function(){return Tt}},{key:"status",get:function(){return this._status}},{key:"contact",get:function(){return this._contact}},{key:"configuration",get:function(){return this._configuration}},{key:"transport",get:function(){return this._transport}}]),r}(Dm);function Hm(c){this.emit("connecting",c)}function Fm(c){this._status!==Tt.STATUS_USER_CLOSED&&(this._status=Tt.STATUS_READY,this._error=null,this.emit("connected",c),this._dynConfiguration.register&&this._registrator.register())}function jm(c){for(var s=["nict","ict","nist","ist"],r=0,o=s;r<o.length;r++){var a=o[r];for(var t in this._transactions[a])Object.prototype.hasOwnProperty.call(this._transactions[a],t)&&this._transactions[a][t].onTransportError()}this.emit("disconnected",c),this._registrator.onTransportClosed(),this._status!==Tt.STATUS_USER_CLOSED&&(this._status=Tt.STATUS_NOT_READY,this._error=Tt.NETWORK_ERROR)}function Vm(c){var s=c.transport,r=c.message;if(r=km.parseMessage(r,this),!!r&&!(this._status===Tt.STATUS_USER_CLOSED&&r instanceof Ua.IncomingRequest)&&Lm(r,this,s)){if(r instanceof Ua.IncomingRequest)r.transport=s,this.receiveRequest(r);else if(r instanceof Ua.IncomingResponse){var o;switch(r.method){case pt.INVITE:o=this._transactions.ict[r.via_branch],o&&o.receiveResponse(r);break;case pt.ACK:break;default:o=this._transactions.nict[r.via_branch],o&&o.receiveResponse(r);break}}}}function qm(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function af(c,s){for(var r=0;r<s.length;r++){var o=s[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}function Bm(c,s,r){return s&&af(c.prototype,s),r&&af(c,r),c}var Gm=ht,Wm=us(),wt=new Gm("WebSocketInterface"),Km=function(){function c(s){qm(this,c),wt.debug('new() [url:"%s"]',s),this._url=s,this._sip_uri=null,this._via_transport=null,this._ws=null;var r=Wm.parse(s,"absoluteURI");if(r===-1)throw wt.warn("invalid WebSocket URI: ".concat(s)),new TypeError("Invalid argument: ".concat(s));if(r.scheme!=="wss"&&r.scheme!=="ws")throw wt.warn("invalid WebSocket URI scheme: ".concat(r.scheme)),new TypeError("Invalid argument: ".concat(s));this._sip_uri="sip:".concat(r.host).concat(r.port?":".concat(r.port):"",";transport=ws"),this._via_transport=r.scheme.toUpperCase()}return Bm(c,[{key:"connect",value:function(){if(wt.debug("connect()"),this.isConnected()){wt.debug("WebSocket ".concat(this._url," is already connected"));return}else if(this.isConnecting()){wt.debug("WebSocket ".concat(this._url," is connecting"));return}this._ws&&this.disconnect(),wt.debug("connecting to WebSocket ".concat(this._url));try{this._ws=new WebSocket(this._url,"sip"),this._ws.binaryType="arraybuffer",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(r){this._onError(r)}}},{key:"disconnect",value:function(){wt.debug("disconnect()"),this._ws&&(this._ws.onopen=function(){},this._ws.onclose=function(){},this._ws.onmessage=function(){},this._ws.onerror=function(){},this._ws.close(),this._ws=null)}},{key:"send",value:function(r){return wt.debug("send()"),this.isConnected()?(this._ws.send(r),!0):(wt.warn("unable to send message, WebSocket is not open"),!1)}},{key:"isConnected",value:function(){return this._ws&&this._ws.readyState===this._ws.OPEN}},{key:"isConnecting",value:function(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}},{key:"_onOpen",value:function(){wt.debug("WebSocket ".concat(this._url," connected")),this.onconnect()}},{key:"_onClose",value:function(r){var o=r.wasClean,a=r.code,t=r.reason;wt.debug("WebSocket ".concat(this._url," closed")),o===!1&&wt.debug("WebSocket abrupt disconnection"),this.ondisconnect(!o,a,t)}},{key:"_onMessage",value:function(r){var o=r.data;wt.debug("received WebSocket message"),this.ondata(o)}},{key:"_onError",value:function(r){wt.warn("WebSocket ".concat(this._url," error: "),r)}},{key:"via_transport",get:function(){return this._via_transport},set:function(r){this._via_transport=r.toUpperCase()}},{key:"sip_uri",get:function(){return this._sip_uri}},{key:"url",get:function(){return this._url}}]),c}(),wu=jo,Ym=lt,zm=Ws,Jm=It(),Xm=$m,Qm=Ks(),Zm=$u(),eg=us(),tg=Km,sg=mr("JsSIP");sg("version %s",wu.version);var uf={C:Ym,Exceptions:zm,Utils:Jm,UA:Xm,URI:Qm,NameAddrHeader:Zm,WebSocketInterface:tg,Grammar:eg,debug:mr,get name(){return wu.title},get version(){return wu.version}};const ar=mr,ur="JsSIP";var ct=class{constructor(s){s?(this._debug=ar.default(`${ur}:${s}`),this._warn=ar.default(`${ur}:WARN:${s}`),this._error=ar.default(`${ur}:ERROR:${s}`)):(this._debug=ar.default(ur),this._warn=ar.default(`${ur}:WARN`),this._error=ar.default(`${ur}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};const Sd=ut(ct),cf=jo;var Pe={USER_AGENT:`${cf.title} ${cf.version}`,SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2};const G=ut(Pe);var et={},xa,ff;function Ku(){if(ff)return xa;ff=1;const c=Cs(),s=cs();return xa=class yd{static parse(o){if(o=s.parse(o,"Name_Addr_Header"),o!==-1)return o}constructor(o,a,t){if(!o||!(o instanceof c))throw new TypeError('missing or invalid "uri" parameter');this._uri=o,this._parameters={},this.display_name=a;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.setParam(n,t[n])}get uri(){return this._uri}get display_name(){return this._display_name}set display_name(o){this._display_name=o===0?"0":o}setParam(o,a){o&&(this._parameters[o.toLowerCase()]=typeof a>"u"||a===null?null:a.toString())}getParam(o){if(o)return this._parameters[o.toLowerCase()]}hasParam(o){if(o)return this._parameters.hasOwnProperty(o.toLowerCase())&&!0||!1}deleteParam(o){if(o=o.toLowerCase(),this._parameters.hasOwnProperty(o)){const a=this._parameters[o];return delete this._parameters[o],a}}clearParams(){this._parameters={}}clone(){return new yd(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}_quote(o){return o.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}toString(){let o=this._display_name?`"${this._quote(this._display_name)}" `:"";o+=`<${this._uri.toString()}>`;for(const a in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,a)&&(o+=`;${a}`,this._parameters[a]!==null&&(o+=`=${this._parameters[a]}`));return o}},xa}var Ma,df;function cs(){return df||(df=1,Ma=function(){function c(r){return'"'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var s={parse:function(r,o){var a={CRLF:h,DIGIT:g,ALPHA:T,HEXDIG:E,WSP:S,OCTET:A,DQUOTE:R,SP:C,HTAB:$,alphanum:L,reserved:ne,unreserved:D,mark:F,escaped:Se,LWS:ve,SWS:M,HCOLON:N,TEXT_UTF8_TRIM:q,TEXT_UTF8char:V,UTF8_NONASCII:z,UTF8_CONT:H,LHEX:J,token:U,token_nodot:P,separators:se,word:st,STAR:ee,SLASH:W,EQUAL:B,LPAREN:ie,RPAREN:ge,RAQUOT:be,LAQUOT:Me,COMMA:Ce,SEMI:oe,COLON:ye,LDQUOT:nt,RDQUOT:ot,comment:Ee,ctext:Ae,quoted_string:Ie,quoted_string_clean:Oe,qdtext:pe,quoted_pair:ue,SIP_URI_noparams:_e,SIP_URI:we,uri_scheme:Ne,uri_scheme_sips:Qe,uri_scheme_sip:$e,userinfo:Lt,user:_t,user_unreserved:wn,password:On,hostport:Ys,host:Qt,hostname:fs,domainlabel:zs,toplabel:Dn,IPv6reference:Nn,IPv6address:Js,h16:me,ls32:ae,IPv4address:at,dec_octet:Wt,port:Is,uri_parameters:vr,uri_parameter:Un,transport_param:Pn,user_param:Er,method_param:Sr,ttl_param:yr,maddr_param:Ar,lr_param:Cr,other_param:Rr,pname:Ir,pvalue:br,paramchar:bs,param_unreserved:ws,headers:wr,header:Xs,hname:Qs,hvalue:Or,hnv_unreserved:Os,Request_Response:Zs,Request_Line:Tl,Request_URI:Dr,absoluteURI:xn,hier_part:Mn,net_path:Nr,abs_path:en,opaque_part:tn,uric:Ds,uric_no_slash:Ns,path_segments:Ur,segment:sn,param:Us,pchar:ds,scheme:Ps,authority:Pr,srvr:xr,reg_name:Mr,query:kr,SIP_Version:kn,INVITEm:Ln,ACKm:Lr,OPTIONSm:$r,BYEm:Hr,CANCELm:Fr,REGISTERm:jr,SUBSCRIBEm:Vr,NOTIFYm:qr,REFERm:Br,Method:nn,Status_Line:rn,Status_Code:Gr,extension_code:Wr,Reason_Phrase:Kr,Allow_Events:vl,Call_ID:zo,Contact:Jo,contact_param:$n,name_addr:$t,display_name:Ht,contact_params:xs,c_p_q:Hn,c_p_expires:Yr,delta_seconds:Zt,qvalue:es,generic_param:We,gen_value:Ke,Content_Disposition:El,disp_type:Sl,disp_param:Fn,handling_param:jn,Content_Encoding:yl,Content_Length:Xo,Content_Type:Qo,media_type:Al,m_type:zr,discrete_type:Jr,composite_type:Xr,extension_token:ln,x_token:on,m_subtype:Qr,m_parameter:Vn,m_value:qn,CSeq:Cl,CSeq_value:Rl,Expires:Il,Event:Zo,event_type:an,From:un,from_param:Zr,tag_param:cn,Max_Forwards:ei,Min_Expires:ea,Name_Addr_Header:ta,Proxy_Authenticate:sa,challenge:ti,other_challenge:Bn,auth_param:Ms,digest_cln:ts,realm:fn,realm_value:si,domain:ni,URI:dn,nonce:hn,nonce_value:ri,opaque:ii,stale:li,algorithm:oi,qop_options:ai,qop_value:_n,Proxy_Require:Gn,Record_Route:na,rec_route:Wn,Reason:Kn,reason_param:ui,reason_cause:Yn,Require:bl,Route:ra,route_param:zn,Subscription_State:Jn,substate_value:wl,subexp_params:Xn,event_reason_value:Qn,Subject:Ol,Supported:ia,To:la,to_param:ci,Via:fi,via_param:Zn,via_params:ks,via_ttl:er,via_maddr:di,via_received:hi,via_branch:_i,response_port:pi,rport:mi,sent_protocol:gi,protocol_name:Ti,transport:vi,sent_by:Ei,via_host:Si,via_port:yi,ttl:tr,WWW_Authenticate:Ai,Session_Expires:oa,s_e_expires:Dl,s_e_params:sr,s_e_refresher:nr,extension_header:Nl,header_value:Ul,message_body:Pl,uuid_URI:aa,uuid:xl,hex4:Ft,hex8:jt,hex12:Ci,Refer_To:Ml,Replaces:ua,call_id:kl,replaces_param:rr,to_tag:ir,from_tag:Ri,early_flag:Ii};if(o!==void 0){if(a[o]===void 0)throw new Error("Invalid rule name: "+c(o)+".")}else o="CRLF";var t=0,n=0,p=[];function d(i){t<n||(t>n&&(n=t,p=[]),p.push(i))}function h(){var i;return r.substr(t,2)===`\r
`?(i=`\r
`,t+=2):(i=null,d('"\\r\\n"')),i}function g(){var i;return/^[0-9]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[0-9]")),i}function T(){var i;return/^[a-zA-Z]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[a-zA-Z]")),i}function E(){var i;return/^[0-9a-fA-F]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[0-9a-fA-F]")),i}function S(){var i;return i=C(),i===null&&(i=$()),i}function A(){var i;return/^[\0-\xFF]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[\\0-\\xFF]")),i}function R(){var i;return/^["]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d('["]')),i}function C(){var i;return r.charCodeAt(t)===32?(i=" ",t++):(i=null,d('" "')),i}function $(){var i;return r.charCodeAt(t)===9?(i="	",t++):(i=null,d('"\\t"')),i}function L(){var i;return/^[a-zA-Z0-9]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[a-zA-Z0-9]")),i}function ne(){var i;return r.charCodeAt(t)===59?(i=";",t++):(i=null,d('";"')),i===null&&(r.charCodeAt(t)===47?(i="/",t++):(i=null,d('"/"')),i===null&&(r.charCodeAt(t)===63?(i="?",t++):(i=null,d('"?"')),i===null&&(r.charCodeAt(t)===58?(i=":",t++):(i=null,d('":"')),i===null&&(r.charCodeAt(t)===64?(i="@",t++):(i=null,d('"@"')),i===null&&(r.charCodeAt(t)===38?(i="&",t++):(i=null,d('"&"')),i===null&&(r.charCodeAt(t)===61?(i="=",t++):(i=null,d('"="')),i===null&&(r.charCodeAt(t)===43?(i="+",t++):(i=null,d('"+"')),i===null&&(r.charCodeAt(t)===36?(i="$",t++):(i=null,d('"$"')),i===null&&(r.charCodeAt(t)===44?(i=",",t++):(i=null,d('","'))))))))))),i}function D(){var i;return i=L(),i===null&&(i=F()),i}function F(){var i;return r.charCodeAt(t)===45?(i="-",t++):(i=null,d('"-"')),i===null&&(r.charCodeAt(t)===95?(i="_",t++):(i=null,d('"_"')),i===null&&(r.charCodeAt(t)===46?(i=".",t++):(i=null,d('"."')),i===null&&(r.charCodeAt(t)===33?(i="!",t++):(i=null,d('"!"')),i===null&&(r.charCodeAt(t)===126?(i="~",t++):(i=null,d('"~"')),i===null&&(r.charCodeAt(t)===42?(i="*",t++):(i=null,d('"*"')),i===null&&(r.charCodeAt(t)===39?(i="'",t++):(i=null,d(`"'"`)),i===null&&(r.charCodeAt(t)===40?(i="(",t++):(i=null,d('"("')),i===null&&(r.charCodeAt(t)===41?(i=")",t++):(i=null,d('")"')))))))))),i}function Se(){var i,e,l,u,f;return u=t,f=t,r.charCodeAt(t)===37?(i="%",t++):(i=null,d('"%"')),i!==null?(e=E(),e!==null?(l=E(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){return m.join("")}(u,i)),i===null&&(t=u),i}function ve(){var i,e,l,u,f,_;for(u=t,f=t,_=t,i=[],e=S();e!==null;)i.push(e),e=S();if(i!==null?(e=h(),e!==null?i=[i,e]:(i=null,t=_)):(i=null,t=_),i=i!==null?i:"",i!==null){if(l=S(),l!==null)for(e=[];l!==null;)e.push(l),l=S();else e=null;e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i!==null&&(i=function(m){return" "}()),i===null&&(t=u),i}function M(){var i;return i=ve(),i=i!==null?i:"",i}function N(){var i,e,l,u,f;for(u=t,f=t,i=[],e=C(),e===null&&(e=$());e!==null;)i.push(e),e=C(),e===null&&(e=$());return i!==null?(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=M(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_){return":"}()),i===null&&(t=u),i}function q(){var i,e,l,u,f,_,m;if(f=t,_=t,e=V(),e!==null)for(i=[];e!==null;)i.push(e),e=V();else i=null;if(i!==null){for(e=[],m=t,l=[],u=ve();u!==null;)l.push(u),u=ve();for(l!==null?(u=V(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;){for(e.push(l),m=t,l=[],u=ve();u!==null;)l.push(u),u=ve();l!==null?(u=V(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m)}e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i!==null&&(i=function(v){return r.substring(t,v)}(f)),i===null&&(t=f),i}function V(){var i;return/^[!-~]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[!-~]")),i===null&&(i=z()),i}function z(){var i;return/^[\x80-\uFFFF]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[\\x80-\\uFFFF]")),i}function H(){var i;return/^[\x80-\xBF]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[\\x80-\\xBF]")),i}function J(){var i;return i=g(),i===null&&(/^[a-f]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[a-f]"))),i}function U(){var i,e,l;if(l=t,e=L(),e===null&&(r.charCodeAt(t)===45?(e="-",t++):(e=null,d('"-"')),e===null&&(r.charCodeAt(t)===46?(e=".",t++):(e=null,d('"."')),e===null&&(r.charCodeAt(t)===33?(e="!",t++):(e=null,d('"!"')),e===null&&(r.charCodeAt(t)===37?(e="%",t++):(e=null,d('"%"')),e===null&&(r.charCodeAt(t)===42?(e="*",t++):(e=null,d('"*"')),e===null&&(r.charCodeAt(t)===95?(e="_",t++):(e=null,d('"_"')),e===null&&(r.charCodeAt(t)===43?(e="+",t++):(e=null,d('"+"')),e===null&&(r.charCodeAt(t)===96?(e="`",t++):(e=null,d('"`"')),e===null&&(r.charCodeAt(t)===39?(e="'",t++):(e=null,d(`"'"`)),e===null&&(r.charCodeAt(t)===126?(e="~",t++):(e=null,d('"~"')))))))))))),e!==null)for(i=[];e!==null;)i.push(e),e=L(),e===null&&(r.charCodeAt(t)===45?(e="-",t++):(e=null,d('"-"')),e===null&&(r.charCodeAt(t)===46?(e=".",t++):(e=null,d('"."')),e===null&&(r.charCodeAt(t)===33?(e="!",t++):(e=null,d('"!"')),e===null&&(r.charCodeAt(t)===37?(e="%",t++):(e=null,d('"%"')),e===null&&(r.charCodeAt(t)===42?(e="*",t++):(e=null,d('"*"')),e===null&&(r.charCodeAt(t)===95?(e="_",t++):(e=null,d('"_"')),e===null&&(r.charCodeAt(t)===43?(e="+",t++):(e=null,d('"+"')),e===null&&(r.charCodeAt(t)===96?(e="`",t++):(e=null,d('"`"')),e===null&&(r.charCodeAt(t)===39?(e="'",t++):(e=null,d(`"'"`)),e===null&&(r.charCodeAt(t)===126?(e="~",t++):(e=null,d('"~"'))))))))))));else i=null;return i!==null&&(i=function(u){return r.substring(t,u)}(l)),i===null&&(t=l),i}function P(){var i,e,l;if(l=t,e=L(),e===null&&(r.charCodeAt(t)===45?(e="-",t++):(e=null,d('"-"')),e===null&&(r.charCodeAt(t)===33?(e="!",t++):(e=null,d('"!"')),e===null&&(r.charCodeAt(t)===37?(e="%",t++):(e=null,d('"%"')),e===null&&(r.charCodeAt(t)===42?(e="*",t++):(e=null,d('"*"')),e===null&&(r.charCodeAt(t)===95?(e="_",t++):(e=null,d('"_"')),e===null&&(r.charCodeAt(t)===43?(e="+",t++):(e=null,d('"+"')),e===null&&(r.charCodeAt(t)===96?(e="`",t++):(e=null,d('"`"')),e===null&&(r.charCodeAt(t)===39?(e="'",t++):(e=null,d(`"'"`)),e===null&&(r.charCodeAt(t)===126?(e="~",t++):(e=null,d('"~"'))))))))))),e!==null)for(i=[];e!==null;)i.push(e),e=L(),e===null&&(r.charCodeAt(t)===45?(e="-",t++):(e=null,d('"-"')),e===null&&(r.charCodeAt(t)===33?(e="!",t++):(e=null,d('"!"')),e===null&&(r.charCodeAt(t)===37?(e="%",t++):(e=null,d('"%"')),e===null&&(r.charCodeAt(t)===42?(e="*",t++):(e=null,d('"*"')),e===null&&(r.charCodeAt(t)===95?(e="_",t++):(e=null,d('"_"')),e===null&&(r.charCodeAt(t)===43?(e="+",t++):(e=null,d('"+"')),e===null&&(r.charCodeAt(t)===96?(e="`",t++):(e=null,d('"`"')),e===null&&(r.charCodeAt(t)===39?(e="'",t++):(e=null,d(`"'"`)),e===null&&(r.charCodeAt(t)===126?(e="~",t++):(e=null,d('"~"')))))))))));else i=null;return i!==null&&(i=function(u){return r.substring(t,u)}(l)),i===null&&(t=l),i}function se(){var i;return r.charCodeAt(t)===40?(i="(",t++):(i=null,d('"("')),i===null&&(r.charCodeAt(t)===41?(i=")",t++):(i=null,d('")"')),i===null&&(r.charCodeAt(t)===60?(i="<",t++):(i=null,d('"<"')),i===null&&(r.charCodeAt(t)===62?(i=">",t++):(i=null,d('">"')),i===null&&(r.charCodeAt(t)===64?(i="@",t++):(i=null,d('"@"')),i===null&&(r.charCodeAt(t)===44?(i=",",t++):(i=null,d('","')),i===null&&(r.charCodeAt(t)===59?(i=";",t++):(i=null,d('";"')),i===null&&(r.charCodeAt(t)===58?(i=":",t++):(i=null,d('":"')),i===null&&(r.charCodeAt(t)===92?(i="\\",t++):(i=null,d('"\\\\"')),i===null&&(i=R(),i===null&&(r.charCodeAt(t)===47?(i="/",t++):(i=null,d('"/"')),i===null&&(r.charCodeAt(t)===91?(i="[",t++):(i=null,d('"["')),i===null&&(r.charCodeAt(t)===93?(i="]",t++):(i=null,d('"]"')),i===null&&(r.charCodeAt(t)===63?(i="?",t++):(i=null,d('"?"')),i===null&&(r.charCodeAt(t)===61?(i="=",t++):(i=null,d('"="')),i===null&&(r.charCodeAt(t)===123?(i="{",t++):(i=null,d('"{"')),i===null&&(r.charCodeAt(t)===125?(i="}",t++):(i=null,d('"}"')),i===null&&(i=C(),i===null&&(i=$())))))))))))))))))),i}function st(){var i,e,l;if(l=t,e=L(),e===null&&(r.charCodeAt(t)===45?(e="-",t++):(e=null,d('"-"')),e===null&&(r.charCodeAt(t)===46?(e=".",t++):(e=null,d('"."')),e===null&&(r.charCodeAt(t)===33?(e="!",t++):(e=null,d('"!"')),e===null&&(r.charCodeAt(t)===37?(e="%",t++):(e=null,d('"%"')),e===null&&(r.charCodeAt(t)===42?(e="*",t++):(e=null,d('"*"')),e===null&&(r.charCodeAt(t)===95?(e="_",t++):(e=null,d('"_"')),e===null&&(r.charCodeAt(t)===43?(e="+",t++):(e=null,d('"+"')),e===null&&(r.charCodeAt(t)===96?(e="`",t++):(e=null,d('"`"')),e===null&&(r.charCodeAt(t)===39?(e="'",t++):(e=null,d(`"'"`)),e===null&&(r.charCodeAt(t)===126?(e="~",t++):(e=null,d('"~"')),e===null&&(r.charCodeAt(t)===40?(e="(",t++):(e=null,d('"("')),e===null&&(r.charCodeAt(t)===41?(e=")",t++):(e=null,d('")"')),e===null&&(r.charCodeAt(t)===60?(e="<",t++):(e=null,d('"<"')),e===null&&(r.charCodeAt(t)===62?(e=">",t++):(e=null,d('">"')),e===null&&(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e===null&&(r.charCodeAt(t)===92?(e="\\",t++):(e=null,d('"\\\\"')),e===null&&(e=R(),e===null&&(r.charCodeAt(t)===47?(e="/",t++):(e=null,d('"/"')),e===null&&(r.charCodeAt(t)===91?(e="[",t++):(e=null,d('"["')),e===null&&(r.charCodeAt(t)===93?(e="]",t++):(e=null,d('"]"')),e===null&&(r.charCodeAt(t)===63?(e="?",t++):(e=null,d('"?"')),e===null&&(r.charCodeAt(t)===123?(e="{",t++):(e=null,d('"{"')),e===null&&(r.charCodeAt(t)===125?(e="}",t++):(e=null,d('"}"'))))))))))))))))))))))))),e!==null)for(i=[];e!==null;)i.push(e),e=L(),e===null&&(r.charCodeAt(t)===45?(e="-",t++):(e=null,d('"-"')),e===null&&(r.charCodeAt(t)===46?(e=".",t++):(e=null,d('"."')),e===null&&(r.charCodeAt(t)===33?(e="!",t++):(e=null,d('"!"')),e===null&&(r.charCodeAt(t)===37?(e="%",t++):(e=null,d('"%"')),e===null&&(r.charCodeAt(t)===42?(e="*",t++):(e=null,d('"*"')),e===null&&(r.charCodeAt(t)===95?(e="_",t++):(e=null,d('"_"')),e===null&&(r.charCodeAt(t)===43?(e="+",t++):(e=null,d('"+"')),e===null&&(r.charCodeAt(t)===96?(e="`",t++):(e=null,d('"`"')),e===null&&(r.charCodeAt(t)===39?(e="'",t++):(e=null,d(`"'"`)),e===null&&(r.charCodeAt(t)===126?(e="~",t++):(e=null,d('"~"')),e===null&&(r.charCodeAt(t)===40?(e="(",t++):(e=null,d('"("')),e===null&&(r.charCodeAt(t)===41?(e=")",t++):(e=null,d('")"')),e===null&&(r.charCodeAt(t)===60?(e="<",t++):(e=null,d('"<"')),e===null&&(r.charCodeAt(t)===62?(e=">",t++):(e=null,d('">"')),e===null&&(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e===null&&(r.charCodeAt(t)===92?(e="\\",t++):(e=null,d('"\\\\"')),e===null&&(e=R(),e===null&&(r.charCodeAt(t)===47?(e="/",t++):(e=null,d('"/"')),e===null&&(r.charCodeAt(t)===91?(e="[",t++):(e=null,d('"["')),e===null&&(r.charCodeAt(t)===93?(e="]",t++):(e=null,d('"]"')),e===null&&(r.charCodeAt(t)===63?(e="?",t++):(e=null,d('"?"')),e===null&&(r.charCodeAt(t)===123?(e="{",t++):(e=null,d('"{"')),e===null&&(r.charCodeAt(t)===125?(e="}",t++):(e=null,d('"}"')))))))))))))))))))))))));else i=null;return i!==null&&(i=function(u){return r.substring(t,u)}(l)),i===null&&(t=l),i}function ee(){var i,e,l,u,f;return u=t,f=t,i=M(),i!==null?(r.charCodeAt(t)===42?(e="*",t++):(e=null,d('"*"')),e!==null?(l=M(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_){return"*"}()),i===null&&(t=u),i}function W(){var i,e,l,u,f;return u=t,f=t,i=M(),i!==null?(r.charCodeAt(t)===47?(e="/",t++):(e=null,d('"/"')),e!==null?(l=M(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_){return"/"}()),i===null&&(t=u),i}function B(){var i,e,l,u,f;return u=t,f=t,i=M(),i!==null?(r.charCodeAt(t)===61?(e="=",t++):(e=null,d('"="')),e!==null?(l=M(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_){return"="}()),i===null&&(t=u),i}function ie(){var i,e,l,u,f;return u=t,f=t,i=M(),i!==null?(r.charCodeAt(t)===40?(e="(",t++):(e=null,d('"("')),e!==null?(l=M(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_){return"("}()),i===null&&(t=u),i}function ge(){var i,e,l,u,f;return u=t,f=t,i=M(),i!==null?(r.charCodeAt(t)===41?(e=")",t++):(e=null,d('")"')),e!==null?(l=M(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_){return")"}()),i===null&&(t=u),i}function be(){var i,e,l,u;return l=t,u=t,r.charCodeAt(t)===62?(i=">",t++):(i=null,d('">"')),i!==null?(e=M(),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i!==null&&(i=function(f){return">"}()),i===null&&(t=l),i}function Me(){var i,e,l,u;return l=t,u=t,i=M(),i!==null?(r.charCodeAt(t)===60?(e="<",t++):(e=null,d('"<"')),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i!==null&&(i=function(f){return"<"}()),i===null&&(t=l),i}function Ce(){var i,e,l,u,f;return u=t,f=t,i=M(),i!==null?(r.charCodeAt(t)===44?(e=",",t++):(e=null,d('","')),e!==null?(l=M(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_){return","}()),i===null&&(t=u),i}function oe(){var i,e,l,u,f;return u=t,f=t,i=M(),i!==null?(r.charCodeAt(t)===59?(e=";",t++):(e=null,d('";"')),e!==null?(l=M(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_){return";"}()),i===null&&(t=u),i}function ye(){var i,e,l,u,f;return u=t,f=t,i=M(),i!==null?(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=M(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_){return":"}()),i===null&&(t=u),i}function nt(){var i,e,l,u;return l=t,u=t,i=M(),i!==null?(e=R(),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i!==null&&(i=function(f){return'"'}()),i===null&&(t=l),i}function ot(){var i,e,l,u;return l=t,u=t,i=R(),i!==null?(e=M(),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i!==null&&(i=function(f){return'"'}()),i===null&&(t=l),i}function Ee(){var i,e,l,u;if(u=t,i=ie(),i!==null){for(e=[],l=Ae(),l===null&&(l=ue(),l===null&&(l=Ee()));l!==null;)e.push(l),l=Ae(),l===null&&(l=ue(),l===null&&(l=Ee()));e!==null?(l=ge(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)}else i=null,t=u;return i}function Ae(){var i;return/^[!-']/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[!-']")),i===null&&(/^[*-[]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[*-[]")),i===null&&(/^[\]-~]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[\\]-~]")),i===null&&(i=z(),i===null&&(i=ve())))),i}function Ie(){var i,e,l,u,f,_;if(f=t,_=t,i=M(),i!==null)if(e=R(),e!==null){for(l=[],u=pe(),u===null&&(u=ue());u!==null;)l.push(u),u=pe(),u===null&&(u=ue());l!==null?(u=R(),u!==null?i=[i,e,l,u]:(i=null,t=_)):(i=null,t=_)}else i=null,t=_;else i=null,t=_;return i!==null&&(i=function(m){return r.substring(t,m)}(f)),i===null&&(t=f),i}function Oe(){var i,e,l,u,f,_;if(f=t,_=t,i=M(),i!==null)if(e=R(),e!==null){for(l=[],u=pe(),u===null&&(u=ue());u!==null;)l.push(u),u=pe(),u===null&&(u=ue());l!==null?(u=R(),u!==null?i=[i,e,l,u]:(i=null,t=_)):(i=null,t=_)}else i=null,t=_;else i=null,t=_;return i!==null&&(i=function(m){var v=r.substring(t,m).trim();return v.substring(1,v.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1")}(f)),i===null&&(t=f),i}function pe(){var i;return i=ve(),i===null&&(r.charCodeAt(t)===33?(i="!",t++):(i=null,d('"!"')),i===null&&(/^[#-[]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[#-[]")),i===null&&(/^[\]-~]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[\\]-~]")),i===null&&(i=z())))),i}function ue(){var i,e,l;return l=t,r.charCodeAt(t)===92?(i="\\",t++):(i=null,d('"\\\\"')),i!==null?(/^[\0-\t]/.test(r.charAt(t))?(e=r.charAt(t),t++):(e=null,d("[\\0-\\t]")),e===null&&(/^[\x0B-\f]/.test(r.charAt(t))?(e=r.charAt(t),t++):(e=null,d("[\\x0B-\\f]")),e===null&&(/^[\x0E-]/.test(r.charAt(t))?(e=r.charAt(t),t++):(e=null,d("[\\x0E-]")))),e!==null?i=[i,e]:(i=null,t=l)):(i=null,t=l),i}function _e(){var i,e,l,u,f,_;return f=t,_=t,i=Ne(),i!==null?(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=Lt(),l=l!==null?l:"",l!==null?(u=Ys(),u!==null?i=[i,e,l,u]:(i=null,t=_)):(i=null,t=_)):(i=null,t=_)):(i=null,t=_),i!==null&&(i=function(m){try{b.uri=new $l(b.scheme,b.user,b.host,b.port),delete b.scheme,delete b.user,delete b.host,delete b.host_type,delete b.port}catch{b=-1}}()),i===null&&(t=f),i}function we(){var i,e,l,u,f,_,m,v;return m=t,v=t,i=Ne(),i!==null?(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=Lt(),l=l!==null?l:"",l!==null?(u=Ys(),u!==null?(f=vr(),f!==null?(_=wr(),_=_!==null?_:"",_!==null?i=[i,e,l,u,f,_]:(i=null,t=v)):(i=null,t=v)):(i=null,t=v)):(i=null,t=v)):(i=null,t=v)):(i=null,t=v),i!==null&&(i=function(y){try{b.uri=new $l(b.scheme,b.user,b.host,b.port,b.uri_params,b.uri_headers),delete b.scheme,delete b.user,delete b.host,delete b.host_type,delete b.port,delete b.uri_params,o==="SIP_URI"&&(b=b.uri)}catch{b=-1}}()),i===null&&(t=m),i}function Ne(){var i;return i=Qe(),i===null&&(i=$e()),i}function Qe(){var i,e;return e=t,r.substr(t,4).toLowerCase()==="sips"?(i=r.substr(t,4),t+=4):(i=null,d('"sips"')),i!==null&&(i=function(l,u){b.scheme=u.toLowerCase()}(e,i)),i===null&&(t=e),i}function $e(){var i,e;return e=t,r.substr(t,3).toLowerCase()==="sip"?(i=r.substr(t,3),t+=3):(i=null,d('"sip"')),i!==null&&(i=function(l,u){b.scheme=u.toLowerCase()}(e,i)),i===null&&(t=e),i}function Lt(){var i,e,l,u,f,_;return u=t,f=t,i=_t(),i!==null?(_=t,r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=On(),l!==null?e=[e,l]:(e=null,t=_)):(e=null,t=_),e=e!==null?e:"",e!==null?(r.charCodeAt(t)===64?(l="@",t++):(l=null,d('"@"')),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(m){b.user=decodeURIComponent(r.substring(t-1,m))}(u)),i===null&&(t=u),i}function _t(){var i,e;if(e=D(),e===null&&(e=Se(),e===null&&(e=wn())),e!==null)for(i=[];e!==null;)i.push(e),e=D(),e===null&&(e=Se(),e===null&&(e=wn()));else i=null;return i}function wn(){var i;return r.charCodeAt(t)===38?(i="&",t++):(i=null,d('"&"')),i===null&&(r.charCodeAt(t)===61?(i="=",t++):(i=null,d('"="')),i===null&&(r.charCodeAt(t)===43?(i="+",t++):(i=null,d('"+"')),i===null&&(r.charCodeAt(t)===36?(i="$",t++):(i=null,d('"$"')),i===null&&(r.charCodeAt(t)===44?(i=",",t++):(i=null,d('","')),i===null&&(r.charCodeAt(t)===59?(i=";",t++):(i=null,d('";"')),i===null&&(r.charCodeAt(t)===63?(i="?",t++):(i=null,d('"?"')),i===null&&(r.charCodeAt(t)===47?(i="/",t++):(i=null,d('"/"'))))))))),i}function On(){var i,e,l;for(l=t,i=[],e=D(),e===null&&(e=Se(),e===null&&(r.charCodeAt(t)===38?(e="&",t++):(e=null,d('"&"')),e===null&&(r.charCodeAt(t)===61?(e="=",t++):(e=null,d('"="')),e===null&&(r.charCodeAt(t)===43?(e="+",t++):(e=null,d('"+"')),e===null&&(r.charCodeAt(t)===36?(e="$",t++):(e=null,d('"$"')),e===null&&(r.charCodeAt(t)===44?(e=",",t++):(e=null,d('","'))))))));e!==null;)i.push(e),e=D(),e===null&&(e=Se(),e===null&&(r.charCodeAt(t)===38?(e="&",t++):(e=null,d('"&"')),e===null&&(r.charCodeAt(t)===61?(e="=",t++):(e=null,d('"="')),e===null&&(r.charCodeAt(t)===43?(e="+",t++):(e=null,d('"+"')),e===null&&(r.charCodeAt(t)===36?(e="$",t++):(e=null,d('"$"')),e===null&&(r.charCodeAt(t)===44?(e=",",t++):(e=null,d('","'))))))));return i!==null&&(i=function(u){b.password=r.substring(t,u)}(l)),i===null&&(t=l),i}function Ys(){var i,e,l,u,f;return u=t,i=Qt(),i!==null?(f=t,r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=Is(),l!==null?e=[e,l]:(e=null,t=f)):(e=null,t=f),e=e!==null?e:"",e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i}function Qt(){var i,e;return e=t,i=fs(),i===null&&(i=at(),i===null&&(i=Nn())),i!==null&&(i=function(l){return b.host=r.substring(t,l).toLowerCase(),b.host}(e)),i===null&&(t=e),i}function fs(){var i,e,l,u,f,_;for(u=t,f=t,i=[],_=t,e=zs(),e!==null?(r.charCodeAt(t)===46?(l=".",t++):(l=null,d('"."')),l!==null?e=[e,l]:(e=null,t=_)):(e=null,t=_);e!==null;)i.push(e),_=t,e=zs(),e!==null?(r.charCodeAt(t)===46?(l=".",t++):(l=null,d('"."')),l!==null?e=[e,l]:(e=null,t=_)):(e=null,t=_);return i!==null?(e=Dn(),e!==null?(r.charCodeAt(t)===46?(l=".",t++):(l=null,d('"."')),l=l!==null?l:"",l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(m){return b.host_type="domain",r.substring(t,m)}(u)),i===null&&(t=u),i}function zs(){var i,e,l,u;if(u=t,i=L(),i!==null){for(e=[],l=L(),l===null&&(r.charCodeAt(t)===45?(l="-",t++):(l=null,d('"-"')),l===null&&(r.charCodeAt(t)===95?(l="_",t++):(l=null,d('"_"'))));l!==null;)e.push(l),l=L(),l===null&&(r.charCodeAt(t)===45?(l="-",t++):(l=null,d('"-"')),l===null&&(r.charCodeAt(t)===95?(l="_",t++):(l=null,d('"_"'))));e!==null?i=[i,e]:(i=null,t=u)}else i=null,t=u;return i}function Dn(){var i,e,l,u;if(u=t,i=T(),i!==null){for(e=[],l=L(),l===null&&(r.charCodeAt(t)===45?(l="-",t++):(l=null,d('"-"')),l===null&&(r.charCodeAt(t)===95?(l="_",t++):(l=null,d('"_"'))));l!==null;)e.push(l),l=L(),l===null&&(r.charCodeAt(t)===45?(l="-",t++):(l=null,d('"-"')),l===null&&(r.charCodeAt(t)===95?(l="_",t++):(l=null,d('"_"'))));e!==null?i=[i,e]:(i=null,t=u)}else i=null,t=u;return i}function Nn(){var i,e,l,u,f;return u=t,f=t,r.charCodeAt(t)===91?(i="[",t++):(i=null,d('"["')),i!==null?(e=Js(),e!==null?(r.charCodeAt(t)===93?(l="]",t++):(l=null,d('"]"')),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_){return b.host_type="IPv6",r.substring(t,_)}(u)),i===null&&(t=u),i}function Js(){var i,e,l,u,f,_,m,v,y,O,le,Ue,bt,Ls,k,I;return Ls=t,k=t,i=me(),i!==null?(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=me(),l!==null?(r.charCodeAt(t)===58?(u=":",t++):(u=null,d('":"')),u!==null?(f=me(),f!==null?(r.charCodeAt(t)===58?(_=":",t++):(_=null,d('":"')),_!==null?(m=me(),m!==null?(r.charCodeAt(t)===58?(v=":",t++):(v=null,d('":"')),v!==null?(y=me(),y!==null?(r.charCodeAt(t)===58?(O=":",t++):(O=null,d('":"')),O!==null?(le=me(),le!==null?(r.charCodeAt(t)===58?(Ue=":",t++):(Ue=null,d('":"')),Ue!==null?(bt=ae(),bt!==null?i=[i,e,l,u,f,_,m,v,y,O,le,Ue,bt]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,r.substr(t,2)==="::"?(i="::",t+=2):(i=null,d('"::"')),i!==null?(e=me(),e!==null?(r.charCodeAt(t)===58?(l=":",t++):(l=null,d('":"')),l!==null?(u=me(),u!==null?(r.charCodeAt(t)===58?(f=":",t++):(f=null,d('":"')),f!==null?(_=me(),_!==null?(r.charCodeAt(t)===58?(m=":",t++):(m=null,d('":"')),m!==null?(v=me(),v!==null?(r.charCodeAt(t)===58?(y=":",t++):(y=null,d('":"')),y!==null?(O=me(),O!==null?(r.charCodeAt(t)===58?(le=":",t++):(le=null,d('":"')),le!==null?(Ue=ae(),Ue!==null?i=[i,e,l,u,f,_,m,v,y,O,le,Ue]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,r.substr(t,2)==="::"?(i="::",t+=2):(i=null,d('"::"')),i!==null?(e=me(),e!==null?(r.charCodeAt(t)===58?(l=":",t++):(l=null,d('":"')),l!==null?(u=me(),u!==null?(r.charCodeAt(t)===58?(f=":",t++):(f=null,d('":"')),f!==null?(_=me(),_!==null?(r.charCodeAt(t)===58?(m=":",t++):(m=null,d('":"')),m!==null?(v=me(),v!==null?(r.charCodeAt(t)===58?(y=":",t++):(y=null,d('":"')),y!==null?(O=ae(),O!==null?i=[i,e,l,u,f,_,m,v,y,O]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,r.substr(t,2)==="::"?(i="::",t+=2):(i=null,d('"::"')),i!==null?(e=me(),e!==null?(r.charCodeAt(t)===58?(l=":",t++):(l=null,d('":"')),l!==null?(u=me(),u!==null?(r.charCodeAt(t)===58?(f=":",t++):(f=null,d('":"')),f!==null?(_=me(),_!==null?(r.charCodeAt(t)===58?(m=":",t++):(m=null,d('":"')),m!==null?(v=ae(),v!==null?i=[i,e,l,u,f,_,m,v]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,r.substr(t,2)==="::"?(i="::",t+=2):(i=null,d('"::"')),i!==null?(e=me(),e!==null?(r.charCodeAt(t)===58?(l=":",t++):(l=null,d('":"')),l!==null?(u=me(),u!==null?(r.charCodeAt(t)===58?(f=":",t++):(f=null,d('":"')),f!==null?(_=ae(),_!==null?i=[i,e,l,u,f,_]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,r.substr(t,2)==="::"?(i="::",t+=2):(i=null,d('"::"')),i!==null?(e=me(),e!==null?(r.charCodeAt(t)===58?(l=":",t++):(l=null,d('":"')),l!==null?(u=ae(),u!==null?i=[i,e,l,u]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,r.substr(t,2)==="::"?(i="::",t+=2):(i=null,d('"::"')),i!==null?(e=ae(),e!==null?i=[i,e]:(i=null,t=k)):(i=null,t=k),i===null&&(k=t,r.substr(t,2)==="::"?(i="::",t+=2):(i=null,d('"::"')),i!==null?(e=me(),e!==null?i=[i,e]:(i=null,t=k)):(i=null,t=k),i===null&&(k=t,i=me(),i!==null?(r.substr(t,2)==="::"?(e="::",t+=2):(e=null,d('"::"')),e!==null?(l=me(),l!==null?(r.charCodeAt(t)===58?(u=":",t++):(u=null,d('":"')),u!==null?(f=me(),f!==null?(r.charCodeAt(t)===58?(_=":",t++):(_=null,d('":"')),_!==null?(m=me(),m!==null?(r.charCodeAt(t)===58?(v=":",t++):(v=null,d('":"')),v!==null?(y=me(),y!==null?(r.charCodeAt(t)===58?(O=":",t++):(O=null,d('":"')),O!==null?(le=ae(),le!==null?i=[i,e,l,u,f,_,m,v,y,O,le]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,i=me(),i!==null?(I=t,r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=me(),l!==null?e=[e,l]:(e=null,t=I)):(e=null,t=I),e=e!==null?e:"",e!==null?(r.substr(t,2)==="::"?(l="::",t+=2):(l=null,d('"::"')),l!==null?(u=me(),u!==null?(r.charCodeAt(t)===58?(f=":",t++):(f=null,d('":"')),f!==null?(_=me(),_!==null?(r.charCodeAt(t)===58?(m=":",t++):(m=null,d('":"')),m!==null?(v=me(),v!==null?(r.charCodeAt(t)===58?(y=":",t++):(y=null,d('":"')),y!==null?(O=ae(),O!==null?i=[i,e,l,u,f,_,m,v,y,O]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,i=me(),i!==null?(I=t,r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=me(),l!==null?e=[e,l]:(e=null,t=I)):(e=null,t=I),e=e!==null?e:"",e!==null?(I=t,r.charCodeAt(t)===58?(l=":",t++):(l=null,d('":"')),l!==null?(u=me(),u!==null?l=[l,u]:(l=null,t=I)):(l=null,t=I),l=l!==null?l:"",l!==null?(r.substr(t,2)==="::"?(u="::",t+=2):(u=null,d('"::"')),u!==null?(f=me(),f!==null?(r.charCodeAt(t)===58?(_=":",t++):(_=null,d('":"')),_!==null?(m=me(),m!==null?(r.charCodeAt(t)===58?(v=":",t++):(v=null,d('":"')),v!==null?(y=ae(),y!==null?i=[i,e,l,u,f,_,m,v,y]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,i=me(),i!==null?(I=t,r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=me(),l!==null?e=[e,l]:(e=null,t=I)):(e=null,t=I),e=e!==null?e:"",e!==null?(I=t,r.charCodeAt(t)===58?(l=":",t++):(l=null,d('":"')),l!==null?(u=me(),u!==null?l=[l,u]:(l=null,t=I)):(l=null,t=I),l=l!==null?l:"",l!==null?(I=t,r.charCodeAt(t)===58?(u=":",t++):(u=null,d('":"')),u!==null?(f=me(),f!==null?u=[u,f]:(u=null,t=I)):(u=null,t=I),u=u!==null?u:"",u!==null?(r.substr(t,2)==="::"?(f="::",t+=2):(f=null,d('"::"')),f!==null?(_=me(),_!==null?(r.charCodeAt(t)===58?(m=":",t++):(m=null,d('":"')),m!==null?(v=ae(),v!==null?i=[i,e,l,u,f,_,m,v]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,i=me(),i!==null?(I=t,r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=me(),l!==null?e=[e,l]:(e=null,t=I)):(e=null,t=I),e=e!==null?e:"",e!==null?(I=t,r.charCodeAt(t)===58?(l=":",t++):(l=null,d('":"')),l!==null?(u=me(),u!==null?l=[l,u]:(l=null,t=I)):(l=null,t=I),l=l!==null?l:"",l!==null?(I=t,r.charCodeAt(t)===58?(u=":",t++):(u=null,d('":"')),u!==null?(f=me(),f!==null?u=[u,f]:(u=null,t=I)):(u=null,t=I),u=u!==null?u:"",u!==null?(I=t,r.charCodeAt(t)===58?(f=":",t++):(f=null,d('":"')),f!==null?(_=me(),_!==null?f=[f,_]:(f=null,t=I)):(f=null,t=I),f=f!==null?f:"",f!==null?(r.substr(t,2)==="::"?(_="::",t+=2):(_=null,d('"::"')),_!==null?(m=ae(),m!==null?i=[i,e,l,u,f,_,m]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,i=me(),i!==null?(I=t,r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=me(),l!==null?e=[e,l]:(e=null,t=I)):(e=null,t=I),e=e!==null?e:"",e!==null?(I=t,r.charCodeAt(t)===58?(l=":",t++):(l=null,d('":"')),l!==null?(u=me(),u!==null?l=[l,u]:(l=null,t=I)):(l=null,t=I),l=l!==null?l:"",l!==null?(I=t,r.charCodeAt(t)===58?(u=":",t++):(u=null,d('":"')),u!==null?(f=me(),f!==null?u=[u,f]:(u=null,t=I)):(u=null,t=I),u=u!==null?u:"",u!==null?(I=t,r.charCodeAt(t)===58?(f=":",t++):(f=null,d('":"')),f!==null?(_=me(),_!==null?f=[f,_]:(f=null,t=I)):(f=null,t=I),f=f!==null?f:"",f!==null?(I=t,r.charCodeAt(t)===58?(_=":",t++):(_=null,d('":"')),_!==null?(m=me(),m!==null?_=[_,m]:(_=null,t=I)):(_=null,t=I),_=_!==null?_:"",_!==null?(r.substr(t,2)==="::"?(m="::",t+=2):(m=null,d('"::"')),m!==null?(v=me(),v!==null?i=[i,e,l,u,f,_,m,v]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k),i===null&&(k=t,i=me(),i!==null?(I=t,r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=me(),l!==null?e=[e,l]:(e=null,t=I)):(e=null,t=I),e=e!==null?e:"",e!==null?(I=t,r.charCodeAt(t)===58?(l=":",t++):(l=null,d('":"')),l!==null?(u=me(),u!==null?l=[l,u]:(l=null,t=I)):(l=null,t=I),l=l!==null?l:"",l!==null?(I=t,r.charCodeAt(t)===58?(u=":",t++):(u=null,d('":"')),u!==null?(f=me(),f!==null?u=[u,f]:(u=null,t=I)):(u=null,t=I),u=u!==null?u:"",u!==null?(I=t,r.charCodeAt(t)===58?(f=":",t++):(f=null,d('":"')),f!==null?(_=me(),_!==null?f=[f,_]:(f=null,t=I)):(f=null,t=I),f=f!==null?f:"",f!==null?(I=t,r.charCodeAt(t)===58?(_=":",t++):(_=null,d('":"')),_!==null?(m=me(),m!==null?_=[_,m]:(_=null,t=I)):(_=null,t=I),_=_!==null?_:"",_!==null?(I=t,r.charCodeAt(t)===58?(m=":",t++):(m=null,d('":"')),m!==null?(v=me(),v!==null?m=[m,v]:(m=null,t=I)):(m=null,t=I),m=m!==null?m:"",m!==null?(r.substr(t,2)==="::"?(v="::",t+=2):(v=null,d('"::"')),v!==null?i=[i,e,l,u,f,_,m,v]:(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k)):(i=null,t=k))))))))))))))),i!==null&&(i=function(Te){return b.host_type="IPv6",r.substring(t,Te)}(Ls)),i===null&&(t=Ls),i}function me(){var i,e,l,u,f;return f=t,i=E(),i!==null?(e=E(),e=e!==null?e:"",e!==null?(l=E(),l=l!==null?l:"",l!==null?(u=E(),u=u!==null?u:"",u!==null?i=[i,e,l,u]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i}function ae(){var i,e,l,u;return u=t,i=me(),i!==null?(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=me(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i===null&&(i=at()),i}function at(){var i,e,l,u,f,_,m,v,y;return v=t,y=t,i=Wt(),i!==null?(r.charCodeAt(t)===46?(e=".",t++):(e=null,d('"."')),e!==null?(l=Wt(),l!==null?(r.charCodeAt(t)===46?(u=".",t++):(u=null,d('"."')),u!==null?(f=Wt(),f!==null?(r.charCodeAt(t)===46?(_=".",t++):(_=null,d('"."')),_!==null?(m=Wt(),m!==null?i=[i,e,l,u,f,_,m]:(i=null,t=y)):(i=null,t=y)):(i=null,t=y)):(i=null,t=y)):(i=null,t=y)):(i=null,t=y)):(i=null,t=y),i!==null&&(i=function(O){return b.host_type="IPv4",r.substring(t,O)}(v)),i===null&&(t=v),i}function Wt(){var i,e,l,u;return u=t,r.substr(t,2)==="25"?(i="25",t+=2):(i=null,d('"25"')),i!==null?(/^[0-5]/.test(r.charAt(t))?(e=r.charAt(t),t++):(e=null,d("[0-5]")),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i===null&&(u=t,r.charCodeAt(t)===50?(i="2",t++):(i=null,d('"2"')),i!==null?(/^[0-4]/.test(r.charAt(t))?(e=r.charAt(t),t++):(e=null,d("[0-4]")),e!==null?(l=g(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i===null&&(u=t,r.charCodeAt(t)===49?(i="1",t++):(i=null,d('"1"')),i!==null?(e=g(),e!==null?(l=g(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i===null&&(u=t,/^[1-9]/.test(r.charAt(t))?(i=r.charAt(t),t++):(i=null,d("[1-9]")),i!==null?(e=g(),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i===null&&(i=g())))),i}function Is(){var i,e,l,u,f,_,m;return _=t,m=t,i=g(),i=i!==null?i:"",i!==null?(e=g(),e=e!==null?e:"",e!==null?(l=g(),l=l!==null?l:"",l!==null?(u=g(),u=u!==null?u:"",u!==null?(f=g(),f=f!==null?f:"",f!==null?i=[i,e,l,u,f]:(i=null,t=m)):(i=null,t=m)):(i=null,t=m)):(i=null,t=m)):(i=null,t=m),i!==null&&(i=function(v,y){return y=parseInt(y.join("")),b.port=y,y}(_,i)),i===null&&(t=_),i}function vr(){var i,e,l,u;for(i=[],u=t,r.charCodeAt(t)===59?(e=";",t++):(e=null,d('";"')),e!==null?(l=Un(),l!==null?e=[e,l]:(e=null,t=u)):(e=null,t=u);e!==null;)i.push(e),u=t,r.charCodeAt(t)===59?(e=";",t++):(e=null,d('";"')),e!==null?(l=Un(),l!==null?e=[e,l]:(e=null,t=u)):(e=null,t=u);return i}function Un(){var i;return i=Pn(),i===null&&(i=Er(),i===null&&(i=Sr(),i===null&&(i=yr(),i===null&&(i=Ar(),i===null&&(i=Cr(),i===null&&(i=Rr())))))),i}function Pn(){var i,e,l,u;return l=t,u=t,r.substr(t,10).toLowerCase()==="transport="?(i=r.substr(t,10),t+=10):(i=null,d('"transport="')),i!==null?(r.substr(t,3).toLowerCase()==="udp"?(e=r.substr(t,3),t+=3):(e=null,d('"udp"')),e===null&&(r.substr(t,3).toLowerCase()==="tcp"?(e=r.substr(t,3),t+=3):(e=null,d('"tcp"')),e===null&&(r.substr(t,4).toLowerCase()==="sctp"?(e=r.substr(t,4),t+=4):(e=null,d('"sctp"')),e===null&&(r.substr(t,3).toLowerCase()==="tls"?(e=r.substr(t,3),t+=3):(e=null,d('"tls"')),e===null&&(e=U())))),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i!==null&&(i=function(f,_){b.uri_params||(b.uri_params={}),b.uri_params.transport=_.toLowerCase()}(l,i[1])),i===null&&(t=l),i}function Er(){var i,e,l,u;return l=t,u=t,r.substr(t,5).toLowerCase()==="user="?(i=r.substr(t,5),t+=5):(i=null,d('"user="')),i!==null?(r.substr(t,5).toLowerCase()==="phone"?(e=r.substr(t,5),t+=5):(e=null,d('"phone"')),e===null&&(r.substr(t,2).toLowerCase()==="ip"?(e=r.substr(t,2),t+=2):(e=null,d('"ip"')),e===null&&(e=U())),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i!==null&&(i=function(f,_){b.uri_params||(b.uri_params={}),b.uri_params.user=_.toLowerCase()}(l,i[1])),i===null&&(t=l),i}function Sr(){var i,e,l,u;return l=t,u=t,r.substr(t,7).toLowerCase()==="method="?(i=r.substr(t,7),t+=7):(i=null,d('"method="')),i!==null?(e=nn(),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i!==null&&(i=function(f,_){b.uri_params||(b.uri_params={}),b.uri_params.method=_}(l,i[1])),i===null&&(t=l),i}function yr(){var i,e,l,u;return l=t,u=t,r.substr(t,4).toLowerCase()==="ttl="?(i=r.substr(t,4),t+=4):(i=null,d('"ttl="')),i!==null?(e=tr(),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i!==null&&(i=function(f,_){b.params||(b.params={}),b.params.ttl=_}(l,i[1])),i===null&&(t=l),i}function Ar(){var i,e,l,u;return l=t,u=t,r.substr(t,6).toLowerCase()==="maddr="?(i=r.substr(t,6),t+=6):(i=null,d('"maddr="')),i!==null?(e=Qt(),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i!==null&&(i=function(f,_){b.uri_params||(b.uri_params={}),b.uri_params.maddr=_}(l,i[1])),i===null&&(t=l),i}function Cr(){var i,e,l,u,f,_;return u=t,f=t,r.substr(t,2).toLowerCase()==="lr"?(i=r.substr(t,2),t+=2):(i=null,d('"lr"')),i!==null?(_=t,r.charCodeAt(t)===61?(e="=",t++):(e=null,d('"="')),e!==null?(l=U(),l!==null?e=[e,l]:(e=null,t=_)):(e=null,t=_),e=e!==null?e:"",e!==null?i=[i,e]:(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(m){b.uri_params||(b.uri_params={}),b.uri_params.lr=void 0}()),i===null&&(t=u),i}function Rr(){var i,e,l,u,f,_;return u=t,f=t,i=Ir(),i!==null?(_=t,r.charCodeAt(t)===61?(e="=",t++):(e=null,d('"="')),e!==null?(l=br(),l!==null?e=[e,l]:(e=null,t=_)):(e=null,t=_),e=e!==null?e:"",e!==null?i=[i,e]:(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(m,v,y){b.uri_params||(b.uri_params={}),typeof y>"u"?y=void 0:y=y[1],b.uri_params[v.toLowerCase()]=y}(u,i[0],i[1])),i===null&&(t=u),i}function Ir(){var i,e,l;if(l=t,e=bs(),e!==null)for(i=[];e!==null;)i.push(e),e=bs();else i=null;return i!==null&&(i=function(u,f){return f.join("")}(l,i)),i===null&&(t=l),i}function br(){var i,e,l;if(l=t,e=bs(),e!==null)for(i=[];e!==null;)i.push(e),e=bs();else i=null;return i!==null&&(i=function(u,f){return f.join("")}(l,i)),i===null&&(t=l),i}function bs(){var i;return i=ws(),i===null&&(i=D(),i===null&&(i=Se())),i}function ws(){var i;return r.charCodeAt(t)===91?(i="[",t++):(i=null,d('"["')),i===null&&(r.charCodeAt(t)===93?(i="]",t++):(i=null,d('"]"')),i===null&&(r.charCodeAt(t)===47?(i="/",t++):(i=null,d('"/"')),i===null&&(r.charCodeAt(t)===58?(i=":",t++):(i=null,d('":"')),i===null&&(r.charCodeAt(t)===38?(i="&",t++):(i=null,d('"&"')),i===null&&(r.charCodeAt(t)===43?(i="+",t++):(i=null,d('"+"')),i===null&&(r.charCodeAt(t)===36?(i="$",t++):(i=null,d('"$"')))))))),i}function wr(){var i,e,l,u,f,_,m;if(_=t,r.charCodeAt(t)===63?(i="?",t++):(i=null,d('"?"')),i!==null)if(e=Xs(),e!==null){for(l=[],m=t,r.charCodeAt(t)===38?(u="&",t++):(u=null,d('"&"')),u!==null?(f=Xs(),f!==null?u=[u,f]:(u=null,t=m)):(u=null,t=m);u!==null;)l.push(u),m=t,r.charCodeAt(t)===38?(u="&",t++):(u=null,d('"&"')),u!==null?(f=Xs(),f!==null?u=[u,f]:(u=null,t=m)):(u=null,t=m);l!==null?i=[i,e,l]:(i=null,t=_)}else i=null,t=_;else i=null,t=_;return i}function Xs(){var i,e,l,u,f;return u=t,f=t,i=Qs(),i!==null?(r.charCodeAt(t)===61?(e="=",t++):(e=null,d('"="')),e!==null?(l=Or(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m,v){m=m.join("").toLowerCase(),v=v.join(""),b.uri_headers||(b.uri_headers={}),b.uri_headers[m]?b.uri_headers[m].push(v):b.uri_headers[m]=[v]}(u,i[0],i[2])),i===null&&(t=u),i}function Qs(){var i,e;if(e=Os(),e===null&&(e=D(),e===null&&(e=Se())),e!==null)for(i=[];e!==null;)i.push(e),e=Os(),e===null&&(e=D(),e===null&&(e=Se()));else i=null;return i}function Or(){var i,e;for(i=[],e=Os(),e===null&&(e=D(),e===null&&(e=Se()));e!==null;)i.push(e),e=Os(),e===null&&(e=D(),e===null&&(e=Se()));return i}function Os(){var i;return r.charCodeAt(t)===91?(i="[",t++):(i=null,d('"["')),i===null&&(r.charCodeAt(t)===93?(i="]",t++):(i=null,d('"]"')),i===null&&(r.charCodeAt(t)===47?(i="/",t++):(i=null,d('"/"')),i===null&&(r.charCodeAt(t)===63?(i="?",t++):(i=null,d('"?"')),i===null&&(r.charCodeAt(t)===58?(i=":",t++):(i=null,d('":"')),i===null&&(r.charCodeAt(t)===43?(i="+",t++):(i=null,d('"+"')),i===null&&(r.charCodeAt(t)===36?(i="$",t++):(i=null,d('"$"')))))))),i}function Zs(){var i;return i=rn(),i===null&&(i=Tl()),i}function Tl(){var i,e,l,u,f,_;return _=t,i=nn(),i!==null?(e=C(),e!==null?(l=Dr(),l!==null?(u=C(),u!==null?(f=kn(),f!==null?i=[i,e,l,u,f]:(i=null,t=_)):(i=null,t=_)):(i=null,t=_)):(i=null,t=_)):(i=null,t=_),i}function Dr(){var i;return i=we(),i===null&&(i=xn()),i}function xn(){var i,e,l,u;return u=t,i=Ps(),i!==null?(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e!==null?(l=Mn(),l===null&&(l=tn()),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function Mn(){var i,e,l,u,f;return u=t,i=Nr(),i===null&&(i=en()),i!==null?(f=t,r.charCodeAt(t)===63?(e="?",t++):(e=null,d('"?"')),e!==null?(l=kr(),l!==null?e=[e,l]:(e=null,t=f)):(e=null,t=f),e=e!==null?e:"",e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i}function Nr(){var i,e,l,u;return u=t,r.substr(t,2)==="//"?(i="//",t+=2):(i=null,d('"//"')),i!==null?(e=Pr(),e!==null?(l=en(),l=l!==null?l:"",l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function en(){var i,e,l;return l=t,r.charCodeAt(t)===47?(i="/",t++):(i=null,d('"/"')),i!==null?(e=Ur(),e!==null?i=[i,e]:(i=null,t=l)):(i=null,t=l),i}function tn(){var i,e,l,u;if(u=t,i=Ns(),i!==null){for(e=[],l=Ds();l!==null;)e.push(l),l=Ds();e!==null?i=[i,e]:(i=null,t=u)}else i=null,t=u;return i}function Ds(){var i;return i=ne(),i===null&&(i=D(),i===null&&(i=Se())),i}function Ns(){var i;return i=D(),i===null&&(i=Se(),i===null&&(r.charCodeAt(t)===59?(i=";",t++):(i=null,d('";"')),i===null&&(r.charCodeAt(t)===63?(i="?",t++):(i=null,d('"?"')),i===null&&(r.charCodeAt(t)===58?(i=":",t++):(i=null,d('":"')),i===null&&(r.charCodeAt(t)===64?(i="@",t++):(i=null,d('"@"')),i===null&&(r.charCodeAt(t)===38?(i="&",t++):(i=null,d('"&"')),i===null&&(r.charCodeAt(t)===61?(i="=",t++):(i=null,d('"="')),i===null&&(r.charCodeAt(t)===43?(i="+",t++):(i=null,d('"+"')),i===null&&(r.charCodeAt(t)===36?(i="$",t++):(i=null,d('"$"')),i===null&&(r.charCodeAt(t)===44?(i=",",t++):(i=null,d('","')))))))))))),i}function Ur(){var i,e,l,u,f,_;if(f=t,i=sn(),i!==null){for(e=[],_=t,r.charCodeAt(t)===47?(l="/",t++):(l=null,d('"/"')),l!==null?(u=sn(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,r.charCodeAt(t)===47?(l="/",t++):(l=null,d('"/"')),l!==null?(u=sn(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function sn(){var i,e,l,u,f,_;for(f=t,i=[],e=ds();e!==null;)i.push(e),e=ds();if(i!==null){for(e=[],_=t,r.charCodeAt(t)===59?(l=";",t++):(l=null,d('";"')),l!==null?(u=Us(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,r.charCodeAt(t)===59?(l=";",t++):(l=null,d('";"')),l!==null?(u=Us(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function Us(){var i,e;for(i=[],e=ds();e!==null;)i.push(e),e=ds();return i}function ds(){var i;return i=D(),i===null&&(i=Se(),i===null&&(r.charCodeAt(t)===58?(i=":",t++):(i=null,d('":"')),i===null&&(r.charCodeAt(t)===64?(i="@",t++):(i=null,d('"@"')),i===null&&(r.charCodeAt(t)===38?(i="&",t++):(i=null,d('"&"')),i===null&&(r.charCodeAt(t)===61?(i="=",t++):(i=null,d('"="')),i===null&&(r.charCodeAt(t)===43?(i="+",t++):(i=null,d('"+"')),i===null&&(r.charCodeAt(t)===36?(i="$",t++):(i=null,d('"$"')),i===null&&(r.charCodeAt(t)===44?(i=",",t++):(i=null,d('","')))))))))),i}function Ps(){var i,e,l,u,f;if(u=t,f=t,i=T(),i!==null){for(e=[],l=T(),l===null&&(l=g(),l===null&&(r.charCodeAt(t)===43?(l="+",t++):(l=null,d('"+"')),l===null&&(r.charCodeAt(t)===45?(l="-",t++):(l=null,d('"-"')),l===null&&(r.charCodeAt(t)===46?(l=".",t++):(l=null,d('"."'))))));l!==null;)e.push(l),l=T(),l===null&&(l=g(),l===null&&(r.charCodeAt(t)===43?(l="+",t++):(l=null,d('"+"')),l===null&&(r.charCodeAt(t)===45?(l="-",t++):(l=null,d('"-"')),l===null&&(r.charCodeAt(t)===46?(l=".",t++):(l=null,d('"."'))))));e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i!==null&&(i=function(_){b.scheme=r.substring(t,_)}(u)),i===null&&(t=u),i}function Pr(){var i;return i=xr(),i===null&&(i=Mr()),i}function xr(){var i,e,l,u;return l=t,u=t,i=Lt(),i!==null?(r.charCodeAt(t)===64?(e="@",t++):(e=null,d('"@"')),e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i=i!==null?i:"",i!==null?(e=Ys(),e!==null?i=[i,e]:(i=null,t=l)):(i=null,t=l),i=i!==null?i:"",i}function Mr(){var i,e;if(e=D(),e===null&&(e=Se(),e===null&&(r.charCodeAt(t)===36?(e="$",t++):(e=null,d('"$"')),e===null&&(r.charCodeAt(t)===44?(e=",",t++):(e=null,d('","')),e===null&&(r.charCodeAt(t)===59?(e=";",t++):(e=null,d('";"')),e===null&&(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e===null&&(r.charCodeAt(t)===64?(e="@",t++):(e=null,d('"@"')),e===null&&(r.charCodeAt(t)===38?(e="&",t++):(e=null,d('"&"')),e===null&&(r.charCodeAt(t)===61?(e="=",t++):(e=null,d('"="')),e===null&&(r.charCodeAt(t)===43?(e="+",t++):(e=null,d('"+"'))))))))))),e!==null)for(i=[];e!==null;)i.push(e),e=D(),e===null&&(e=Se(),e===null&&(r.charCodeAt(t)===36?(e="$",t++):(e=null,d('"$"')),e===null&&(r.charCodeAt(t)===44?(e=",",t++):(e=null,d('","')),e===null&&(r.charCodeAt(t)===59?(e=";",t++):(e=null,d('";"')),e===null&&(r.charCodeAt(t)===58?(e=":",t++):(e=null,d('":"')),e===null&&(r.charCodeAt(t)===64?(e="@",t++):(e=null,d('"@"')),e===null&&(r.charCodeAt(t)===38?(e="&",t++):(e=null,d('"&"')),e===null&&(r.charCodeAt(t)===61?(e="=",t++):(e=null,d('"="')),e===null&&(r.charCodeAt(t)===43?(e="+",t++):(e=null,d('"+"')))))))))));else i=null;return i}function kr(){var i,e;for(i=[],e=Ds();e!==null;)i.push(e),e=Ds();return i}function kn(){var i,e,l,u,f,_,m,v;if(m=t,v=t,r.substr(t,3).toLowerCase()==="sip"?(i=r.substr(t,3),t+=3):(i=null,d('"SIP"')),i!==null)if(r.charCodeAt(t)===47?(e="/",t++):(e=null,d('"/"')),e!==null){if(u=g(),u!==null)for(l=[];u!==null;)l.push(u),u=g();else l=null;if(l!==null)if(r.charCodeAt(t)===46?(u=".",t++):(u=null,d('"."')),u!==null){if(_=g(),_!==null)for(f=[];_!==null;)f.push(_),_=g();else f=null;f!==null?i=[i,e,l,u,f]:(i=null,t=v)}else i=null,t=v;else i=null,t=v}else i=null,t=v;else i=null,t=v;return i!==null&&(i=function(y){b.sip_version=r.substring(t,y)}(m)),i===null&&(t=m),i}function Ln(){var i;return r.substr(t,6)==="INVITE"?(i="INVITE",t+=6):(i=null,d('"INVITE"')),i}function Lr(){var i;return r.substr(t,3)==="ACK"?(i="ACK",t+=3):(i=null,d('"ACK"')),i}function $r(){var i;return r.substr(t,7)==="OPTIONS"?(i="OPTIONS",t+=7):(i=null,d('"OPTIONS"')),i}function Hr(){var i;return r.substr(t,3)==="BYE"?(i="BYE",t+=3):(i=null,d('"BYE"')),i}function Fr(){var i;return r.substr(t,6)==="CANCEL"?(i="CANCEL",t+=6):(i=null,d('"CANCEL"')),i}function jr(){var i;return r.substr(t,8)==="REGISTER"?(i="REGISTER",t+=8):(i=null,d('"REGISTER"')),i}function Vr(){var i;return r.substr(t,9)==="SUBSCRIBE"?(i="SUBSCRIBE",t+=9):(i=null,d('"SUBSCRIBE"')),i}function qr(){var i;return r.substr(t,6)==="NOTIFY"?(i="NOTIFY",t+=6):(i=null,d('"NOTIFY"')),i}function Br(){var i;return r.substr(t,5)==="REFER"?(i="REFER",t+=5):(i=null,d('"REFER"')),i}function nn(){var i,e;return e=t,i=Ln(),i===null&&(i=Lr(),i===null&&(i=$r(),i===null&&(i=Hr(),i===null&&(i=Fr(),i===null&&(i=jr(),i===null&&(i=Vr(),i===null&&(i=qr(),i===null&&(i=Br(),i===null&&(i=U()))))))))),i!==null&&(i=function(l){return b.method=r.substring(t,l),b.method}(e)),i===null&&(t=e),i}function rn(){var i,e,l,u,f,_;return _=t,i=kn(),i!==null?(e=C(),e!==null?(l=Gr(),l!==null?(u=C(),u!==null?(f=Kr(),f!==null?i=[i,e,l,u,f]:(i=null,t=_)):(i=null,t=_)):(i=null,t=_)):(i=null,t=_)):(i=null,t=_),i}function Gr(){var i,e;return e=t,i=Wr(),i!==null&&(i=function(l,u){b.status_code=parseInt(u.join(""))}(e,i)),i===null&&(t=e),i}function Wr(){var i,e,l,u;return u=t,i=g(),i!==null?(e=g(),e!==null?(l=g(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function Kr(){var i,e,l;for(l=t,i=[],e=ne(),e===null&&(e=D(),e===null&&(e=Se(),e===null&&(e=z(),e===null&&(e=H(),e===null&&(e=C(),e===null&&(e=$()))))));e!==null;)i.push(e),e=ne(),e===null&&(e=D(),e===null&&(e=Se(),e===null&&(e=z(),e===null&&(e=H(),e===null&&(e=C(),e===null&&(e=$()))))));return i!==null&&(i=function(u){b.reason_phrase=r.substring(t,u)}(l)),i===null&&(t=l),i}function vl(){var i,e,l,u,f,_;if(f=t,i=an(),i!==null){for(e=[],_=t,l=Ce(),l!==null?(u=an(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=Ce(),l!==null?(u=an(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function zo(){var i,e,l,u,f,_;return u=t,f=t,i=st(),i!==null?(_=t,r.charCodeAt(t)===64?(e="@",t++):(e=null,d('"@"')),e!==null?(l=st(),l!==null?e=[e,l]:(e=null,t=_)):(e=null,t=_),e=e!==null?e:"",e!==null?i=[i,e]:(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(m){b=r.substring(t,m)}(u)),i===null&&(t=u),i}function Jo(){var i,e,l,u,f,_,m;if(f=t,i=ee(),i===null)if(_=t,i=$n(),i!==null){for(e=[],m=t,l=Ce(),l!==null?(u=$n(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;)e.push(l),m=t,l=Ce(),l!==null?(u=$n(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i!==null&&(i=function(v){var y,O;for(O=b.multi_header.length,y=0;y<O;y++)if(b.multi_header[y].parsed===null){b=null;break}b!==null?b=b.multi_header:b=-1}()),i===null&&(t=f),i}function $n(){var i,e,l,u,f,_,m;if(f=t,_=t,i=_e(),i===null&&(i=$t()),i!==null){for(e=[],m=t,l=oe(),l!==null?(u=xs(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;)e.push(l),m=t,l=oe(),l!==null?(u=xs(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i!==null&&(i=function(v){var y;b.multi_header||(b.multi_header=[]);try{y=new hs(b.uri,b.display_name,b.params),delete b.uri,delete b.display_name,delete b.params}catch{y=null}b.multi_header.push({possition:t,offset:v,parsed:y})}(f)),i===null&&(t=f),i}function $t(){var i,e,l,u,f;return f=t,i=Ht(),i=i!==null?i:"",i!==null?(e=Me(),e!==null?(l=we(),l!==null?(u=be(),u!==null?i=[i,e,l,u]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i}function Ht(){var i,e,l,u,f,_,m;if(f=t,_=t,i=U(),i!==null){for(e=[],m=t,l=ve(),l!==null?(u=U(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;)e.push(l),m=t,l=ve(),l!==null?(u=U(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i===null&&(i=Oe()),i!==null&&(i=function(v,y){typeof y=="string"?b.display_name=y:b.display_name=y[1].reduce(function(O,le){return O+le[0]+le[1]},y[0])}(f,i)),i===null&&(t=f),i}function xs(){var i;return i=Hn(),i===null&&(i=Yr(),i===null&&(i=We())),i}function Hn(){var i,e,l,u,f;return u=t,f=t,r.substr(t,1).toLowerCase()==="q"?(i=r.substr(t,1),t++):(i=null,d('"q"')),i!==null?(e=B(),e!==null?(l=es(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.params||(b.params={}),b.params.q=m}(u,i[2])),i===null&&(t=u),i}function Yr(){var i,e,l,u,f;return u=t,f=t,r.substr(t,7).toLowerCase()==="expires"?(i=r.substr(t,7),t+=7):(i=null,d('"expires"')),i!==null?(e=B(),e!==null?(l=Zt(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.params||(b.params={}),b.params.expires=m}(u,i[2])),i===null&&(t=u),i}function Zt(){var i,e,l;if(l=t,e=g(),e!==null)for(i=[];e!==null;)i.push(e),e=g();else i=null;return i!==null&&(i=function(u,f){return parseInt(f.join(""))}(l,i)),i===null&&(t=l),i}function es(){var i,e,l,u,f,_,m,v;return _=t,m=t,r.charCodeAt(t)===48?(i="0",t++):(i=null,d('"0"')),i!==null?(v=t,r.charCodeAt(t)===46?(e=".",t++):(e=null,d('"."')),e!==null?(l=g(),l=l!==null?l:"",l!==null?(u=g(),u=u!==null?u:"",u!==null?(f=g(),f=f!==null?f:"",f!==null?e=[e,l,u,f]:(e=null,t=v)):(e=null,t=v)):(e=null,t=v)):(e=null,t=v),e=e!==null?e:"",e!==null?i=[i,e]:(i=null,t=m)):(i=null,t=m),i!==null&&(i=function(y){return parseFloat(r.substring(t,y))}(_)),i===null&&(t=_),i}function We(){var i,e,l,u,f,_;return u=t,f=t,i=U(),i!==null?(_=t,e=B(),e!==null?(l=Ke(),l!==null?e=[e,l]:(e=null,t=_)):(e=null,t=_),e=e!==null?e:"",e!==null?i=[i,e]:(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(m,v,y){b.params||(b.params={}),typeof y>"u"?y=void 0:y=y[1],b.params[v.toLowerCase()]=y}(u,i[0],i[1])),i===null&&(t=u),i}function Ke(){var i;return i=U(),i===null&&(i=Qt(),i===null&&(i=Ie())),i}function El(){var i,e,l,u,f,_;if(f=t,i=Sl(),i!==null){for(e=[],_=t,l=oe(),l!==null?(u=Fn(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=oe(),l!==null?(u=Fn(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function Sl(){var i;return r.substr(t,6).toLowerCase()==="render"?(i=r.substr(t,6),t+=6):(i=null,d('"render"')),i===null&&(r.substr(t,7).toLowerCase()==="session"?(i=r.substr(t,7),t+=7):(i=null,d('"session"')),i===null&&(r.substr(t,4).toLowerCase()==="icon"?(i=r.substr(t,4),t+=4):(i=null,d('"icon"')),i===null&&(r.substr(t,5).toLowerCase()==="alert"?(i=r.substr(t,5),t+=5):(i=null,d('"alert"')),i===null&&(i=U())))),i}function Fn(){var i;return i=jn(),i===null&&(i=We()),i}function jn(){var i,e,l,u;return u=t,r.substr(t,8).toLowerCase()==="handling"?(i=r.substr(t,8),t+=8):(i=null,d('"handling"')),i!==null?(e=B(),e!==null?(r.substr(t,8).toLowerCase()==="optional"?(l=r.substr(t,8),t+=8):(l=null,d('"optional"')),l===null&&(r.substr(t,8).toLowerCase()==="required"?(l=r.substr(t,8),t+=8):(l=null,d('"required"')),l===null&&(l=U())),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function yl(){var i,e,l,u,f,_;if(f=t,i=U(),i!==null){for(e=[],_=t,l=Ce(),l!==null?(u=U(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=Ce(),l!==null?(u=U(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function Xo(){var i,e,l;if(l=t,e=g(),e!==null)for(i=[];e!==null;)i.push(e),e=g();else i=null;return i!==null&&(i=function(u,f){b=parseInt(f.join(""))}(l,i)),i===null&&(t=l),i}function Qo(){var i,e;return e=t,i=Al(),i!==null&&(i=function(l){b=r.substring(t,l)}(e)),i===null&&(t=e),i}function Al(){var i,e,l,u,f,_,m,v;if(m=t,i=zr(),i!==null)if(e=W(),e!==null)if(l=Qr(),l!==null){for(u=[],v=t,f=oe(),f!==null?(_=Vn(),_!==null?f=[f,_]:(f=null,t=v)):(f=null,t=v);f!==null;)u.push(f),v=t,f=oe(),f!==null?(_=Vn(),_!==null?f=[f,_]:(f=null,t=v)):(f=null,t=v);u!==null?i=[i,e,l,u]:(i=null,t=m)}else i=null,t=m;else i=null,t=m;else i=null,t=m;return i}function zr(){var i;return i=Jr(),i===null&&(i=Xr()),i}function Jr(){var i;return r.substr(t,4).toLowerCase()==="text"?(i=r.substr(t,4),t+=4):(i=null,d('"text"')),i===null&&(r.substr(t,5).toLowerCase()==="image"?(i=r.substr(t,5),t+=5):(i=null,d('"image"')),i===null&&(r.substr(t,5).toLowerCase()==="audio"?(i=r.substr(t,5),t+=5):(i=null,d('"audio"')),i===null&&(r.substr(t,5).toLowerCase()==="video"?(i=r.substr(t,5),t+=5):(i=null,d('"video"')),i===null&&(r.substr(t,11).toLowerCase()==="application"?(i=r.substr(t,11),t+=11):(i=null,d('"application"')),i===null&&(i=ln()))))),i}function Xr(){var i;return r.substr(t,7).toLowerCase()==="message"?(i=r.substr(t,7),t+=7):(i=null,d('"message"')),i===null&&(r.substr(t,9).toLowerCase()==="multipart"?(i=r.substr(t,9),t+=9):(i=null,d('"multipart"')),i===null&&(i=ln())),i}function ln(){var i;return i=U(),i===null&&(i=on()),i}function on(){var i,e,l;return l=t,r.substr(t,2).toLowerCase()==="x-"?(i=r.substr(t,2),t+=2):(i=null,d('"x-"')),i!==null?(e=U(),e!==null?i=[i,e]:(i=null,t=l)):(i=null,t=l),i}function Qr(){var i;return i=ln(),i===null&&(i=U()),i}function Vn(){var i,e,l,u;return u=t,i=U(),i!==null?(e=B(),e!==null?(l=qn(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function qn(){var i;return i=U(),i===null&&(i=Ie()),i}function Cl(){var i,e,l,u;return u=t,i=Rl(),i!==null?(e=ve(),e!==null?(l=nn(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function Rl(){var i,e,l;if(l=t,e=g(),e!==null)for(i=[];e!==null;)i.push(e),e=g();else i=null;return i!==null&&(i=function(u,f){b.value=parseInt(f.join(""))}(l,i)),i===null&&(t=l),i}function Il(){var i,e;return e=t,i=Zt(),i!==null&&(i=function(l,u){b=u}(e,i)),i===null&&(t=e),i}function Zo(){var i,e,l,u,f,_,m;if(f=t,_=t,i=an(),i!==null){for(e=[],m=t,l=oe(),l!==null?(u=We(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;)e.push(l),m=t,l=oe(),l!==null?(u=We(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i!==null&&(i=function(v,y){b.event=y.join("").toLowerCase()}(f,i[0])),i===null&&(t=f),i}function an(){var i,e,l,u,f,_;if(f=t,i=P(),i!==null){for(e=[],_=t,r.charCodeAt(t)===46?(l=".",t++):(l=null,d('"."')),l!==null?(u=P(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,r.charCodeAt(t)===46?(l=".",t++):(l=null,d('"."')),l!==null?(u=P(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function un(){var i,e,l,u,f,_,m;if(f=t,_=t,i=_e(),i===null&&(i=$t()),i!==null){for(e=[],m=t,l=oe(),l!==null?(u=Zr(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;)e.push(l),m=t,l=oe(),l!==null?(u=Zr(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i!==null&&(i=function(v){var y=b.tag;try{b=new hs(b.uri,b.display_name,b.params),y&&b.setParam("tag",y)}catch{b=-1}}()),i===null&&(t=f),i}function Zr(){var i;return i=cn(),i===null&&(i=We()),i}function cn(){var i,e,l,u,f;return u=t,f=t,r.substr(t,3).toLowerCase()==="tag"?(i=r.substr(t,3),t+=3):(i=null,d('"tag"')),i!==null?(e=B(),e!==null?(l=U(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.tag=m}(u,i[2])),i===null&&(t=u),i}function ei(){var i,e,l;if(l=t,e=g(),e!==null)for(i=[];e!==null;)i.push(e),e=g();else i=null;return i!==null&&(i=function(u,f){b=parseInt(f.join(""))}(l,i)),i===null&&(t=l),i}function ea(){var i,e;return e=t,i=Zt(),i!==null&&(i=function(l,u){b=u}(e,i)),i===null&&(t=e),i}function ta(){var i,e,l,u,f,_,m,v,y,O;for(v=t,y=t,i=[],e=Ht();e!==null;)i.push(e),e=Ht();if(i!==null)if(e=Me(),e!==null)if(l=we(),l!==null)if(u=be(),u!==null){for(f=[],O=t,_=oe(),_!==null?(m=We(),m!==null?_=[_,m]:(_=null,t=O)):(_=null,t=O);_!==null;)f.push(_),O=t,_=oe(),_!==null?(m=We(),m!==null?_=[_,m]:(_=null,t=O)):(_=null,t=O);f!==null?i=[i,e,l,u,f]:(i=null,t=y)}else i=null,t=y;else i=null,t=y;else i=null,t=y;else i=null,t=y;return i!==null&&(i=function(le){try{b=new hs(b.uri,b.display_name,b.params)}catch{b=-1}}()),i===null&&(t=v),i}function sa(){var i;return i=ti(),i}function ti(){var i,e,l,u,f,_,m,v;if(m=t,r.substr(t,6).toLowerCase()==="digest"?(i=r.substr(t,6),t+=6):(i=null,d('"Digest"')),i!==null)if(e=ve(),e!==null)if(l=ts(),l!==null){for(u=[],v=t,f=Ce(),f!==null?(_=ts(),_!==null?f=[f,_]:(f=null,t=v)):(f=null,t=v);f!==null;)u.push(f),v=t,f=Ce(),f!==null?(_=ts(),_!==null?f=[f,_]:(f=null,t=v)):(f=null,t=v);u!==null?i=[i,e,l,u]:(i=null,t=m)}else i=null,t=m;else i=null,t=m;else i=null,t=m;return i===null&&(i=Bn()),i}function Bn(){var i,e,l,u,f,_,m,v;if(m=t,i=U(),i!==null)if(e=ve(),e!==null)if(l=Ms(),l!==null){for(u=[],v=t,f=Ce(),f!==null?(_=Ms(),_!==null?f=[f,_]:(f=null,t=v)):(f=null,t=v);f!==null;)u.push(f),v=t,f=Ce(),f!==null?(_=Ms(),_!==null?f=[f,_]:(f=null,t=v)):(f=null,t=v);u!==null?i=[i,e,l,u]:(i=null,t=m)}else i=null,t=m;else i=null,t=m;else i=null,t=m;return i}function Ms(){var i,e,l,u;return u=t,i=U(),i!==null?(e=B(),e!==null?(l=U(),l===null&&(l=Ie()),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function ts(){var i;return i=fn(),i===null&&(i=ni(),i===null&&(i=hn(),i===null&&(i=ii(),i===null&&(i=li(),i===null&&(i=oi(),i===null&&(i=ai(),i===null&&(i=Ms()))))))),i}function fn(){var i,e,l,u;return u=t,r.substr(t,5).toLowerCase()==="realm"?(i=r.substr(t,5),t+=5):(i=null,d('"realm"')),i!==null?(e=B(),e!==null?(l=si(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function si(){var i,e;return e=t,i=Oe(),i!==null&&(i=function(l,u){b.realm=u}(e,i)),i===null&&(t=e),i}function ni(){var i,e,l,u,f,_,m,v,y;if(v=t,r.substr(t,6).toLowerCase()==="domain"?(i=r.substr(t,6),t+=6):(i=null,d('"domain"')),i!==null)if(e=B(),e!==null)if(l=nt(),l!==null)if(u=dn(),u!==null){if(f=[],y=t,m=C(),m!==null)for(_=[];m!==null;)_.push(m),m=C();else _=null;for(_!==null?(m=dn(),m!==null?_=[_,m]:(_=null,t=y)):(_=null,t=y);_!==null;){if(f.push(_),y=t,m=C(),m!==null)for(_=[];m!==null;)_.push(m),m=C();else _=null;_!==null?(m=dn(),m!==null?_=[_,m]:(_=null,t=y)):(_=null,t=y)}f!==null?(_=ot(),_!==null?i=[i,e,l,u,f,_]:(i=null,t=v)):(i=null,t=v)}else i=null,t=v;else i=null,t=v;else i=null,t=v;else i=null,t=v;return i}function dn(){var i;return i=xn(),i===null&&(i=en()),i}function hn(){var i,e,l,u;return u=t,r.substr(t,5).toLowerCase()==="nonce"?(i=r.substr(t,5),t+=5):(i=null,d('"nonce"')),i!==null?(e=B(),e!==null?(l=ri(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function ri(){var i,e;return e=t,i=Oe(),i!==null&&(i=function(l,u){b.nonce=u}(e,i)),i===null&&(t=e),i}function ii(){var i,e,l,u,f;return u=t,f=t,r.substr(t,6).toLowerCase()==="opaque"?(i=r.substr(t,6),t+=6):(i=null,d('"opaque"')),i!==null?(e=B(),e!==null?(l=Oe(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.opaque=m}(u,i[2])),i===null&&(t=u),i}function li(){var i,e,l,u,f;return u=t,r.substr(t,5).toLowerCase()==="stale"?(i=r.substr(t,5),t+=5):(i=null,d('"stale"')),i!==null?(e=B(),e!==null?(f=t,r.substr(t,4).toLowerCase()==="true"?(l=r.substr(t,4),t+=4):(l=null,d('"true"')),l!==null&&(l=function(_){b.stale=!0}()),l===null&&(t=f),l===null&&(f=t,r.substr(t,5).toLowerCase()==="false"?(l=r.substr(t,5),t+=5):(l=null,d('"false"')),l!==null&&(l=function(_){b.stale=!1}()),l===null&&(t=f)),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function oi(){var i,e,l,u,f;return u=t,f=t,r.substr(t,9).toLowerCase()==="algorithm"?(i=r.substr(t,9),t+=9):(i=null,d('"algorithm"')),i!==null?(e=B(),e!==null?(r.substr(t,3).toLowerCase()==="md5"?(l=r.substr(t,3),t+=3):(l=null,d('"MD5"')),l===null&&(r.substr(t,8).toLowerCase()==="md5-sess"?(l=r.substr(t,8),t+=8):(l=null,d('"MD5-sess"')),l===null&&(l=U())),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.algorithm=m.toUpperCase()}(u,i[2])),i===null&&(t=u),i}function ai(){var i,e,l,u,f,_,m,v,y,O;if(v=t,r.substr(t,3).toLowerCase()==="qop"?(i=r.substr(t,3),t+=3):(i=null,d('"qop"')),i!==null)if(e=B(),e!==null)if(l=nt(),l!==null){if(y=t,u=_n(),u!==null){for(f=[],O=t,r.charCodeAt(t)===44?(_=",",t++):(_=null,d('","')),_!==null?(m=_n(),m!==null?_=[_,m]:(_=null,t=O)):(_=null,t=O);_!==null;)f.push(_),O=t,r.charCodeAt(t)===44?(_=",",t++):(_=null,d('","')),_!==null?(m=_n(),m!==null?_=[_,m]:(_=null,t=O)):(_=null,t=O);f!==null?u=[u,f]:(u=null,t=y)}else u=null,t=y;u!==null?(f=ot(),f!==null?i=[i,e,l,u,f]:(i=null,t=v)):(i=null,t=v)}else i=null,t=v;else i=null,t=v;else i=null,t=v;return i}function _n(){var i,e;return e=t,r.substr(t,8).toLowerCase()==="auth-int"?(i=r.substr(t,8),t+=8):(i=null,d('"auth-int"')),i===null&&(r.substr(t,4).toLowerCase()==="auth"?(i=r.substr(t,4),t+=4):(i=null,d('"auth"')),i===null&&(i=U())),i!==null&&(i=function(l,u){b.qop||(b.qop=[]),b.qop.push(u.toLowerCase())}(e,i)),i===null&&(t=e),i}function Gn(){var i,e,l,u,f,_;if(f=t,i=U(),i!==null){for(e=[],_=t,l=Ce(),l!==null?(u=U(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=Ce(),l!==null?(u=U(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function na(){var i,e,l,u,f,_,m;if(f=t,_=t,i=Wn(),i!==null){for(e=[],m=t,l=Ce(),l!==null?(u=Wn(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;)e.push(l),m=t,l=Ce(),l!==null?(u=Wn(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i!==null&&(i=function(v){var y,O;for(O=b.multi_header.length,y=0;y<O;y++)if(b.multi_header[y].parsed===null){b=null;break}b!==null?b=b.multi_header:b=-1}()),i===null&&(t=f),i}function Wn(){var i,e,l,u,f,_,m;if(f=t,_=t,i=$t(),i!==null){for(e=[],m=t,l=oe(),l!==null?(u=We(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;)e.push(l),m=t,l=oe(),l!==null?(u=We(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i!==null&&(i=function(v){var y;b.multi_header||(b.multi_header=[]);try{y=new hs(b.uri,b.display_name,b.params),delete b.uri,delete b.display_name,delete b.params}catch{y=null}b.multi_header.push({possition:t,offset:v,parsed:y})}(f)),i===null&&(t=f),i}function Kn(){var i,e,l,u,f,_,m;if(f=t,_=t,r.substr(t,3).toLowerCase()==="sip"?(i=r.substr(t,3),t+=3):(i=null,d('"SIP"')),i===null&&(i=U()),i!==null){for(e=[],m=t,l=oe(),l!==null?(u=ui(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;)e.push(l),m=t,l=oe(),l!==null?(u=ui(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i!==null&&(i=function(v,y){if(b.protocol=y.toLowerCase(),b.params||(b.params={}),b.params.text&&b.params.text[0]==='"'){var O=b.params.text;b.text=O.substring(1,O.length-1),delete b.params.text}}(f,i[0])),i===null&&(t=f),i}function ui(){var i;return i=Yn(),i===null&&(i=We()),i}function Yn(){var i,e,l,u,f,_;if(f=t,_=t,r.substr(t,5).toLowerCase()==="cause"?(i=r.substr(t,5),t+=5):(i=null,d('"cause"')),i!==null)if(e=B(),e!==null){if(u=g(),u!==null)for(l=[];u!==null;)l.push(u),u=g();else l=null;l!==null?i=[i,e,l]:(i=null,t=_)}else i=null,t=_;else i=null,t=_;return i!==null&&(i=function(m,v){b.cause=parseInt(v.join(""))}(f,i[2])),i===null&&(t=f),i}function bl(){var i,e,l,u,f,_;if(f=t,i=U(),i!==null){for(e=[],_=t,l=Ce(),l!==null?(u=U(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=Ce(),l!==null?(u=U(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function ra(){var i,e,l,u,f,_;if(f=t,i=zn(),i!==null){for(e=[],_=t,l=Ce(),l!==null?(u=zn(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=Ce(),l!==null?(u=zn(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function zn(){var i,e,l,u,f,_;if(f=t,i=$t(),i!==null){for(e=[],_=t,l=oe(),l!==null?(u=We(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=oe(),l!==null?(u=We(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function Jn(){var i,e,l,u,f,_;if(f=t,i=wl(),i!==null){for(e=[],_=t,l=oe(),l!==null?(u=Xn(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=oe(),l!==null?(u=Xn(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function wl(){var i,e;return e=t,r.substr(t,6).toLowerCase()==="active"?(i=r.substr(t,6),t+=6):(i=null,d('"active"')),i===null&&(r.substr(t,7).toLowerCase()==="pending"?(i=r.substr(t,7),t+=7):(i=null,d('"pending"')),i===null&&(r.substr(t,10).toLowerCase()==="terminated"?(i=r.substr(t,10),t+=10):(i=null,d('"terminated"')),i===null&&(i=U()))),i!==null&&(i=function(l){b.state=r.substring(t,l)}(e)),i===null&&(t=e),i}function Xn(){var i,e,l,u,f;return u=t,f=t,r.substr(t,6).toLowerCase()==="reason"?(i=r.substr(t,6),t+=6):(i=null,d('"reason"')),i!==null?(e=B(),e!==null?(l=Qn(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){typeof m<"u"&&(b.reason=m)}(u,i[2])),i===null&&(t=u),i===null&&(u=t,f=t,r.substr(t,7).toLowerCase()==="expires"?(i=r.substr(t,7),t+=7):(i=null,d('"expires"')),i!==null?(e=B(),e!==null?(l=Zt(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){typeof m<"u"&&(b.expires=m)}(u,i[2])),i===null&&(t=u),i===null&&(u=t,f=t,r.substr(t,11).toLowerCase()==="retry_after"?(i=r.substr(t,11),t+=11):(i=null,d('"retry_after"')),i!==null?(e=B(),e!==null?(l=Zt(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){typeof m<"u"&&(b.retry_after=m)}(u,i[2])),i===null&&(t=u),i===null&&(i=We()))),i}function Qn(){var i;return r.substr(t,11).toLowerCase()==="deactivated"?(i=r.substr(t,11),t+=11):(i=null,d('"deactivated"')),i===null&&(r.substr(t,9).toLowerCase()==="probation"?(i=r.substr(t,9),t+=9):(i=null,d('"probation"')),i===null&&(r.substr(t,8).toLowerCase()==="rejected"?(i=r.substr(t,8),t+=8):(i=null,d('"rejected"')),i===null&&(r.substr(t,7).toLowerCase()==="timeout"?(i=r.substr(t,7),t+=7):(i=null,d('"timeout"')),i===null&&(r.substr(t,6).toLowerCase()==="giveup"?(i=r.substr(t,6),t+=6):(i=null,d('"giveup"')),i===null&&(r.substr(t,10).toLowerCase()==="noresource"?(i=r.substr(t,10),t+=10):(i=null,d('"noresource"')),i===null&&(r.substr(t,9).toLowerCase()==="invariant"?(i=r.substr(t,9),t+=9):(i=null,d('"invariant"')),i===null&&(i=U()))))))),i}function Ol(){var i;return i=q(),i=i!==null?i:"",i}function ia(){var i,e,l,u,f,_;if(f=t,i=U(),i!==null){for(e=[],_=t,l=Ce(),l!==null?(u=U(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=Ce(),l!==null?(u=U(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i=i!==null?i:"",i}function la(){var i,e,l,u,f,_,m;if(f=t,_=t,i=_e(),i===null&&(i=$t()),i!==null){for(e=[],m=t,l=oe(),l!==null?(u=ci(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;)e.push(l),m=t,l=oe(),l!==null?(u=ci(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i!==null&&(i=function(v){var y=b.tag;try{b=new hs(b.uri,b.display_name,b.params),y&&b.setParam("tag",y)}catch{b=-1}}()),i===null&&(t=f),i}function ci(){var i;return i=cn(),i===null&&(i=We()),i}function fi(){var i,e,l,u,f,_;if(f=t,i=Zn(),i!==null){for(e=[],_=t,l=Ce(),l!==null?(u=Zn(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=Ce(),l!==null?(u=Zn(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function Zn(){var i,e,l,u,f,_,m,v;if(m=t,i=gi(),i!==null)if(e=ve(),e!==null)if(l=Ei(),l!==null){for(u=[],v=t,f=oe(),f!==null?(_=ks(),_!==null?f=[f,_]:(f=null,t=v)):(f=null,t=v);f!==null;)u.push(f),v=t,f=oe(),f!==null?(_=ks(),_!==null?f=[f,_]:(f=null,t=v)):(f=null,t=v);u!==null?i=[i,e,l,u]:(i=null,t=m)}else i=null,t=m;else i=null,t=m;else i=null,t=m;return i}function ks(){var i;return i=er(),i===null&&(i=di(),i===null&&(i=hi(),i===null&&(i=_i(),i===null&&(i=pi(),i===null&&(i=We()))))),i}function er(){var i,e,l,u,f;return u=t,f=t,r.substr(t,3).toLowerCase()==="ttl"?(i=r.substr(t,3),t+=3):(i=null,d('"ttl"')),i!==null?(e=B(),e!==null?(l=tr(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.ttl=m}(u,i[2])),i===null&&(t=u),i}function di(){var i,e,l,u,f;return u=t,f=t,r.substr(t,5).toLowerCase()==="maddr"?(i=r.substr(t,5),t+=5):(i=null,d('"maddr"')),i!==null?(e=B(),e!==null?(l=Qt(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.maddr=m}(u,i[2])),i===null&&(t=u),i}function hi(){var i,e,l,u,f;return u=t,f=t,r.substr(t,8).toLowerCase()==="received"?(i=r.substr(t,8),t+=8):(i=null,d('"received"')),i!==null?(e=B(),e!==null?(l=at(),l===null&&(l=Js()),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.received=m}(u,i[2])),i===null&&(t=u),i}function _i(){var i,e,l,u,f;return u=t,f=t,r.substr(t,6).toLowerCase()==="branch"?(i=r.substr(t,6),t+=6):(i=null,d('"branch"')),i!==null?(e=B(),e!==null?(l=U(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.branch=m}(u,i[2])),i===null&&(t=u),i}function pi(){var i,e,l,u,f;return u=t,r.substr(t,5).toLowerCase()==="rport"?(i=r.substr(t,5),t+=5):(i=null,d('"rport"')),i!==null?(f=t,e=B(),e!==null?(l=mi(),l!==null?e=[e,l]:(e=null,t=f)):(e=null,t=f),e=e!==null?e:"",e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i}function mi(){var i,e,l,u,f,_,m;return _=t,m=t,i=g(),i=i!==null?i:"",i!==null?(e=g(),e=e!==null?e:"",e!==null?(l=g(),l=l!==null?l:"",l!==null?(u=g(),u=u!==null?u:"",u!==null?(f=g(),f=f!==null?f:"",f!==null?i=[i,e,l,u,f]:(i=null,t=m)):(i=null,t=m)):(i=null,t=m)):(i=null,t=m)):(i=null,t=m),i!==null&&(i=function(v,y){b.rport=parseInt(y.join(""))}(_,i)),i===null&&(t=_),i}function gi(){var i,e,l,u,f,_;return _=t,i=Ti(),i!==null?(e=W(),e!==null?(l=U(),l!==null?(u=W(),u!==null?(f=vi(),f!==null?i=[i,e,l,u,f]:(i=null,t=_)):(i=null,t=_)):(i=null,t=_)):(i=null,t=_)):(i=null,t=_),i}function Ti(){var i,e;return e=t,r.substr(t,3).toLowerCase()==="sip"?(i=r.substr(t,3),t+=3):(i=null,d('"SIP"')),i===null&&(i=U()),i!==null&&(i=function(l,u){b.protocol=u}(e,i)),i===null&&(t=e),i}function vi(){var i,e;return e=t,r.substr(t,3).toLowerCase()==="udp"?(i=r.substr(t,3),t+=3):(i=null,d('"UDP"')),i===null&&(r.substr(t,3).toLowerCase()==="tcp"?(i=r.substr(t,3),t+=3):(i=null,d('"TCP"')),i===null&&(r.substr(t,3).toLowerCase()==="tls"?(i=r.substr(t,3),t+=3):(i=null,d('"TLS"')),i===null&&(r.substr(t,4).toLowerCase()==="sctp"?(i=r.substr(t,4),t+=4):(i=null,d('"SCTP"')),i===null&&(i=U())))),i!==null&&(i=function(l,u){b.transport=u}(e,i)),i===null&&(t=e),i}function Ei(){var i,e,l,u,f;return u=t,i=Si(),i!==null?(f=t,e=ye(),e!==null?(l=yi(),l!==null?e=[e,l]:(e=null,t=f)):(e=null,t=f),e=e!==null?e:"",e!==null?i=[i,e]:(i=null,t=u)):(i=null,t=u),i}function Si(){var i,e;return e=t,i=at(),i===null&&(i=Nn(),i===null&&(i=fs())),i!==null&&(i=function(l){b.host=r.substring(t,l)}(e)),i===null&&(t=e),i}function yi(){var i,e,l,u,f,_,m;return _=t,m=t,i=g(),i=i!==null?i:"",i!==null?(e=g(),e=e!==null?e:"",e!==null?(l=g(),l=l!==null?l:"",l!==null?(u=g(),u=u!==null?u:"",u!==null?(f=g(),f=f!==null?f:"",f!==null?i=[i,e,l,u,f]:(i=null,t=m)):(i=null,t=m)):(i=null,t=m)):(i=null,t=m)):(i=null,t=m),i!==null&&(i=function(v,y){b.port=parseInt(y.join(""))}(_,i)),i===null&&(t=_),i}function tr(){var i,e,l,u,f;return u=t,f=t,i=g(),i!==null?(e=g(),e=e!==null?e:"",e!==null?(l=g(),l=l!==null?l:"",l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){return parseInt(m.join(""))}(u,i)),i===null&&(t=u),i}function Ai(){var i;return i=ti(),i}function oa(){var i,e,l,u,f,_;if(f=t,i=Dl(),i!==null){for(e=[],_=t,l=oe(),l!==null?(u=sr(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=oe(),l!==null?(u=sr(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function Dl(){var i,e;return e=t,i=Zt(),i!==null&&(i=function(l,u){b.expires=u}(e,i)),i===null&&(t=e),i}function sr(){var i;return i=nr(),i===null&&(i=We()),i}function nr(){var i,e,l,u,f;return u=t,f=t,r.substr(t,9).toLowerCase()==="refresher"?(i=r.substr(t,9),t+=9):(i=null,d('"refresher"')),i!==null?(e=B(),e!==null?(r.substr(t,3).toLowerCase()==="uac"?(l=r.substr(t,3),t+=3):(l=null,d('"uac"')),l===null&&(r.substr(t,3).toLowerCase()==="uas"?(l=r.substr(t,3),t+=3):(l=null,d('"uas"'))),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.refresher=m.toLowerCase()}(u,i[2])),i===null&&(t=u),i}function Nl(){var i,e,l,u;return u=t,i=U(),i!==null?(e=N(),e!==null?(l=Ul(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function Ul(){var i,e;for(i=[],e=V(),e===null&&(e=H(),e===null&&(e=ve()));e!==null;)i.push(e),e=V(),e===null&&(e=H(),e===null&&(e=ve()));return i}function Pl(){var i,e;for(i=[],e=A();e!==null;)i.push(e),e=A();return i}function aa(){var i,e,l;return l=t,r.substr(t,5)==="uuid:"?(i="uuid:",t+=5):(i=null,d('"uuid:"')),i!==null?(e=xl(),e!==null?i=[i,e]:(i=null,t=l)):(i=null,t=l),i}function xl(){var i,e,l,u,f,_,m,v,y,O,le;return O=t,le=t,i=jt(),i!==null?(r.charCodeAt(t)===45?(e="-",t++):(e=null,d('"-"')),e!==null?(l=Ft(),l!==null?(r.charCodeAt(t)===45?(u="-",t++):(u=null,d('"-"')),u!==null?(f=Ft(),f!==null?(r.charCodeAt(t)===45?(_="-",t++):(_=null,d('"-"')),_!==null?(m=Ft(),m!==null?(r.charCodeAt(t)===45?(v="-",t++):(v=null,d('"-"')),v!==null?(y=Ci(),y!==null?i=[i,e,l,u,f,_,m,v,y]:(i=null,t=le)):(i=null,t=le)):(i=null,t=le)):(i=null,t=le)):(i=null,t=le)):(i=null,t=le)):(i=null,t=le)):(i=null,t=le)):(i=null,t=le),i!==null&&(i=function(Ue,bt){b=r.substring(t+5,Ue)}(O,i[0])),i===null&&(t=O),i}function Ft(){var i,e,l,u,f;return f=t,i=E(),i!==null?(e=E(),e!==null?(l=E(),l!==null?(u=E(),u!==null?i=[i,e,l,u]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i}function jt(){var i,e,l;return l=t,i=Ft(),i!==null?(e=Ft(),e!==null?i=[i,e]:(i=null,t=l)):(i=null,t=l),i}function Ci(){var i,e,l,u;return u=t,i=Ft(),i!==null?(e=Ft(),e!==null?(l=Ft(),l!==null?i=[i,e,l]:(i=null,t=u)):(i=null,t=u)):(i=null,t=u),i}function Ml(){var i,e,l,u,f,_,m;if(f=t,_=t,i=_e(),i===null&&(i=$t()),i!==null){for(e=[],m=t,l=oe(),l!==null?(u=We(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);l!==null;)e.push(l),m=t,l=oe(),l!==null?(u=We(),u!==null?l=[l,u]:(l=null,t=m)):(l=null,t=m);e!==null?i=[i,e]:(i=null,t=_)}else i=null,t=_;return i!==null&&(i=function(v){try{b=new hs(b.uri,b.display_name,b.params)}catch{b=-1}}()),i===null&&(t=f),i}function ua(){var i,e,l,u,f,_;if(f=t,i=kl(),i!==null){for(e=[],_=t,l=oe(),l!==null?(u=rr(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);l!==null;)e.push(l),_=t,l=oe(),l!==null?(u=rr(),u!==null?l=[l,u]:(l=null,t=_)):(l=null,t=_);e!==null?i=[i,e]:(i=null,t=f)}else i=null,t=f;return i}function kl(){var i,e,l,u,f,_;return u=t,f=t,i=st(),i!==null?(_=t,r.charCodeAt(t)===64?(e="@",t++):(e=null,d('"@"')),e!==null?(l=st(),l!==null?e=[e,l]:(e=null,t=_)):(e=null,t=_),e=e!==null?e:"",e!==null?i=[i,e]:(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(m){b.call_id=r.substring(t,m)}(u)),i===null&&(t=u),i}function rr(){var i;return i=ir(),i===null&&(i=Ri(),i===null&&(i=Ii(),i===null&&(i=We()))),i}function ir(){var i,e,l,u,f;return u=t,f=t,r.substr(t,6)==="to-tag"?(i="to-tag",t+=6):(i=null,d('"to-tag"')),i!==null?(e=B(),e!==null?(l=U(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.to_tag=m}(u,i[2])),i===null&&(t=u),i}function Ri(){var i,e,l,u,f;return u=t,f=t,r.substr(t,8)==="from-tag"?(i="from-tag",t+=8):(i=null,d('"from-tag"')),i!==null?(e=B(),e!==null?(l=U(),l!==null?i=[i,e,l]:(i=null,t=f)):(i=null,t=f)):(i=null,t=f),i!==null&&(i=function(_,m){b.from_tag=m}(u,i[2])),i===null&&(t=u),i}function Ii(){var i,e;return e=t,r.substr(t,10)==="early-only"?(i="early-only",t+=10):(i=null,d('"early-only"')),i!==null&&(i=function(l){b.early_only=!0}()),i===null&&(t=e),i}function Ll(i){i.sort();for(var e=null,l=[],u=0;u<i.length;u++)i[u]!==e&&(l.push(i[u]),e=i[u]);return l}function ca(){for(var i=1,e=1,l=!1,u=0;u<Math.max(t,n);u++){var f=r.charAt(u);f===`
`?(l||i++,e=1,l=!1):f==="\r"||f==="\u2028"||f==="\u2029"?(i++,e=1,l=!0):(e++,l=!1)}return{line:i,column:e}}var $l=Cs(),hs=Ku(),b={},w=a[o]();if(w===null||t!==r.length){var bi=Math.max(t,n),wi=bi<r.length?r.charAt(bi):null,Hl=ca();return new this.SyntaxError(Ll(p),wi,bi,Hl.line,Hl.column),-1}return b},toSource:function(){return this._source}};return s.SyntaxError=function(r,o,a,t,n){function p(d,h){var g,T;switch(d.length){case 0:g="end of input";break;case 1:g=d[0];break;default:g=d.slice(0,d.length-1).join(", ")+" or "+d[d.length-1]}return T=h?c(h):"end of input","Expected "+g+" but "+T+" found."}this.name="SyntaxError",this.expected=r,this.found=o,this.message=p(r,o),this.offset=a,this.line=t,this.column=n},s.SyntaxError.prototype=Error.prototype,s}()),Ma}var ka,hf;function Cs(){if(hf)return ka;hf=1;const c=Pe,s=yt(),r=cs();return ka=class Ad{static parse(a){if(a=r.parse(a,"SIP_URI"),a!==-1)return a}constructor(a,t,n,p,d={},h={}){if(!n)throw new TypeError('missing or invalid "host" parameter');this._parameters={},this._headers={},this._scheme=a||c.SIP,this._user=t,this._host=n,this._port=p;for(const g in d)Object.prototype.hasOwnProperty.call(d,g)&&this.setParam(g,d[g]);for(const g in h)Object.prototype.hasOwnProperty.call(h,g)&&this.setHeader(g,h[g])}get scheme(){return this._scheme}set scheme(a){this._scheme=a.toLowerCase()}get user(){return this._user}set user(a){this._user=a}get host(){return this._host}set host(a){this._host=a.toLowerCase()}get port(){return this._port}set port(a){this._port=a===0?a:parseInt(a,10)||null}setParam(a,t){a&&(this._parameters[a.toLowerCase()]=typeof t>"u"||t===null?null:t.toString())}getParam(a){if(a)return this._parameters[a.toLowerCase()]}hasParam(a){if(a)return this._parameters.hasOwnProperty(a.toLowerCase())&&!0||!1}deleteParam(a){if(a=a.toLowerCase(),this._parameters.hasOwnProperty(a)){const t=this._parameters[a];return delete this._parameters[a],t}}clearParams(){this._parameters={}}setHeader(a,t){this._headers[s.headerize(a)]=Array.isArray(t)?t:[t]}getHeader(a){if(a)return this._headers[s.headerize(a)]}hasHeader(a){if(a)return this._headers.hasOwnProperty(s.headerize(a))&&!0||!1}deleteHeader(a){if(a=s.headerize(a),this._headers.hasOwnProperty(a)){const t=this._headers[a];return delete this._headers[a],t}}clearHeaders(){this._headers={}}clone(){return new Ad(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}toString(){const a=[];let t=`${this._scheme}:`;this._user&&(t+=`${s.escapeUser(this._user)}@`),t+=this._host,(this._port||this._port===0)&&(t+=`:${this._port}`);for(const n in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,n)&&(t+=`;${n}`,this._parameters[n]!==null&&(t+=`=${this._parameters[n]}`));for(const n in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,n))for(const p of this._headers[n])a.push(`${n}=${p}`);return a.length>0&&(t+=`?${a.join("&")}`),t}toAor(a){let t=`${this._scheme}:`;return this._user&&(t+=`${s.escapeUser(this._user)}@`),t+=this._host,a&&(this._port||this._port===0)&&(t+=`:${this._port}`),t}},ka}var _f;function yt(){if(_f)return et;_f=1;const c=Pe,s=Cs(),r=cs();et.str_utf8_length=n=>unescape(encodeURIComponent(n)).length;const o=et.isFunction=n=>n!==void 0?Object.prototype.toString.call(n)==="[object Function]":!1;et.isString=n=>n!==void 0?Object.prototype.toString.call(n)==="[object String]":!1,et.isDecimal=n=>!isNaN(n)&&parseFloat(n)===parseInt(n,10),et.isEmpty=n=>n===null||n===""||n===void 0||Array.isArray(n)&&n.length===0||typeof n=="number"&&isNaN(n),et.hasMethods=function(n,...p){for(const d of p)if(o(n[d]))return!1;return!0};const a=et.createRandomToken=(n,p=32)=>{let d,h,g="";for(d=0;d<n;d++)h=Math.random()*p|0,g+=h.toString(p);return g};et.newTag=()=>a(10),et.newUUID=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,p=>{const d=Math.random()*16|0;return(p==="x"?d:d&3|8).toString(16)}),et.hostType=n=>{if(n){if(n=r.parse(n,"host"),n!==-1)return n.host_type}else return};const t=et.escapeUser=n=>encodeURIComponent(decodeURIComponent(n)).replace(/%3A/ig,":").replace(/%2B/ig,"+").replace(/%3F/ig,"?").replace(/%2F/ig,"/");return et.normalizeTarget=(n,p)=>{if(n){if(n instanceof s)return n;if(typeof n=="string"){const d=n.split("@");let h,g;switch(d.length){case 1:if(!p)return;h=n,g=p;break;case 2:h=d[0],g=d[1];break;default:h=d.slice(0,d.length-1).join("@"),g=d[d.length-1]}h=h.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(h)&&(h=h.replace(/[-.()]/g,"")),n=`${c.SIP}:${t(h)}@${g}`;let T;return(T=s.parse(n))?T:void 0}else return}else return},et.headerize=n=>{const p={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},d=n.toLowerCase().replace(/_/g,"-").split("-");let h="";const g=d.length;let T;for(T=0;T<g;T++)T!==0&&(h+="-"),h+=d[T].charAt(0).toUpperCase()+d[T].substring(1);return p[h]&&(h=p[h]),h},et.sipErrorCause=n=>{for(const p in c.SIP_ERROR_CAUSES)if(c.SIP_ERROR_CAUSES[p].indexOf(n)!==-1)return c.causes[p];return c.causes.SIP_FAILURE_CODE},et.getRandomTestNetIP=()=>{function n(p,d){return Math.floor(Math.random()*(d-p+1)+p)}return`192.0.2.${n(1,254)}`},et.calculateMD5=n=>{function p(Ee,Ae){return Ee<<Ae|Ee>>>32-Ae}function d(Ee,Ae){const Ie=Ee&2147483648,Oe=Ae&2147483648,pe=Ee&1073741824,ue=Ae&1073741824,_e=(Ee&1073741823)+(Ae&1073741823);return pe&ue?_e^2147483648^Ie^Oe:pe|ue?_e&1073741824?_e^3221225472^Ie^Oe:_e^1073741824^Ie^Oe:_e^Ie^Oe}function h(Ee,Ae,Ie){return Ee&Ae|~Ee&Ie}function g(Ee,Ae,Ie){return Ee&Ie|Ae&~Ie}function T(Ee,Ae,Ie){return Ee^Ae^Ie}function E(Ee,Ae,Ie){return Ae^(Ee|~Ie)}function S(Ee,Ae,Ie,Oe,pe,ue,_e){return Ee=d(Ee,d(d(h(Ae,Ie,Oe),pe),_e)),d(p(Ee,ue),Ae)}function A(Ee,Ae,Ie,Oe,pe,ue,_e){return Ee=d(Ee,d(d(g(Ae,Ie,Oe),pe),_e)),d(p(Ee,ue),Ae)}function R(Ee,Ae,Ie,Oe,pe,ue,_e){return Ee=d(Ee,d(d(T(Ae,Ie,Oe),pe),_e)),d(p(Ee,ue),Ae)}function C(Ee,Ae,Ie,Oe,pe,ue,_e){return Ee=d(Ee,d(d(E(Ae,Ie,Oe),pe),_e)),d(p(Ee,ue),Ae)}function $(Ee){let Ae;const Ie=Ee.length,Oe=Ie+8,ue=((Oe-Oe%64)/64+1)*16,_e=new Array(ue-1);let we=0,Ne=0;for(;Ne<Ie;)Ae=(Ne-Ne%4)/4,we=Ne%4*8,_e[Ae]=_e[Ae]|Ee.charCodeAt(Ne)<<we,Ne++;return Ae=(Ne-Ne%4)/4,we=Ne%4*8,_e[Ae]=_e[Ae]|128<<we,_e[ue-2]=Ie<<3,_e[ue-1]=Ie>>>29,_e}function L(Ee){let Ae="",Ie="",Oe,pe;for(pe=0;pe<=3;pe++)Oe=Ee>>>pe*8&255,Ie=`0${Oe.toString(16)}`,Ae=Ae+Ie.substr(Ie.length-2,2);return Ae}function ne(Ee){let Ae="";for(let Ie=0;Ie<Ee.length;Ie++){const Oe=Ee.charCodeAt(Ie);Oe<128?Ae+=String.fromCharCode(Oe):Oe>127&&Oe<2048?(Ae+=String.fromCharCode(Oe>>6|192),Ae+=String.fromCharCode(Oe&63|128)):(Ae+=String.fromCharCode(Oe>>12|224),Ae+=String.fromCharCode(Oe>>6&63|128),Ae+=String.fromCharCode(Oe&63|128))}return Ae}let D=[],F,Se,ve,M,N,q,V,z,H;const J=7,U=12,P=17,se=22,st=5,ee=9,W=14,B=20,ie=4,ge=11,be=16,Me=23,Ce=6,oe=10,ye=15,nt=21;for(n=ne(n),D=$(n),q=1732584193,V=4023233417,z=2562383102,H=271733878,F=0;F<D.length;F+=16)Se=q,ve=V,M=z,N=H,q=S(q,V,z,H,D[F+0],J,3614090360),H=S(H,q,V,z,D[F+1],U,3905402710),z=S(z,H,q,V,D[F+2],P,606105819),V=S(V,z,H,q,D[F+3],se,3250441966),q=S(q,V,z,H,D[F+4],J,4118548399),H=S(H,q,V,z,D[F+5],U,1200080426),z=S(z,H,q,V,D[F+6],P,2821735955),V=S(V,z,H,q,D[F+7],se,4249261313),q=S(q,V,z,H,D[F+8],J,1770035416),H=S(H,q,V,z,D[F+9],U,2336552879),z=S(z,H,q,V,D[F+10],P,4294925233),V=S(V,z,H,q,D[F+11],se,2304563134),q=S(q,V,z,H,D[F+12],J,1804603682),H=S(H,q,V,z,D[F+13],U,4254626195),z=S(z,H,q,V,D[F+14],P,2792965006),V=S(V,z,H,q,D[F+15],se,1236535329),q=A(q,V,z,H,D[F+1],st,4129170786),H=A(H,q,V,z,D[F+6],ee,3225465664),z=A(z,H,q,V,D[F+11],W,643717713),V=A(V,z,H,q,D[F+0],B,3921069994),q=A(q,V,z,H,D[F+5],st,3593408605),H=A(H,q,V,z,D[F+10],ee,38016083),z=A(z,H,q,V,D[F+15],W,3634488961),V=A(V,z,H,q,D[F+4],B,3889429448),q=A(q,V,z,H,D[F+9],st,568446438),H=A(H,q,V,z,D[F+14],ee,3275163606),z=A(z,H,q,V,D[F+3],W,4107603335),V=A(V,z,H,q,D[F+8],B,1163531501),q=A(q,V,z,H,D[F+13],st,2850285829),H=A(H,q,V,z,D[F+2],ee,4243563512),z=A(z,H,q,V,D[F+7],W,1735328473),V=A(V,z,H,q,D[F+12],B,2368359562),q=R(q,V,z,H,D[F+5],ie,4294588738),H=R(H,q,V,z,D[F+8],ge,2272392833),z=R(z,H,q,V,D[F+11],be,1839030562),V=R(V,z,H,q,D[F+14],Me,4259657740),q=R(q,V,z,H,D[F+1],ie,2763975236),H=R(H,q,V,z,D[F+4],ge,1272893353),z=R(z,H,q,V,D[F+7],be,4139469664),V=R(V,z,H,q,D[F+10],Me,3200236656),q=R(q,V,z,H,D[F+13],ie,681279174),H=R(H,q,V,z,D[F+0],ge,3936430074),z=R(z,H,q,V,D[F+3],be,3572445317),V=R(V,z,H,q,D[F+6],Me,76029189),q=R(q,V,z,H,D[F+9],ie,3654602809),H=R(H,q,V,z,D[F+12],ge,3873151461),z=R(z,H,q,V,D[F+15],be,530742520),V=R(V,z,H,q,D[F+2],Me,3299628645),q=C(q,V,z,H,D[F+0],Ce,4096336452),H=C(H,q,V,z,D[F+7],oe,1126891415),z=C(z,H,q,V,D[F+14],ye,2878612391),V=C(V,z,H,q,D[F+5],nt,4237533241),q=C(q,V,z,H,D[F+12],Ce,1700485571),H=C(H,q,V,z,D[F+3],oe,2399980690),z=C(z,H,q,V,D[F+10],ye,4293915773),V=C(V,z,H,q,D[F+1],nt,2240044497),q=C(q,V,z,H,D[F+8],Ce,1873313359),H=C(H,q,V,z,D[F+15],oe,4264355552),z=C(z,H,q,V,D[F+6],ye,2734768916),V=C(V,z,H,q,D[F+13],nt,1309151649),q=C(q,V,z,H,D[F+4],Ce,4149444226),H=C(H,q,V,z,D[F+11],oe,3174756917),z=C(z,H,q,V,D[F+2],ye,718787259),V=C(V,z,H,q,D[F+9],nt,3951481745),q=d(q,Se),V=d(V,ve),z=d(z,M),H=d(H,N);return(L(q)+L(V)+L(z)+L(H)).toLowerCase()},et.closeMediaStream=n=>{if(n)try{let p;if(n.getTracks){p=n.getTracks();for(const d of p)d.stop()}else{p=n.getAudioTracks();for(const d of p)d.stop();p=n.getVideoTracks();for(const d of p)d.stop()}}catch{(typeof n.stop=="function"||typeof n.stop=="object")&&n.stop()}},et.cloneArray=n=>n&&n.slice()||[],et.cloneObject=(n,p={})=>n&&Object.assign({},n)||p,et}const Cd=Pt,ng=ct,St=Pe,it=yt(),pf=Ku(),rg=cs(),La=new ng("SIPMessage");class Ko{constructor(s,r,o,a,t,n){if(!s||!r||!o)return null;a=a||{},this.ua=o,this.headers={},this.method=s,this.ruri=r,this.body=n,this.extraHeaders=it.cloneArray(t),this.ua.configuration.extra_headers&&(this.extraHeaders=this.extraHeaders.concat(this.ua.configuration.extra_headers)),a.route_set?this.setHeader("route",a.route_set):o.configuration.use_preloaded_route&&this.setHeader("route",`<${o.transport.sip_uri};lr>`),this.setHeader("via",""),this.setHeader("max-forwards",St.MAX_FORWARDS);const p=a.to_uri||r,d=a.to_tag?{tag:a.to_tag}:null,h=typeof a.to_display_name<"u"?a.to_display_name:null;this.to=new pf(p,h,d),this.setHeader("to",this.to.toString());const g=a.from_uri||o.configuration.uri,T={tag:a.from_tag||it.newTag()};let E;typeof a.from_display_name<"u"?E=a.from_display_name:o.configuration.display_name?E=o.configuration.display_name:E=null,this.from=new pf(g,E,T),this.setHeader("from",this.from.toString());const S=a.call_id||o.configuration.jssip_id+it.createRandomToken(15);this.call_id=S,this.setHeader("call-id",S);const A=a.cseq||Math.floor(Math.random()*1e4);this.cseq=A,this.setHeader("cseq",`${A} ${s}`)}setHeader(s,r){const o=new RegExp(`^\\s*${s}\\s*:`,"i");for(let a=0;a<this.extraHeaders.length;a++)o.test(this.extraHeaders[a])&&this.extraHeaders.splice(a,1);this.headers[it.headerize(s)]=Array.isArray(r)?r:[r]}getHeader(s){const r=this.headers[it.headerize(s)];if(r){if(r[0])return r[0]}else{const o=new RegExp(`^\\s*${s}\\s*:`,"i");for(const a of this.extraHeaders)if(o.test(a))return a.substring(a.indexOf(":")+1).trim()}}getHeaders(s){const r=this.headers[it.headerize(s)],o=[];if(r){for(const a of r)o.push(a);return o}else{const a=new RegExp(`^\\s*${s}\\s*:`,"i");for(const t of this.extraHeaders)a.test(t)&&o.push(t.substring(t.indexOf(":")+1).trim());return o}}hasHeader(s){if(this.headers[it.headerize(s)])return!0;{const r=new RegExp(`^\\s*${s}\\s*:`,"i");for(const o of this.extraHeaders)if(r.test(o))return!0}return!1}parseSDP(s){return!s&&this.sdp?this.sdp:(this.sdp=Cd.parse(this.body||""),this.sdp)}toString(){let s=`${this.method} ${this.ruri} SIP/2.0\r
`;for(const a in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,a))for(const t of this.headers[a])s+=`${a}: ${t}\r
`;for(const a of this.extraHeaders)s+=`${a.trim()}\r
`;const r=[];switch(this.method){case St.REGISTER:r.push("path","gruu");break;case St.INVITE:this.ua.configuration.session_timers&&r.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&r.push("gruu"),r.push("ice","replaces");break;case St.UPDATE:this.ua.configuration.session_timers&&r.push("timer"),r.push("ice");break}r.push("outbound");const o=this.ua.configuration.user_agent||St.USER_AGENT;if(s+=`Allow: ${St.ALLOWED_METHODS}\r
`,s+=`Supported: ${r}\r
`,s+=`User-Agent: ${o}\r
`,this.body){const a=it.str_utf8_length(this.body);s+=`Content-Length: ${a}\r
\r
`,s+=this.body}else s+=`Content-Length: 0\r
\r
`;return s}clone(){const s=new Ko(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach(function(r){s.headers[r]=this.headers[r].slice()},this),s.body=this.body,s.extraHeaders=it.cloneArray(this.extraHeaders),s.to=this.to,s.from=this.from,s.call_id=this.call_id,s.cseq=this.cseq,s}}class Yu extends Ko{constructor(s,r,o,a,t){super(St.INVITE,s,r,o,a,t),this.transaction=null}cancel(s){this.transaction.cancel(s)}clone(){const s=new Yu(this.ruri,this.ua);return Object.keys(this.headers).forEach(function(r){s.headers[r]=this.headers[r].slice()},this),s.body=this.body,s.extraHeaders=it.cloneArray(this.extraHeaders),s.to=this.to,s.from=this.from,s.call_id=this.call_id,s.cseq=this.cseq,s.transaction=this.transaction,s}}class Rd{constructor(){this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}addHeader(s,r){const o={raw:r};s=it.headerize(s),this.headers[s]?this.headers[s].push(o):this.headers[s]=[o]}getHeader(s){const r=this.headers[it.headerize(s)];if(r){if(r[0])return r[0].raw}else return}getHeaders(s){const r=this.headers[it.headerize(s)],o=[];if(!r)return[];for(const a of r)o.push(a.raw);return o}hasHeader(s){return!!this.headers[it.headerize(s)]}parseHeader(s,r=0){if(s=it.headerize(s),this.headers[s]){if(r>=this.headers[s].length){La.debug(`not so many "${s}" headers present`);return}}else{La.debug(`header "${s}" not present`);return}const o=this.headers[s][r],a=o.raw;if(o.parsed)return o.parsed;const t=rg.parse(a,s.replace(/-/g,"_"));if(t===-1){this.headers[s].splice(r,1),La.debug(`error parsing "${s}" header field with value "${a}"`);return}else return o.parsed=t,t}s(s,r){return this.parseHeader(s,r)}setHeader(s,r){const o={raw:r};this.headers[it.headerize(s)]=[o]}parseSDP(s){return!s&&this.sdp?this.sdp:(this.sdp=Cd.parse(this.body||""),this.sdp)}toString(){return this.data}}class ig extends Rd{constructor(s){super(),this.ua=s,this.headers={},this.ruri=null,this.transport=null,this.server_transaction=null}reply(s,r,o,a,t,n){const p=[];let d=this.getHeader("To");if(s=s||null,r=r||null,!s||s<100||s>699)throw new TypeError(`Invalid status_code: ${s}`);if(r&&typeof r!="string"&&!(r instanceof String))throw new TypeError(`Invalid reason_phrase: ${r}`);r=r||St.REASON_PHRASE[s]||"",o=it.cloneArray(o),this.ua.configuration.extra_headers&&(o=o.concat(this.ua.configuration.extra_headers));let h=`SIP/2.0 ${s} ${r}\r
`;if(this.method===St.INVITE&&s>100&&s<=200){const T=this.getHeaders("record-route");for(const E of T)h+=`Record-Route: ${E}\r
`}const g=this.getHeaders("via");for(const T of g)h+=`Via: ${T}\r
`;!this.to_tag&&s>100?d+=`;tag=${it.newTag()}`:this.to_tag&&!this.s("to").hasParam("tag")&&(d+=`;tag=${this.to_tag}`),h+=`To: ${d}\r
`,h+=`From: ${this.getHeader("From")}\r
`,h+=`Call-ID: ${this.call_id}\r
`,h+=`CSeq: ${this.cseq} ${this.method}\r
`;for(const T of o)h+=`${T.trim()}\r
`;switch(this.method){case St.INVITE:this.ua.configuration.session_timers&&p.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&p.push("gruu"),p.push("ice","replaces");break;case St.UPDATE:this.ua.configuration.session_timers&&p.push("timer"),a&&p.push("ice"),p.push("replaces")}if(p.push("outbound"),this.method===St.OPTIONS?(h+=`Allow: ${St.ALLOWED_METHODS}\r
`,h+=`Accept: ${St.ACCEPTED_BODY_TYPES}\r
`):s===405?h+=`Allow: ${St.ALLOWED_METHODS}\r
`:s===415&&(h+=`Accept: ${St.ACCEPTED_BODY_TYPES}\r
`),h+=`Supported: ${p}\r
`,a){const T=it.str_utf8_length(a);h+=`Content-Type: application/sdp\r
`,h+=`Content-Length: ${T}\r
\r
`,h+=a}else h+=`Content-Length: 0\r
\r
`;this.server_transaction.receiveResponse(s,h,t,n)}reply_sl(s=null,r=null){const o=this.getHeaders("via");if(!s||s<100||s>699)throw new TypeError(`Invalid status_code: ${s}`);if(r&&typeof r!="string"&&!(r instanceof String))throw new TypeError(`Invalid reason_phrase: ${r}`);r=r||St.REASON_PHRASE[s]||"";let a=`SIP/2.0 ${s} ${r}\r
`;for(const n of o)a+=`Via: ${n}\r
`;let t=this.getHeader("To");if(!this.to_tag&&s>100?t+=`;tag=${it.newTag()}`:this.to_tag&&!this.s("to").hasParam("tag")&&(t+=`;tag=${this.to_tag}`),a+=`To: ${t}\r
`,a+=`From: ${this.getHeader("From")}\r
`,a+=`Call-ID: ${this.call_id}\r
`,a+=`CSeq: ${this.cseq} ${this.method}\r
`,this.ua.configuration.extra_headers)for(const n of this.ua.configuration.extra_headers)a+=`${n.trim()}\r
`;a+=`Content-Length: 0\r
\r
`,this.transport.send(a)}}class lg extends Rd{constructor(){super(),this.headers={},this.status_code=null,this.reason_phrase=null}}var kt={OutgoingRequest:Ko,InitialOutgoingInviteRequest:Yu,IncomingRequest:ig,IncomingResponse:lg};const og=ct,gs=yt(),Yt=new og("DigestAuthentication");var Id=class{constructor(s){this._credentials=s,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}get(s){switch(s){case"realm":return this._realm;case"ha1":return this._ha1;default:Yt.warn('get() | cannot get "%s" parameter',s);return}}authenticate({method:s,ruri:r,body:o},a,t=null){if(this._algorithm=a.algorithm,this._realm=a.realm,this._nonce=a.nonce,this._opaque=a.opaque,this._stale=a.stale,this._algorithm){if(this._algorithm!=="MD5")return Yt.warn('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return Yt.warn("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return Yt.warn("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return Yt.warn("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return Yt.warn('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(a.qop)if(a.qop.indexOf("auth-int")>-1)this._qop="auth-int";else if(a.qop.indexOf("auth")>-1)this._qop="auth";else return Yt.warn('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;else this._qop=null;this._method=s,this._uri=r,this._cnonce=t||gs.createRandomToken(12),this._nc+=1;const n=Number(this._nc).toString(16);this._ncHex="00000000".substr(0,8-n.length)+n,this._nc===4294967296&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=gs.calculateMD5(`${this._credentials.username}:${this._realm}:${this._credentials.password}`):this._ha1=this._credentials.ha1;let p,d;return this._qop==="auth"?(p=`${this._method}:${this._uri}`,d=gs.calculateMD5(p),Yt.debug('authenticate() | using qop=auth [a2:"%s"]',p),this._response=gs.calculateMD5(`${this._ha1}:${this._nonce}:${this._ncHex}:${this._cnonce}:auth:${d}`)):this._qop==="auth-int"?(p=`${this._method}:${this._uri}:${gs.calculateMD5(o||"")}`,d=gs.calculateMD5(p),Yt.debug('authenticate() | using qop=auth-int [a2:"%s"]',p),this._response=gs.calculateMD5(`${this._ha1}:${this._nonce}:${this._ncHex}:${this._cnonce}:auth-int:${d}`)):this._qop===null&&(p=`${this._method}:${this._uri}`,d=gs.calculateMD5(p),Yt.debug('authenticate() | using qop=null [a2:"%s"]',p),this._response=gs.calculateMD5(`${this._ha1}:${this._nonce}:${d}`)),Yt.debug("authenticate() | response generated"),!0}toString(){const s=[];if(!this._response)throw new Error("response field does not exist, cannot generate Authorization header");return s.push(`algorithm=${this._algorithm}`),s.push(`username="${this._credentials.username}"`),s.push(`realm="${this._realm}"`),s.push(`nonce="${this._nonce}"`),s.push(`uri="${this._uri}"`),s.push(`response="${this._response}"`),this._opaque&&s.push(`opaque="${this._opaque}"`),this._qop&&(s.push(`qop=${this._qop}`),s.push(`cnonce="${this._cnonce}"`),s.push(`nc=${this._ncHex}`)),`Digest ${s.join(", ")}`}};const ag=ut(Id),Ts=500,ug=4e3,mf=5e3;var zu={T1:Ts,T2:ug,T4:mf,TIMER_B:64*Ts,TIMER_D:0*Ts,TIMER_F:64*Ts,TIMER_H:64*Ts,TIMER_I:0*Ts,TIMER_J:0*Ts,TIMER_K:0*mf,TIMER_L:64*Ts,TIMER_M:64*Ts,PROVISIONAL_RESPONSE_INTERVAL:6e4};const Li=ut(zu),pl=dt.EventEmitter,ml=ct,zi=Pe,gf=kt,as=zu,Tf=new ml("NonInviteClientTransaction"),Xl=new ml("InviteClientTransaction"),cg=new ml("AckClientTransaction"),vf=new ml("NonInviteServerTransaction"),Ql=new ml("InviteServerTransaction"),he={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"};class fg extends pl{constructor(s,r,o,a){super(),this.type=he.NON_INVITE_CLIENT,this.id=`z9hG4bK${Math.floor(Math.random()*1e7)}`,this.ua=s,this.transport=r,this.request=o,this.eventHandlers=a;let t=`SIP/2.0/${r.via_transport}`;t+=` ${s.configuration.via_host};branch=${this.id}`,this.request.setHeader("via",t),this.ua.newTransaction(this)}get C(){return he}stateChanged(s){this.state=s,this.emit("stateChanged")}send(){this.stateChanged(he.STATUS_TRYING),this.F=setTimeout(()=>{this.timer_F()},as.TIMER_F),this.transport.send(this.request)||this.onTransportError()}onTransportError(){Tf.debug(`transport error occurred, deleting transaction ${this.id}`),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}timer_F(){Tf.debug(`Timer F expired for transaction ${this.id}`),this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}timer_K(){this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this)}receiveResponse(s){const r=s.status_code;if(r<200)switch(this.state){case he.STATUS_TRYING:case he.STATUS_PROCEEDING:this.stateChanged(he.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(s);break}else switch(this.state){case he.STATUS_TRYING:case he.STATUS_PROCEEDING:this.stateChanged(he.STATUS_COMPLETED),clearTimeout(this.F),r===408?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(s),this.K=setTimeout(()=>{this.timer_K()},as.TIMER_K);break;case he.STATUS_COMPLETED:break}}}class dg extends pl{constructor(s,r,o,a){super(),this.type=he.INVITE_CLIENT,this.id=`z9hG4bK${Math.floor(Math.random()*1e7)}`,this.ua=s,this.transport=r,this.request=o,this.eventHandlers=a,o.transaction=this;let t=`SIP/2.0/${r.via_transport}`;t+=` ${s.configuration.via_host};branch=${this.id}`,this.request.setHeader("via",t),this.ua.newTransaction(this)}get C(){return he}stateChanged(s){this.state=s,this.emit("stateChanged")}send(){this.stateChanged(he.STATUS_CALLING),this.B=setTimeout(()=>{this.timer_B()},as.TIMER_B),this.transport.send(this.request)||this.onTransportError()}onTransportError(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==he.STATUS_ACCEPTED&&(Xl.debug(`transport error occurred, deleting transaction ${this.id}`),this.eventHandlers.onTransportError()),this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this)}timer_M(){Xl.debug(`Timer M expired for transaction ${this.id}`),this.state===he.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this))}timer_B(){Xl.debug(`Timer B expired for transaction ${this.id}`),this.state===he.STATUS_CALLING&&(this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}timer_D(){Xl.debug(`Timer D expired for transaction ${this.id}`),clearTimeout(this.B),this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this)}sendACK(s){const r=new gf.OutgoingRequest(zi.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});r.setHeader("from",this.request.getHeader("from")),r.setHeader("via",this.request.getHeader("via")),r.setHeader("to",s.getHeader("to")),this.D=setTimeout(()=>{this.timer_D()},as.TIMER_D),this.transport.send(r)}cancel(s){if(this.state!==he.STATUS_PROCEEDING)return;const r=new gf.OutgoingRequest(zi.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});r.setHeader("from",this.request.getHeader("from")),r.setHeader("via",this.request.getHeader("via")),r.setHeader("to",this.request.getHeader("to")),s&&r.setHeader("reason",s),this.transport.send(r)}receiveResponse(s){const r=s.status_code;if(r>=100&&r<=199)switch(this.state){case he.STATUS_CALLING:this.stateChanged(he.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(s);break;case he.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(s);break}else if(r>=200&&r<=299)switch(this.state){case he.STATUS_CALLING:case he.STATUS_PROCEEDING:this.stateChanged(he.STATUS_ACCEPTED),this.M=setTimeout(()=>{this.timer_M()},as.TIMER_M),this.eventHandlers.onReceiveResponse(s);break;case he.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(s);break}else if(r>=300&&r<=699)switch(this.state){case he.STATUS_CALLING:case he.STATUS_PROCEEDING:this.stateChanged(he.STATUS_COMPLETED),this.sendACK(s),this.eventHandlers.onReceiveResponse(s);break;case he.STATUS_COMPLETED:this.sendACK(s);break}}}class hg extends pl{constructor(s,r,o,a){super(),this.id=`z9hG4bK${Math.floor(Math.random()*1e7)}`,this.transport=r,this.request=o,this.eventHandlers=a;let t=`SIP/2.0/${r.via_transport}`;t+=` ${s.configuration.via_host};branch=${this.id}`,this.request.setHeader("via",t)}get C(){return he}send(){this.transport.send(this.request)||this.onTransportError()}onTransportError(){cg.debug(`transport error occurred for transaction ${this.id}`),this.eventHandlers.onTransportError()}}class _g extends pl{constructor(s,r,o){super(),this.type=he.NON_INVITE_SERVER,this.id=o.via_branch,this.ua=s,this.transport=r,this.request=o,this.last_response="",o.server_transaction=this,this.state=he.STATUS_TRYING,s.newTransaction(this)}get C(){return he}stateChanged(s){this.state=s,this.emit("stateChanged")}timer_J(){vf.debug(`Timer J expired for transaction ${this.id}`),this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this)}onTransportError(){this.transportError||(this.transportError=!0,vf.debug(`transport error occurred, deleting transaction ${this.id}`),clearTimeout(this.J),this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this))}receiveResponse(s,r,o,a){if(s===100)switch(this.state){case he.STATUS_TRYING:this.stateChanged(he.STATUS_PROCEEDING),this.transport.send(r)||this.onTransportError();break;case he.STATUS_PROCEEDING:this.last_response=r,this.transport.send(r)?o&&o():(this.onTransportError(),a&&a());break}else if(s>=200&&s<=699)switch(this.state){case he.STATUS_TRYING:case he.STATUS_PROCEEDING:this.stateChanged(he.STATUS_COMPLETED),this.last_response=r,this.J=setTimeout(()=>{this.timer_J()},as.TIMER_J),this.transport.send(r)?o&&o():(this.onTransportError(),a&&a());break;case he.STATUS_COMPLETED:break}}}class pg extends pl{constructor(s,r,o){super(),this.type=he.INVITE_SERVER,this.id=o.via_branch,this.ua=s,this.transport=r,this.request=o,this.last_response="",o.server_transaction=this,this.state=he.STATUS_PROCEEDING,s.newTransaction(this),this.resendProvisionalTimer=null,o.reply(100)}get C(){return he}stateChanged(s){this.state=s,this.emit("stateChanged")}timer_H(){Ql.debug(`Timer H expired for transaction ${this.id}`),this.state===he.STATUS_COMPLETED&&Ql.debug("ACK not received, dialog will be terminated"),this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this)}timer_I(){this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this)}timer_L(){Ql.debug(`Timer L expired for transaction ${this.id}`),this.state===he.STATUS_ACCEPTED&&(this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this))}onTransportError(){this.transportError||(this.transportError=!0,Ql.debug(`transport error occurred, deleting transaction ${this.id}`),this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(he.STATUS_TERMINATED),this.ua.destroyTransaction(this))}resend_provisional(){this.transport.send(this.last_response)||this.onTransportError()}receiveResponse(s,r,o,a){if(s>=100&&s<=199)switch(this.state){case he.STATUS_PROCEEDING:this.transport.send(r)||this.onTransportError(),this.last_response=r;break}if(s>100&&s<=199&&this.state===he.STATUS_PROCEEDING)this.resendProvisionalTimer===null&&(this.resendProvisionalTimer=setInterval(()=>{this.resend_provisional()},as.PROVISIONAL_RESPONSE_INTERVAL));else if(s>=200&&s<=299)switch(this.state){case he.STATUS_PROCEEDING:this.stateChanged(he.STATUS_ACCEPTED),this.last_response=r,this.L=setTimeout(()=>{this.timer_L()},as.TIMER_L),this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case he.STATUS_ACCEPTED:this.transport.send(r)?o&&o():(this.onTransportError(),a&&a());break}else if(s>=300&&s<=699)switch(this.state){case he.STATUS_PROCEEDING:this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(r)?(this.stateChanged(he.STATUS_COMPLETED),this.H=setTimeout(()=>{this.timer_H()},as.TIMER_H),o&&o()):(this.onTransportError(),a&&a());break}}}function mg({_transactions:c},s){let r;switch(s.method){case zi.INVITE:if(r=c.ist[s.via_branch],r){switch(r.state){case he.STATUS_PROCEEDING:r.transport.send(r.last_response);break;case he.STATUS_ACCEPTED:break}return!0}break;case zi.ACK:if(r=c.ist[s.via_branch],r){if(r.state===he.STATUS_ACCEPTED)return!1;if(r.state===he.STATUS_COMPLETED)return r.state=he.STATUS_CONFIRMED,r.I=setTimeout(()=>{r.timer_I()},as.TIMER_I),!0}else return!1;break;case zi.CANCEL:return r=c.ist[s.via_branch],r?(s.reply_sl(200),r.state!==he.STATUS_PROCEEDING):(s.reply_sl(481),!0);default:if(r=c.nist[s.via_branch],r){switch(r.state){case he.STATUS_TRYING:break;case he.STATUS_PROCEEDING:case he.STATUS_COMPLETED:r.transport.send(r.last_response);break}return!0}break}}var gr={C:he,NonInviteClientTransaction:fg,InviteClientTransaction:dg,AckClientTransaction:hg,NonInviteServerTransaction:_g,InviteServerTransaction:pg,checkTransaction:mg};const Gt=ut(gr),gg=ct,Ef=Pe,Tg=Id,$a=gr,vg=new gg("RequestSender"),Ha={onRequestTimeout:()=>{},onTransportError:()=>{},onReceiveResponse:()=>{},onAuthenticated:()=>{}};var Tr=class{constructor(s,r,o){this._ua=s,this._eventHandlers=o,this._method=r.method,this._request=r,this._auth=null,this._challenged=!1,this._staled=!1;for(const a in Ha)Object.prototype.hasOwnProperty.call(Ha,a)&&(this._eventHandlers[a]||(this._eventHandlers[a]=Ha[a]));s.status===s.C.STATUS_USER_CLOSED&&(this._method!==Ef.BYE||this._method!==Ef.ACK)&&this._eventHandlers.onTransportError()}send(){const s={onRequestTimeout:()=>{this._eventHandlers.onRequestTimeout()},onTransportError:()=>{this._eventHandlers.onTransportError()},onReceiveResponse:r=>{this._receiveResponse(r)}};switch(this._method){case"INVITE":this.clientTransaction=new $a.InviteClientTransaction(this._ua,this._ua.transport,this._request,s);break;case"ACK":this.clientTransaction=new $a.AckClientTransaction(this._ua,this._ua.transport,this._request,s);break;default:this.clientTransaction=new $a.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,s)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}_receiveResponse(s){let r,o;const a=s.status_code;if((a===401||a===407)&&(this._ua.configuration.password!==null||this._ua.configuration.ha1!==null)){if(s.status_code===401?(r=s.parseHeader("www-authenticate"),o="authorization"):(r=s.parseHeader("proxy-authenticate"),o="proxy-authorization"),!r){vg.debug(`${s.status_code} with wrong or missing challenge, cannot authenticate`),this._eventHandlers.onReceiveResponse(s);return}if(!this._challenged||!this._staled&&r.stale===!0){if(this._auth||(this._auth=new Tg({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),!this._auth.authenticate(this._request,r)){this._eventHandlers.onReceiveResponse(s);return}this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),r.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq",`${this._request.cseq} ${this._method}`),this._request.setHeader(o,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()}else this._eventHandlers.onReceiveResponse(s)}else this._eventHandlers.onReceiveResponse(s)}};const bd=ut(Tr),Eg=ct,Fa=yt(),Tn=Pe,Sf=kt,yf=Tr,$i=new Eg("Registrator"),Zl=10;var Sg=class{constructor(s,r){this._reg_id=1,this._ua=s,this._transport=r,this._registrar=s.configuration.registrar_server,this._expires=s.configuration.register_expires,this._call_id=Fa.createRandomToken(22),this._cseq=0,this._to_uri=s.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=";+sip.ice",this._extraHeaders=[],this._extraContactParams="",this._sipInstance=`"<urn:uuid:${this._ua.configuration.instance_id}>"`,this._contact+=`;reg-id=${this._reg_id}`,this._contact+=`;+sip.instance=${this._sipInstance}`}get registered(){return this._registered}setExtraHeaders(s){Array.isArray(s)||(s=[]),this._extraHeaders=s.slice()}setExtraContactParams(s){s instanceof Object||(s={}),this._extraContactParams="";for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)){const o=s[r];this._extraContactParams+=`;${r}`,o&&(this._extraContactParams+=`=${o}`)}}register(){if(this._registering){$i.debug("Register request in progress...");return}const s=this._extraHeaders.slice();s.push(`Contact: ${this._contact};expires=${this._expires}${this._extraContactParams}`),s.push(`Expires: ${this._expires}`);const r=new Sf.OutgoingRequest(Tn.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},s),o=new yf(this._ua,r,{onRequestTimeout:()=>{this._registrationFailure(null,Tn.causes.REQUEST_TIMEOUT)},onTransportError:()=>{this._registrationFailure(null,Tn.causes.CONNECTION_ERROR)},onAuthenticated:()=>{this._cseq+=1},onReceiveResponse:a=>{if(a.cseq===this._cseq)switch(this._registrationTimer!==null&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(a.status_code):break;case/^2[0-9]{2}$/.test(a.status_code):{if(this._registering=!1,!a.hasHeader("Contact")){$i.debug("no Contact header in response to REGISTER, response ignored");break}const t=a.headers.Contact.reduce((h,g)=>h.concat(g.parsed),[]);let n=t.find(h=>this._sipInstance===h.getParam("+sip.instance")&&this._reg_id===parseInt(h.getParam("reg-id")));if(n||(n=t.find(h=>h.uri.user===this._ua.contact.uri.user)),!n){$i.debug("no Contact header pointing to us, response ignored");break}let p=n.getParam("expires");!p&&a.hasHeader("expires")&&(p=a.getHeader("expires")),p||(p=this._expires),p=Number(p),p<Zl&&(p=Zl);const d=p>64?p*1e3/2+Math.floor((p/2-32)*1e3*Math.random()):p*1e3-5e3;this._registrationTimer=setTimeout(()=>{this._registrationTimer=null,this._ua.listeners("registrationExpiring").length===0?this.register():this._ua.emit("registrationExpiring")},d),n.hasParam("temp-gruu")&&(this._ua.contact.temp_gruu=n.getParam("temp-gruu").replace(/"/g,"")),n.hasParam("pub-gruu")&&(this._ua.contact.pub_gruu=n.getParam("pub-gruu").replace(/"/g,"")),this._registered||(this._registered=!0,this._ua.registered({response:a}));break}case/^423$/.test(a.status_code):{a.hasHeader("min-expires")?(this._expires=Number(a.getHeader("min-expires")),this._expires<Zl&&(this._expires=Zl),this.register()):($i.debug("423 response received for REGISTER without Min-Expires"),this._registrationFailure(a,Tn.causes.SIP_FAILURE_CODE));break}default:{const t=Fa.sipErrorCause(a.status_code);this._registrationFailure(a,t)}}}});this._registering=!0,o.send()}unregister(s={}){if(!this._registered){$i.debug("already unregistered");return}this._registered=!1,this._registrationTimer!==null&&(clearTimeout(this._registrationTimer),this._registrationTimer=null);const r=this._extraHeaders.slice();s.all?r.push(`Contact: *${this._extraContactParams}`):r.push(`Contact: ${this._contact};expires=0${this._extraContactParams}`),r.push("Expires: 0");const o=new Sf.OutgoingRequest(Tn.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},r);new yf(this._ua,o,{onRequestTimeout:()=>{this._unregistered(null,Tn.causes.REQUEST_TIMEOUT)},onTransportError:()=>{this._unregistered(null,Tn.causes.CONNECTION_ERROR)},onAuthenticated:()=>{this._cseq+=1},onReceiveResponse:t=>{switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):this._unregistered(t);break;default:{const n=Fa.sipErrorCause(t.status_code);this._unregistered(t,n)}}}}).send()}close(){this._registered&&this.unregister()}onTransportClosed(){this._registering=!1,this._registrationTimer!==null&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}_registrationFailure(s,r){this._registering=!1,this._ua.registrationFailed({response:s||null,cause:r}),this._registered&&(this._registered=!1,this._ua.unregistered({response:s||null,cause:r}))}_unregistered(s,r){this._registering=!1,this._registered=!1,this._ua.unregistered({response:s||null,cause:r||null})}};class yg extends Error{constructor(s,r){super(),this.code=1,this.name="CONFIGURATION_ERROR",this.parameter=s,this.value=r,this.message=this.value?`Invalid value ${JSON.stringify(this.value)} for parameter "${this.parameter}"`:`Missing parameter: ${this.parameter}`}}class Ag extends Error{constructor(s){super(),this.code=2,this.name="INVALID_STATE_ERROR",this.status=s,this.message=`Invalid status: ${s}`}}class Cg extends Error{constructor(s){super(),this.code=3,this.name="NOT_SUPPORTED_ERROR",this.message=s}}class Rg extends Error{constructor(s){super(),this.code=4,this.name="NOT_READY_ERROR",this.message=s}}var Rs={ConfigurationError:yg,InvalidStateError:Ag,NotSupportedError:Cg,NotReadyError:Rg};const yn=ut(Rs),ja=Pe,eo=gr,Ig=Tr,Va={onRequestTimeout:()=>{},onTransportError:()=>{},onSuccessResponse:()=>{},onErrorResponse:()=>{},onAuthenticated:()=>{},onDialogError:()=>{}};var wd=class{constructor(s,r,o){this._dialog=s,this._ua=s._ua,this._request=r,this._eventHandlers=o,this._reattempt=!1,this._reattemptTimer=null;for(const a in Va)Object.prototype.hasOwnProperty.call(Va,a)&&(this._eventHandlers[a]||(this._eventHandlers[a]=Va[a]))}get request(){return this._request}send(){const s=new Ig(this._ua,this._request,{onRequestTimeout:()=>{this._eventHandlers.onRequestTimeout()},onTransportError:()=>{this._eventHandlers.onTransportError()},onAuthenticated:r=>{this._eventHandlers.onAuthenticated(r)},onReceiveResponse:r=>{this._receiveResponse(r)}});if(s.send(),(this._request.method===ja.INVITE||this._request.method===ja.UPDATE&&this._request.body)&&s.clientTransaction.state!==eo.C.STATUS_TERMINATED){console.log("this._request.body",this._request.body),this._dialog.uac_pending_reply=!0;const r=()=>{(s.clientTransaction.state===eo.C.STATUS_ACCEPTED||s.clientTransaction.state===eo.C.STATUS_COMPLETED||s.clientTransaction.state===eo.C.STATUS_TERMINATED)&&(s.clientTransaction.removeListener("stateChanged",r),this._dialog.uac_pending_reply=!1)};s.clientTransaction.on("stateChanged",r)}}_receiveResponse(s){s.status_code===408||s.status_code===481?this._eventHandlers.onDialogError(s):s.method===ja.INVITE&&s.status_code===491?this._reattempt?s.status_code>=200&&s.status_code<300?this._eventHandlers.onSuccessResponse(s):s.status_code>=300&&this._eventHandlers.onErrorResponse(s):(this._request.cseq=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout(()=>{this._dialog.isTerminated()||(this._reattempt=!0,this.send())},1e3)):s.status_code>=200&&s.status_code<300?this._eventHandlers.onSuccessResponse(s):s.status_code>=300&&this._eventHandlers.onErrorResponse(s)}};const bg=ut(wd),wg=ct,Af=kt,Fs=Pe,Hi=gr,Og=wd,qa=yt(),Ba=new wg("Dialog"),js={STATUS_EARLY:1,STATUS_CONFIRMED:2,STATUS_TERMINATED:3};var Od=class{static get C(){return js}constructor(s,r,o,a=js.STATUS_CONFIRMED){if(this._owner=s,this._ua=s._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!r.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};r instanceof Af.IncomingResponse&&(a=r.status_code<200?js.STATUS_EARLY:js.STATUS_CONFIRMED);const t=r.parseHeader("contact");o==="UAS"?(this._id={call_id:r.call_id,local_tag:r.to_tag,remote_tag:r.from_tag,toString(){return this.call_id+this.local_tag+this.remote_tag}},this._state=a,this._remote_seqnum=r.cseq,this._local_uri=r.parseHeader("to").uri,this._remote_uri=r.parseHeader("from").uri,this._remote_target=t.uri,this._route_set=r.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):o==="UAC"&&(this._id={call_id:r.call_id,local_tag:r.from_tag,remote_tag:r.to_tag,toString(){return this.call_id+this.local_tag+this.remote_tag}},this._state=a,this._local_seqnum=r.cseq,this._local_uri=r.parseHeader("from").uri,this._remote_uri=r.parseHeader("to").uri,this._remote_target=t.uri,this._route_set=r.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),Ba.debug(`new ${o} dialog created with status ${this._state===js.STATUS_EARLY?"EARLY":"CONFIRMED"}`)}get id(){return this._id}get local_seqnum(){return this._local_seqnum}set local_seqnum(s){this._local_seqnum=s}get owner(){return this._owner}get uac_pending_reply(){return this._uac_pending_reply}set uac_pending_reply(s){this._uac_pending_reply=s}get uas_pending_reply(){return this._uas_pending_reply}isTerminated(){return this._status===js.STATUS_TERMINATED}update(s,r){this._state=js.STATUS_CONFIRMED,Ba.debug(`dialog ${this._id.toString()}  changed to CONFIRMED state`),r==="UAC"&&(this._route_set=s.getHeaders("record-route").reverse())}terminate(){Ba.debug(`dialog ${this._id.toString()} deleted`),this._ua.destroyDialog(this),this._state=js.STATUS_TERMINATED}sendRequest(s,r={}){const o=qa.cloneArray(r.extraHeaders),a=qa.cloneObject(r.eventHandlers),t=r.body||null,n=this._createRequest(s,o,t);return a.onAuthenticated=()=>{this._local_seqnum+=1},new Og(this,n,a).send(),n}receiveRequest(s){this._checkInDialogRequest(s)&&(s.method===Fs.ACK&&this._ack_seqnum!==null?this._ack_seqnum=null:s.method===Fs.INVITE&&(this._ack_seqnum=s.cseq),this._owner.receiveRequest(s))}_createRequest(s,r,o){r=qa.cloneArray(r),this._local_seqnum||(this._local_seqnum=Math.floor(Math.random()*1e4));const a=s===Fs.CANCEL||s===Fs.ACK?this._local_seqnum:this._local_seqnum+=1;return new Af.OutgoingRequest(s,this._remote_target,this._ua,{cseq:a,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},r,o)}_checkInDialogRequest(s){if(!this._remote_seqnum)this._remote_seqnum=s.cseq;else if(s.cseq<this._remote_seqnum)if(s.method===Fs.ACK){if(this._ack_seqnum===null||s.cseq!==this._ack_seqnum)return!1}else return s.reply(500),!1;else s.cseq>this._remote_seqnum&&(this._remote_seqnum=s.cseq);if(s.method===Fs.INVITE||s.method===Fs.UPDATE&&s.body){if(this._uac_pending_reply===!0)s.reply(491);else if(this._uas_pending_reply===!0){const r=(Math.random()*10|0)+1;return s.reply(500,null,[`Retry-After:${r}`]),!1}else{this._uas_pending_reply=!0;const r=()=>{(s.server_transaction.state===Hi.C.STATUS_ACCEPTED||s.server_transaction.state===Hi.C.STATUS_COMPLETED||s.server_transaction.state===Hi.C.STATUS_TERMINATED)&&(s.server_transaction.removeListener("stateChanged",r),this._uas_pending_reply=!1)};s.server_transaction.on("stateChanged",r)}s.hasHeader("contact")&&s.server_transaction.on("stateChanged",()=>{s.server_transaction.state===Hi.C.STATUS_ACCEPTED&&(this._remote_target=s.parseHeader("contact").uri)})}else s.method===Fs.NOTIFY&&s.hasHeader("contact")&&s.server_transaction.on("stateChanged",()=>{s.server_transaction.state===Hi.C.STATUS_COMPLETED&&(this._remote_target=s.parseHeader("contact").uri)});return!0}};const to=ut(Od);var Ju={exports:{}};const Dg=dt.EventEmitter,Ng=ct,Ug=Pe,Pg=Rs,Cf=yt(),xg=new Ng("RTCSession:DTMF"),Dd={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};Ju.exports=class extends Dg{constructor(s){super(),this._session=s,this._direction=null,this._tone=null,this._duration=null,this._request=null}get tone(){return this._tone}get duration(){return this._duration}send(s,r={}){if(s===void 0)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new Pg.InvalidStateError(this._session.status);const o=Cf.cloneArray(r.extraHeaders);if(this.eventHandlers=Cf.cloneObject(r.eventHandlers),typeof s=="string")s=s.toUpperCase();else if(typeof s=="number")s=s.toString();else throw new TypeError(`Invalid tone: ${s}`);if(s.match(/^[0-9A-DR#*]$/))this._tone=s;else throw new TypeError(`Invalid tone: ${s}`);this._duration=r.duration,o.push("Content-Type: application/dtmf-relay");let a=`Signal=${this._tone}\r
`;a+=`Duration=${this._duration}`,this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(Ug.INFO,{extraHeaders:o,eventHandlers:{onSuccessResponse:t=>{this.emit("succeeded",{originator:"remote",response:t})},onErrorResponse:t=>{this.eventHandlers.onFailed&&this.eventHandlers.onFailed(),this.emit("failed",{originator:"remote",response:t})},onRequestTimeout:()=>{this._session.onRequestTimeout()},onTransportError:()=>{this._session.onTransportError()},onDialogError:()=>{this._session.onDialogError()}},body:a})}init_incoming(s){const r=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,o=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;if(this._direction="incoming",this._request=s,s.reply(200),s.body){const a=s.body.split(`
`);a.length>=1&&r.test(a[0])&&(this._tone=a[0].replace(r,"$2")),a.length>=2&&o.test(a[1])&&(this._duration=parseInt(a[1].replace(o,"$2"),10))}this._duration||(this._duration=Dd.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:s}):xg.debug("invalid INFO DTMF received, discarded")}};Ju.exports.C=Dd;var Nd=Ju.exports;const Mg=ut(Nd),kg=dt.EventEmitter,Lg=Pe,$g=Rs,Hg=yt();var Ud=class extends kg{constructor(s){super(),this._session=s,this._direction=null,this._contentType=null,this._body=null}get contentType(){return this._contentType}get body(){return this._body}send(s,r,o={}){if(this._direction="outgoing",s===void 0)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new $g.InvalidStateError(this._session.status);this._contentType=s,this._body=r;const a=Hg.cloneArray(o.extraHeaders);a.push(`Content-Type: ${s}`),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(Lg.INFO,{extraHeaders:a,eventHandlers:{onSuccessResponse:t=>{this.emit("succeeded",{originator:"remote",response:t})},onErrorResponse:t=>{this.emit("failed",{originator:"remote",response:t})},onTransportError:()=>{this._session.onTransportError()},onRequestTimeout:()=>{this._session.onRequestTimeout()},onDialogError:()=>{this._session.onDialogError()}},body:r})}init_incoming(s){this._direction="incoming",this.request=s,s.reply(200),this._contentType=s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0,this._body=s.body,this._session.newInfo({originator:"remote",info:this,request:s})}};const Ou=ut(Ud),Fg=ct,Rf=Pe,jg=new Fg("RTCSession:ReferNotifier"),Ga={event_type:"refer",body_type:"message/sipfrag;version=2.0",expires:300};var Pd=class{constructor(s,r,o){this._session=s,this._id=r,this._expires=o||Ga.expires,this._active=!0,this.notify(100)}notify(s,r){if(jg.debug("notify()"),this._active===!1)return;r=r||Rf.REASON_PHRASE[s]||"";let o;s>=200?o="terminated;reason=noresource":o=`active;expires=${this._expires}`,this._session.sendRequest(Rf.NOTIFY,{extraHeaders:[`Event: ${Ga.event_type};id=${this._id}`,`Subscription-State: ${o}`,`Content-Type: ${Ga.body_type}`],body:`SIP/2.0 ${s} ${r}`,eventHandlers:{onErrorResponse(){this._active=!1}}})}};const Vg=ut(Pd),qg=dt.EventEmitter,Bg=ct,Fi=Pe,Gg=cs(),If=yt(),vn=new Bg("RTCSession:ReferSubscriber");var xd=class extends qg{constructor(s){super(),this._id=null,this._session=s}get id(){return this._id}sendRefer(s,r={}){vn.debug("sendRefer()");const o=If.cloneArray(r.extraHeaders),a=If.cloneObject(r.eventHandlers);for(const d in a)Object.prototype.hasOwnProperty.call(a,d)&&this.on(d,a[d]);let t=null;r.replaces&&(t=r.replaces._request.call_id,t+=`;to-tag=${r.replaces._to_tag}`,t+=`;from-tag=${r.replaces._from_tag}`,t=encodeURIComponent(t));const n=`Refer-To: <${s}${t?`?Replaces=${t}`:""}>`;if(o.push(n),!o.some(d=>d.toLowerCase().startsWith("referred-by:"))){const d=`Referred-By: <${this._session._ua._configuration.uri._scheme}:${this._session._ua._configuration.uri._user}@${this._session._ua._configuration.uri._host}>`;o.push(d)}o.push(`Contact: ${this._session.contact}`);const p=this._session.sendRequest(Fi.REFER,{extraHeaders:o,eventHandlers:{onSuccessResponse:d=>{this._requestSucceeded(d)},onErrorResponse:d=>{this._requestFailed(d,Fi.causes.REJECTED)},onTransportError:()=>{this._requestFailed(null,Fi.causes.CONNECTION_ERROR)},onRequestTimeout:()=>{this._requestFailed(null,Fi.causes.REQUEST_TIMEOUT)},onDialogError:()=>{this._requestFailed(null,Fi.causes.DIALOG_ERROR)}}});this._id=p.cseq}receiveNotify(s){if(vn.debug("receiveNotify()"),!s.body)return;const r=Gg.parse(s.body.trim().split(`\r
`,1)[0],"Status_Line");if(r===-1){vn.debug(`receiveNotify() | error parsing NOTIFY body: "${s.body}"`);return}switch(!0){case/^100$/.test(r.status_code):this.emit("trying",{request:s,status_line:r});break;case/^1[0-9]{2}$/.test(r.status_code):this.emit("progress",{request:s,status_line:r});break;case/^2[0-9]{2}$/.test(r.status_code):this.emit("accepted",{request:s,status_line:r});break;default:this.emit("failed",{request:s,status_line:r});break}}_requestSucceeded(s){vn.debug("REFER succeeded"),vn.debug('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:s})}_requestFailed(s,r){vn.debug("REFER failed"),vn.debug('emit "requestFailed"'),this.emit("requestFailed",{response:s||null,cause:r})}};const Wg=ut(xd),Kg=dt.EventEmitter,bf=Pt,Yg=ct,fe=Pe,En=Rs,wf=gr,Ge=yt(),ji=zu,zg=kt,so=Od,Jg=Tr,Mt=Nd,Of=Ud,Xg=Pd,Qg=xd,Df=Cs(),Y=new Yg("RTCSession"),Q={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},no=["audio","video"];var Md=class Du extends Kg{static get C(){return Q}constructor(s){Y.debug("new"),super(),this._id=null,this._ua=s,this._status=Q.STATUS_NULL,this._dialog=null,this._earlyDialogs={},this._contact=null,this._from_tag=null,this._to_tag=null,this._connection=null,this._connectionPromiseQueue=Promise.resolve(),this._request=null,this._is_canceled=!1,this._cancel_reason="",this._is_confirmed=!1,this._late_sdp=!1,this._rtcOfferConstraints=null,this._rtcAnswerConstraints=null,this._localMediaStream=null,this._localMediaStreamLocallyGenerated=!1,this._rtcReady=!0,this._iceReady=!1,this._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},this._direction=null,this._local_identity=null,this._remote_identity=null,this._start_time=null,this._end_time=null,this._tones=null,this._audioMuted=!1,this._videoMuted=!1,this._localHold=!1,this._remoteHold=!1,this._sessionTimers={enabled:this._ua.configuration.session_timers,refreshMethod:this._ua.configuration.session_timers_refresh_method,defaultExpires:fe.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},this._referSubscribers={},this._data={}}get C(){return Q}get causes(){return fe.causes}get id(){return this._id}get connection(){return this._connection}get contact(){return this._contact}get direction(){return this._direction}get local_identity(){return this._local_identity}get remote_identity(){return this._remote_identity}get start_time(){return this._start_time}get end_time(){return this._end_time}get data(){return this._data}set data(s){this._data=s}get status(){return this._status}isInProgress(){switch(this._status){case Q.STATUS_NULL:case Q.STATUS_INVITE_SENT:case Q.STATUS_1XX_RECEIVED:case Q.STATUS_INVITE_RECEIVED:case Q.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}isEstablished(){switch(this._status){case Q.STATUS_ANSWERED:case Q.STATUS_WAITING_FOR_ACK:case Q.STATUS_CONFIRMED:return!0;default:return!1}}isEnded(){switch(this._status){case Q.STATUS_CANCELED:case Q.STATUS_TERMINATED:return!0;default:return!1}}isMuted(){return{audio:this._audioMuted,video:this._videoMuted}}isOnHold(){return{local:this._localHold,remote:this._remoteHold}}connect(s,r={},o){console.log("rtcOfferConstraints connect"),Y.debug("connect()");const a=s,t=Ge.cloneObject(r.eventHandlers),n=Ge.cloneArray(r.extraHeaders),p=Ge.cloneObject(r.mediaConstraints,{audio:!0,video:!0}),d=r.mediaStream||null,h=Ge.cloneObject(r.pcConfig,{iceServers:[]}),g=r.rtcConstraints||null,T=r.rtcOfferConstraints||null;if(this._rtcOfferConstraints=T,this._rtcAnswerConstraints=r.rtcAnswerConstraints||null,this._data=r.data||this._data,s===void 0)throw new TypeError("Not enough arguments");if(this._status!==Q.STATUS_NULL)throw new En.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new En.NotSupportedError("WebRTC not supported");if(s=this._ua.normalizeTarget(s),!s)throw new TypeError(`Invalid target: ${a}`);this._sessionTimers.enabled&&Ge.isDecimal(r.sessionTimersExpires)&&(r.sessionTimersExpires>=fe.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=r.sessionTimersExpires:this._sessionTimers.defaultExpires=fe.SESSION_EXPIRES);for(const A in t)Object.prototype.hasOwnProperty.call(t,A)&&this.on(A,t[A]);this._from_tag=Ge.newTag();const E=r.anonymous||!1,S={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:E,outbound:!0}),E?(S.from_display_name="Anonymous",S.from_uri=new Df("sip","anonymous","anonymous.invalid"),n.push(`P-Preferred-Identity: ${this._ua.configuration.uri.toString()}`),n.push("Privacy: id")):r.fromUserName&&(S.from_uri=new Df("sip",r.fromUserName,this._ua.configuration.uri.host),n.push(`P-Preferred-Identity: ${this._ua.configuration.uri.toString()}`)),r.fromDisplayName&&(S.from_display_name=r.fromDisplayName),n.push(`Contact: ${this._contact}`),n.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&n.push(`Session-Expires: ${this._sessionTimers.defaultExpires}${this._ua.configuration.session_timers_force_refresher?";refresher=uac":""}`),this._request=new zg.InitialOutgoingInviteRequest(s,this._ua,S,n),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(h,g),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,o&&o(this),this._newRTCSession("local",this._request),this._sendInitialRequest(p,T,d)}init_incoming(s,r){Y.debug("init_incoming()");let o;const a=s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0;if(s.body&&a!=="application/sdp"){s.reply(415);return}if(this._status=Q.STATUS_INVITE_RECEIVED,this._from_tag=s.from_tag,this._id=s.call_id+this._from_tag,this._request=s,this._contact=this._ua.contact.toString(),s.hasHeader("expires")&&(o=s.getHeader("expires")*1e3),s.to_tag=Ge.newTag(),!this._createDialog(s,"UAS",!0)){s.reply(500,"Missing Contact header field");return}s.body?this._late_sdp=!1:this._late_sdp=!0,this._status=Q.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout(()=>{s.reply(408),this._failed("local",null,fe.causes.NO_ANSWER)},this._ua.configuration.no_answer_timeout),o&&(this._timers.expiresTimer=setTimeout(()=>{this._status===Q.STATUS_WAITING_FOR_ANSWER&&(s.reply(487),this._failed("system",null,fe.causes.EXPIRES))},o)),this._direction="incoming",this._local_identity=s.to,this._remote_identity=s.from,r&&r(this),this._newRTCSession("remote",s),this._status!==Q.STATUS_TERMINATED&&(s.reply(180,null,[`Contact: ${this._contact}`]),this._progress("local",null))}answer(s={}){Y.debug("answer()");const r=this._request,o=Ge.cloneArray(s.extraHeaders),a=Ge.cloneObject(s.mediaConstraints),t=s.mediaStream||null,n=Ge.cloneObject(s.pcConfig,{iceServers:[]}),p=s.rtcConstraints||null,d=s.rtcAnswerConstraints||null,h=Ge.cloneObject(s.rtcOfferConstraints);let g,T=!1,E=!1,S=!1,A=!1;if(this._rtcAnswerConstraints=d,this._rtcOfferConstraints=s.rtcOfferConstraints||null,this._data=s.data||this._data,this._direction!=="incoming")throw new En.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==Q.STATUS_WAITING_FOR_ANSWER)throw new En.InvalidStateError(this._status);if(this._sessionTimers.enabled&&Ge.isDecimal(s.sessionTimersExpires)&&(s.sessionTimersExpires>=fe.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=s.sessionTimersExpires:this._sessionTimers.defaultExpires=fe.SESSION_EXPIRES),this._status=Q.STATUS_ANSWERED,!this._createDialog(r,"UAS")){r.reply(500,"Error creating dialog");return}clearTimeout(this._timers.userNoAnswerTimer),o.unshift(`Contact: ${this._contact}`);const R=r.parseSDP();Array.isArray(R.media)||(R.media=[R.media]);for(const C of R.media)C.type==="audio"&&(T=!0,(!C.direction||C.direction==="sendrecv")&&(S=!0)),C.type==="video"&&(E=!0,(!C.direction||C.direction==="sendrecv")&&(A=!0));if(t&&a.audio===!1){g=t.getAudioTracks();for(const C of g)t.removeTrack(C)}if(t&&a.video===!1){g=t.getVideoTracks();for(const C of g)t.removeTrack(C)}!t&&a.audio===void 0&&(a.audio=S),!t&&a.video===void 0&&(a.video=A),!t&&!T&&!h.offerToReceiveAudio&&(a.audio=!1),!t&&!E&&!h.offerToReceiveVideo&&(a.video=!1),this._createRTCConnection(n,p),Promise.resolve().then(()=>{if(t)return t;if(a.audio||a.video)return this._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(a).catch(C=>{throw this._status===Q.STATUS_TERMINATED?new Error("terminated"):(r.reply(480),this._failed("local",null,fe.causes.USER_DENIED_MEDIA_ACCESS),Y.warn('emit "getusermediafailed" [error:%o]',C),this.emit("getusermediafailed",C),new Error("getUserMedia() failed"))})}).then(C=>{if(this._status===Q.STATUS_TERMINATED)throw new Error("terminated");this._localMediaStream=C,C&&C.getTracks().forEach($=>{this._connection.addTrack($,C)})}).then(()=>{if(this._late_sdp)return;const C={originator:"remote",type:"offer",sdp:r.body};Y.debug('emit "sdp"'),this.emit("sdp",C);const $=new RTCSessionDescription({type:"offer",sdp:C.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription($)).catch(L=>{throw r.reply(488),this._failed("system",null,fe.causes.WEBRTC_ERROR),Y.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',L),this.emit("peerconnection:setremotedescriptionfailed",L),new Error("peerconnection.setRemoteDescription() failed")}),this._connectionPromiseQueue}).then(()=>{if(this._status===Q.STATUS_TERMINATED)throw new Error("terminated");return this._connecting(r),this._late_sdp?this._createLocalDescription("offer",this._rtcOfferConstraints).catch(()=>{throw r.reply(500),new Error("_createLocalDescription() failed")}):this._createLocalDescription("answer",d).catch(()=>{throw r.reply(500),new Error("_createLocalDescription() failed")})}).then(C=>{if(this._status===Q.STATUS_TERMINATED)throw new Error("terminated");this._handleSessionTimersInIncomingRequest(r,o),r.reply(200,null,o,C,()=>{this._status=Q.STATUS_WAITING_FOR_ACK,this._setInvite2xxTimer(r,C),this._setACKTimer(),this._accepted("local")},()=>{this._failed("system",null,fe.causes.CONNECTION_ERROR)})}).catch(C=>{this._status!==Q.STATUS_TERMINATED&&Y.warn(C)})}terminate(s={}){Y.debug("terminate()");const r=s.cause||fe.causes.BYE,o=Ge.cloneArray(s.extraHeaders),a=s.body;let t,n=s.status_code,p=s.reason_phrase;if(this._status===Q.STATUS_TERMINATED)throw new En.InvalidStateError(this._status);switch(this._status){case Q.STATUS_NULL:case Q.STATUS_INVITE_SENT:case Q.STATUS_1XX_RECEIVED:if(Y.debug("canceling session"),n&&(n<200||n>=700))throw new TypeError(`Invalid status_code: ${n}`);n&&(p=p||fe.REASON_PHRASE[n]||"",t=`SIP ;cause=${n} ;text="${p}"`),this._status===Q.STATUS_NULL||this._status===Q.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=t):this._status===Q.STATUS_1XX_RECEIVED&&this._request.cancel(t),this._status=Q.STATUS_CANCELED,this._failed("local",null,fe.causes.CANCELED);break;case Q.STATUS_WAITING_FOR_ANSWER:case Q.STATUS_ANSWERED:if(Y.debug("rejecting session"),n=n||480,n<300||n>=700)throw new TypeError(`Invalid status_code: ${n}`);this._request.reply(n,p,o,a),this._failed("local",null,fe.causes.REJECTED);break;case Q.STATUS_WAITING_FOR_ACK:case Q.STATUS_CONFIRMED:if(Y.debug("terminating session"),p=s.reason_phrase||fe.REASON_PHRASE[n]||"",n&&(n<200||n>=700))throw new TypeError(`Invalid status_code: ${n}`);if(n&&o.push(`Reason: SIP ;cause=${n}; text="${p}"`),this._status===Q.STATUS_WAITING_FOR_ACK&&this._direction==="incoming"&&this._request.server_transaction.state!==wf.C.STATUS_TERMINATED){const d=this._dialog;this.receiveRequest=({method:h})=>{h===fe.ACK&&(this.sendRequest(fe.BYE,{extraHeaders:o,body:a}),d.terminate())},this._request.server_transaction.on("stateChanged",()=>{this._request.server_transaction.state===wf.C.STATUS_TERMINATED&&(this.sendRequest(fe.BYE,{extraHeaders:o,body:a}),d.terminate())}),this._ended("local",null,r),this._dialog=d,this._ua.newDialog(d)}else this.sendRequest(fe.BYE,{extraHeaders:o,body:a}),this._ended("local",null,r)}}sendDTMF(s,r={}){Y.debug("sendDTMF() | tones: %s",s);let o=0,a=r.duration||null,t=r.interToneGap||null;const n=r.transportType||fe.DTMF_TRANSPORT.INFO;if(s===void 0)throw new TypeError("Not enough arguments");if(this._status!==Q.STATUS_CONFIRMED&&this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_1XX_RECEIVED)throw new En.InvalidStateError(this._status);if(n!==fe.DTMF_TRANSPORT.INFO&&n!==fe.DTMF_TRANSPORT.RFC2833)throw new TypeError(`invalid transportType: ${n}`);if(typeof s=="number"&&(s=s.toString()),!s||typeof s!="string"||!s.match(/^[0-9A-DR#*,]+$/i))throw new TypeError(`Invalid tones: ${s}`);if(a&&!Ge.isDecimal(a))throw new TypeError(`Invalid tone duration: ${a}`);if(a?a<Mt.C.MIN_DURATION?(Y.debug(`"duration" value is lower than the minimum allowed, setting it to ${Mt.C.MIN_DURATION} milliseconds`),a=Mt.C.MIN_DURATION):a>Mt.C.MAX_DURATION?(Y.debug(`"duration" value is greater than the maximum allowed, setting it to ${Mt.C.MAX_DURATION} milliseconds`),a=Mt.C.MAX_DURATION):a=Math.abs(a):a=Mt.C.DEFAULT_DURATION,r.duration=a,t&&!Ge.isDecimal(t))throw new TypeError(`Invalid interToneGap: ${t}`);if(t?t<Mt.C.MIN_INTER_TONE_GAP?(Y.debug(`"interToneGap" value is lower than the minimum allowed, setting it to ${Mt.C.MIN_INTER_TONE_GAP} milliseconds`),t=Mt.C.MIN_INTER_TONE_GAP):t=Math.abs(t):t=Mt.C.DEFAULT_INTER_TONE_GAP,n===fe.DTMF_TRANSPORT.RFC2833){const d=this._getDTMFRTPSender();d&&(s=d.toneBuffer+s,d.insertDTMF(s,a,t));return}if(this._tones){this._tones+=s;return}this._tones=s,p.call(this);function p(){let d;if(this._status===Q.STATUS_TERMINATED||!this._tones||o>=this._tones.length){this._tones=null;return}const h=this._tones[o];if(o+=1,h===",")d=2e3;else{const g=new Mt(this);r.eventHandlers={onFailed:()=>{this._tones=null}},g.send(h,r),d=a+t}setTimeout(p.bind(this),d)}}sendInfo(s,r,o={}){if(Y.debug("sendInfo()"),this._status!==Q.STATUS_CONFIRMED&&this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_1XX_RECEIVED)throw new En.InvalidStateError(this._status);new Of(this).send(s,r,o)}mute(s={audio:!0,video:!1}){Y.debug("mute()");let r=!1,o=!1;this._audioMuted===!1&&s.audio&&(r=!0,this._audioMuted=!0,this._toggleMuteAudio(!0)),this._videoMuted===!1&&s.video&&(o=!0,this._videoMuted=!0,this._toggleMuteVideo(!0)),(r===!0||o===!0)&&this._onmute({audio:r,video:o})}unmute(s={audio:!0,video:!0}){Y.debug("unmute()");let r=!1,o=!1;this._audioMuted===!0&&s.audio&&(r=!0,this._audioMuted=!1,this._localHold===!1&&this._toggleMuteAudio(!1)),this._videoMuted===!0&&s.video&&(o=!0,this._videoMuted=!1,this._localHold===!1&&this._toggleMuteVideo(!1)),(r===!0||o===!0)&&this._onunmute({audio:r,video:o})}hold(s={},r){if(Y.debug("hold()"),this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED||this._localHold===!0||!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");const o={succeeded:()=>{r&&r()},failed:()=>{this.terminate({cause:fe.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return s.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:o,extraHeaders:s.extraHeaders}):this._sendReinvite({eventHandlers:o,extraHeaders:s.extraHeaders}),!0}unhold(s={},r){if(Y.debug("unhold()"),this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED||this._localHold===!1||!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");const o={succeeded:()=>{r&&r()},failed:()=>{this.terminate({cause:fe.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return s.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:o,extraHeaders:s.extraHeaders}):this._sendReinvite({eventHandlers:o,extraHeaders:s.extraHeaders}),!0}renegotiate(s={},r){Y.debug("renegotiate()");const o=s.rtcOfferConstraints||null;if(this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED||!this._isReadyToReOffer())return!1;const a={succeeded:()=>{r&&r()},failed:()=>{this.terminate({cause:fe.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return this._setLocalMediaStatus(),s.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:a,rtcOfferConstraints:o,extraHeaders:s.extraHeaders}):this._sendReinvite({eventHandlers:a,rtcOfferConstraints:o,extraHeaders:s.extraHeaders}),!0}refer(s,r){Y.debug("refer()");const o=s;if(this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED)return!1;if(s=this._ua.normalizeTarget(s),!s)throw new TypeError(`Invalid target: ${o}`);const a=new Qg(this);a.sendRefer(s,r);const t=a.id;return this._referSubscribers[t]=a,a.on("requestFailed",()=>{delete this._referSubscribers[t]}),a.on("accepted",()=>{delete this._referSubscribers[t]}),a.on("failed",()=>{delete this._referSubscribers[t]}),a}sendRequest(s,r){return Y.debug("sendRequest()"),this._dialog.sendRequest(s,r)}receiveRequest(s){if(Y.debug("receiveRequest()"),s.method===fe.CANCEL)(this._status===Q.STATUS_WAITING_FOR_ANSWER||this._status===Q.STATUS_ANSWERED)&&(this._status=Q.STATUS_CANCELED,this._request.reply(487),this._failed("remote",s,fe.causes.CANCELED));else switch(s.method){case fe.ACK:if(this._status!==Q.STATUS_WAITING_FOR_ACK)return;if(this._status=Q.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!s.body){this.terminate({cause:fe.causes.MISSING_SDP,status_code:400});break}const r={originator:"remote",type:"answer",sdp:s.body};Y.debug('emit "sdp"'),this.emit("sdp",r);const o=new RTCSessionDescription({type:"answer",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription(o)).then(()=>{this._is_confirmed||this._confirmed("remote",s)}).catch(a=>{this.terminate({cause:fe.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),Y.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',a),this.emit("peerconnection:setremotedescriptionfailed",a)})}else this._is_confirmed||this._confirmed("remote",s);break;case fe.BYE:this._status===Q.STATUS_CONFIRMED||this._status===Q.STATUS_WAITING_FOR_ACK?(s.reply(200),this._ended("remote",s,fe.causes.BYE)):this._status===Q.STATUS_INVITE_RECEIVED||this._status===Q.STATUS_WAITING_FOR_ANSWER?(s.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",s,fe.causes.BYE)):s.reply(403,"Wrong Status");break;case fe.INVITE:this._status===Q.STATUS_CONFIRMED?s.hasHeader("replaces")?this._receiveReplaces(s):this._receiveReinvite(s):s.reply(403,"Wrong Status");break;case fe.INFO:if(this._status===Q.STATUS_1XX_RECEIVED||this._status===Q.STATUS_WAITING_FOR_ANSWER||this._status===Q.STATUS_ANSWERED||this._status===Q.STATUS_WAITING_FOR_ACK||this._status===Q.STATUS_CONFIRMED){const r=s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0;r&&r.match(/^application\/dtmf-relay/i)?new Mt(this).init_incoming(s):r!==void 0?new Of(this).init_incoming(s):s.reply(415)}else s.reply(403,"Wrong Status");break;case fe.UPDATE:this._status===Q.STATUS_CONFIRMED?this._receiveUpdate(s):s.reply(403,"Wrong Status");break;case fe.REFER:this._status===Q.STATUS_CONFIRMED?this._receiveRefer(s):s.reply(403,"Wrong Status");break;case fe.NOTIFY:this._status===Q.STATUS_CONFIRMED?this._receiveNotify(s):s.reply(403,"Wrong Status");break;default:s.reply(501)}}onTransportError(){Y.warn("onTransportError()"),this._status!==Q.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:fe.causes.CONNECTION_ERROR,cause:fe.causes.CONNECTION_ERROR})}onRequestTimeout(){Y.warn("onRequestTimeout()"),this._status!==Q.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:fe.causes.REQUEST_TIMEOUT,cause:fe.causes.REQUEST_TIMEOUT})}onDialogError(){Y.warn("onDialogError()"),this._status!==Q.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:fe.causes.DIALOG_ERROR,cause:fe.causes.DIALOG_ERROR})}newDTMF(s){Y.debug("newDTMF()"),this.emit("newDTMF",s)}newInfo(s){Y.debug("newInfo()"),this.emit("newInfo",s)}_isReadyToReOffer(){return this._rtcReady?this._dialog?this._dialog.uac_pending_reply===!0||this._dialog.uas_pending_reply===!0?(Y.debug("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):!0:(Y.debug("_isReadyToReOffer() | session not established yet"),!1):(Y.debug("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}_close(){if(Y.debug("close()"),this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(Y.debug("close() | closing local MediaStream"),Ge.closeMediaStream(this._localMediaStream)),this._status!==Q.STATUS_TERMINATED){if(this._status=Q.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(s){Y.warn("close() | error closing the RTCPeerConnection: %o",s)}for(const s in this._timers)Object.prototype.hasOwnProperty.call(this._timers,s)&&clearTimeout(this._timers[s]);clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog);for(const s in this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,s)&&(this._earlyDialogs[s].terminate(),delete this._earlyDialogs[s]);for(const s in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,s)&&delete this._referSubscribers[s];this._ua.destroyRTCSession(this)}}_setInvite2xxTimer(s,r){let o=ji.T1;function a(){this._status===Q.STATUS_WAITING_FOR_ACK&&(s.reply(200,null,[`Contact: ${this._contact}`],r),o<ji.T2&&(o=o*2,o>ji.T2&&(o=ji.T2)),this._timers.invite2xxTimer=setTimeout(a.bind(this),o))}this._timers.invite2xxTimer=setTimeout(a.bind(this),o)}_setACKTimer(){this._timers.ackTimer=setTimeout(()=>{this._status===Q.STATUS_WAITING_FOR_ACK&&(Y.debug("no ACK received, terminating the session"),clearTimeout(this._timers.invite2xxTimer),this.sendRequest(fe.BYE),this._ended("remote",null,fe.causes.NO_ACK))},ji.TIMER_H)}_createRTCConnection(s,r){this._connection=new RTCPeerConnection(s,r),this._connection.addEventListener("iceconnectionstatechange",()=>{this._connection.iceConnectionState==="failed"&&this.terminate({cause:fe.causes.RTP_TIMEOUT,status_code:408,reason_phrase:fe.causes.RTP_TIMEOUT})}),Y.debug('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}_createLocalDescription(s,r){if(Y.debug("createLocalDescription()"),s!=="offer"&&s!=="answer")throw new Error(`createLocalDescription() | invalid type "${s}"`);const o=this._connection;return this._rtcReady=!1,Promise.resolve().then(()=>s==="offer"?o.createOffer(r).catch(a=>(Y.warn('emit "peerconnection:createofferfailed" [error:%o]',a),this.emit("peerconnection:createofferfailed",a),Promise.reject(a))):o.createAnswer(r).catch(a=>(Y.warn('emit "peerconnection:createanswerfailed" [error:%o]',a),this.emit("peerconnection:createanswerfailed",a),Promise.reject(a)))).then(a=>o.setLocalDescription(a).catch(t=>(this._rtcReady=!0,Y.warn('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',t),this.emit("peerconnection:setlocaldescriptionfailed",t),Promise.reject(t)))).then(()=>{const a=r&&r.iceRestart;if(o.iceGatheringState==="complete"&&!a||o.iceGatheringState==="gathering"&&this._iceReady){this._rtcReady=!0;const t={originator:"local",type:s,sdp:o.localDescription.sdp};return Y.debug('emit "sdp"'),this.emit("sdp",t),Promise.resolve(t.sdp)}return new Promise(t=>{let n=!1,p,d;this._iceReady=!1;const h=()=>{o.removeEventListener("icecandidate",p),o.removeEventListener("icegatheringstatechange",d),n=!0,this._rtcReady=!0,this._iceReady=!0;const g={originator:"local",type:s,sdp:o.localDescription.sdp};Y.debug('emit "sdp"'),this.emit("sdp",g),t(g.sdp)};o.addEventListener("icecandidate",p=g=>{const T=g.candidate;T?this.emit("icecandidate",{candidate:T,ready:h}):n||h()}),o.addEventListener("icegatheringstatechange",d=()=>{o.iceGatheringState==="complete"&&!n&&h()})})})}_createDialog(s,r,o){const a=r==="UAS"?s.to_tag:s.from_tag,t=r==="UAS"?s.from_tag:s.to_tag,n=s.call_id+a+t;let p=this._earlyDialogs[n];if(o)return p?!0:(p=new so(this,s,r,so.C.STATUS_EARLY),p.error?(Y.debug(p.error),this._failed("remote",s,fe.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[n]=p,!0));{if(this._from_tag=s.from_tag,this._to_tag=s.to_tag,p)return p.update(s,r),this._dialog=p,delete this._earlyDialogs[n],!0;const d=new so(this,s,r);return d.error?(Y.debug(d.error),this._failed("remote",s,fe.causes.INTERNAL_ERROR),!1):(this._dialog=d,!0)}}_receiveReinvite(s){Y.debug("receiveReinvite()");const r=s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0,o={request:s,callback:void 0,reject:t.bind(this)};let a=!1;function t(p={}){a=!0;const d=p.status_code||403,h=p.reason_phrase||"",g=Ge.cloneArray(p.extraHeaders);if(this._status!==Q.STATUS_CONFIRMED)return!1;if(d<300||d>=700)throw new TypeError(`Invalid status_code: ${d}`);s.reply(d,h,g)}if(this.emit("reinvite",o),a)return;if(this._late_sdp=!1,!s.body){this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._createLocalDescription("offer",this._rtcOfferConstraints)).then(p=>{n.call(this,p)}).catch(()=>{s.reply(500)});return}if(r!=="application/sdp"){Y.debug("invalid Content-Type"),s.reply(415);return}this._processInDialogSdpOffer(s).then(p=>{this._status!==Q.STATUS_TERMINATED&&n.call(this,p)}).catch(p=>{Y.warn(p)});function n(p){const d=[`Contact: ${this._contact}`];this._handleSessionTimersInIncomingRequest(s,d),this._late_sdp&&(p=this._mangleOffer(p)),s.reply(200,null,d,p,()=>{this._status=Q.STATUS_WAITING_FOR_ACK,this._setInvite2xxTimer(s,p),this._setACKTimer()}),typeof o.callback=="function"&&o.callback()}}_receiveUpdate(s){Y.debug("receiveUpdate()");const r=s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0,o={request:s,callback:void 0,reject:t.bind(this)};let a=!1;function t(p={}){a=!0;const d=p.status_code||403,h=p.reason_phrase||"",g=Ge.cloneArray(p.extraHeaders);if(this._status!==Q.STATUS_CONFIRMED)return!1;if(d<300||d>=700)throw new TypeError(`Invalid status_code: ${d}`);s.reply(d,h,g)}if(this.emit("update",o),a)return;if(!s.body){n.call(this,null);return}if(r!=="application/sdp"){Y.debug("invalid Content-Type"),s.reply(415);return}this._processInDialogSdpOffer(s).then(p=>{this._status!==Q.STATUS_TERMINATED&&n.call(this,p)}).catch(p=>{Y.warn(p)});function n(p){const d=[`Contact: ${this._contact}`];this._handleSessionTimersInIncomingRequest(s,d),s.reply(200,null,d,p),typeof o.callback=="function"&&o.callback()}}_processInDialogSdpOffer(s){Y.debug("_processInDialogSdpOffer()");const r=s.parseSDP();let o=!1;for(const n of r.media){if(no.indexOf(n.type)===-1)continue;const p=n.direction||r.direction||"sendrecv";if(p==="sendonly"||p==="inactive")o=!0;else{o=!1;break}}const a={originator:"remote",type:"offer",sdp:s.body};Y.debug('emit "sdp"'),this.emit("sdp",a);const t=new RTCSessionDescription({type:"offer",sdp:a.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>{if(this._status===Q.STATUS_TERMINATED)throw new Error("terminated");return this._connection.setRemoteDescription(t).catch(n=>{throw s.reply(488),Y.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),this.emit("peerconnection:setremotedescriptionfailed",n),n})}).then(()=>{if(this._status===Q.STATUS_TERMINATED)throw new Error("terminated");this._remoteHold===!0&&o===!1?(this._remoteHold=!1,this._onunhold("remote")):this._remoteHold===!1&&o===!0&&(this._remoteHold=!0,this._onhold("remote"))}).then(()=>{if(this._status===Q.STATUS_TERMINATED)throw new Error("terminated");return this._createLocalDescription("answer",this._rtcAnswerConstraints).catch(n=>{throw s.reply(500),Y.warn('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',n),n})}).catch(n=>{Y.warn("_processInDialogSdpOffer() failed [error: %o]",n)}),this._connectionPromiseQueue}_receiveRefer(s){if(Y.debug("receiveRefer()"),!s.refer_to){Y.debug("no Refer-To header field present in REFER"),s.reply(400);return}if(s.refer_to.uri.scheme!==fe.SIP){Y.debug("Refer-To header field points to a non-SIP URI scheme"),s.reply(416);return}s.reply(202);const r=new Xg(this,s.cseq);Y.debug('emit "refer"'),this.emit("refer",{request:s,accept:(t,n)=>{o.call(this,t,n)},reject:()=>{a.call(this)}});function o(t,n={}){if(t=typeof t=="function"?t:null,this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED)return!1;const p=new Du(this._ua);if(p.on("progress",({response:d})=>{r.notify(d.status_code,d.reason_phrase)}),p.on("accepted",({response:d})=>{r.notify(d.status_code,d.reason_phrase)}),p.on("_failed",({message:d,cause:h})=>{d?r.notify(d.status_code,d.reason_phrase):r.notify(487,h)}),s.refer_to.uri.hasHeader("replaces")){const d=decodeURIComponent(s.refer_to.uri.getHeader("replaces"));n.extraHeaders=Ge.cloneArray(n.extraHeaders),n.extraHeaders.push(`Replaces: ${d}`)}p.connect(s.refer_to.uri.toAor(),n,t)}function a(){r.notify(603)}}_receiveNotify(s){switch(Y.debug("receiveNotify()"),s.event||s.reply(400),s.event.event){case"refer":{let r,o;if(s.event.params&&s.event.params.id)r=s.event.params.id,o=this._referSubscribers[r];else if(Object.keys(this._referSubscribers).length===1)o=this._referSubscribers[Object.keys(this._referSubscribers)[0]];else{s.reply(400,"Missing event id parameter");return}if(!o){s.reply(481,"Subscription does not exist");return}o.receiveNotify(s),s.reply(200);break}default:s.reply(489)}}_receiveReplaces(s){Y.debug("receiveReplaces()");function r(a){if(this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED)return!1;const t=new Du(this._ua);t.on("confirmed",()=>{this.terminate()}),t.init_incoming(s,a)}function o(){Y.debug("Replaced INVITE rejected by the user"),s.reply(486)}this.emit("replaces",{request:s,accept:a=>{r.call(this,a)},reject:()=>{o.call(this)}})}_sendInitialRequest(s,r,o){const a=new Jg(this._ua,this._request,{onRequestTimeout:()=>{this.onRequestTimeout()},onTransportError:()=>{this.onTransportError()},onAuthenticated:t=>{this._request=t},onReceiveResponse:t=>{this._receiveInviteResponse(t)}});Promise.resolve().then(()=>{if(o)return o;if(s.audio||s.video)return this._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(s).catch(t=>{throw this._status===Q.STATUS_TERMINATED?new Error("terminated"):(this._failed("local",null,fe.causes.USER_DENIED_MEDIA_ACCESS),Y.warn('emit "getusermediafailed" [error:%o]',t),this.emit("getusermediafailed",t),t)})}).then(t=>{if(this._status===Q.STATUS_TERMINATED)throw new Error("terminated");return this._localMediaStream=t,t&&t.getTracks().forEach(n=>{this._connection.addTrack(n,t)}),this._connecting(this._request),this._createLocalDescription("offer",r).catch(n=>{throw this._failed("local",null,fe.causes.WEBRTC_ERROR),n})}).then(t=>{if(this._is_canceled||this._status===Q.STATUS_TERMINATED)throw new Error("terminated");this._request.body=t,this._status=Q.STATUS_INVITE_SENT,Y.debug('emit "sending" [request:%o]',this._request),this.emit("sending",{request:this._request}),a.send()}).catch(t=>{this._status!==Q.STATUS_TERMINATED&&Y.warn(t)})}_getDTMFRTPSender(){const s=this._connection.getSenders().find(r=>r.track&&r.track.kind==="audio");if(!(s&&s.dtmf)){Y.warn("sendDTMF() | no local audio track to send DTMF with");return}return s.dtmf}_receiveInviteResponse(s){if(Y.debug("receiveInviteResponse()"),this._dialog&&s.status_code>=200&&s.status_code<=299)if(this._dialog.id.call_id===s.call_id&&this._dialog.id.local_tag===s.from_tag&&this._dialog.id.remote_tag===s.to_tag){this.sendRequest(fe.ACK);return}else{const r=new so(this,s,"UAC");if(r.error!==void 0){Y.debug(r.error);return}this.sendRequest(fe.ACK),this.sendRequest(fe.BYE);return}if(this._is_canceled){s.status_code>=100&&s.status_code<200?this._request.cancel(this._cancel_reason):s.status_code>=200&&s.status_code<299&&this._acceptAndTerminate(s);return}if(!(this._status!==Q.STATUS_INVITE_SENT&&this._status!==Q.STATUS_1XX_RECEIVED))switch(!0){case/^100$/.test(s.status_code):this._status=Q.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(s.status_code):{if(!s.to_tag){Y.debug("1xx response received without to tag");break}if(s.hasHeader("contact")&&!this._createDialog(s,"UAC",!0))break;if(this._status=Q.STATUS_1XX_RECEIVED,!s.body){this._progress("remote",s);break}const r={originator:"remote",type:"answer",sdp:s.body};Y.debug('emit "sdp"'),this.emit("sdp",r);const o=new RTCSessionDescription({type:"answer",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription(o)).then(()=>this._progress("remote",s)).catch(a=>{Y.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',a),this.emit("peerconnection:setremotedescriptionfailed",a)});break}case/^2[0-9]{2}$/.test(s.status_code):{if(this._status=Q.STATUS_CONFIRMED,!s.body){this._acceptAndTerminate(s,400,fe.causes.MISSING_SDP),this._failed("remote",s,fe.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(s,"UAC"))break;const r={originator:"remote",type:"answer",sdp:s.body};Y.debug('emit "sdp"'),this.emit("sdp",r);const o=new RTCSessionDescription({type:"answer",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>{if(this._connection.signalingState==="stable")return this._connection.createOffer(this._rtcOfferConstraints).then(a=>this._connection.setLocalDescription(a)).catch(a=>{this._acceptAndTerminate(s,500,a.toString()),this._failed("local",s,fe.causes.WEBRTC_ERROR)})}).then(()=>{this._connection.setRemoteDescription(o).then(()=>{this._handleSessionTimersInIncomingResponse(s),this._accepted("remote",s),this.sendRequest(fe.ACK),this._confirmed("local",null)}).catch(a=>{this._acceptAndTerminate(s,488,"Not Acceptable Here"),this._failed("remote",s,fe.causes.BAD_MEDIA_DESCRIPTION),Y.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',a),this.emit("peerconnection:setremotedescriptionfailed",a)})});break}default:{const r=Ge.sipErrorCause(s.status_code);this._failed("remote",s,r)}}}_sendReinvite(s={}){Y.debug("sendReinvite()");const r=Ge.cloneArray(s.extraHeaders),o=Ge.cloneObject(s.eventHandlers),a=s.rtcOfferConstraints||this._rtcOfferConstraints||null;let t=!1;r.push(`Contact: ${this._contact}`),r.push("Content-Type: application/sdp"),this._sessionTimers.running&&r.push(`Session-Expires: ${this._sessionTimers.currentExpires};refresher=${this._sessionTimers.refresher?"uac":"uas"}`),this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._createLocalDescription("offer",a)).then(d=>{d=this._mangleOffer(d);const h={originator:"local",type:"offer",sdp:d};Y.debug('emit "sdp"'),this.emit("sdp",h),this.sendRequest(fe.INVITE,{extraHeaders:r,body:d,eventHandlers:{onSuccessResponse:g=>{n.call(this,g),t=!0},onErrorResponse:g=>{p.call(this,g)},onTransportError:()=>{this.onTransportError()},onRequestTimeout:()=>{this.onRequestTimeout()},onDialogError:()=>{this.onDialogError()}}})}).catch(()=>{p()});function n(d){if(this._status===Q.STATUS_TERMINATED||(this.sendRequest(fe.ACK),t))return;if(this._handleSessionTimersInIncomingResponse(d),d.body){if(!d.hasHeader("Content-Type")||d.getHeader("Content-Type").toLowerCase()!=="application/sdp"){p.call(this);return}}else{p.call(this);return}const h={originator:"remote",type:"answer",sdp:d.body};Y.debug('emit "sdp"'),this.emit("sdp",h);const g=new RTCSessionDescription({type:"answer",sdp:h.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription(g)).then(()=>{o.succeeded&&o.succeeded(d)}).catch(T=>{p.call(this),Y.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',T),this.emit("peerconnection:setremotedescriptionfailed",T)})}function p(d){o.failed&&o.failed(d)}}_sendUpdate(s={}){Y.debug("sendUpdate()");const r=Ge.cloneArray(s.extraHeaders),o=Ge.cloneObject(s.eventHandlers),a=s.rtcOfferConstraints||this._rtcOfferConstraints||null,t=s.sdpOffer||!1;let n=!1;r.push(`Contact: ${this._contact}`),this._sessionTimers.running&&r.push(`Session-Expires: ${this._sessionTimers.currentExpires};refresher=${this._sessionTimers.refresher?"uac":"uas"}`),t?(r.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._createLocalDescription("offer",a)).then(h=>{h=this._mangleOffer(h);const g={originator:"local",type:"offer",sdp:h};Y.debug('emit "sdp"'),this.emit("sdp",g),this.sendRequest(fe.UPDATE,{extraHeaders:r,body:h,eventHandlers:{onSuccessResponse:T=>{p.call(this,T),n=!0},onErrorResponse:T=>{d.call(this,T)},onTransportError:()=>{this.onTransportError()},onRequestTimeout:()=>{this.onRequestTimeout()},onDialogError:()=>{this.onDialogError()}}})}).catch(()=>{d.call(this)})):this.sendRequest(fe.UPDATE,{extraHeaders:r,eventHandlers:{onSuccessResponse:h=>{p.call(this,h)},onErrorResponse:h=>{d.call(this,h)},onTransportError:()=>{this.onTransportError()},onRequestTimeout:()=>{this.onRequestTimeout()},onDialogError:()=>{this.onDialogError()}}});function p(h){if(this._status!==Q.STATUS_TERMINATED&&!n)if(this._handleSessionTimersInIncomingResponse(h),t){if(h.body){if(!h.hasHeader("Content-Type")||h.getHeader("Content-Type").toLowerCase()!=="application/sdp"){d.call(this);return}}else{d.call(this);return}const g={originator:"remote",type:"answer",sdp:h.body};Y.debug('emit "sdp"'),this.emit("sdp",g);const T=new RTCSessionDescription({type:"answer",sdp:g.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription(T)).then(()=>{o.succeeded&&o.succeeded(h)}).catch(E=>{d.call(this),Y.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',E),this.emit("peerconnection:setremotedescriptionfailed",E)})}else o.succeeded&&o.succeeded(h)}function d(h){o.failed&&o.failed(h)}}_acceptAndTerminate(s,r,o){Y.debug("acceptAndTerminate()");const a=[];r&&(o=o||fe.REASON_PHRASE[r]||"",a.push(`Reason: SIP ;cause=${r}; text="${o}"`)),(this._dialog||this._createDialog(s,"UAC"))&&(this.sendRequest(fe.ACK),this.sendRequest(fe.BYE,{extraHeaders:a})),this._status=Q.STATUS_TERMINATED}_mangleOffer(s){if(!this._localHold&&!this._remoteHold)return s;if(s=bf.parse(s),this._localHold&&!this._remoteHold){Y.debug("mangleOffer() | me on hold, mangling offer");for(const r of s.media)no.indexOf(r.type)!==-1&&(r.direction?r.direction==="sendrecv"?r.direction="sendonly":r.direction==="recvonly"&&(r.direction="inactive"):r.direction="sendonly")}else if(this._localHold&&this._remoteHold){Y.debug("mangleOffer() | both on hold, mangling offer");for(const r of s.media)no.indexOf(r.type)!==-1&&(r.direction="inactive")}else if(this._remoteHold){Y.debug("mangleOffer() | remote on hold, mangling offer");for(const r of s.media)no.indexOf(r.type)!==-1&&(r.direction?r.direction==="sendrecv"?r.direction="recvonly":r.direction==="recvonly"&&(r.direction="inactive"):r.direction="recvonly")}return bf.write(s)}_setLocalMediaStatus(){let s=!0,r=!0;(this._localHold||this._remoteHold)&&(s=!1,r=!1),this._audioMuted&&(s=!1),this._videoMuted&&(r=!1),this._toggleMuteAudio(!s),this._toggleMuteVideo(!r)}_handleSessionTimersInIncomingRequest(s,r){if(!this._sessionTimers.enabled)return;let o;s.session_expires&&s.session_expires>=fe.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=s.session_expires,o=s.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,o="uas"),r.push(`Session-Expires: ${this._sessionTimers.currentExpires};refresher=${o}`),this._sessionTimers.refresher=o==="uas",this._runSessionTimer()}_handleSessionTimersInIncomingResponse(s){if(!this._sessionTimers.enabled)return;let r;s.session_expires&&s.session_expires>=fe.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=s.session_expires,r=s.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,r="uac"),this._sessionTimers.refresher=r==="uac",this._runSessionTimer()}_runSessionTimer(){const s=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout(()=>{this._status!==Q.STATUS_TERMINATED&&this._isReadyToReOffer()&&(Y.debug("runSessionTimer() | sending session refresh request"),this._sessionTimers.refreshMethod===fe.UPDATE?this._sendUpdate():this._sendReinvite())},s*500):this._sessionTimers.timer=setTimeout(()=>{this._status!==Q.STATUS_TERMINATED&&(Y.warn("runSessionTimer() | timer expired, terminating the session"),this.terminate({cause:fe.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))},s*1100)}_toggleMuteAudio(s){const r=this._connection.getSenders().filter(o=>o.track&&o.track.kind==="audio");for(const o of r)o.track.enabled=!s}_toggleMuteVideo(s){const r=this._connection.getSenders().filter(o=>o.track&&o.track.kind==="video");for(const o of r)o.track.enabled=!s}_newRTCSession(s,r){Y.debug("newRTCSession()"),this._ua.newRTCSession(this,{originator:s,session:this,request:r})}_connecting(s){Y.debug("session connecting"),Y.debug('emit "connecting"'),this.emit("connecting",{request:s})}_progress(s,r){Y.debug("session progress"),Y.debug('emit "progress"'),this.emit("progress",{originator:s,response:r||null})}_accepted(s,r){Y.debug("session accepted"),this._start_time=new Date,Y.debug('emit "accepted"'),this.emit("accepted",{originator:s,response:r||null})}_confirmed(s,r){Y.debug("session confirmed"),this._is_confirmed=!0,Y.debug('emit "confirmed"'),this.emit("confirmed",{originator:s,ack:r||null})}_ended(s,r,o){Y.debug("session ended"),this._end_time=new Date,this._close(),Y.debug('emit "ended"'),this.emit("ended",{originator:s,message:r||null,cause:o})}_failed(s,r,o){Y.debug("session failed"),Y.debug('emit "_failed"'),this.emit("_failed",{originator:s,message:r||null,cause:o}),this._close(),Y.debug('emit "failed"'),this.emit("failed",{originator:s,message:r||null,cause:o})}_onhold(s){Y.debug("session onhold"),this._setLocalMediaStatus(),Y.debug('emit "hold"'),this.emit("hold",{originator:s})}_onunhold(s){Y.debug("session onunhold"),this._setLocalMediaStatus(),Y.debug('emit "unhold"'),this.emit("unhold",{originator:s})}_onmute({audio:s,video:r}){Y.debug("session onmute"),this._setLocalMediaStatus(),Y.debug('emit "muted"'),this.emit("muted",{audio:s,video:r})}_onunmute({audio:s,video:r}){Y.debug("session onunmute"),this._setLocalMediaStatus(),Y.debug('emit "unmuted"'),this.emit("unmuted",{audio:s,video:r})}};const Zg=ut(Md),eT=dt.EventEmitter,tT=ct,Wa=Pe,sT=kt,Vi=yt(),nT=Tr,Nf=Rs,rT=Cs(),ro=new tT("Message");var iT=class extends eT{constructor(s){super(),this._ua=s,this._request=null,this._closed=!1,this._direction=null,this._local_identity=null,this._remote_identity=null,this._is_replied=!1,this._data={}}get direction(){return this._direction}get local_identity(){return this._local_identity}get remote_identity(){return this._remote_identity}send(s,r,o={}){const a=s;if(s===void 0||r===void 0)throw new TypeError("Not enough arguments");if(s=this._ua.normalizeTarget(s),!s)throw new TypeError(`Invalid target: ${a}`);const t=Vi.cloneArray(o.extraHeaders),n=Vi.cloneObject(o.eventHandlers),p=o.contentType||"text/plain",d={};o.fromUserName&&(d.from_uri=new rT("sip",o.fromUserName,this._ua.configuration.uri.host),t.push(`P-Preferred-Identity: ${this._ua.configuration.uri.toString()}`)),o.fromDisplayName&&(d.from_display_name=o.fromDisplayName);for(const g in n)Object.prototype.hasOwnProperty.call(n,g)&&this.on(g,n[g]);t.push(`Content-Type: ${p}`),this._request=new sT.OutgoingRequest(Wa.MESSAGE,s,this._ua,d,t),r&&(this._request.body=r);const h=new nT(this._ua,this._request,{onRequestTimeout:()=>{this._onRequestTimeout()},onTransportError:()=>{this._onTransportError()},onReceiveResponse:g=>{this._receiveResponse(g)}});this._newMessage("local",this._request),h.send()}init_incoming(s){this._request=s,this._newMessage("remote",s),this._is_replied||(this._is_replied=!0,s.reply(200)),this._close()}accept(s={}){const r=Vi.cloneArray(s.extraHeaders),o=s.body;if(this._direction!=="incoming")throw new Nf.NotSupportedError('"accept" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");this._is_replied=!0,this._request.reply(200,null,r,o)}reject(s={}){const r=s.status_code||480,o=s.reason_phrase,a=Vi.cloneArray(s.extraHeaders),t=s.body;if(this._direction!=="incoming")throw new Nf.NotSupportedError('"reject" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");if(r<300||r>=700)throw new TypeError(`Invalid status_code: ${r}`);this._is_replied=!0,this._request.reply(r,o,a,t)}_receiveResponse(s){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(s.status_code):break;case/^2[0-9]{2}$/.test(s.status_code):this._succeeded("remote",s);break;default:{const r=Vi.sipErrorCause(s.status_code);this._failed("remote",s,r);break}}}_onRequestTimeout(){this._closed||this._failed("system",null,Wa.causes.REQUEST_TIMEOUT)}_onTransportError(){this._closed||this._failed("system",null,Wa.causes.CONNECTION_ERROR)}_close(){this._closed=!0,this._ua.destroyMessage(this)}_newMessage(s,r){s==="remote"?(this._direction="incoming",this._local_identity=r.to,this._remote_identity=r.from):s==="local"&&(this._direction="outgoing",this._local_identity=r.from,this._remote_identity=r.to),this._ua.newMessage(this,{originator:s,message:this,request:r})}_failed(s,r,o){ro.debug("MESSAGE failed"),this._close(),ro.debug('emit "failed"'),this.emit("failed",{originator:s,response:r||null,cause:o})}_succeeded(s,r){ro.debug("MESSAGE succeeded"),this._close(),ro.debug('emit "succeeded"'),this.emit("succeeded",{originator:s,response:r})}};const lT=dt.EventEmitter,oT=ct,Ka=Pe,aT=kt,qi=yt(),uT=Tr,Uf=Rs,io=new oT("Options");var cT=class extends lT{constructor(s){super(),this._ua=s,this._request=null,this._closed=!1,this._direction=null,this._local_identity=null,this._remote_identity=null,this._is_replied=!1,this._data={}}get direction(){return this._direction}get local_identity(){return this._local_identity}get remote_identity(){return this._remote_identity}send(s,r,o={}){const a=s;if(s===void 0)throw new TypeError("A target is required for OPTIONS");if(s=this._ua.normalizeTarget(s),!s)throw new TypeError(`Invalid target: ${a}`);const t=qi.cloneArray(o.extraHeaders),n=qi.cloneObject(o.eventHandlers),p=o.contentType||"application/sdp";for(const h in n)Object.prototype.hasOwnProperty.call(n,h)&&this.on(h,n[h]);t.push(`Content-Type: ${p}`),this._request=new aT.OutgoingRequest(Ka.OPTIONS,s,this._ua,null,t),r&&(this._request.body=r);const d=new uT(this._ua,this._request,{onRequestTimeout:()=>{this._onRequestTimeout()},onTransportError:()=>{this._onTransportError()},onReceiveResponse:h=>{this._receiveResponse(h)}});this._newOptions("local",this._request),d.send()}init_incoming(s){this._request=s,this._newOptions("remote",s),this._is_replied||(this._is_replied=!0,s.reply(200)),this._close()}accept(s={}){const r=qi.cloneArray(s.extraHeaders),o=s.body;if(this._direction!=="incoming")throw new Uf.NotSupportedError('"accept" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");this._is_replied=!0,this._request.reply(200,null,r,o)}reject(s={}){const r=s.status_code||480,o=s.reason_phrase,a=qi.cloneArray(s.extraHeaders),t=s.body;if(this._direction!=="incoming")throw new Uf.NotSupportedError('"reject" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");if(r<300||r>=700)throw new TypeError(`Invalid status_code: ${r}`);this._is_replied=!0,this._request.reply(r,o,a,t)}_receiveResponse(s){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(s.status_code):break;case/^2[0-9]{2}$/.test(s.status_code):this._succeeded("remote",s);break;default:{const r=qi.sipErrorCause(s.status_code);this._failed("remote",s,r);break}}}_onRequestTimeout(){this._closed||this._failed("system",null,Ka.causes.REQUEST_TIMEOUT)}_onTransportError(){this._closed||this._failed("system",null,Ka.causes.CONNECTION_ERROR)}_close(){this._closed=!0,this._ua.destroyMessage(this)}_newOptions(s,r){s==="remote"?(this._direction="incoming",this._local_identity=r.to,this._remote_identity=r.from):s==="local"&&(this._direction="outgoing",this._local_identity=r.from,this._remote_identity=r.to),this._ua.newOptions(this,{originator:s,message:this,request:r})}_failed(s,r,o){io.debug("OPTIONS failed"),this._close(),io.debug('emit "failed"'),this.emit("failed",{originator:s,response:r||null,cause:o})}_succeeded(s,r){io.debug("OPTIONS succeeded"),this._close(),io.debug('emit "succeeded"'),this.emit("succeeded",{originator:s,response:r})}},Xu={};const fT=ct,Ya=yt(),dT=cs(),Bi=new fT("Socket");Xu.isSocket=c=>{if(Array.isArray(c))return!1;if(typeof c>"u")return Bi.warn("undefined JsSIP.Socket instance"),!1;try{if(!Ya.isString(c.url))throw Bi.warn("missing or invalid JsSIP.Socket url property"),new Error("Missing or invalid JsSIP.Socket url property");if(!Ya.isString(c.via_transport))throw Bi.warn("missing or invalid JsSIP.Socket via_transport property"),new Error("Missing or invalid JsSIP.Socket via_transport property");if(dT.parse(c.sip_uri,"SIP_URI")===-1)throw Bi.warn("missing or invalid JsSIP.Socket sip_uri property"),new Error("missing or invalid JsSIP.Socket sip_uri property")}catch{return!1}try{["connect","disconnect","send"].forEach(s=>{if(!Ya.isFunction(c[s]))throw Bi.warn(`missing or invalid JsSIP.Socket method: ${s}`),new Error(`Missing or invalid JsSIP.Socket method: ${s}`)})}catch{return!1}return!0};const hT=ct,_T=Xu,Pf=Pe,Nt=new hT("Transport"),qt={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:Pf.CONNECTION_RECOVERY_MIN_INTERVAL,max_interval:Pf.CONNECTION_RECOVERY_MAX_INTERVAL}};var pT=class{constructor(s,r=qt.recovery_options){Nt.debug("new()"),this.status=qt.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=r,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1;try{this.textDecoder=new TextDecoder("utf8")}catch(o){Nt.warn(`cannot use TextDecoder: ${o}`)}if(typeof s>"u")throw new TypeError("Invalid argument. undefined 'sockets' argument");s instanceof Array||(s=[s]),s.forEach(function(o){if(!_T.isSocket(o.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(o.weight&&!Number(o.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:o.socket,weight:o.weight||0,status:qt.SOCKET_STATUS_READY})},this),this._getSocket()}get via_transport(){return this.socket.via_transport}get url(){return this.socket.url}get sip_uri(){return this.socket.sip_uri}connect(){if(Nt.debug("connect()"),this.isConnected()){Nt.debug("Transport is already connected");return}else if(this.isConnecting()){Nt.debug("Transport is connecting");return}this.close_requested=!1,this.status=qt.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect())}disconnect(){Nt.debug("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=qt.STATUS_DISCONNECTED,this.recovery_timer!==null&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=()=>{},this.socket.ondisconnect=()=>{},this.socket.ondata=()=>{},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}send(s){if(Nt.debug("send()"),!this.isConnected())return Nt.warn("unable to send message, transport is not connected"),!1;const r=s.toString();return Nt.debug(`sending message:

${r}
`),this.socket.send(r)}isConnected(){return this.status===qt.STATUS_CONNECTED}isConnecting(){return this.status===qt.STATUS_CONNECTING}_reconnect(){this.recover_attempts+=1;let s=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1);s<this.recovery_options.min_interval?s=this.recovery_options.min_interval:s>this.recovery_options.max_interval&&(s=this.recovery_options.max_interval),Nt.debug(`reconnection attempt: ${this.recover_attempts}. next connection attempt in ${s} seconds`),this.recovery_timer=setTimeout(()=>{!this.close_requested&&!(this.isConnected()||this.isConnecting())&&(this._getSocket(),this.connect())},s*1e3)}_getSocket(){let s=[];if(this.sockets.forEach(o=>{o.status!==qt.SOCKET_STATUS_ERROR&&(s.length===0?s.push(o):o.weight>s[0].weight?s=[o]:o.weight===s[0].weight&&s.push(o))}),s.length===0){this.sockets.forEach(o=>{o.status=qt.SOCKET_STATUS_READY}),this._getSocket();return}const r=Math.floor(Math.random()*s.length);this.socket=s[r].socket}_onConnect(){this.recover_attempts=0,this.status=qt.STATUS_CONNECTED,this.recovery_timer!==null&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}_onDisconnect(s,r,o){this.status=qt.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:s,code:r,reason:o}),!this.close_requested&&(this.sockets.forEach(function(a){this.socket===a.socket&&(a.status=qt.SOCKET_STATUS_ERROR)},this),this._reconnect(s))}_onData(s){if(s===`\r
`){Nt.debug("received message with CRLF Keep Alive response");return}else if(typeof s!="string"){try{this.textDecoder?s=this.textDecoder.decode(s):s=String.fromCharCode.apply(null,new Uint8Array(s))}catch{Nt.debug("received binary message failed to be converted into string, message discarded");return}Nt.debug(`received binary message:

${s}
`)}else Nt.debug(`received text message:

${s}
`);this.ondata({transport:this,message:s})}},kd={};const mT=ct,Nu=cs(),Uu=kt,lo=new mT("Parser");kd.parseMessage=(c,s)=>{let r,o,a=c.indexOf(`\r
`);if(a===-1){lo.warn("parseMessage() | no CRLF found, not a SIP message");return}const t=c.substring(0,a);let n=Nu.parse(t,"Request_Response");if(n===-1){lo.warn(`parseMessage() | error parsing first line of SIP message: "${t}"`);return}else n.status_code?(r=new Uu.IncomingResponse,r.status_code=n.status_code,r.reason_phrase=n.reason_phrase):(r=new Uu.IncomingRequest(s),r.method=n.method,r.ruri=n.uri);r.data=c;let p=a+2;for(;;){if(a=gT(c,p),a===-2){o=p+2;break}else if(a===-1){lo.warn("parseMessage() | malformed message");return}if(n=TT(r,c,p,a),n!==!0){lo.warn("parseMessage() |",n.error);return}p=a+2}if(r.hasHeader("content-length")){const d=r.getHeader("content-length");r.body=c.substr(o,d)}else r.body=c.substring(o);return r};function gT(c,s){let r=s,o=0,a=0;if(c.substring(r,r+2).match(/(^\r\n)/))return-2;for(;o===0;){if(a=c.indexOf(`\r
`,r),a===-1)return a;!c.substring(a+2,a+4).match(/(^\r\n)/)&&c.charAt(a+2).match(/(^\s+)/)?r=a+2:o=a}return o}function TT(c,s,r,o){let a;const t=s.indexOf(":",r),n=s.substring(r,t).trim(),p=s.substring(t+1,o).trim();switch(n.toLowerCase()){case"via":case"v":c.addHeader("via",p),c.getHeaders("via").length===1?(a=c.parseHeader("Via"),a&&(c.via=a,c.via_branch=a.branch)):a=0;break;case"from":case"f":c.setHeader("from",p),a=c.parseHeader("from"),a&&(c.from=a,c.from_tag=a.getParam("tag"));break;case"to":case"t":c.setHeader("to",p),a=c.parseHeader("to"),a&&(c.to=a,c.to_tag=a.getParam("tag"));break;case"record-route":if(a=Nu.parse(p,"Record_Route"),a===-1)a=void 0;else for(const d of a)c.addHeader("record-route",p.substring(d.possition,d.offset)),c.headers["Record-Route"][c.getHeaders("record-route").length-1].parsed=d.parsed;break;case"call-id":case"i":c.setHeader("call-id",p),a=c.parseHeader("call-id"),a&&(c.call_id=p);break;case"contact":case"m":if(a=Nu.parse(p,"Contact"),a===-1)a=void 0;else for(const d of a)c.addHeader("contact",p.substring(d.possition,d.offset)),c.headers.Contact[c.getHeaders("contact").length-1].parsed=d.parsed;break;case"content-length":case"l":c.setHeader("content-length",p),a=c.parseHeader("content-length");break;case"content-type":case"c":c.setHeader("content-type",p),a=c.parseHeader("content-type");break;case"cseq":c.setHeader("cseq",p),a=c.parseHeader("cseq"),a&&(c.cseq=a.value),c instanceof Uu.IncomingResponse&&(c.method=a.method);break;case"max-forwards":c.setHeader("max-forwards",p),a=c.parseHeader("max-forwards");break;case"www-authenticate":c.setHeader("www-authenticate",p),a=c.parseHeader("www-authenticate");break;case"proxy-authenticate":c.setHeader("proxy-authenticate",p),a=c.parseHeader("proxy-authenticate");break;case"session-expires":case"x":c.setHeader("session-expires",p),a=c.parseHeader("session-expires"),a&&(c.session_expires=a.expires,c.session_expires_refresher=a.refresher);break;case"refer-to":case"r":c.setHeader("refer-to",p),a=c.parseHeader("refer-to"),a&&(c.refer_to=a);break;case"replaces":c.setHeader("replaces",p),a=c.parseHeader("replaces"),a&&(c.replaces=a);break;case"event":case"o":c.setHeader("event",p),a=c.parseHeader("event"),a&&(c.event=a);break;default:c.addHeader(n,p),a=0}return a===void 0?{error:`error parsing header "${n}"`}:!0}const vT=ct,Ld=Pe,xf=kt,Qu=yt(),Zu=new vT("sanityCheck"),ET=[DT],ST=[CT,RT,IT,bT],yT=[wT,OT];let je,ns,$d;var AT=(c,s,r)=>{je=c,ns=s,$d=r;for(const o of ET)if(o()===!1)return!1;if(je instanceof xf.IncomingRequest){for(const o of ST)if(o()===!1)return!1}else if(je instanceof xf.IncomingResponse){for(const o of yT)if(o()===!1)return!1}return!0};function CT(){if(je.s("to").uri.scheme!=="sip")return il(416),!1}function RT(){if(!je.to_tag&&je.call_id.substr(0,5)===ns.configuration.jssip_id)return il(482),!1}function IT(){const c=Qu.str_utf8_length(je.body),s=je.getHeader("content-length");if(c<s)return il(400),!1}function bT(){const c=je.from_tag,s=je.call_id,r=je.cseq;let o;if(!je.to_tag)if(je.method===Ld.INVITE){if(ns._transactions.ist[je.via_branch])return!1;for(const a in ns._transactions.ist)if(Object.prototype.hasOwnProperty.call(ns._transactions.ist,a)&&(o=ns._transactions.ist[a],o.request.from_tag===c&&o.request.call_id===s&&o.request.cseq===r))return il(482),!1}else{if(ns._transactions.nist[je.via_branch])return!1;for(const a in ns._transactions.nist)if(Object.prototype.hasOwnProperty.call(ns._transactions.nist,a)&&(o=ns._transactions.nist[a],o.request.from_tag===c&&o.request.call_id===s&&o.request.cseq===r))return il(482),!1}}function wT(){if(je.getHeaders("via").length>1)return Zu.debug("more than one Via header field present in the response, dropping the response"),!1}function OT(){const c=Qu.str_utf8_length(je.body),s=je.getHeader("content-length");if(c<s)return Zu.debug("message body length is lower than the value in Content-Length header field, dropping the response"),!1}function DT(){const c=["from","to","call_id","cseq","via"];for(const s of c)if(!je.hasHeader(s))return Zu.debug(`missing mandatory header field : ${s}, dropping the response`),!1}function il(c){const s=je.getHeaders("via");let r,o=`SIP/2.0 ${c} ${Ld.REASON_PHRASE[c]}\r
`;for(const a of s)o+=`Via: ${a}\r
`;r=je.getHeader("To"),je.to_tag||(r+=`;tag=${Qu.newTag()}`),o+=`To: ${r}\r
`,o+=`From: ${je.getHeader("From")}\r
`,o+=`Call-ID: ${je.call_id}\r
`,o+=`CSeq: ${je.cseq} ${je.method}\r
`,o+=`\r
`,$d.send(o)}var ec={};const dr=yt(),Cn=Pe,za=cs(),Mf=Cs(),Ja=Xu,Xa=Rs;ec.settings={authorization_user:null,password:null,realm:null,ha1:null,authorization_jwt:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:Cn.UPDATE,session_timers_force_refresher:!1,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:Cn.CONNECTION_RECOVERY_MAX_INTERVAL,connection_recovery_min_interval:Cn.CONNECTION_RECOVERY_MIN_INTERVAL,extra_headers:null,via_host:`${dr.createRandomToken(12)}.invalid`};const oo={mandatory:{sockets(c){const s=[];if(Ja.isSocket(c))s.push({socket:c});else if(Array.isArray(c)&&c.length)for(const r of c)Object.prototype.hasOwnProperty.call(r,"socket")&&Ja.isSocket(r.socket)?s.push(r):Ja.isSocket(r)&&s.push({socket:r});else return;return s},uri(c){/^sip:/i.test(c)||(c=`${Cn.SIP}:${c}`);const s=Mf.parse(c);if(s)return s.user?s:void 0}},optional:{authorization_user(c){if(za.parse(`"${c}"`,"quoted_string")!==-1)return c},authorization_jwt(c){if(typeof c=="string")return c},user_agent(c){if(typeof c=="string")return c},connection_recovery_max_interval(c){if(dr.isDecimal(c)){const s=Number(c);if(s>0)return s}},connection_recovery_min_interval(c){if(dr.isDecimal(c)){const s=Number(c);if(s>0)return s}},contact_uri(c){if(typeof c=="string"){const s=za.parse(c,"SIP_URI");if(s!==-1)return s}},display_name(c){return c},instance_id(c){if(/^uuid:/i.test(c)&&(c=c.substr(5)),za.parse(c,"uuid")!==-1)return c},no_answer_timeout(c){if(dr.isDecimal(c)){const s=Number(c);if(s>0)return s}},session_timers(c){if(typeof c=="boolean")return c},session_timers_refresh_method(c){if(typeof c=="string"&&(c=c.toUpperCase(),c===Cn.INVITE||c===Cn.UPDATE))return c},session_timers_force_refresher(c){if(typeof c=="boolean")return c},password(c){return String(c)},realm(c){return String(c)},ha1(c){return String(c)},register(c){if(typeof c=="boolean")return c},register_expires(c){if(dr.isDecimal(c)){const s=Number(c);if(s>0)return s}},registrar_server(c){/^sip:/i.test(c)||(c=`${Cn.SIP}:${c}`);const s=Mf.parse(c);if(s)return s.user?void 0:s},use_preloaded_route(c){if(typeof c=="boolean")return c},extra_headers(c){const s=[];if(Array.isArray(c)&&c.length)for(const r of c)typeof r=="string"&&s.push(r);else return;return s}}};ec.load=(c,s)=>{for(const r in oo.mandatory)if(s.hasOwnProperty(r)){const o=s[r],a=oo.mandatory[r](o);if(a!==void 0)c[r]=a;else throw new Xa.ConfigurationError(r,o)}else throw new Xa.ConfigurationError(r);for(const r in oo.optional)if(s.hasOwnProperty(r)){const o=s[r];if(dr.isEmpty(o))continue;const a=oo.optional[r](o);if(a!==void 0)c[r]=a;else throw new Xa.ConfigurationError(r,o)}};const NT=dt.EventEmitter,UT=ct,mt=Pe,PT=Sg,kf=Md,Lf=iT,$f=cT,Qa=gr,xT=pT,ao=yt(),MT=Rs,kT=Cs(),LT=kd,Za=kt,$T=AT,eu=ec,qe=new UT("UA"),vt={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};var Hd=class extends NT{static get C(){return vt}constructor(s){if(qe.debug("new() [configuration:%o]",s),super(),this._cache={credentials:{}},this._configuration=Object.assign({},eu.settings),this._dynConfiguration={},this._dialogs={},this._applicants={},this._sessions={},this._transport=null,this._contact=null,this._status=vt.STATUS_INIT,this._error=null,this._transactions={nist:{},nict:{},ist:{},ict:{}},this._data={},this._closeTimer=null,s===void 0)throw new TypeError("Not enough arguments");try{this._loadConfig(s)}catch(r){throw this._status=vt.STATUS_NOT_READY,this._error=vt.CONFIGURATION_ERROR,r}this._registrator=new PT(this)}get C(){return vt}get status(){return this._status}get contact(){return this._contact}get configuration(){return this._configuration}get transport(){return this._transport}start(){qe.debug("start()"),this._status===vt.STATUS_INIT?this._transport.connect():this._status===vt.STATUS_USER_CLOSED?(qe.debug("restarting UA"),this._closeTimer!==null&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=vt.STATUS_INIT,this._transport.connect()):this._status===vt.STATUS_READY?qe.debug("UA is in READY status, not restarted"):qe.debug("ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this._dynConfiguration.register=this._configuration.register}register(){qe.debug("register()"),this._dynConfiguration.register=!0,this._registrator.register()}unregister(s){qe.debug("unregister()"),this._dynConfiguration.register=!1,this._registrator.unregister(s)}registrator(){return this._registrator}isRegistered(){return this._registrator.registered}isConnected(){return this._transport.isConnected()}call(s,r){qe.debug("call()");const o=new kf(this);return o.connect(s,r),o}sendMessage(s,r,o){qe.debug("sendMessage()");const a=new Lf(this);return a.send(s,r,o),a}sendOptions(s,r,o){qe.debug("sendOptions()");const a=new $f(this);return a.send(s,r,o),a}terminateSessions(s){qe.debug("terminateSessions()");for(const r in this._sessions)this._sessions[r].isEnded()||this._sessions[r].terminate(s)}stop(){if(qe.debug("stop()"),this._dynConfiguration={},this._status===vt.STATUS_USER_CLOSED){qe.debug("UA already closed");return}this._registrator.close();const s=Object.keys(this._sessions).length;for(const o in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,o)){qe.debug(`closing session ${o}`);try{this._sessions[o].terminate()}catch{}}for(const o in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,o))try{this._applicants[o].close()}catch{}this._status=vt.STATUS_USER_CLOSED,Object.keys(this._transactions.nict).length+Object.keys(this._transactions.nist).length+Object.keys(this._transactions.ict).length+Object.keys(this._transactions.ist).length===0&&s===0?this._transport.disconnect():this._closeTimer=setTimeout(()=>{this._closeTimer=null,this._transport.disconnect()},2e3)}normalizeTarget(s){return ao.normalizeTarget(s,this._configuration.hostport_params)}get(s){switch(s){case"authorization_user":return this._configuration.authorization_user;case"realm":return this._configuration.realm;case"ha1":return this._configuration.ha1;case"authorization_jwt":return this._configuration.authorization_jwt;default:qe.warn('get() | cannot get "%s" parameter in runtime',s);return}}set(s,r){switch(s){case"authorization_user":{this._configuration.authorization_user=String(r);break}case"password":{this._configuration.password=String(r);break}case"realm":{this._configuration.realm=String(r);break}case"ha1":{this._configuration.ha1=String(r),this._configuration.password=null;break}case"authorization_jwt":{this._configuration.authorization_jwt=String(r);break}case"display_name":{this._configuration.display_name=r;break}default:return qe.warn('set() | cannot set "%s" parameter in runtime',s),!1}return!0}newTransaction(s){this._transactions[s.type][s.id]=s,this.emit("newTransaction",{transaction:s})}destroyTransaction(s){delete this._transactions[s.type][s.id],this.emit("transactionDestroyed",{transaction:s})}newDialog(s){this._dialogs[s.id]=s}destroyDialog(s){delete this._dialogs[s.id]}newMessage(s,r){this._applicants[s]=s,this.emit("newMessage",r)}newOptions(s,r){this._applicants[s]=s,this.emit("newOptions",r)}destroyMessage(s){delete this._applicants[s]}newRTCSession(s,r){this._sessions[s.id]=s,this.emit("newRTCSession",r)}destroyRTCSession(s){delete this._sessions[s.id]}registered(s){this.emit("registered",s)}unregistered(s){this.emit("unregistered",s)}registrationFailed(s){this.emit("registrationFailed",s)}receiveRequest(s){const r=s.method;if(s.ruri.user!==this._configuration.uri.user&&s.ruri.user!==this._contact.uri.user){qe.debug("Request-URI does not point to us"),s.method!==mt.ACK&&s.reply_sl(404);return}if(s.ruri.scheme===mt.SIPS){s.reply_sl(416);return}if(Qa.checkTransaction(this,s))return;if(r===mt.INVITE?new Qa.InviteServerTransaction(this,this._transport,s):r!==mt.ACK&&r!==mt.CANCEL&&new Qa.NonInviteServerTransaction(this,this._transport,s),r===mt.OPTIONS){if(this.listeners("newOptions").length===0){s.reply(200);return}new $f(this).init_incoming(s)}else if(r===mt.MESSAGE){if(this.listeners("newMessage").length===0){s.reply(405);return}new Lf(this).init_incoming(s)}else if(r===mt.INVITE&&!s.to_tag&&this.listeners("newRTCSession").length===0){s.reply(405);return}let o,a;if(s.to_tag)o=this._findDialog(s.call_id,s.from_tag,s.to_tag),o?o.receiveRequest(s):r===mt.NOTIFY?(a=this._findSession(s),a?a.receiveRequest(s):(qe.debug("received NOTIFY request for a non existent subscription"),s.reply(481,"Subscription does not exist"))):r!==mt.ACK&&s.reply(481);else switch(r){case mt.INVITE:if(window.RTCPeerConnection)if(s.hasHeader("replaces")){const t=s.replaces;o=this._findDialog(t.call_id,t.from_tag,t.to_tag),o?(a=o.owner,a.isEnded()?s.reply(603):a.receiveRequest(s)):s.reply(481)}else a=new kf(this),a.init_incoming(s);else qe.warn("INVITE received but WebRTC is not supported"),s.reply(488);break;case mt.BYE:s.reply(481);break;case mt.CANCEL:a=this._findSession(s),a?a.receiveRequest(s):qe.debug("received CANCEL request for a non existent session");break;case mt.ACK:break;case mt.NOTIFY:this.emit("sipEvent",{event:s.event,request:s}),s.reply(200);break;default:s.reply(405);break}}_findSession({call_id:s,from_tag:r,to_tag:o}){const a=s+r,t=this._sessions[a],n=s+o,p=this._sessions[n];return t||p||null}_findDialog(s,r,o){let a=s+r+o,t=this._dialogs[a];return t||(a=s+o+r,t=this._dialogs[a],t||null)}_loadConfig(s){try{eu.load(this._configuration,s)}catch(a){throw a}this._configuration.display_name===0&&(this._configuration.display_name="0"),this._configuration.instance_id||(this._configuration.instance_id=ao.newUUID()),this._configuration.jssip_id=ao.createRandomToken(5);const r=this._configuration.uri.clone();r.user=null,this._configuration.hostport_params=r.toString().replace(/^sip:/i,"");try{this._transport=new xT(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=HT.bind(this),this._transport.onconnect=FT.bind(this),this._transport.ondisconnect=jT.bind(this),this._transport.ondata=VT.bind(this)}catch(a){throw qe.warn(a),new MT.ConfigurationError("sockets",this._configuration.sockets)}if(delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),!this._configuration.registrar_server){const a=this._configuration.uri.clone();a.user=null,a.clearParams(),a.clearHeaders(),this._configuration.registrar_server=a}this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new kT("sip",ao.createRandomToken(8),this._configuration.via_host,null,{transport:"ws"}),this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString(a={}){const t=a.anonymous||null,n=a.outbound||null;let p="<";return t?p+=this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":p+=this.pub_gruu||this.uri.toString(),n&&(t?!this.temp_gruu:!this.pub_gruu)&&(p+=";ob"),p+=">",p}};const o=["authorization_user","password","realm","ha1","authorization_jwt","display_name","register"];for(const a in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,a)&&(o.indexOf(a)!==-1?Object.defineProperty(this._configuration,a,{writable:!0,configurable:!1}):Object.defineProperty(this._configuration,a,{writable:!1,configurable:!1}));qe.debug("configuration parameters after validation:");for(const a in this._configuration)if(Object.prototype.hasOwnProperty.call(eu.settings,a))switch(a){case"uri":case"registrar_server":qe.debug(`- ${a}: ${this._configuration[a]}`);break;case"password":case"ha1":case"authorization_jwt":qe.debug(`- ${a}: NOT SHOWN`);break;default:qe.debug(`- ${a}: ${JSON.stringify(this._configuration[a])}`)}}};function HT(c){this.emit("connecting",c)}function FT(c){this._status!==vt.STATUS_USER_CLOSED&&(this._status=vt.STATUS_READY,this._error=null,this.emit("connected",c),this._dynConfiguration.register&&this._registrator.register())}function jT(c){const s=["nict","ict","nist","ist"];for(const r of s)for(const o in this._transactions[r])Object.prototype.hasOwnProperty.call(this._transactions[r],o)&&this._transactions[r][o].onTransportError();this.emit("disconnected",c),this._registrator.onTransportClosed(),this._status!==vt.STATUS_USER_CLOSED&&(this._status=vt.STATUS_NOT_READY,this._error=vt.NETWORK_ERROR)}function VT(c){const s=c.transport;let r=c.message;if(r=LT.parseMessage(r,this),!!r&&!(this._status===vt.STATUS_USER_CLOSED&&r instanceof Za.IncomingRequest)&&$T(r,this,s)){if(r instanceof Za.IncomingRequest)r.transport=s,this.receiveRequest(r);else if(r instanceof Za.IncomingResponse){let o;switch(r.method){case mt.INVITE:o=this._transactions.ict[r.via_branch],o&&o.receiveResponse(r);break;case mt.ACK:break;default:o=this._transactions.nict[r.via_branch],o&&o.receiveResponse(r);break}}}}const qT=ut(Hd);var ke=yt();const tu=ut(ke),su=new Sd("Dialog"),Vs={STATUS_EARLY:1,STATUS_CONFIRMED:2,STATUS_TERMINATED:3};class uo{static get C(){return Vs}constructor(s,r,o,a=Vs.STATUS_CONFIRMED){if(this._owner=s,this._ua=s._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,r instanceof kt.IncomingResponse&&(a=r.status_code<200?Vs.STATUS_EARLY:Vs.STATUS_CONFIRMED),o==="UAS"){this._id={call_id:r.call_id,local_tag:r.to_tag,remote_tag:r.from_tag,toString(){return this.call_id+this.local_tag+this.remote_tag}},this._state=a,this._remote_seqnum=r.cseq,this._local_uri=r.parseHeader("to").uri,this._remote_uri=r.parseHeader("from").uri;let t=r.getHeaders("to")[0].split(";")[0];t=t.match(/<([^>]*)>/)[1],this._remote_target=t,this._route_set=r.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum}else if(o==="UAC"){this._id={call_id:r.call_id,local_tag:r.from_tag,remote_tag:r.to_tag,toString(){return this.call_id+this.local_tag+this.remote_tag}},this._state=a,this._local_seqnum=r.cseq,this._local_uri=r.parseHeader("from").uri,this._remote_uri=r.parseHeader("to").uri;let t=r.getHeaders("to")[0].split(";")[0];t=t.match(/<([^>]*)>/)[1],this._remote_target=t,this._route_set=r.getHeaders("record-route").reverse(),this._ack_seqnum=null}this._ua.newDialog(this),su.debug(`new ${o} dialog created with status ${this._state===Vs.STATUS_EARLY?"EARLY":"CONFIRMED"}`)}get id(){return this._id}get local_seqnum(){return this._local_seqnum}set local_seqnum(s){this._local_seqnum=s}get owner(){return this._owner}get uac_pending_reply(){return this._uac_pending_reply}set uac_pending_reply(s){this._uac_pending_reply=s}get uas_pending_reply(){return this._uas_pending_reply}isTerminated(){return this._status===Vs.STATUS_TERMINATED}update(s,r){this._state=Vs.STATUS_CONFIRMED,su.debug(`dialog ${this._id.toString()}  changed to CONFIRMED state`),r==="UAC"&&(this._route_set=s.getHeaders("record-route").reverse())}terminate(){su.debug(`dialog ${this._id.toString()} deleted`),this._ua.destroyDialog(this),this._state=Vs.STATUS_TERMINATED}sendRequest(s,r={}){const o=tu.cloneArray(r.extraHeaders),a=tu.cloneObject(r.eventHandlers),t=r.body||null,n=this._createRequest(s,o,t);return a.onAuthenticated=()=>{this._local_seqnum+=1},new bg(this,n,a).send(),n}receiveRequest(s){this._checkInDialogRequest(s)&&(s.method===G.ACK&&this._ack_seqnum!==null?this._ack_seqnum=null:s.method===G.INVITE&&(this._ack_seqnum=s.cseq),this._owner.receiveRequest(s))}_createRequest(s,r,o){r=tu.cloneArray(r),this._local_seqnum||(this._local_seqnum=Math.floor(Math.random()*1e4));const a=s===G.CANCEL||s===G.ACK?this._local_seqnum:this._local_seqnum+=1;return new kt.OutgoingRequest(s,this._remote_target,this._ua,{cseq:a,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},r,o)}_checkInDialogRequest(s){if(!this._remote_seqnum)this._remote_seqnum=s.cseq;else if(s.cseq<this._remote_seqnum)if(s.method===G.ACK){if(this._ack_seqnum===null||s.cseq!==this._ack_seqnum)return!1}else return s.reply(500),!1;else s.cseq>this._remote_seqnum&&(this._remote_seqnum=s.cseq);if(s.method===G.INVITE||s.method===G.UPDATE&&s.body){if(this._uac_pending_reply===!0)s.reply(491);else if(this._uas_pending_reply===!0){const r=(Math.random()*10|0)+1;return s.reply(500,null,[`Retry-After:${r}`]),!1}else{this._uas_pending_reply=!0;const r=()=>{(s.server_transaction.state===Gt.C.STATUS_ACCEPTED||s.server_transaction.state===Gt.C.STATUS_COMPLETED||s.server_transaction.state===Gt.C.STATUS_TERMINATED)&&(s.server_transaction.removeListener("stateChanged",r),this._uas_pending_reply=!1)};s.server_transaction.on("stateChanged",r)}s.hasHeader("contact")&&s.server_transaction.on("stateChanged",()=>{s.server_transaction.state===Gt.C.STATUS_ACCEPTED&&(this._remote_target=s.parseHeader("contact").uri)})}else s.method===G.NOTIFY&&s.hasHeader("contact")&&s.server_transaction.on("stateChanged",()=>{s.server_transaction.state===Gt.C.STATUS_COMPLETED&&(this._remote_target=s.parseHeader("contact").uri)});return!0}}var BT=Cs();const Ji=ut(BT);function GT(c){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let o=0;o<c;o++){const a=Math.floor(Math.random()*s.length);r+=s.substring(a,a+1)}return r}const Z=new Sd("JanusSession"),te={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},co=["audio","video"];class $o extends dt.EventEmitter{static get C(){return te}constructor(s){Z.debug("new"),super(),console.log("constructor call"),this._id=null,this._ua=s,this._status=te.STATUS_NULL,this._dialog=null,this._earlyDialogs={},this._contact=null,this._from_tag=null,this._to_tag=null,this.lastTransaction=0,this._connection=null,this._connectionPromiseQueue=Promise.resolve(),this._request=null,this._is_canceled=!1,this._cancel_reason="",this._is_confirmed=!1,this._late_sdp=!1,this._rtcOfferConstraints=null,this._rtcAnswerConstraints=null,this._localMediaStream=null,this._localMediaStreamLocallyGenerated=!1,this._rtcReady=!0,this._iceReady=!1,this._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},this._direction=null,this._local_identity=null,this._remote_identity=null,this._start_time=null,this._end_time=null,this._audioMuted=!1,this._videoMuted=!1,this._localHold=!1,this._remoteHold=!1,this._sessionTimers={enabled:this._ua.configuration.session_timers,refreshMethod:this._ua.configuration.session_timers_refresh_method,defaultExpires:G.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},this._referSubscribers={},this._data={}}get C(){return te}get causes(){return G.causes}get id(){return this._id}get connection(){return this._connection}get contact(){return this._contact}get direction(){return this._direction}get local_identity(){return this._local_identity}get remote_identity(){return this._remote_identity}get start_time(){return this._start_time}get end_time(){return this._end_time}get data(){return this._data}set data(s){this._data=s}get status(){return this._status}isInProgress(){switch(this._status){case te.STATUS_NULL:case te.STATUS_INVITE_SENT:case te.STATUS_1XX_RECEIVED:case te.STATUS_INVITE_RECEIVED:case te.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}isEstablished(){switch(this._status){case te.STATUS_ANSWERED:case te.STATUS_WAITING_FOR_ACK:case te.STATUS_CONFIRMED:return!0;default:return!1}}isEnded(){switch(this._status){case te.STATUS_CANCELED:case te.STATUS_TERMINATED:return!0;default:return!1}}isMuted(){return{audio:this._audioMuted,video:this._videoMuted}}isOnHold(){return{local:this._localHold,remote:this._remoteHold}}connect(s,r={},o){Z.debug("connect()");const a=s,t=ke.cloneObject(r.eventHandlers),n=ke.cloneArray(r.extraHeaders),p=ke.cloneObject(r.mediaConstraints,{audio:!0,video:!0}),d=r.mediaStream||null,h=ke.cloneObject(r.pcConfig,{iceServers:[]}),g=r.rtcConstraints||null,T=r.rtcOfferConstraints||null;if(this._rtcOfferConstraints=T,this._rtcAnswerConstraints=r.rtcAnswerConstraints||null,this._data=r.data||this._data,s===void 0)throw new TypeError("Not enough arguments");if(this._status!==te.STATUS_NULL)throw new yn.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new yn.NotSupportedError("WebRTC not supported");if(console.log("target",s),s=this._ua.normalizeTarget(s),console.log("normalizeTarget target",s),!s)throw new TypeError(`Invalid target: ${a}`);this._sessionTimers.enabled&&ke.isDecimal(r.sessionTimersExpires)&&(r.sessionTimersExpires>=G.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=r.sessionTimersExpires:this._sessionTimers.defaultExpires=G.SESSION_EXPIRES);for(const A in t)Object.prototype.hasOwnProperty.call(t,A)&&this.on(A,t[A]);this._from_tag=ke.newTag();const E=r.anonymous||!1,S={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:E,outbound:!0}),E?(S.from_display_name="Anonymous",S.from_uri=new Ji("sip","anonymous","anonymous.invalid"),n.push(`P-Preferred-Identity: ${this._ua.configuration.uri.toString()}`),n.push("Privacy: id")):r.fromUserName&&(S.from_uri=new Ji("sip",r.fromUserName,this._ua.configuration.uri.host),n.push(`P-Preferred-Identity: ${this._ua.configuration.uri.toString()}`)),r.fromDisplayName&&(S.from_display_name=r.fromDisplayName),n.push(`Contact: ${this._contact}`),n.push("Content-Type: application/json"),this._sessionTimers.enabled&&n.push(`Session-Expires: ${this._sessionTimers.defaultExpires}${this._ua.configuration.session_timers_force_refresher?";refresher=uac":""}`),this._request=new kt.InitialOutgoingInviteRequest(s,this._ua,S,n),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(h,g),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,console.log("this._remote_identity",this._remote_identity),o&&o(this),this._newJanusSession("local",this._request),this._sendInitialRequest(p,T,d)}init_incoming(s,r){Z.debug("init_incoming()");let o;const a=s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0;if(s.body&&a!=="application/sdp"){s.reply(415);return}if(this._status=te.STATUS_INVITE_RECEIVED,this._from_tag=s.from_tag,this._id=s.call_id+this._from_tag,this._request=s,this._contact=this._ua.contact.toString(),s.hasHeader("expires")&&(o=s.getHeader("expires")*1e3),s.to_tag=ke.newTag(),!this._createDialog(s,"UAS",!0)){s.reply(500,"Missing Contact header field");return}s.body?this._late_sdp=!1:this._late_sdp=!0,this._status=te.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout(()=>{s.reply(408),this._failed("local",null,G.causes.NO_ANSWER)},this._ua.configuration.no_answer_timeout),o&&(this._timers.expiresTimer=setTimeout(()=>{this._status===te.STATUS_WAITING_FOR_ANSWER&&(s.reply(487),this._failed("system",null,G.causes.EXPIRES))},o)),this._direction="incoming",this._local_identity=s.to,this._remote_identity=s.from,r&&r(this),this._newJanusSession("remote",s),this._status!==te.STATUS_TERMINATED&&(s.reply(180,null,[`Contact: ${this._contact}`]),this._progress("local",null))}answer(s={}){Z.debug("answer()");const r=this._request,o=ke.cloneArray(s.extraHeaders),a=ke.cloneObject(s.mediaConstraints),t=s.mediaStream||null,n=ke.cloneObject(s.pcConfig,{iceServers:[]}),p=s.rtcConstraints||null,d=s.rtcAnswerConstraints||null,h=ke.cloneObject(s.rtcOfferConstraints);let g,T=!1,E=!1,S=!1,A=!1;if(this._rtcAnswerConstraints=d,this._rtcOfferConstraints=s.rtcOfferConstraints||null,this._data=s.data||this._data,this._direction!=="incoming")throw new yn.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==te.STATUS_WAITING_FOR_ANSWER)throw new yn.InvalidStateError(this._status);if(this._sessionTimers.enabled&&ke.isDecimal(s.sessionTimersExpires)&&(s.sessionTimersExpires>=G.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=s.sessionTimersExpires:this._sessionTimers.defaultExpires=G.SESSION_EXPIRES),this._status=te.STATUS_ANSWERED,!this._createDialog(r,"UAS")){r.reply(500,"Error creating dialog");return}clearTimeout(this._timers.userNoAnswerTimer),o.unshift(`Contact: ${this._contact}`);const R=r.parseSDP();Array.isArray(R.media)||(R.media=[R.media]);for(const C of R.media)C.type==="audio"&&(T=!0,(!C.direction||C.direction==="sendrecv")&&(S=!0)),C.type==="video"&&(E=!0,(!C.direction||C.direction==="sendrecv")&&(A=!0));if(t&&a.audio===!1){g=t.getAudioTracks();for(const C of g)t.removeTrack(C)}if(t&&a.video===!1){g=t.getVideoTracks();for(const C of g)t.removeTrack(C)}!t&&a.audio===void 0&&(a.audio=S),!t&&a.video===void 0&&(a.video=A),!t&&!T&&!h.offerToReceiveAudio&&(a.audio=!1),!t&&!E&&!h.offerToReceiveVideo&&(a.video=!1),this._createRTCConnection(n,p),Promise.resolve().then(()=>{if(t)return t;if(a.audio||a.video)return this._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(a).catch(C=>{throw this._status===te.STATUS_TERMINATED?new Error("terminated"):(r.reply(480),this._failed("local",null,G.causes.USER_DENIED_MEDIA_ACCESS),Z.warn('emit "getusermediafailed" [error:%o]',C),this.emit("getusermediafailed",C),new Error("getUserMedia() failed"))})}).then(C=>{if(this._status===te.STATUS_TERMINATED)throw new Error("terminated");this._localMediaStream=C,C&&C.getTracks().forEach($=>{this._connection.addTrack($,C)})}).then(()=>{if(this._late_sdp)return;const C={originator:"remote",type:"offer",sdp:r.body};Z.debug('emit "sdp"'),this.emit("sdp",C);const $=new RTCSessionDescription({type:"offer",sdp:C.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription($)).catch(L=>{throw r.reply(488),this._failed("system",null,G.causes.WEBRTC_ERROR),Z.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',L),this.emit("peerconnection:setremotedescriptionfailed",L),new Error("peerconnection.setRemoteDescription() failed")}),this._connectionPromiseQueue}).then(()=>{if(this._status===te.STATUS_TERMINATED)throw new Error("terminated");return this._connecting(r),this._late_sdp?this._createLocalDescription("offer",this._rtcOfferConstraints).catch(()=>{throw r.reply(500),new Error("_createLocalDescription() failed")}):this._createLocalDescription("answer",d).catch(()=>{throw r.reply(500),new Error("_createLocalDescription() failed")})}).then(C=>{if(this._status===te.STATUS_TERMINATED)throw new Error("terminated");this._handleSessionTimersInIncomingRequest(r,o),r.reply(200,null,o,C,()=>{this._status=te.STATUS_WAITING_FOR_ACK,this._setInvite2xxTimer(r,C),this._setACKTimer(),this._accepted("local")},()=>{this._failed("system",null,G.causes.CONNECTION_ERROR)})}).catch(C=>{this._status!==te.STATUS_TERMINATED&&Z.warn(C)})}terminate(s={}){Z.debug("terminate()");const r=s.cause||G.causes.BYE,o=ke.cloneArray(s.extraHeaders),a=s.body;let t,n=s.status_code,p=s.reason_phrase;if(this._status===te.STATUS_TERMINATED)throw new yn.InvalidStateError(this._status);switch(this._status){case te.STATUS_NULL:case te.STATUS_INVITE_SENT:case te.STATUS_1XX_RECEIVED:if(Z.debug("canceling session"),n&&(n<200||n>=700))throw new TypeError(`Invalid status_code: ${n}`);n&&(p=p||G.REASON_PHRASE[n]||"",t=`SIP ;cause=${n} ;text="${p}"`),this._status===te.STATUS_NULL||this._status===te.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=t):this._status===te.STATUS_1XX_RECEIVED&&this._request.cancel(t),this._status=te.STATUS_CANCELED,this._failed("local",null,G.causes.CANCELED);break;case te.STATUS_WAITING_FOR_ANSWER:case te.STATUS_ANSWERED:if(Z.debug("rejecting session"),n=n||480,n<300||n>=700)throw new TypeError(`Invalid status_code: ${n}`);this._request.reply(n,p,o,a),this._failed("local",null,G.causes.REJECTED);break;case te.STATUS_WAITING_FOR_ACK:case te.STATUS_CONFIRMED:if(Z.debug("terminating session"),p=s.reason_phrase||G.REASON_PHRASE[n]||"",n&&(n<200||n>=700))throw new TypeError(`Invalid status_code: ${n}`);if(n&&o.push(`Reason: SIP ;cause=${n}; text="${p}"`),this._status===te.STATUS_WAITING_FOR_ACK&&this._direction==="incoming"&&this._request.server_transaction.state!==Gt.C.STATUS_TERMINATED){const d=this._dialog;this.receiveRequest=({method:h})=>{h===G.ACK&&(this.sendRequest(G.BYE,{extraHeaders:o,body:a}),d.terminate())},this._request.server_transaction.on("stateChanged",()=>{this._request.server_transaction.state===Gt.C.STATUS_TERMINATED&&(this.sendRequest(G.BYE,{extraHeaders:o,body:a}),d.terminate())}),this._ended("local",null,r),this._dialog=d,console.log("SET DIALOG terminate"),this._ua.newDialog(d)}else this.sendRequest(G.BYE,{extraHeaders:o,body:a}),this._ended("local",null,r)}}sendInfo(s,r,o={}){if(Z.debug("sendInfo()"),this._status!==te.STATUS_CONFIRMED&&this._status!==te.STATUS_WAITING_FOR_ACK&&this._status!==te.STATUS_1XX_RECEIVED)throw new yn.InvalidStateError(this._status);new Ou(this).send(s,r,o)}mute(s={audio:!0,video:!1}){Z.debug("mute()");let r=!1,o=!1;this._audioMuted===!1&&s.audio&&(r=!0,this._audioMuted=!0,this._toggleMuteAudio(!0)),this._videoMuted===!1&&s.video&&(o=!0,this._videoMuted=!0,this._toggleMuteVideo(!0)),(r===!0||o===!0)&&this._onmute({audio:r,video:o})}unmute(s={audio:!0,video:!0}){Z.debug("unmute()");let r=!1,o=!1;this._audioMuted===!0&&s.audio&&(r=!0,this._audioMuted=!1,this._localHold===!1&&this._toggleMuteAudio(!1)),this._videoMuted===!0&&s.video&&(o=!0,this._videoMuted=!1,this._localHold===!1&&this._toggleMuteVideo(!1)),(r===!0||o===!0)&&this._onunmute({audio:r,video:o})}hold(s={},r){if(Z.debug("hold()"),this._status!==te.STATUS_WAITING_FOR_ACK&&this._status!==te.STATUS_CONFIRMED||this._localHold===!0||!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");const o={succeeded:()=>{r&&r()},failed:()=>{this.terminate({cause:G.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return s.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:o,extraHeaders:s.extraHeaders}):this._sendReinvite({eventHandlers:o,extraHeaders:s.extraHeaders}),!0}unhold(s={},r){if(Z.debug("unhold()"),this._status!==te.STATUS_WAITING_FOR_ACK&&this._status!==te.STATUS_CONFIRMED||this._localHold===!1||!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");const o={succeeded:()=>{r&&r()},failed:()=>{this.terminate({cause:G.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return s.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:o,extraHeaders:s.extraHeaders}):this._sendReinvite({eventHandlers:o,extraHeaders:s.extraHeaders}),!0}renegotiate(s={},r){Z.debug("renegotiate()");const o=s.rtcOfferConstraints||null;if(this._status!==te.STATUS_WAITING_FOR_ACK&&this._status!==te.STATUS_CONFIRMED||!this._isReadyToReOffer())return!1;const a={succeeded:()=>{r&&r()},failed:()=>{this.terminate({cause:G.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return this._setLocalMediaStatus(),s.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:a,rtcOfferConstraints:o,extraHeaders:s.extraHeaders}):this._sendReinvite({eventHandlers:a,rtcOfferConstraints:o,extraHeaders:s.extraHeaders}),!0}refer(s,r){Z.debug("refer()");const o=s;if(this._status!==te.STATUS_WAITING_FOR_ACK&&this._status!==te.STATUS_CONFIRMED)return!1;if(s=this._ua.normalizeTarget(s),!s)throw new TypeError(`Invalid target: ${o}`);const a=new Wg(this);a.sendRefer(s,r);const t=a.id;return this._referSubscribers[t]=a,a.on("requestFailed",()=>{delete this._referSubscribers[t]}),a.on("accepted",()=>{delete this._referSubscribers[t]}),a.on("failed",()=>{delete this._referSubscribers[t]}),a}sendRequest(s,r){return Z.debug("sendRequest()"),this._dialog.sendRequest(s,r)}receiveRequest(s){if(Z.debug("receiveRequest()"),s.method===G.CANCEL)(this._status===te.STATUS_WAITING_FOR_ANSWER||this._status===te.STATUS_ANSWERED)&&(this._status=te.STATUS_CANCELED,this._request.reply(487),this._failed("remote",s,G.causes.CANCELED));else switch(s.method){case G.ACK:if(this._status!==te.STATUS_WAITING_FOR_ACK)return;if(this._status=te.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!s.body){this.terminate({cause:G.causes.MISSING_SDP,status_code:400});break}const r={originator:"remote",type:"answer",sdp:s.body};Z.debug('emit "sdp"'),this.emit("sdp",r);const o=new RTCSessionDescription({type:"answer",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription(o)).then(()=>{this._is_confirmed||this._confirmed("remote",s)}).catch(a=>{this.terminate({cause:G.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),Z.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',a),this.emit("peerconnection:setremotedescriptionfailed",a)})}else this._is_confirmed||this._confirmed("remote",s);break;case G.BYE:this._status===te.STATUS_CONFIRMED||this._status===te.STATUS_WAITING_FOR_ACK?(s.reply(200),this._ended("remote",s,G.causes.BYE)):this._status===te.STATUS_INVITE_RECEIVED||this._status===te.STATUS_WAITING_FOR_ANSWER?(s.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",s,G.causes.BYE)):s.reply(403,"Wrong Status");break;case G.INVITE:this._status===te.STATUS_CONFIRMED?s.hasHeader("replaces")?this._receiveReplaces(s):this._receiveReinvite(s):s.reply(403,"Wrong Status");break;case G.INFO:if(this._status===te.STATUS_1XX_RECEIVED||this._status===te.STATUS_WAITING_FOR_ANSWER||this._status===te.STATUS_ANSWERED||this._status===te.STATUS_WAITING_FOR_ACK||this._status===te.STATUS_CONFIRMED){const r=s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0;r&&r.match(/^application\/dtmf-relay/i)?new Mg(this).init_incoming(s):r!==void 0?new Ou(this).init_incoming(s):s.reply(415)}else s.reply(403,"Wrong Status");break;case G.UPDATE:this._status===te.STATUS_CONFIRMED?this._receiveUpdate(s):s.reply(403,"Wrong Status");break;case G.REFER:this._status===te.STATUS_CONFIRMED?this._receiveRefer(s):s.reply(403,"Wrong Status");break;case G.NOTIFY:this._status===te.STATUS_CONFIRMED?this._receiveNotify(s):s.reply(403,"Wrong Status");break;default:s.reply(501)}}onTransportError(){Z.warn("onTransportError()"),this._status!==te.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:G.causes.CONNECTION_ERROR,cause:G.causes.CONNECTION_ERROR})}onRequestTimeout(){Z.warn("onRequestTimeout()"),this._status!==te.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:G.causes.REQUEST_TIMEOUT,cause:G.causes.REQUEST_TIMEOUT})}onDialogError(){Z.warn("onDialogError()"),this._status!==te.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:G.causes.DIALOG_ERROR,cause:G.causes.DIALOG_ERROR})}newDTMF(s){Z.debug("newDTMF()"),this.emit("newDTMF",s)}newInfo(s){Z.debug("newInfo()"),this.emit("newInfo",s)}_isReadyToReOffer(){return this._rtcReady?this._dialog?this._dialog.uac_pending_reply===!0||this._dialog.uas_pending_reply===!0?(Z.debug("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):!0:(Z.debug("_isReadyToReOffer() | session not established yet"),!1):(Z.debug("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}_close(){if(Z.debug("close()"),this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(Z.debug("close() | closing local MediaStream"),ke.closeMediaStream(this._localMediaStream)),this._status!==te.STATUS_TERMINATED){if(this._status=te.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(s){Z.warn("close() | error closing the RTCPeerConnection: %o",s)}for(const s in this._timers)Object.prototype.hasOwnProperty.call(this._timers,s)&&clearTimeout(this._timers[s]);clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog);for(const s in this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,s)&&(this._earlyDialogs[s].terminate(),delete this._earlyDialogs[s]);for(const s in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,s)&&delete this._referSubscribers[s];this._ua.destroyRTCSession(this)}}_setInvite2xxTimer(s,r){let o=Li.T1;function a(){this._status===te.STATUS_WAITING_FOR_ACK&&(s.reply(200,null,[`Contact: ${this._contact}`],r),o<Li.T2&&(o=o*2,o>Li.T2&&(o=Li.T2)),this._timers.invite2xxTimer=setTimeout(a.bind(this),o))}this._timers.invite2xxTimer=setTimeout(a.bind(this),o)}_setACKTimer(){this._timers.ackTimer=setTimeout(()=>{this._status===te.STATUS_WAITING_FOR_ACK&&(Z.debug("no ACK received, terminating the session"),clearTimeout(this._timers.invite2xxTimer),this.sendRequest(G.BYE),this._ended("remote",null,G.causes.NO_ACK))},Li.TIMER_H)}_createRTCConnection(s,r){this._connection=new RTCPeerConnection(s,r),this._connection.addEventListener("iceconnectionstatechange",()=>{this._connection.iceConnectionState==="failed"&&this.terminate({cause:G.causes.RTP_TIMEOUT,status_code:408,reason_phrase:G.causes.RTP_TIMEOUT})}),Z.debug('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}_createLocalDescription(s,r){if(Z.debug("createLocalDescription()"),s!=="offer"&&s!=="answer")throw new Error(`createLocalDescription() | invalid type "${s}"`);const o=this._connection;return this._rtcReady=!1,Promise.resolve().then(()=>s==="offer"?o.createOffer(r).catch(a=>(Z.warn('emit "peerconnection:createofferfailed" [error:%o]',a),this.emit("peerconnection:createofferfailed",a),Promise.reject(a))):o.createAnswer(r).catch(a=>(Z.warn('emit "peerconnection:createanswerfailed" [error:%o]',a),this.emit("peerconnection:createanswerfailed",a),Promise.reject(a)))).then(a=>o.setLocalDescription(a).catch(t=>(this._rtcReady=!0,Z.warn('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',t),this.emit("peerconnection:setlocaldescriptionfailed",t),Promise.reject(t)))).then(()=>{const a=r&&r.iceRestart;if(o.iceGatheringState==="complete"&&!a||o.iceGatheringState==="gathering"&&this._iceReady){this._rtcReady=!0;const t={originator:"local",type:s,sdp:o.localDescription.sdp};return Z.debug('emit "sdp"'),this.emit("sdp",t),Promise.resolve(t.sdp)}return new Promise(t=>{let n=!1,p,d;this._iceReady=!1;const h=()=>{o.removeEventListener("icecandidate",p),o.removeEventListener("icegatheringstatechange",d),n=!0,this._rtcReady=!0,this._iceReady=!0;const g={originator:"local",type:s,sdp:o.localDescription.sdp};Z.debug('emit "sdp"'),this.emit("sdp",g),t(g.sdp)};o.addEventListener("icecandidate",p=g=>{const T=g.candidate;T?this.emit("icecandidate",{candidate:T,ready:h}):n||h()}),o.addEventListener("icegatheringstatechange",d=()=>{o.iceGatheringState==="complete"&&!n&&h()})})})}_createDialog(s,r,o){console.log("_createDialog",s);const a=r==="UAS"?s.to_tag:s.from_tag,t=r==="UAS"?s.from_tag:s.to_tag,n=s.call_id+a+t;console.log("remote_tag",t);let p=this._earlyDialogs[n];if(o)return p?!0:(p=new uo(this,s,r,uo.C.STATUS_EARLY),console.log("SET DIALOG early"),p.error?(console.log("early_dialog error",p.error),Z.debug(p.error),this._failed("remote",s,G.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[n]=p,!0));{if(this._from_tag=s.from_tag,this._to_tag=s.to_tag,p)return p.update(s,r),console.log("SET DIALOG 1"),this._dialog=p,delete this._earlyDialogs[n],!0;const d=new uo(this,s,r);return d.error?(console.log("dialog.error",d.error),Z.debug(d.error),this._failed("remote",s,G.causes.INTERNAL_ERROR),!1):(console.log("AAA SET DIALOG 2"),this._dialog=d,!0)}}_receiveReinvite(s){Z.debug("receiveReinvite()");const r=s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0,o={request:s,callback:void 0,reject:t.bind(this)};let a=!1;function t(p={}){a=!0;const d=p.status_code||403,h=p.reason_phrase||"",g=ke.cloneArray(p.extraHeaders);if(this._status!==te.STATUS_CONFIRMED)return!1;if(d<300||d>=700)throw new TypeError(`Invalid status_code: ${d}`);s.reply(d,h,g)}if(this.emit("reinvite",o),a)return;if(this._late_sdp=!1,!s.body){this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._createLocalDescription("offer",this._rtcOfferConstraints)).then(p=>{n.call(this,p)}).catch(()=>{s.reply(500)});return}if(r!=="application/sdp"){Z.debug("invalid Content-Type"),s.reply(415);return}this._processInDialogSdpOffer(s).then(p=>{this._status!==te.STATUS_TERMINATED&&n.call(this,p)}).catch(p=>{Z.warn(p)});function n(p){const d=[`Contact: ${this._contact}`];this._handleSessionTimersInIncomingRequest(s,d),this._late_sdp&&(p=this._mangleOffer(p)),s.reply(200,null,d,p,()=>{this._status=te.STATUS_WAITING_FOR_ACK,this._setInvite2xxTimer(s,p),this._setACKTimer()}),typeof o.callback=="function"&&o.callback()}}_receiveUpdate(s){Z.debug("receiveUpdate()");const r=s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0,o={request:s,callback:void 0,reject:t.bind(this)};let a=!1;function t(p={}){a=!0;const d=p.status_code||403,h=p.reason_phrase||"",g=ke.cloneArray(p.extraHeaders);if(this._status!==te.STATUS_CONFIRMED)return!1;if(d<300||d>=700)throw new TypeError(`Invalid status_code: ${d}`);s.reply(d,h,g)}if(this.emit("update",o),a)return;if(!s.body){n.call(this,null);return}if(r!=="application/sdp"){Z.debug("invalid Content-Type"),s.reply(415);return}this._processInDialogSdpOffer(s).then(p=>{this._status!==te.STATUS_TERMINATED&&n.call(this,p)}).catch(p=>{Z.warn(p)});function n(p){const d=[`Contact: ${this._contact}`];this._handleSessionTimersInIncomingRequest(s,d),s.reply(200,null,d,p),typeof o.callback=="function"&&o.callback()}}_processInDialogSdpOffer(s){Z.debug("_processInDialogSdpOffer()");const r=s.parseSDP();let o=!1;for(const n of r.media){if(co.indexOf(n.type)===-1)continue;const p=n.direction||r.direction||"sendrecv";if(p==="sendonly"||p==="inactive")o=!0;else{o=!1;break}}const a={originator:"remote",type:"offer",sdp:s.body};Z.debug('emit "sdp"'),this.emit("sdp",a);const t=new RTCSessionDescription({type:"offer",sdp:a.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>{if(this._status===te.STATUS_TERMINATED)throw new Error("terminated");return this._connection.setRemoteDescription(t).catch(n=>{throw s.reply(488),Z.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),this.emit("peerconnection:setremotedescriptionfailed",n),n})}).then(()=>{if(this._status===te.STATUS_TERMINATED)throw new Error("terminated");this._remoteHold===!0&&o===!1?(this._remoteHold=!1,this._onunhold("remote")):this._remoteHold===!1&&o===!0&&(this._remoteHold=!0,this._onhold("remote"))}).then(()=>{if(this._status===te.STATUS_TERMINATED)throw new Error("terminated");return this._createLocalDescription("answer",this._rtcAnswerConstraints).catch(n=>{throw s.reply(500),Z.warn('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',n),n})}).catch(n=>{Z.warn("_processInDialogSdpOffer() failed [error: %o]",n)}),this._connectionPromiseQueue}_receiveRefer(s){if(Z.debug("receiveRefer()"),!s.refer_to){Z.debug("no Refer-To header field present in REFER"),s.reply(400);return}if(s.refer_to.uri.scheme!==G.SIP){Z.debug("Refer-To header field points to a non-SIP URI scheme"),s.reply(416);return}s.reply(202);const r=new Vg(this,s.cseq);Z.debug('emit "refer"'),this.emit("refer",{request:s,accept:(t,n)=>{o.call(this,t,n)},reject:()=>{a.call(this)}});function o(t,n={}){if(t=typeof t=="function"?t:null,this._status!==te.STATUS_WAITING_FOR_ACK&&this._status!==te.STATUS_CONFIRMED)return!1;const p=new $o(this._ua);if(p.on("progress",({response:d})=>{r.notify(d.status_code,d.reason_phrase)}),p.on("accepted",({response:d})=>{r.notify(d.status_code,d.reason_phrase)}),p.on("_failed",({message:d,cause:h})=>{d?r.notify(d.status_code,d.reason_phrase):r.notify(487,h)}),s.refer_to.uri.hasHeader("replaces")){const d=decodeURIComponent(s.refer_to.uri.getHeader("replaces"));n.extraHeaders=ke.cloneArray(n.extraHeaders),n.extraHeaders.push(`Replaces: ${d}`)}p.connect(s.refer_to.uri.toAor(),n,t)}function a(){r.notify(603)}}_receiveNotify(s){switch(Z.debug("receiveNotify()"),s.event||s.reply(400),s.event.event){case"refer":{let r,o;if(s.event.params&&s.event.params.id)r=s.event.params.id,o=this._referSubscribers[r];else if(Object.keys(this._referSubscribers).length===1)o=this._referSubscribers[Object.keys(this._referSubscribers)[0]];else{s.reply(400,"Missing event id parameter");return}if(!o){s.reply(481,"Subscription does not exist");return}o.receiveNotify(s),s.reply(200);break}default:s.reply(489)}}_receiveReplaces(s){Z.debug("receiveReplaces()");function r(a){if(this._status!==te.STATUS_WAITING_FOR_ACK&&this._status!==te.STATUS_CONFIRMED)return!1;const t=new $o(this._ua);t.on("confirmed",()=>{this.terminate()}),t.init_incoming(s,a)}function o(){Z.debug("Replaced INVITE rejected by the user"),s.reply(486)}this.emit("replaces",{request:s,accept:a=>{r.call(this,a)},reject:()=>{o.call(this)}})}_getNextTransactionId(){return(this.lastTransaction+1).toString()}_sendInitialRequest(s,r,o){this.ackSent=!1;const a=new bd(this._ua,this._request,{onRequestTimeout:()=>{this.onRequestTimeout()},onTransportError:()=>{this.onTransportError()},onAuthenticated:t=>{this._request=t},onReceiveResponse:t=>{this._receiveInviteResponse(t)}});Promise.resolve().then(()=>{if(o)return o;if(s.audio||s.video)return this._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(s).catch(t=>{throw this._status===te.STATUS_TERMINATED?new Error("terminated"):(this._failed("local",null,G.causes.USER_DENIED_MEDIA_ACCESS),Z.warn('emit "getusermediafailed" [error:%o]',t),this.emit("getusermediafailed",t),t)})}).then(t=>{if(this._status===te.STATUS_TERMINATED)throw new Error("terminated");return this._localMediaStream=t,t&&t.getTracks().forEach(n=>{this._connection.addTrack(n,t)}),this._connecting(this._request),this._createLocalDescription("offer",r).catch(n=>{throw this._failed("local",null,G.causes.WEBRTC_ERROR),n})}).then(t=>{if(this._is_canceled||this._status===te.STATUS_TERMINATED)throw new Error("terminated");const p=JSON.stringify({janus:"attach",plugin:"janus.plugin.videoroom",opaque_id:"videoroomtest-uzkIUidc1969"});this._request.body=p,this._status=te.STATUS_INVITE_SENT,Z.debug('emit "sending" [request:%o]',this._request),this.emit("sending",{request:this._request}),a.send()}).catch(t=>{this._status!==te.STATUS_TERMINATED&&Z.warn(t)})}_receiveInviteResponse(s){if(Z.debug("receiveInviteResponse()"),console.log("_receiveInviteResponse response",s),console.log("dialog",this._dialog),this._dialog&&s.status_code>=200&&s.status_code<=299&&!this.ackSent)if(console.log("IF 1 dialog"),this._dialog.id.call_id===s.call_id&&this._dialog.id.local_tag===s.from_tag&&this._dialog.id.remote_tag===s.to_tag){console.log("IF 1 SEND ACK"),this.ackSent=!0,this.sendRequest(G.ACK);return}else{const r=new uo(this,s,"UAC");if(r.error!==void 0){Z.debug(r.error);return}this.sendRequest(G.ACK),this.sendRequest(G.BYE);return}if(this.ackSent){const r=JSON.parse(s.body);this.session_id=r.session_id,this.handle_id=r.data.id;const a={janus:"message",body:{request:"join",room:"abcd",ptype:"publisher",display:"User1",clientID:"dufgjb023gh4vr872v238ugf2y82g4",opaque_id:`videoroomtest-${GT(12)}`},handle_id:this.handle_id},t=["PTYPE: Publisher"];console.log("JOIN MESSAGE",a),this.sendRequest(G.SUBSCRIBE,{extraHeaders:t,body:JSON.stringify(a)})}if(this._is_canceled){console.log("IF 2 canceled"),s.status_code>=100&&s.status_code<200?this._request.cancel(this._cancel_reason):s.status_code>=200&&s.status_code<299&&(console.log("IF 2 _acceptAndTerminate"),this._acceptAndTerminate(s));return}if(console.log("IF 2 this._status",this._status),this._status!==te.STATUS_INVITE_SENT&&this._status!==te.STATUS_1XX_RECEIVED){console.log("IF 3 not invite sent");return}switch(!0){case/^100$/.test(s.status_code):console.log("IF 4 SWITCH 1"),this._status=te.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(s.status_code):{if(console.log("IF 5 SWITCH 2"),!s.to_tag){console.log("IF 5 break"),Z.debug("1xx response received without to tag");break}if(s.hasHeader("contact")&&(console.log("IF 5 contact"),!this._createDialog(s,"UAC",!0))){console.log("IF 5 _createDialog break");break}if(this._status=te.STATUS_1XX_RECEIVED,!s.body){console.log("IF 5 !response.body"),this._progress("remote",s);break}const r={originator:"remote",type:"answer",sdp:s.body};Z.debug('emit "sdp"'),this.emit("sdp",r);const o=new RTCSessionDescription({type:"answer",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription(o)).then(()=>this._progress("remote",s)).catch(a=>{Z.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',a),this.emit("peerconnection:setremotedescriptionfailed",a)});break}case/^2[0-9]{2}$/.test(s.status_code):{if(console.log("IF 6 SWITCH 3"),this._status=te.STATUS_CONFIRMED,!s.body){console.log("IF 6 !response.body"),this._acceptAndTerminate(s,400,G.causes.MISSING_SDP),this._failed("remote",s,G.causes.BAD_MEDIA_DESCRIPTION);break}if(console.log("AAA _createDialog"),!this._createDialog(s,"UAC"))break;break}default:{console.log("IF 7 SWITCH 4");const r=ke.sipErrorCause(s.status_code);this._failed("remote",s,r)}}}_sendReinvite(s={}){Z.debug("sendReinvite()");const r=ke.cloneArray(s.extraHeaders),o=ke.cloneObject(s.eventHandlers),a=s.rtcOfferConstraints||this._rtcOfferConstraints||null;let t=!1;r.push(`Contact: ${this._contact}`),r.push("Content-Type: application/sdp"),this._sessionTimers.running&&r.push(`Session-Expires: ${this._sessionTimers.currentExpires};refresher=${this._sessionTimers.refresher?"uac":"uas"}`),this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._createLocalDescription("offer",a)).then(d=>{d=this._mangleOffer(d);const h={originator:"local",type:"offer",sdp:d};Z.debug('emit "sdp"'),this.emit("sdp",h),this.sendRequest(G.INVITE,{extraHeaders:r,body:d,eventHandlers:{onSuccessResponse:g=>{n.call(this,g),t=!0},onErrorResponse:g=>{p.call(this,g)},onTransportError:()=>{this.onTransportError()},onRequestTimeout:()=>{this.onRequestTimeout()},onDialogError:()=>{this.onDialogError()}}})}).catch(()=>{p()});function n(d){if(this._status===te.STATUS_TERMINATED||(this.sendRequest(G.ACK),t))return;if(this._handleSessionTimersInIncomingResponse(d),d.body){if(!d.hasHeader("Content-Type")||d.getHeader("Content-Type").toLowerCase()!=="application/sdp"){p.call(this);return}}else{p.call(this);return}const h={originator:"remote",type:"answer",sdp:d.body};Z.debug('emit "sdp"'),this.emit("sdp",h);const g=new RTCSessionDescription({type:"answer",sdp:h.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription(g)).then(()=>{o.succeeded&&o.succeeded(d)}).catch(T=>{p.call(this),Z.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',T),this.emit("peerconnection:setremotedescriptionfailed",T)})}function p(d){o.failed&&o.failed(d)}}_sendUpdate(s={}){Z.debug("sendUpdate()");const r=ke.cloneArray(s.extraHeaders),o=ke.cloneObject(s.eventHandlers),a=s.rtcOfferConstraints||this._rtcOfferConstraints||null,t=s.sdpOffer||!1;let n=!1;r.push(`Contact: ${this._contact}`),this._sessionTimers.running&&r.push(`Session-Expires: ${this._sessionTimers.currentExpires};refresher=${this._sessionTimers.refresher?"uac":"uas"}`),t?(r.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._createLocalDescription("offer",a)).then(h=>{h=this._mangleOffer(h);const g={originator:"local",type:"offer",sdp:h};Z.debug('emit "sdp"'),this.emit("sdp",g),this.sendRequest(G.UPDATE,{extraHeaders:r,body:h,eventHandlers:{onSuccessResponse:T=>{p.call(this,T),n=!0},onErrorResponse:T=>{d.call(this,T)},onTransportError:()=>{this.onTransportError()},onRequestTimeout:()=>{this.onRequestTimeout()},onDialogError:()=>{this.onDialogError()}}})}).catch(()=>{d.call(this)})):this.sendRequest(G.UPDATE,{extraHeaders:r,eventHandlers:{onSuccessResponse:h=>{p.call(this,h)},onErrorResponse:h=>{d.call(this,h)},onTransportError:()=>{this.onTransportError()},onRequestTimeout:()=>{this.onRequestTimeout()},onDialogError:()=>{this.onDialogError()}}});function p(h){if(this._status!==te.STATUS_TERMINATED&&!n)if(this._handleSessionTimersInIncomingResponse(h),t){if(h.body){if(!h.hasHeader("Content-Type")||h.getHeader("Content-Type").toLowerCase()!=="application/sdp"){d.call(this);return}}else{d.call(this);return}const g={originator:"remote",type:"answer",sdp:h.body};Z.debug('emit "sdp"'),this.emit("sdp",g);const T=new RTCSessionDescription({type:"answer",sdp:g.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription(T)).then(()=>{o.succeeded&&o.succeeded(h)}).catch(E=>{d.call(this),Z.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',E),this.emit("peerconnection:setremotedescriptionfailed",E)})}else o.succeeded&&o.succeeded(h)}function d(h){o.failed&&o.failed(h)}}_acceptAndTerminate(s,r,o){Z.debug("acceptAndTerminate()");const a=[];r&&(o=o||G.REASON_PHRASE[r]||"",a.push(`Reason: SIP ;cause=${r}; text="${o}"`)),(this._dialog||this._createDialog(s,"UAC"))&&(this.sendRequest(G.ACK),this.sendRequest(G.BYE,{extraHeaders:a})),this._status=te.STATUS_TERMINATED}_mangleOffer(s){if(!this._localHold&&!this._remoteHold)return s;if(s=Pt.parse(s),this._localHold&&!this._remoteHold){Z.debug("mangleOffer() | me on hold, mangling offer");for(const r of s.media)co.indexOf(r.type)!==-1&&(r.direction?r.direction==="sendrecv"?r.direction="sendonly":r.direction==="recvonly"&&(r.direction="inactive"):r.direction="sendonly")}else if(this._localHold&&this._remoteHold){Z.debug("mangleOffer() | both on hold, mangling offer");for(const r of s.media)co.indexOf(r.type)!==-1&&(r.direction="inactive")}else if(this._remoteHold){Z.debug("mangleOffer() | remote on hold, mangling offer");for(const r of s.media)co.indexOf(r.type)!==-1&&(r.direction?r.direction==="sendrecv"?r.direction="recvonly":r.direction==="recvonly"&&(r.direction="inactive"):r.direction="recvonly")}return Pt.write(s)}_setLocalMediaStatus(){let s=!0,r=!0;(this._localHold||this._remoteHold)&&(s=!1,r=!1),this._audioMuted&&(s=!1),this._videoMuted&&(r=!1),this._toggleMuteAudio(!s),this._toggleMuteVideo(!r)}_handleSessionTimersInIncomingRequest(s,r){if(!this._sessionTimers.enabled)return;let o;s.session_expires&&s.session_expires>=G.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=s.session_expires,o=s.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,o="uas"),r.push(`Session-Expires: ${this._sessionTimers.currentExpires};refresher=${o}`),this._sessionTimers.refresher=o==="uas",this._runSessionTimer()}_handleSessionTimersInIncomingResponse(s){if(!this._sessionTimers.enabled)return;let r;s.session_expires&&s.session_expires>=G.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=s.session_expires,r=s.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,r="uac"),this._sessionTimers.refresher=r==="uac",this._runSessionTimer()}_runSessionTimer(){const s=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout(()=>{this._status!==te.STATUS_TERMINATED&&this._isReadyToReOffer()&&(Z.debug("runSessionTimer() | sending session refresh request"),this._sessionTimers.refreshMethod===G.UPDATE?this._sendUpdate():this._sendReinvite())},s*500):this._sessionTimers.timer=setTimeout(()=>{this._status!==te.STATUS_TERMINATED&&(Z.warn("runSessionTimer() | timer expired, terminating the session"),this.terminate({cause:G.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))},s*1100)}_toggleMuteAudio(s){const r=this._connection.getSenders().filter(o=>o.track&&o.track.kind==="audio");for(const o of r)o.track.enabled=!s}_toggleMuteVideo(s){const r=this._connection.getSenders().filter(o=>o.track&&o.track.kind==="video");for(const o of r)o.track.enabled=!s}_newJanusSession(s,r){Z.debug("newRTCSession()"),this._ua.newJanusSession(this,{originator:s,session:this,request:r})}_connecting(s){Z.debug("session connecting"),Z.debug('emit "connecting"'),this.emit("connecting",{request:s})}_progress(s,r){Z.debug("session progress"),Z.debug('emit "progress"'),this.emit("progress",{originator:s,response:r||null})}_accepted(s,r){Z.debug("session accepted"),this._start_time=new Date,Z.debug('emit "accepted"'),this.emit("accepted",{originator:s,response:r||null})}_confirmed(s,r){Z.debug("session confirmed"),this._is_confirmed=!0,Z.debug('emit "confirmed"'),this.emit("confirmed",{originator:s,ack:r||null})}_ended(s,r,o){Z.debug("session ended"),this._end_time=new Date,this._close(),Z.debug('emit "ended"'),this.emit("ended",{originator:s,message:r||null,cause:o})}_failed(s,r,o){Z.debug("session failed"),Z.debug('emit "_failed"'),this.emit("_failed",{originator:s,message:r||null,cause:o}),this._close(),Z.debug('emit "failed"'),this.emit("failed",{originator:s,message:r||null,cause:o})}_onhold(s){Z.debug("session onhold"),this._setLocalMediaStatus(),Z.debug('emit "hold"'),this.emit("hold",{originator:s})}_onunhold(s){Z.debug("session onunhold"),this._setLocalMediaStatus(),Z.debug('emit "unhold"'),this.emit("unhold",{originator:s})}_onmute({audio:s,video:r}){Z.debug("session onmute"),this._setLocalMediaStatus(),Z.debug('emit "muted"'),this.emit("muted",{audio:s,video:r})}_onunmute({audio:s,video:r}){Z.debug("session onunmute"),this._setLocalMediaStatus(),Z.debug('emit "unmuted"'),this.emit("unmuted",{audio:s,video:r})}}class cr{constructor(s){if(this.headers={},s.length>0){let r=!1;const o=s.split(`\r
`),a=o.shift().split(/\s/);this.protocol=a[0],this.ident=a[1],this.code=a.length>3?parseInt(a[2]):0,this.method=a.length>3?a[3]:a[2],this.body="";for(const t of o){if(t==`-------${this.ident}$`)break;if(t===""){r=!0;continue}if(t&&r)this.body+=`${t}\r
`;else{const n=t.split(": ");this.addHeader(n[0],n[1].trim())}}}else this.ident=ke.createRandomToken(12),this.protocol="MSRP"}addHeader(s,r){this.headers[s]=r}getHeader(s){return this.headers[s]}toString(){let s=`${this.protocol} ${this.ident} ${this.code} ${this.method}`.replaceAll(/null\s|undefined\s/ig,"")+`\r
`;for(const r in this.headers)s+=`${r}: ${this.headers[r]}\r
`;return this.body&&(s+=`\r
${this.body}\r
`),s+=`-------${this.ident}$\r
`,s}}const Re={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9};class nu extends dt.EventEmitter{constructor(s){super(),this._id=null,this.my_ip="127.0.0.1",this._ua=s,this.auth_id=ke.createRandomToken(10),this._status=Re.STATUS_NULL,this._dialog=null,this._earlyDialogs={},this._contact=null,this._from_tag=null,this._to_tag=null,this._msgHistory=[],this.target_addr=[],this.my_addr=[],this.credentials={username:s._configuration.authorization_user,ha1:s._configuration.ha1,realm:s._configuration.realm},this._request=null,this.status="new",this.target="",this.message="",this._connectionPromiseQueue=Promise.resolve(),this._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},this._direction=null,this._local_identity=null,this._remote_identity=null,this._start_time=null,this._end_time=null,this._tones=null,this._sessionTimers={enabled:this._ua.configuration.session_timers,refreshMethod:this._ua.configuration.session_timers_refresh_method,defaultExpires:G.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},this._msrpKeepAliveTimer=null}static get C(){return Re}get direction(){return this._direction}get connection(){return this._connection}get id(){return this._id}connect(s=""){s!==""&&(this._direction="outgoing"),this.target=s,this._connection=new WebSocket(`wss://${this._ua._configuration.realm}`,"msrp"),this._connection.binaryType="arraybuffer",this._connection.onopen=r=>{console.log("open",r),this.onopen()},this._connection.onclose=r=>{console.log("close",r),this.onclose()},this._connection.onmessage=r=>{console.log("msg",r),this.onmessage(r)},this._connection.onerror=r=>{console.log("error",r),this.onerror()}}_sendKeepAlive(){const s=new cr("");s.method="SEND",s.addHeader("To-Path",`${this.my_addr[1]}`),s.addHeader("From-Path",`${this.my_addr[0]}`),s.addHeader("Message-ID",ke.createRandomToken(10)),this._connection.send(s.toString())}answer(){if(!this._createDialog(this._request,"UAS")){this._request.reply(500,"Error creating dialog");return}this._status=Re.STATUS_ANSWERED,clearTimeout(this._timers.userNoAnswerTimer),this.connect()}acceptParty(s){this._request.parseSDP(!0),this._request.reply(200,"OK",[],`v=0
o=- 4232740119537112802 2 IN IP4 ${this.my_ip}
c=IN IP4 ${this.my_ip}
t=0 0
m=message 2856 TCP/TLS/MSRP *
a=accept-types:text/plain text/html
a=path: ${s.getHeader("Use-Path")} msrp://${this._ua._configuration.authorization_user}.${this._ua._configuration.realm}:2856/${this.auth_id};ws
`)}inviteParty(s){const r={},o=[];r.to_uri=new Ji("sip",this.target,this._ua._configuration.realm),r.from_uri=new Ji("sip",this._ua._configuration.uri.user,this._ua._configuration.uri.host),o.push(`Contact: ${this._ua.contact.toString({outbound:!0})}`),o.push("Content-Type: application/sdp"),this._request=new kt.InitialOutgoingInviteRequest(new Ji("sip",this.target,this._ua._configuration.realm).clone(),this._ua,r,o,`v=0
o=- 4232740119537112802 2 IN IP4 ${this.my_ip}
c=IN IP4 ${this.my_ip}
t=0 0
m=message 2856 TCP/TLS/MSRP *
a=accept-types:text/plain text/html
a=path:${s.getHeader("Use-Path")} msrp://${this._ua._configuration.authorization_user}.${this._ua._configuration.realm}:2856/${this.auth_id};ws
`),this._newMSRPSession("local",this._request),this._id=this._request.call_id+this._from_tag,console.log("dialog be",this._dialog),new bd(this._ua,this._request,{onRequestTimeout:()=>{this.onRequestTimeout(),console.log("to")},onTransportError:t=>{this.onTransportError(),console.log(t)},onAuthenticated:t=>{this._request=t},onReceiveResponse:t=>{this._receiveInviteResponse(t),console.log("dialog af",this._dialog),t.status_code===200&&(t.parseSDP(!0),this._status=Re.STATUS_CONFIRMED,this.target_addr=t.sdp.media[0].invalid[1].value.replaceAll("path:","").split(" ").reverse(),this.status="active",this.emit("active"),this.emit("confirmed"))}}).send(),this._status=Re.STATUS_INVITE_SENT}terminate(s={}){console.log("terminate",this);const r=s.cause||G.causes.BYE,o=ke.cloneArray(s.extraHeaders),a=s.body;let t,n=s.status_code,p=s.reason_phrase;if(this._status===Re.STATUS_TERMINATED)throw new yn.InvalidStateError(this._status);switch(this.status="terminated",this._status){case Re.STATUS_NULL:case Re.STATUS_INVITE_SENT:case Re.STATUS_1XX_RECEIVED:if(n&&(n<200||n>=700))throw new TypeError(`Invalid status_code: ${n}`);n&&(p=p||G.REASON_PHRASE[n]||"",t=`SIP ;cause=${n} ;text="${p}"`),this._status===Re.STATUS_NULL||this._status===Re.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=t):this._status===Re.STATUS_1XX_RECEIVED&&this._request.cancel(t),this._status=Re.STATUS_CANCELED,console.log("failed 1"),this._failed("local",null,G.causes.CANCELED);break;case Re.STATUS_WAITING_FOR_ANSWER:case Re.STATUS_ANSWERED:if(n=n||480,console.log("REPLY 480"),n<300||n>=700)throw new TypeError(`Invalid status_code: ${n}`);this._request.reply(n,p,o,a),console.log("failed 2"),this._failed("local",null,G.causes.REJECTED);break;case Re.STATUS_WAITING_FOR_ACK:case Re.STATUS_CONFIRMED:if(p=s.reason_phrase||G.REASON_PHRASE[n]||"",n&&(n<200||n>=700))throw new TypeError(`Invalid status_code: ${n}`);if(n&&o.push(`Reason: SIP ;cause=${n}; text="${p}"`),this._status===Re.STATUS_WAITING_FOR_ACK&&this._direction==="incoming"&&this._request.server_transaction.state!==Gt.C.STATUS_TERMINATED){const d=this._dialog;this.receiveRequest=({method:h})=>{h===G.ACK&&(this.sendRequest(G.BYE,{extraHeaders:o,body:a}),d.terminate())},this._request.server_transaction.on("stateChanged",()=>{this._request.server_transaction.state===Gt.C.STATUS_TERMINATED&&(this.sendRequest(G.BYE,{extraHeaders:o,body:a}),d.terminate())}),this._ended("local",null,r),this._dialog=d,this._ua.newDialog(d)}else console.log("here it is"),this.sendRequest(G.BYE,{extraHeaders:o,body:a}),this._ended("local",null,r)}}sendRequest(s,r){return this._dialog.sendRequest(s,r)}authenticate(s){this.status="auth";let r=new cr("");r.method="AUTH",r.addHeader("To-Path",`msrp://${this._ua._configuration.realm}:2856;ws`),r.addHeader("From-Path",`msrp://${this.credentials.username}.${this.credentials.realm}:2856/${this.auth_id};ws`),s&&r.addHeader("Authorization",s.toString());let o=r.toString();console.log(o);let a=[];for(var t=0;t<o.length;t++)a.push(o.charCodeAt(t).toString(16));console.log(a),this._connection.send(r.toString())}onmessage(s){console.log("onmessage",s);const r=new cr(s.data);if(this.status==="auth"&&r.code===401){const o=this.parseAuth(r.getHeader("WWW-Authenticate")),a=new ag(this.credentials);a.authenticate({method:"AUTH",ruri:`msrp://${this._ua._configuration.realm}:2856;ws`,body:null},o,ke.createRandomToken(12)),this.authenticate(a)}this.status==="auth"&&r.code===200&&this._direction==="outgoing"?(this.my_addr.push(r.getHeader("To-Path")),this.my_addr.push(r.getHeader("Use-Path")),this.status="active",this.inviteParty(r)):this.status==="auth"&&r.code===200&&this._direction==="incoming"?(this.my_addr.push(r.getHeader("To-Path")),this.my_addr.push(r.getHeader("Use-Path")),this.status="active",this.acceptParty(r),this.emit("confirmed")):r.method==="SEND"&&(this._sendOk(r),this._sendReport(r),r.direction="incoming",this.emit("newMessage",r),this._msgHistory.push(r),this.emit("msgHistoryUpdate",this._msgHistory),console.log("======================================================================")),r.code===480&&this._close()}onclose(){console.log("close")}onopen(){const s=new RTCPeerConnection({iceServers:[]});s.createDataChannel(""),s.createOffer().then(s.setLocalDescription.bind(s)),s.onicecandidate=r=>{if(!r||!r.candidate||!r.candidate.candidate)return;const o=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,a=r.candidate.candidate.match(o);this.my_ip=a&&a[1],s.onicecandidate=()=>{},this.authenticate(null)}}onerror(s){console.log(s)}_receiveInviteResponse(s){if(console.log("resp0000000000000",s),this._dialog&&s.status_code>=200&&s.status_code<=299)if(console.log("200000000000000"),this._dialog.id.call_id===s.call_id&&this._dialog.id.local_tag===s.from_tag&&this._dialog.id.remote_tag===s.to_tag){this.sendRequest(G.ACK);return}else{const r=new to(this,s,"UAC");if(r.error!==void 0){console.log(r.error);return}this.sendRequest(G.ACK),this.sendRequest(G.BYE);return}if(this._is_canceled){s.status_code>=100&&s.status_code<200?this._request.cancel(this._cancel_reason):s.status_code>=200&&s.status_code<299&&this._acceptAndTerminate(s);return}if(!(this._status!==Re.STATUS_INVITE_SENT&&this._status!==Re.STATUS_1XX_RECEIVED))switch(console.log("start Switch"),!0){case/^100$/.test(s.status_code):this._status=Re.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(s.status_code):{if(!s.to_tag){console.log("1xx response received without to tag");break}if(s.hasHeader("contact")&&!this._createDialog(s,"UAC",!0))break;if(this._status=Re.STATUS_1XX_RECEIVED,!s.body){this._progress("remote",s);break}const r={originator:"remote",type:"answer",sdp:s.body};console.log('emit "sdp"'),this.emit("sdp",r);const o=new RTCSessionDescription({type:"answer",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription(o)).then(()=>this._progress("remote",s)).catch(a=>{console.log('emit "peerconnection:setremotedescriptionfailed" [error:%o]',a),this.emit("peerconnection:setremotedescriptionfailed",a)});break}case/^2[0-9]{2}$/.test(s.status_code):{if(console.log("maybe here???"),this._status=Re.STATUS_CONFIRMED,!s.body){this._acceptAndTerminate(s,400,G.causes.MISSING_SDP),console.log("failed 3"),this._failed("remote",s,G.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(s,"UAC"))break;const r={originator:"remote",type:"answer",sdp:s.body};console.log('emit "sdp"'),this.emit("sdp",r),new RTCSessionDescription({type:"answer",sdp:r.sdp}),this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>{if(this._connection.signalingState==="stable")return this._connection.createOffer(this._rtcOfferConstraints).then(o=>this._connection.setLocalDescription(o)).catch(o=>{this._acceptAndTerminate(s,500,o.toString()),console.log("failed 4"),this._failed("local",s,G.causes.WEBRTC_ERROR)})}).then(()=>{this._handleSessionTimersInIncomingResponse(s),this._accepted("remote",s),this.sendRequest(G.ACK),this._confirmed("local",null)});break}default:{const r=ke.sipErrorCause(s.status_code);console.log("failed 5"),this._failed("remote",s,r)}}}sendMSRP(s){const r=new cr("");r.method="SEND",r.addHeader("To-Path",`${this.my_addr[1]} ${this.target_addr[1]} ${this.target_addr[0]}`),r.addHeader("From-Path",`${this.my_addr[0]}`),r.addHeader("Message-ID",ke.createRandomToken(10)),r.addHeader("Byte-Range","1-25/25"),r.addHeader("Content-Type","text/plain"),r.addHeader("Success-Report","yes"),r.addHeader("Failure-Report","yes"),r.body=s;let o=r.toString();console.log(o);let a=[];for(var t=0;t<o.length;t++)a.push(o.charCodeAt(t).toString(16));console.log(a),this._connection.send(r.toString()),r.direction="outgoing",this.emit("newMessage",r),this._msgHistory.push(r),this.emit("msgHistoryUpdate",this._msgHistory)}_sendOk(s){let r=s.ident,o=s.getHeader("Message-ID"),a=new cr("");a.method="200 OK",a.addHeader("To-Path",`${this.my_addr[1]}`),a.addHeader("From-Path",`${this.my_addr[0]}`),a.addHeader("Message-ID",o),a.ident=r;let t=a.toString();console.log(t);let n=[];for(var p=0;p<t.length;p++)n.push(t.charCodeAt(p).toString(16));console.log(n),this._connection.send(a.toString())}_sendReport(s){let r=s.ident,o=s.getHeader("Message-ID"),a=new cr("");a.method="REPORT",a.addHeader("To-Path",`${s.getHeader("From-Path")}`),a.addHeader("From-Path",`${this.my_addr[0]}`),a.addHeader("Message-ID",o),a.addHeader("Byte-Range","1-25/25"),a.addHeader("Status","000 200 OK"),a.ident=r;let t=a.toString();console.log(t);let n=[];for(var p=0;p<t.length;p++)n.push(t.charCodeAt(p).toString(16));console.log(n),this._connection.send(a.toString())}parseAuth(s){const r={},o=s.replace("Digest","").split(",");for(const a of o){const t=a.trim().split("=");r[t[0]]=t[1].match('^"(.+)"$')[1]}return r}init_incoming(s,r){let o;const a=s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0;if(s.body&&a!=="application/sdp"){s.reply(415);return}if(this._status=Re.STATUS_INVITE_RECEIVED,this._from_tag=s.from_tag,this._id=s.call_id+this._from_tag,this._request=s,this._contact=this._ua.contact.toString(),s.hasHeader("expires")&&(o=s.getHeader("expires")*1e3),s.to_tag=ke.newTag(),!this._createDialog(s,"UAS",!0)){s.reply(500,"Missing Contact header field");return}s.body?this._late_sdp=!1:this._late_sdp=!0,this._status=Re.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout(()=>{s.reply(408),console.log("failed 6"),this._failed("local",null,G.causes.NO_ANSWER)},this._ua.configuration.no_answer_timeout),o&&(this._timers.expiresTimer=setTimeout(()=>{this._status===Re.STATUS_WAITING_FOR_ANSWER&&(s.reply(487),console.log("failed 7"),this._failed("system",null,G.causes.EXPIRES))},o)),this._direction="incoming",this._local_identity=s.to,this._remote_identity=s.from,r&&r(this),s.parseSDP(!0),this.target_addr=s.sdp.media[0].invalid[1].value.replaceAll("path:","").split(" ").reverse(),this._newMSRPSession("remote",s),this._status!==Re.STATUS_TERMINATED&&(s.reply(180,null,[`Contact: ${this._ua._contact}`]),this._progress("local",null))}_failed(s,r,o){this.emit("_failed",{originator:s,message:r||null,cause:o}),this._close(),this.emit("failed",{originator:s,message:r||null,cause:o})}_close(){if(console.log("CLOSE SESSION"),this._status!==Re.STATUS_TERMINATED){if(this._status=Re.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(s){console.log("close() | error closing the RTCPeerConnection: %o",s)}for(const s in this._timers)Object.prototype.hasOwnProperty.call(this._timers,s)&&clearTimeout(this._timers[s]);clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog);for(const s in this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,s)&&(this._earlyDialogs[s].terminate(),delete this._earlyDialogs[s]);for(const s in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,s)&&delete this._referSubscribers[s];this._ua.destroyMSRPSession(this)}}_createDialog(s,r,o){const a=r==="UAS"?s.to_tag:s.from_tag,t=r==="UAS"?s.from_tag:s.to_tag,n=s.call_id+a+t;let p=this._earlyDialogs[n];if(o)return p?!0:(p=new to(this,s,r,to.C.STATUS_EARLY),p.error?(console.log("failed 8"),this._failed("remote",s,G.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[n]=p,!0));{if(this._from_tag=s.from_tag,this._to_tag=s.to_tag,p)return p.update(s,r),this._dialog=p,delete this._earlyDialogs[n],!0;const d=new to(this,s,r);return d.error?(console.log("failed 9"),this._failed("remote",s,G.causes.INTERNAL_ERROR),!1):(this._dialog=d,!0)}}_newMSRPSession(s,r){this._ua.newMSRPSession(this,{originator:s,session:this,request:r})}_progress(s,r){this.emit("progress",{originator:s,response:r||null})}isEnded(){switch(this._status){case Re.STATUS_CANCELED:case Re.STATUS_TERMINATED:return!0;default:return!1}}_accepted(s,r){console.log("session accepted"),this._start_time=new Date,console.log('emit "accepted"'),this.emit("accepted",{originator:s,response:r||null})}_confirmed(s,r){console.log("session confirmed"),this._is_confirmed=!0,console.log('emit "confirmed"'),this.emit("confirmed",{originator:s,ack:r||null})}_ended(s,r,o){console.log("session ended"),this._end_time=new Date,this._close(),console.log('emit "ended"'),this.emit("ended",{originator:s,message:r||null,cause:o})}_handleSessionTimersInIncomingResponse(s){if(!this._sessionTimers.enabled)return;let r;s.session_expires&&s.session_expires>=G.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=s.session_expires,r=s.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,r="uac"),this._sessionTimers.refresher=r==="uac",this._runSessionTimer()}receiveRequest(s){if(console.log("receiveRequest()"),s.method===G.CANCEL)(this._status===Re.STATUS_WAITING_FOR_ANSWER||this._status===Re.STATUS_ANSWERED)&&(this._status=Re.STATUS_CANCELED,this._request.reply(487),console.log("failed 10"),this._failed("remote",s,G.causes.CANCELED));else switch(s.method){case G.ACK:if(this._status!==Re.STATUS_WAITING_FOR_ACK)return;if(this._status=Re.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!s.body){this.terminate({cause:G.causes.MISSING_SDP,status_code:400});break}const r={originator:"remote",type:"answer",sdp:s.body};console.log('emit "sdp"'),this.emit("sdp",r);const o=new RTCSessionDescription({type:"answer",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(()=>this._connection.setRemoteDescription(o)).then(()=>{this._is_confirmed||this._confirmed("remote",s)}).catch(a=>{this.terminate({cause:G.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),console.log('emit "peerconnection:setremotedescriptionfailed" [error:%o]',a),this.emit("peerconnection:setremotedescriptionfailed",a)})}else this._is_confirmed||this._confirmed("remote",s);break;case G.BYE:this._status===Re.STATUS_CONFIRMED||this._status===Re.STATUS_WAITING_FOR_ACK?(s.reply(200),this._ended("remote",s,G.causes.BYE)):this._status===Re.STATUS_INVITE_RECEIVED||this._status===Re.STATUS_WAITING_FOR_ANSWER?(s.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",s,G.causes.BYE)):s.reply(403,"Wrong Status");break;case G.INVITE:this._status===Re.STATUS_CONFIRMED?s.hasHeader("replaces")?this._receiveReplaces(s):this._receiveReinvite(s):s.reply(403,"Wrong Status");break;case G.INFO:this._status===Re.STATUS_1XX_RECEIVED||this._status===Re.STATUS_WAITING_FOR_ANSWER||this._status===Re.STATUS_ANSWERED||this._status===Re.STATUS_WAITING_FOR_ACK||this._status===Re.STATUS_CONFIRMED?(s.hasHeader("Content-Type")?s.getHeader("Content-Type").toLowerCase():void 0)!==void 0?new Ou(this).init_incoming(s):s.reply(415):s.reply(403,"Wrong Status");break;case G.UPDATE:this._status===Re.STATUS_CONFIRMED?this._receiveUpdate(s):s.reply(403,"Wrong Status");break;case G.REFER:this._status===Re.STATUS_CONFIRMED?this._receiveRefer(s):s.reply(403,"Wrong Status");break;case G.NOTIFY:this._status===Re.STATUS_CONFIRMED?this._receiveNotify(s):s.reply(403,"Wrong Status");break;default:s.reply(501)}}onTransportError(){console.log("onTransportError()"),this._status!==Re.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:G.causes.CONNECTION_ERROR,cause:G.causes.CONNECTION_ERROR})}onRequestTimeout(){console.log("onRequestTimeout()"),this._status!==Re.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:G.causes.REQUEST_TIMEOUT,cause:G.causes.REQUEST_TIMEOUT})}onDialogError(){console.log("onDialogError()"),this._status!==Re.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:G.causes.DIALOG_ERROR,cause:G.causes.DIALOG_ERROR})}}const Ut=console,Hf={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2},WT=qT;class KT extends WT{constructor(s){super(s),this._msrp_sessions=[],this._transactions={nist:{},nict:{},ist:{},ict:{}},this._janus_sessions=[]}call(s,r){return super.call(s,r)}joinVideoCall(s,r){Ut.debug("call()");const o=new $o(this);return o.connect(s,r),o}newMSRPSession(s,r){s.on("msgHistoryUpdate",o=>{console.log(o)}),this._msrp_sessions[s.id]=s,this.emit("newMSRPSession",r)}newJanusSession(s,r){this._janus_sessions[s.id]=s,this.emit("newJanusSession",r)}destroyMSRPSession(s){delete this._msrp_sessions[s.id]}destroyJanusSession(s){delete this._janus_sessions[s.id]}receiveRequest(s){const r=s.method;if(console.log("-----------"),s.ruri.user!==this._configuration.uri.user&&s.ruri.user!==this._contact.uri.user){Ut.debug("Request-URI does not point to us"),s.method!==Pe.ACK&&s.reply_sl(404);return}if(s.ruri.scheme===Pe.SIPS){s.reply_sl(416);return}if(Gt.checkTransaction(this,s))return;if(r===Pe.INVITE?new Gt.InviteServerTransaction(this,this._transport,s):r!==Pe.ACK&&r!==Pe.CANCEL&&new Gt.NonInviteServerTransaction(this,this._transport,s),r===Pe.OPTIONS){if(this.listeners("newOptions").length===0){s.reply(200);return}new uf.Options(this).init_incoming(s)}else if(r===Pe.MESSAGE){if(this.listeners("newMessage").length===0){s.reply(405);return}new uf.Message(this).init_incoming(s)}else if(r===Pe.INVITE&&!s.to_tag&&this.listeners("newRTCSession").length===0){s.reply(405);return}let o,a;if(s.to_tag)o=this._findDialog(s.call_id,s.from_tag,s.to_tag),o?o.receiveRequest(s):r===Pe.NOTIFY?(a=this._findSession(s),a?a.receiveRequest(s):(Ut.debug("received NOTIFY request for a non existent subscription"),s.reply(481,"Subscription does not exist"))):r!==Pe.ACK&&s.reply(481);else switch(r){case Pe.INVITE:if(window.RTCPeerConnection)if(s.hasHeader("replaces")){const t=s.replaces;o=this._findDialog(t.call_id,t.from_tag,t.to_tag),o?(a=o.owner,a.isEnded()?s.reply(603):a.receiveRequest(s)):s.reply(481)}else s.body.search(/MSRP/ig)>-1?(a=new nu(this),a.init_incoming(s)):s.body.search(/JANUS/ig)>-1||(a=new Zg(this),a.init_incoming(s));else Ut.warn("INVITE received but WebRTC is not supported"),s.reply(488);break;case Pe.BYE:s.reply(481);break;case Pe.CANCEL:a=this._findSession(s),a?a.receiveRequest(s):Ut.debug("received CANCEL request for a non existent session");break;case Pe.ACK:break;case Pe.NOTIFY:this.emit("sipEvent",{event:s.event,request:s}),s.reply(200);break;default:s.reply(405);break}}startMSRP(s,r){Ut.debug("startMSRP()",r);const o=new nu(this);return o.connect(s),o}startJanus(s,r){Ut.debug("startJanus()",r);const o=new nu(this);return o.connect(s),o}terminateMSRPSessions(s){Ut.debug("terminateSessions()");for(const r in this._msrp_sessions)this._msrp_sessions[r].isEnded()||this._msrp_sessions[r].terminate(s)}terminateJanusSessions(s){Ut.debug("terminateSessions()");for(const r in this._janus_sessions)this._janus_sessions[r].isEnded()||this._janus_sessions[r].terminate(s)}stop(){if(Ut.debug("stop()"),this._dynConfiguration={},this._status===Hf.STATUS_USER_CLOSED){Ut.debug("UA already closed");return}this._registrator.close();const s=Object.keys(this._sessions).length;for(const o in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,o)){Ut.debug(`closing session ${o}`);try{this._sessions[o].terminate()}catch(a){console.error(a)}}for(const o in this._msrp_sessions)if(Object.prototype.hasOwnProperty.call(this._msrp_sessions,o)){Ut.debug(`closing session ${o}`);try{this._msrp_sessions[o].terminate()}catch(a){console.error(a)}}for(const o in this._janus_sessions)if(Object.prototype.hasOwnProperty.call(this._janus_sessions,o)){Ut.debug(`closing session ${o}`);try{this._janus_sessions[o].terminate()}catch(a){console.error(a)}}for(const o in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,o))try{this._applicants[o].close()}catch(a){console.error(a)}this._status=Hf.STATUS_USER_CLOSED,Object.keys(this._transactions.nict).length+Object.keys(this._transactions.nist).length+Object.keys(this._transactions.ict).length+Object.keys(this._transactions.ist).length===0&&s===0?this._transport.disconnect():this._closeTimer=setTimeout(()=>{this._closeTimer=null,this._transport.disconnect()},2e3)}}const YT=["roomId","_audioMuted","_cancel_reason","_contact","direction","_end_time","_eventsCount","_from_tag","_id","_is_canceled","_is_confirmed","_late_sdp","_localHold","_videoMuted","status","start_time","_remote_identity","audioTag","isOnHold","localMuted","autoAnswer"],zT=["_cancel_reason","_contact","direction","_end_time","_eventsCount","_from_tag","_id","_is_canceled","_is_confirmed","_late_sdp","status","start_time","_remote_identity","target_addr"];function Ff(c){const s={};return YT.forEach(r=>{c[r]!==void 0&&(s[r]=c[r])}),s.localHold=c._localHold,s}function jf(c){const s={};return zT.forEach(r=>{c[r]!==void 0&&(s[r]=c[r])}),s}function Vf(c,s){const r=new AudioContext,o=r.createMediaStreamSource(c),a=r.createMediaStreamDestination(),t=r.createGain();return o.connect(t),t.connect(a),t.gain.value=s,a.stream}function JT(c,s,r,o){const a=document.createElement("audio");a.id=s._id,a.className="audioTag",a.srcObject=c,a.setSinkId(r),a.volume=o,a.play(),s.audioTag=a}function XT(c){if(c&&typeof c.log=="function"&&typeof c.warn=="function"&&typeof c.error=="function")return!0}const QT=ct,ZT=cs(),Ot=new QT("WebSocketInterface");var ev=class{constructor(s){Ot.debug('new() [url:"%s"]',s),this._url=s,this._sip_uri=null,this._via_transport=null,this._ws=null;const r=ZT.parse(s,"absoluteURI");if(r===-1)throw Ot.warn(`invalid WebSocket URI: ${s}`),new TypeError(`Invalid argument: ${s}`);if(r.scheme!=="wss"&&r.scheme!=="ws")throw Ot.warn(`invalid WebSocket URI scheme: ${r.scheme}`),new TypeError(`Invalid argument: ${s}`);this._sip_uri=`sip:${r.host}${r.port?`:${r.port}`:""};transport=ws`,this._via_transport=r.scheme.toUpperCase()}get via_transport(){return this._via_transport}set via_transport(s){this._via_transport=s.toUpperCase()}get sip_uri(){return this._sip_uri}get url(){return this._url}connect(){if(Ot.debug("connect()"),this.isConnected()){Ot.debug(`WebSocket ${this._url} is already connected`);return}else if(this.isConnecting()){Ot.debug(`WebSocket ${this._url} is connecting`);return}this._ws&&this.disconnect(),Ot.debug(`connecting to WebSocket ${this._url}`);try{this._ws=new WebSocket(this._url,"sip"),this._ws.binaryType="arraybuffer",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(s){this._onError(s)}}disconnect(){Ot.debug("disconnect()"),this._ws&&(this._ws.onopen=()=>{},this._ws.onclose=()=>{},this._ws.onmessage=()=>{},this._ws.onerror=()=>{},this._ws.close(),this._ws=null)}send(s){return Ot.debug("send()"),this.isConnected()?(this._ws.send(s),!0):(Ot.warn("unable to send message, WebSocket is not open"),!1)}isConnected(){return this._ws&&this._ws.readyState===this._ws.OPEN}isConnecting(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}_onOpen(){Ot.debug(`WebSocket ${this._url} connected`),this.onconnect()}_onClose({wasClean:s,code:r,reason:o}){Ot.debug(`WebSocket ${this._url} closed`),s===!1&&Ot.debug("WebSocket abrupt disconnection"),this.ondisconnect(!s,r,o)}_onMessage({data:s}){Ot.debug("received WebSocket message"),this.ondata(s)}_onError(s){Ot.warn(`WebSocket ${this._url} error: `,s)}};const Pu=jo,tv=Pe,sv=Rs,nv=yt(),rv=Hd,iv=Cs(),lv=Ku(),ov=cs(),av=ev,uv=mr("JsSIP");uv("version %s",Pu.version);var cv={C:tv,Exceptions:sv,Utils:nv,UA:rv,URI:iv,NameAddrHeader:lv,WebSocketInterface:av,Grammar:ov,debug:mr,get name(){return Pu.title},get version(){return Pu.version}};const fv=ut(cv);function ru(c){return c<10?`0${c}`:`${c}`}function dv(c){let s=c.hours||0,r=c.minutes||0,o=c.seconds||0;o++,o===60&&(o=0,r++,r===60&&(r=0,s++));const a=`${ru(s)}:${ru(r)}:${ru(o)}`;return{seconds:o,minutes:r,hours:s,formatted:a}}var At={};At.forEach=async(c,s,r)=>{const o=[];for(let a=0;a<c.length;a++)if(a in c){const t=Promise.resolve(c[a]).then(n=>s.call(r||globalThis,n,a,c));o.push(t)}await Promise.all(o)};At.forEachSeries=async(c,s,r)=>{for(let o=0;o<c.length;o++)o in c&&await s.call(r||globalThis,await c[o],o,c)};At.map=async(c,s,r)=>{const o=[];for(let a=0;a<c.length;a++)a in c&&(o[a]=Promise.resolve(c[a]).then(t=>s.call(r||globalThis,t,a,c)));return Promise.all(o)};At.mapSeries=async(c,s,r)=>{const o=[];for(let a=0;a<c.length;a++)a in c&&(o[a]=await s.call(r||globalThis,await c[a],a,c));return o};At.find=(c,s,r)=>new Promise((o,a)=>{if(c.length===0)return o();let t=1;for(let n=0;n<c.length;n++){const p=d=>{d?o(c[n]):t===c.length&&o(),t++};Promise.resolve(c[n]).then(d=>s.call(r||globalThis,d,n,c)).then(p).catch(a)}});At.findSeries=async(c,s,r)=>{for(let o=0;o<c.length;o++)if(await s.call(r||globalThis,await c[o],o,c))return c[o]};At.findIndex=(c,s,r)=>new Promise((o,a)=>{if(c.length===0)return o(-1);let t=1;for(let n=0;n<c.length;n++){const p=d=>{d?o(n):t===c.length&&o(-1),t++};Promise.resolve(c[n]).then(d=>s.call(r||globalThis,d,n,c)).then(p).catch(a)}});At.findIndexSeries=async(c,s,r)=>{for(let o=0;o<c.length;o++)if(await s.call(r||globalThis,await c[o],o,c))return o};At.some=(c,s,r)=>new Promise((o,a)=>{if(c.length===0)return o(!1);let t=1;for(let n=0;n<c.length;n++){if(!(n in c)){t++;continue}const p=d=>{d?o(!0):t===c.length&&o(!1),t++};Promise.resolve(c[n]).then(d=>s.call(r||globalThis,d,n,c)).then(p).catch(a)}});At.someSeries=async(c,s,r)=>{for(let o=0;o<c.length;o++)if(o in c&&await s.call(r||globalThis,await c[o],o,c))return!0;return!1};At.every=(c,s,r)=>new Promise((o,a)=>{if(c.length===0)return o(!0);let t=1;for(let n=0;n<c.length;n++){if(!(n in c)){t++;continue}const p=d=>{d?t===c.length&&o(!0):o(!1),t++};Promise.resolve(c[n]).then(d=>s.call(r||globalThis,d,n,c)).then(p).catch(a)}});At.everySeries=async(c,s,r)=>{for(let o=0;o<c.length;o++)if(o in c&&!await s.call(r||globalThis,await c[o],o,c))return!1;return!0};At.filter=(c,s,r)=>new Promise(async(o,a)=>{const t=[];for(let p=0;p<c.length;p++)p in c&&(t[p]=Promise.resolve(c[p]).then(d=>s.call(r||globalThis,d,p,c)).catch(a));const n=[];for(let p=0;p<t.length;p++)await t[p]&&n.push(await c[p]);o(n)});At.filterSeries=async(c,s,r)=>{const o=[];for(let a=0;a<c.length;a++)a in c&&await s.call(r||globalThis,await c[a],a,c)&&o.push(await c[a]);return o};At.reduce=async(c,s,r)=>{if(c.length===0&&r===void 0)throw TypeError("Reduce of empty array with no initial value");let o,a;for(r!==void 0?(a=r,o=0):(a=c[0],o=1),o;o<c.length;o++)o in c&&(a=await s(await a,await c[o],o,c));return a};var Fd={};(function(c){const s=At;Object.keys(s).forEach(r=>{const o=r.charAt(0).toUpperCase()+r.slice(1);c[`async${o}`]=async function(...a){return s[r](this,...a)}})})(Fd);const hv=At,_v=Fd;var qf=Object.assign(hv,{instanceMethods:_v});const Xt=new AudioContext,rs={NEW_CALL:"new_call",CALL_CONFIRMED:"confirmed",CALL_FAILED:"failed",CALL_PROGRESS:"progress",CALL_ENDED:"ended"};var pv={exports:{}};(function(c){var s=function(r){var o=Object.prototype,a=o.hasOwnProperty,t=Object.defineProperty||function(ee,W,B){ee[W]=B.value},n,p=typeof Symbol=="function"?Symbol:{},d=p.iterator||"@@iterator",h=p.asyncIterator||"@@asyncIterator",g=p.toStringTag||"@@toStringTag";function T(ee,W,B){return Object.defineProperty(ee,W,{value:B,enumerable:!0,configurable:!0,writable:!0}),ee[W]}try{T({},"")}catch{T=function(W,B,ie){return W[B]=ie}}function E(ee,W,B,ie){var ge=W&&W.prototype instanceof ne?W:ne,be=Object.create(ge.prototype),Me=new P(ie||[]);return t(be,"_invoke",{value:z(ee,B,Me)}),be}r.wrap=E;function S(ee,W,B){try{return{type:"normal",arg:ee.call(W,B)}}catch(ie){return{type:"throw",arg:ie}}}var A="suspendedStart",R="suspendedYield",C="executing",$="completed",L={};function ne(){}function D(){}function F(){}var Se={};T(Se,d,function(){return this});var ve=Object.getPrototypeOf,M=ve&&ve(ve(se([])));M&&M!==o&&a.call(M,d)&&(Se=M);var N=F.prototype=ne.prototype=Object.create(Se);D.prototype=F,t(N,"constructor",{value:F,configurable:!0}),t(F,"constructor",{value:D,configurable:!0}),D.displayName=T(F,g,"GeneratorFunction");function q(ee){["next","throw","return"].forEach(function(W){T(ee,W,function(B){return this._invoke(W,B)})})}r.isGeneratorFunction=function(ee){var W=typeof ee=="function"&&ee.constructor;return W?W===D||(W.displayName||W.name)==="GeneratorFunction":!1},r.mark=function(ee){return Object.setPrototypeOf?Object.setPrototypeOf(ee,F):(ee.__proto__=F,T(ee,g,"GeneratorFunction")),ee.prototype=Object.create(N),ee},r.awrap=function(ee){return{__await:ee}};function V(ee,W){function B(be,Me,Ce,oe){var ye=S(ee[be],ee,Me);if(ye.type==="throw")oe(ye.arg);else{var nt=ye.arg,ot=nt.value;return ot&&typeof ot=="object"&&a.call(ot,"__await")?W.resolve(ot.__await).then(function(Ee){B("next",Ee,Ce,oe)},function(Ee){B("throw",Ee,Ce,oe)}):W.resolve(ot).then(function(Ee){nt.value=Ee,Ce(nt)},function(Ee){return B("throw",Ee,Ce,oe)})}}var ie;function ge(be,Me){function Ce(){return new W(function(oe,ye){B(be,Me,oe,ye)})}return ie=ie?ie.then(Ce,Ce):Ce()}t(this,"_invoke",{value:ge})}q(V.prototype),T(V.prototype,h,function(){return this}),r.AsyncIterator=V,r.async=function(ee,W,B,ie,ge){ge===void 0&&(ge=Promise);var be=new V(E(ee,W,B,ie),ge);return r.isGeneratorFunction(W)?be:be.next().then(function(Me){return Me.done?Me.value:be.next()})};function z(ee,W,B){var ie=A;return function(be,Me){if(ie===C)throw new Error("Generator is already running");if(ie===$){if(be==="throw")throw Me;return st()}for(B.method=be,B.arg=Me;;){var Ce=B.delegate;if(Ce){var oe=H(Ce,B);if(oe){if(oe===L)continue;return oe}}if(B.method==="next")B.sent=B._sent=B.arg;else if(B.method==="throw"){if(ie===A)throw ie=$,B.arg;B.dispatchException(B.arg)}else B.method==="return"&&B.abrupt("return",B.arg);ie=C;var ye=S(ee,W,B);if(ye.type==="normal"){if(ie=B.done?$:R,ye.arg===L)continue;return{value:ye.arg,done:B.done}}else ye.type==="throw"&&(ie=$,B.method="throw",B.arg=ye.arg)}}}function H(ee,W){var B=W.method,ie=ee.iterator[B];if(ie===n)return W.delegate=null,B==="throw"&&ee.iterator.return&&(W.method="return",W.arg=n,H(ee,W),W.method==="throw")||B!=="return"&&(W.method="throw",W.arg=new TypeError("The iterator does not provide a '"+B+"' method")),L;var ge=S(ie,ee.iterator,W.arg);if(ge.type==="throw")return W.method="throw",W.arg=ge.arg,W.delegate=null,L;var be=ge.arg;if(!be)return W.method="throw",W.arg=new TypeError("iterator result is not an object"),W.delegate=null,L;if(be.done)W[ee.resultName]=be.value,W.next=ee.nextLoc,W.method!=="return"&&(W.method="next",W.arg=n);else return be;return W.delegate=null,L}q(N),T(N,g,"Generator"),T(N,d,function(){return this}),T(N,"toString",function(){return"[object Generator]"});function J(ee){var W={tryLoc:ee[0]};1 in ee&&(W.catchLoc=ee[1]),2 in ee&&(W.finallyLoc=ee[2],W.afterLoc=ee[3]),this.tryEntries.push(W)}function U(ee){var W=ee.completion||{};W.type="normal",delete W.arg,ee.completion=W}function P(ee){this.tryEntries=[{tryLoc:"root"}],ee.forEach(J,this),this.reset(!0)}r.keys=function(ee){var W=Object(ee),B=[];for(var ie in W)B.push(ie);return B.reverse(),function ge(){for(;B.length;){var be=B.pop();if(be in W)return ge.value=be,ge.done=!1,ge}return ge.done=!0,ge}};function se(ee){if(ee){var W=ee[d];if(W)return W.call(ee);if(typeof ee.next=="function")return ee;if(!isNaN(ee.length)){var B=-1,ie=function ge(){for(;++B<ee.length;)if(a.call(ee,B))return ge.value=ee[B],ge.done=!1,ge;return ge.value=n,ge.done=!0,ge};return ie.next=ie}}return{next:st}}r.values=se;function st(){return{value:n,done:!0}}return P.prototype={constructor:P,reset:function(ee){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(U),!ee)for(var W in this)W.charAt(0)==="t"&&a.call(this,W)&&!isNaN(+W.slice(1))&&(this[W]=n)},stop:function(){this.done=!0;var ee=this.tryEntries[0],W=ee.completion;if(W.type==="throw")throw W.arg;return this.rval},dispatchException:function(ee){if(this.done)throw ee;var W=this;function B(oe,ye){return be.type="throw",be.arg=ee,W.next=oe,ye&&(W.method="next",W.arg=n),!!ye}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var ge=this.tryEntries[ie],be=ge.completion;if(ge.tryLoc==="root")return B("end");if(ge.tryLoc<=this.prev){var Me=a.call(ge,"catchLoc"),Ce=a.call(ge,"finallyLoc");if(Me&&Ce){if(this.prev<ge.catchLoc)return B(ge.catchLoc,!0);if(this.prev<ge.finallyLoc)return B(ge.finallyLoc)}else if(Me){if(this.prev<ge.catchLoc)return B(ge.catchLoc,!0)}else if(Ce){if(this.prev<ge.finallyLoc)return B(ge.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(ee,W){for(var B=this.tryEntries.length-1;B>=0;--B){var ie=this.tryEntries[B];if(ie.tryLoc<=this.prev&&a.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var ge=ie;break}}ge&&(ee==="break"||ee==="continue")&&ge.tryLoc<=W&&W<=ge.finallyLoc&&(ge=null);var be=ge?ge.completion:{};return be.type=ee,be.arg=W,ge?(this.method="next",this.next=ge.finallyLoc,L):this.complete(be)},complete:function(ee,W){if(ee.type==="throw")throw ee.arg;return ee.type==="break"||ee.type==="continue"?this.next=ee.arg:ee.type==="return"?(this.rval=this.arg=ee.arg,this.method="return",this.next="end"):ee.type==="normal"&&W&&(this.next=W),L},finish:function(ee){for(var W=this.tryEntries.length-1;W>=0;--W){var B=this.tryEntries[W];if(B.finallyLoc===ee)return this.complete(B.completion,B.afterLoc),U(B),L}},catch:function(ee){for(var W=this.tryEntries.length-1;W>=0;--W){var B=this.tryEntries[W];if(B.tryLoc===ee){var ie=B.completion;if(ie.type==="throw"){var ge=ie.arg;U(B)}return ge}}throw new Error("illegal catch attempt")},delegateYield:function(ee,W,B){return this.delegate={iterator:se(ee),resultName:W,nextLoc:B},this.method==="next"&&(this.arg=n),L}},r}(c.exports);try{regeneratorRuntime=s}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}})(pv);var jd={exports:{}};(function(c){(function(s,r){c.exports?c.exports=r():s.log=r()})(sh,function(){var s=function(){},r="undefined",o=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"];function t(R,C){var $=R[C];if(typeof $.bind=="function")return $.bind(R);try{return Function.prototype.bind.call($,R)}catch{return function(){return Function.prototype.apply.apply($,[R,arguments])}}}function n(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function p(R){return R==="debug"&&(R="log"),typeof console===r?!1:R==="trace"&&o?n:console[R]!==void 0?t(console,R):console.log!==void 0?t(console,"log"):s}function d(R,C){for(var $=0;$<a.length;$++){var L=a[$];this[L]=$<R?s:this.methodFactory(L,R,C)}this.log=this.debug}function h(R,C,$){return function(){typeof console!==r&&(d.call(this,C,$),this[R].apply(this,arguments))}}function g(R,C,$){return p(R)||h.apply(this,arguments)}function T(R,C,$){var L=this,ne;C=C??"WARN";var D="loglevel";typeof R=="string"?D+=":"+R:typeof R=="symbol"&&(D=void 0);function F(N){var q=(a[N]||"silent").toUpperCase();if(!(typeof window===r||!D)){try{window.localStorage[D]=q;return}catch{}try{window.document.cookie=encodeURIComponent(D)+"="+q+";"}catch{}}}function Se(){var N;if(!(typeof window===r||!D)){try{N=window.localStorage[D]}catch{}if(typeof N===r)try{var q=window.document.cookie,V=q.indexOf(encodeURIComponent(D)+"=");V!==-1&&(N=/^([^;]+)/.exec(q.slice(V))[1])}catch{}return L.levels[N]===void 0&&(N=void 0),N}}function ve(){if(!(typeof window===r||!D)){try{window.localStorage.removeItem(D);return}catch{}try{window.document.cookie=encodeURIComponent(D)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}L.name=R,L.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},L.methodFactory=$||g,L.getLevel=function(){return ne},L.setLevel=function(N,q){if(typeof N=="string"&&L.levels[N.toUpperCase()]!==void 0&&(N=L.levels[N.toUpperCase()]),typeof N=="number"&&N>=0&&N<=L.levels.SILENT){if(ne=N,q!==!1&&F(N),d.call(L,N,R),typeof console===r&&N<L.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+N},L.setDefaultLevel=function(N){C=N,Se()||L.setLevel(N,!1)},L.resetLevel=function(){L.setLevel(C,!1),ve()},L.enableAll=function(N){L.setLevel(L.levels.TRACE,N)},L.disableAll=function(N){L.setLevel(L.levels.SILENT,N)};var M=Se();M==null&&(M=C),L.setLevel(M,!1)}var E=new T,S={};E.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var $=S[C];return $||($=S[C]=new T(C,E.getLevel(),E.methodFactory)),$};var A=typeof window!==r?window.log:void 0;return E.noConflict=function(){return typeof window!==r&&window.log===E&&(window.log=A),E},E.getLoggers=function(){return S},E.default=E,E})})(jd);var Rt=jd.exports;const Ss=()=>`${new Date().toISOString()} | metrics`,ys=(c,s,r)=>`${c} | ${s} | ${r}`;Rt.setDefaultLevel(Rt.levels.TRACE);const mv=c=>{Rt.info(ys(Ss(),"log         ",`set log level to ${c?"verbose":"info"}`)),Rt.setLevel(c?Rt.levels.TRACE:Rt.levels.INFO)},gv=c=>{const s=[...Object.keys(Rt.levels)];s.includes(c)?(Rt.info(ys(Ss(),"log         ",`update log level to ${c.toLowerCase()}`)),Rt.setLevel(c)):Rt.warn(ys(Ss(),"log         ","Incorrect log level please choose one of "),s)},xe=(c,s,r)=>{r?Rt.debug(ys(Ss(),c,s),r):Rt.debug(ys(Ss(),c,s))},iu=(c,s)=>{Rt.info(ys(Ss(),c,s))},Rn=(c,s)=>{Rt.info(ys(Ss(),c,s))},wo=(c,s)=>{Rt.warn(ys(Ss(),c,s))},hr=(c,s)=>{Rt.error(ys(Ss(),c,s))};function Tv(c){return Math.floor(Math.random()*c).toString()}function Bf(c,s){let r=s;return c.forEach(o=>{r=r.replace(o,"")}),r}function vv(c,s){let r="";for(let o=0;o<s;o+=1)r+=c[Tv(c.length)];return r}function Ev({length:c=20,useLetters:s=!0,useNumbers:r=!0,includeSymbols:o=[],excludeSymbols:a=[]}={}){let t="abcdefghijklmnopqrstuvwxyz",n="0123456789",p=[],d=[],h=[];return s&&(a.length&&(t=Bf(a,t)),d=t.split("")),r&&(a.length&&(n=Bf(a,n)),h=n.split("")),p=[...d,...h,...o],vv(p,c)}var Sv=Ev;const Xi=ut(Sv),yv=()=>"WebRTCMetrics",Av=()=>"5.0.3",He={INBOUND:"inbound",OUTBOUND:"outbound"},vs={IDLE:"idle",RUNNING:"running",MUTED:"muted"},Gi={NEW:"new",CHECKING:"checking",CONNECTED:"connected",COMPLETED:"completed",DISCONNECTED:"disconnected",FAILED:"failed",CLOSED:"closed"},Cv=()=>({...{delta_time_to_measure_probes_ms:0,delta_time_consumed_to_measure_ms:0,delta_KBytes_in:0,delta_KBytes_out:0,delta_kbs_in:0,delta_kbs_out:0,total_time_decoded_in:0,total_time_encoded_out:0,probes:[]}}),Vd={level_in:0,codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,mos_in:0,mos_emodel_in:0,ssrc:"",direction:He.INBOUND},qd={level_out:0,codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,total_rtt_ms_out:0,total_rtt_measure_out:0,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,mos_out:0,mos_emodel_out:0,ssrc:"",direction:He.OUTBOUND},Bd={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,decoder_in:null,delta_ms_decode_frame_in:0,total_frames_decoded_in:0,total_time_decoded_in:0,delta_nack_sent_in:0,delta_pli_sent_in:0,total_nack_sent_in:0,total_pli_sent_in:0,ssrc:"",direction:He.INBOUND},Gd={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,total_rtt_ms_out:0,total_rtt_measure_out:0,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,encoder_out:null,delta_ms_encode_frame_out:0,total_time_encoded_out:0,total_frames_encoded_out:0,delta_nack_received_out:0,delta_pli_received_out:0,total_nack_received_out:0,total_pli_received_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:He.OUTBOUND},Rv=c=>{const s={pname:"",call_id:"",user_id:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3,local_candidate_id:"",local_candidate_type:"",local_candidate_protocol:"",local_candidate_relay_protocol:"",remote_candidate_id:"",remote_candidate_type:"",remote_candidate_protocol:""},data:{total_KBytes_in:0,total_KBytes_out:0,delta_KBytes_in:0,delta_KBytes_out:0,delta_kbs_in:0,delta_kbs_out:0,delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0,total_rtt_connectivity_measure:0},experimental:{time_to_measure_ms:0}};if(c){const r={...c,audio:{},video:{},data:{...c.data},network:{...c.network},experimental:{...c.experimental}};return Object.keys(c.audio).forEach(o=>{r.audio[o]={...c.audio[o]}}),Object.keys(c.video).forEach(o=>{r.video[o]={...c.video[o]}}),r}return{...s,audio:{},video:{},data:{...s.data},network:{...s.network},experimental:{...s.experimental}}},Iv={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,pname:`p-${Xi()}`,cid:`c-${Xi()}`,uid:`u-${Xi()}`,record:!1,ticket:!0},zt={CANDIDATE_PAIR:"candidate-pair",CODEC:"codec",INBOUND_RTP:"inbound-rtp",LOCAL_CANDIDATE:"local-candidate",MEDIA_SOURCE:"media-source",OUTBOUND_RTP:"outbound-rtp",REMOTE_CANDIDATE:"remote-candidate",REMOTE_INBOUND_RTP:"remote-inbound-rtp",TRACK:"track"},j={AUDIO_LEVEL:"audioLevel",AVAILABLE_OUTGOING_BITRATE:"availableOutgoingBitrate",AVAILABLE_INCOMING_BITRATE:"availableIncomingBitrate",BYTES_RECEIVED:"bytesReceived",BYTES_SENT:"bytesSent",CANDIDATE_TYPE:"candidateType",CHANNELS:"channels",CLOCK_RATE:"clockRate",CODEC_ID:"codecId",CURRENT_ROUND_TRIP_TIME:"currentRoundTripTime",ROUND_TRIP_TIME:"roundTripTime",FRACTION_LOST:"fractionLost",FRAME_HEIGHT:"frameHeight",FRAME_WIDTH:"frameWidth",QUALITY_LIMITATION_REASON:"qualityLimitationReason",QUALITY_LIMITATION_DURATIONS:"qualityLimitationDurations",QUALITY_LIMITATION_RESOLUTION_CHANGES:"qualityLimitationResolutionChanges",ID:"id",JITTER:"jitter",KIND:"kind",MEDIA_TYPE:"mediaType",MIME_TYPE:"mimeType",LOCAL_CANDIDATE_ID:"localCandidateId",NETWORK_TYPE:"networkType",RELAY_PROTOCOL:"relayProtocol",NOMINATED:"nominated",PACKETS_LOST:"packetsLost",PACKETS_RECEIVED:"packetsReceived",PACKETS_SENT:"packetsSent",PROTOCOL:"protocol",PORT:"port",REMOTE_CANDIDATE_ID:"remoteCandidateId",REMOTE_SOURCE:"remoteSource",RESPONSES_RECEIVED:"responsesReceived",SDP_FMTP_LINE:"sdpFmtpLine",SSRC:"ssrc",SELECTED:"selected",STATE:"state",TIMESTAMP:"timestamp",TOTAL_ROUND_TRIP_TIME:"totalRoundTripTime",TOTAL_ROUND_TRIP_TIME_MEASUREMENTS:"roundTripTimeMeasurements",TYPE:"type",DECODER_IMPLEMENTATION:"decoderImplementation",ENCODER_IMPLEMENTATION:"encoderImplementation",FRAMES_DECODED:"framesDecoded",FRAMES_ENCODED:"framesEncoded",FRAMES_PER_SECOND:"framesPerSecond",TOTAL_DECODE_TIME:"totalDecodeTime",TOTAL_ENCODE_TIME:"totalEncodeTime",PLI:"pliCount",NACK:"nackCount"},x={SUCCEEDED:"succeeded",AUDIO:"audio",VIDEO:"video"},Wi={ETHERNET:0,CELLULAR_5G:2,WIFI:3,CELLULAR_4G:5,CELLULAR:10},lu={ETHERNET:"ethernet",CELLULAR_4G:"cellular",WIFI:"wifi"},re={AUDIO:"audio",VIDEO:"video",NETWORK:"network",DATA:"data"},ou="config      ",bv=(c,s={},r)=>{const o={...r,...s};return s.pname||wo(ou,`Argument [String] 'cfg.pname' for the peerConnection name or id is missing - use generated '${r.pname}'`),s.cid||wo(ou,`Argument [String] 'cfg.cid' for the call name or id is missing - use generated '${r.cid}'`),s.uid||wo(ou,`Argument [String] 'cfg.uid' for the user name or id is missing - use generated '${r.uid}'`),o.pc=c,o},wv=(c={})=>{const s={...Iv,...c};return s.name=yv(),s.version=Av(),s},gl=(c,s,r,o=!1,a)=>{let t=c.map(n=>{if(!r)return n[s];if(!a)return n[s][r];const p=n[s][a];return p?p[r]:null});return t=t.filter(n=>o?Number.isFinite(n)&&n>0:Number.isFinite(n)),t.length===0?[]:t},Gs=c=>c.reduce((s,r)=>s+r,0)/c.length,Ov=()=>`probe-${Xi()}`,Dv=()=>`coltr-${Xi()}`,Gf=c=>new Promise(s=>setTimeout(s,c)),xu=(c,s,r)=>{s?c.call(s,r):c(r)},Ye=(c,s,r,o)=>{const a=gl(c,s,r,!0,o);if(a.length===0)return null;const t=a.reduce((h,g)=>h+g,0)/a.length;return t===0?null:a.map(h=>Math.abs(t-h)).reduce((h,g)=>h+g,0)/a.length*100/t},Xe=(c,s,r,o=!1,a)=>{const t=gl(c,s,r,o,a);return t.length===0?null:t.reduce((n,p)=>n+p,0)/t.length},Sn=(c,s,r)=>gl(c,s,r).reduce((a,t)=>a+t,0),ze=(c,s,r,o)=>{const a=gl(c,s,r,!0,o);return a.length===0?null:Math.min(...a)},Je=(c,s,r,o)=>{const a=gl(c,s,r,!1,o);return a.length===0?null:Math.max(...a)},gt=(c,s,r,o)=>{const a=c.slice().pop();if(!a)return null;if(!r)return a[s];if(!o)return a[s][r];const t=a[s][o];return t?t[r]:null},Nv=c=>c.slice().pop(),ft=(c,s,r)=>{if(!s)return null;const o={};let a=s[x.AUDIO][c];a||(a=r===He.INBOUND?{...Vd}:{...qd}),o[x.AUDIO]=a;let t=s[x.VIDEO][c];return t||(t=r===He.INBOUND?{...Bd}:{...Gd}),o[x.VIDEO]=t,o},Ki="exporter    ",Uv="2.0",Wf=(c,s,r)=>{if(!c||c.length===0)return 0;const o=c[c.length-1];if(!o)return 0;const a=o[s][r];if(a){const t=a.total_rtt_ms_out,n=a.total_rtt_measure_out;return!n||!t?Xe(c,s,"delta_rtt_ms_out",!1,r):Number(t/n)}return null},Pv=(c,s)=>{if(!c||c.length===0)return 0;const r=c[c.length-1];if(!r)return 0;const o=r[s].total_rtt_connectivity_ms,a=r[s].total_rtt_connectivity_measure;return!a||!o?Xe(c,s,"delta_rtt_connectivity_ms"):Number(o/a)},xv=c=>gt(c,"network","local_candidate_type")!=="relay"?`direct/${gt(c,"network","local_candidate_protocol")}`:`turn/${gt(c,"network","local_candidate_relay_protocol")}`,Mv=c=>{const s=gt(c,"network","remote_candidate_type"),r=gt(c,"network","remote_candidate_protocol");return s!=="relay"?`direct/${r}`:`turn/${r}`};class kv{constructor(s){this._start=null,this._end=null,this._cfg=s,this._referenceReport=null,this._reports=[],this._events=[]}start(){iu(Ki,"start() - start exporter...");const s=new Date;return this._start=s.toJSON(),s}stop(){iu(Ki,"stop() - stop exporter...");const s=new Date;return this._end=s.toJSON(),s}saveReferenceReport(s){this._referenceReport=s}getReferenceReport(){return this._referenceReport}addReport(s){this._cfg.ticket&&(xe(Ki,`addReport() - add report to exporter at ${s.timestamp}`),this._reports.push(s))}addCustomEvent(s){this._events.push(s)}reset(){iu(Ki,"resetReports() - reset reports"),this._reports=[],this._referenceReport=null,this._start=null,this._end=null}get ticket(){xe(Ki,"ticket() - generate ticket");const s=gt(this._reports,"audio","total_packets_lost_in"),r=gt(this._reports,"audio","total_packets_in"),o=gt(this._reports,"video","total_packets_lost_in"),a=gt(this._reports,"video","total_packets_in"),t={},n=Nv(this._reports);return n&&(Object.keys(n[x.AUDIO]).forEach(p=>{const d=n[x.AUDIO][p];if(t[d.ssrc]={type:x.AUDIO,direction:d.direction},d.direction===He.INBOUND){const h={avg:Xe(this._reports,x.AUDIO,"delta_jitter_ms_in",!1,p),min:ze(this._reports,x.AUDIO,"delta_jitter_ms_in",p),max:Je(this._reports,x.AUDIO,"delta_jitter_ms_in",p),volatility:Ye(this._reports,x.AUDIO,"delta_jitter_ms_in",p),_unit:{avg:"ms",min:"ms",max:"ms",volatility:"percent"}},g={avg:Xe(this._reports,x.AUDIO,"delta_kbs_in",!1,p),min:ze(this._reports,x.AUDIO,"delta_kbs_in",p),max:Je(this._reports,x.AUDIO,"delta_kbs_in",p),volatility:Ye(this._reports,x.AUDIO,"delta_kbs_in",p),_unit:{avg:"kbs",min:"kbs",max:"kbs",volatility:"percent"}},T={avg:Xe(this._reports,x.AUDIO,"delta_KBytes_in",!1,p),min:ze(this._reports,x.AUDIO,"delta_KBytes_in",p),max:Je(this._reports,x.AUDIO,"delta_KBytes_in",p),volatility:Ye(this._reports,x.AUDIO,"delta_KBytes_in",p),_unit:{avg:"KB",min:"KB",max:"KB",volatility:"percent"}},E={emodel:{avg:Xe(this._reports,x.AUDIO,"mos_emodel_in",!1,p),min:ze(this._reports,x.AUDIO,"mos_emodel_in",p),max:Je(this._reports,x.AUDIO,"mos_emodel_in",p),volatility:Ye(this._reports,x.AUDIO,"mos_emodel_in",p)},effective:{avg:Xe(this._reports,x.AUDIO,"mos_in",!1,p),min:ze(this._reports,x.AUDIO,"mos_in",p),max:Je(this._reports,x.AUDIO,"mos_in",p),volatility:Ye(this._reports,x.AUDIO,"mos_in",p)},_unit:{avg:"number (1-5)",min:"number (1-5)",max:"number (1-5)",volatility:"percent"}},S=gt(this._reports,x.AUDIO,"total_packets_lost_in",p),A=gt(this._reports,x.AUDIO,"total_packets_in",p),R={lost:S,avg:Math.round((S/(S+A)*100||0)*100)/100,_unit:{avg:"percent",lost:"number"}};t[p].jitter=h,t[p].mos=E,t[p].traffic=T,t[p].bitrate=g,t[p].loss=R}else{const h={avg:Xe(this._reports,x.AUDIO,"delta_jitter_ms_out",!1,p),min:ze(this._reports,x.AUDIO,"delta_jitter_ms_out",p),max:Je(this._reports,x.AUDIO,"delta_jitter_ms_out",p),volatility:Ye(this._reports,x.AUDIO,"delta_jitter_ms_out",p),_unit:{avg:"ms",min:"ms",max:"ms",volatility:"percent"}},g={avg:Xe(this._reports,x.AUDIO,"delta_kbs_out",!1,p),min:ze(this._reports,x.AUDIO,"delta_kbs_out",p),max:Je(this._reports,x.AUDIO,"delta_kbs_out",p),volatility:Ye(this._reports,x.AUDIO,"delta_kbs_out",p),_unit:{avg:"kbs",min:"kbs",max:"kbs",volatility:"percent"}},T={avg:Xe(this._reports,x.AUDIO,"delta_KBytes_out",!1,p),min:ze(this._reports,x.AUDIO,"delta_KBytes_out",p),max:Je(this._reports,x.AUDIO,"delta_KBytes_out",p),volatility:Ye(this._reports,x.AUDIO,"delta_KBytes_out",p),_unit:{avg:"KB",min:"KB",max:"KB",bitrate:"kbs",volatility:"percent"}},E={avg:Wf(this._reports,x.AUDIO,p),min:ze(this._reports,x.AUDIO,"delta_rtt_ms_out",p),max:Je(this._reports,x.AUDIO,"delta_rtt_ms_out",p),volatility:Ye(this._reports,x.AUDIO,"delta_rtt_ms_out",p),_unit:{avg:"ms",min:"ms",max:"ms",volatility:"percent"}},S=gt(this._reports,x.AUDIO,"total_packets_lost_out",p),A=gt(this._reports,x.AUDIO,"total_packets_out",p),R={lost:S,avg:Math.round((S/(S+A)*100||0)*100)/100,_unit:{avg:"percent",lost:"number"}},C={emodel:{avg:Xe(this._reports,x.AUDIO,"mos_emodel_out",!1,p),min:ze(this._reports,x.AUDIO,"mos_emodel_out",p),max:Je(this._reports,x.AUDIO,"mos_emodel_out",p),volatility:Ye(this._reports,x.AUDIO,"mos_emodel_out",p)},effective:{avg:Xe(this._reports,x.AUDIO,"mos_out",!1,p),min:ze(this._reports,x.AUDIO,"mos_out",p),max:Je(this._reports,x.AUDIO,"mos_out",p),volatility:Ye(this._reports,x.AUDIO,"mos_out",p)},_unit:{avg:"number (1-5)",min:"number (1-5)",max:"number (1-5)",volatility:"percent"}};t[p].jitter=h,t[p].rtt=E,t[p].traffic=T,t[p].bitrate=g,t[p].loss=R,t[p].mos=C}}),Object.keys(n[x.VIDEO]).forEach(p=>{const d=n[x.VIDEO][p];if(t[p]={type:x.VIDEO,direction:d.direction},d.direction===He.INBOUND){const h={avg:Xe(this._reports,x.VIDEO,"delta_jitter_ms_in",!1,p),min:ze(this._reports,x.VIDEO,"delta_jitter_ms_in",p),max:Je(this._reports,x.VIDEO,"delta_jitter_ms_in",p),volatility:Ye(this._reports,x.VIDEO,"delta_jitter_ms_in",p),_unit:{avg:"ms",min:"ms",max:"ms",volatility:"percent"}},g={avg:Xe(this._reports,x.VIDEO,"delta_kbs_in",!1,p),min:ze(this._reports,x.VIDEO,"delta_kbs_in",p),max:Je(this._reports,x.VIDEO,"delta_kbs_in",p),volatility:Ye(this._reports,x.VIDEO,"delta_kbs_in",p),_unit:{avg:"kbs",min:"kbs",max:"kbs",volatility:"percent"}},T={avg:Xe(this._reports,x.VIDEO,"delta_KBytes_in",!1,p),min:ze(this._reports,x.VIDEO,"delta_KBytes_in",p),max:Je(this._reports,x.VIDEO,"delta_KBytes_in",p),volatility:Ye(this._reports,x.VIDEO,"delta_KBytes_in",p),_unit:{avg:"KB",min:"KB",max:"KB",volatility:"percent"}},E=gt(this._reports,x.VIDEO,"total_packets_lost_in",p),S=gt(this._reports,x.VIDEO,"total_packets_in",p),A={lost:E,avg:Math.round((E/(E+S)*100||0)*100)/100,_unit:{avg:"percent",lost:"number"}};t[p].jitter=h,t[p].traffic=T,t[p].bitrate=g,t[p].loss=A}else{const h={avg:Xe(this._reports,x.VIDEO,"delta_jitter_ms_out",!1,p),min:ze(this._reports,x.VIDEO,"delta_jitter_ms_out",p),max:Je(this._reports,x.VIDEO,"delta_jitter_ms_out",p),volatility:Ye(this._reports,x.VIDEO,"delta_jitter_ms_out",p),_unit:{avg:"ms",min:"ms",max:"ms",volatility:"percent"}},g={avg:Xe(this._reports,x.VIDEO,"delta_kbs_out",!1,p),min:ze(this._reports,x.VIDEO,"delta_kbs_out",p),max:Je(this._reports,x.VIDEO,"delta_kbs_out",p),volatility:Ye(this._reports,x.VIDEO,"delta_kbs_out",p),_unit:{avg:"kbs",min:"kbs",max:"kbs",volatility:"percent"}},T={avg:Xe(this._reports,x.VIDEO,"delta_KBytes_out",!1,p),min:ze(this._reports,x.VIDEO,"delta_KBytes_out",p),max:Je(this._reports,x.VIDEO,"delta_KBytes_out",p),volatility:Ye(this._reports,x.VIDEO,"delta_KBytes_out",p),_unit:{avg:"KB",min:"KB",max:"KB",volatility:"percent"}},E={avg:Wf(this._reports,x.VIDEO,p),min:ze(this._reports,x.VIDEO,"delta_rtt_ms_out",p),max:Je(this._reports,x.VIDEO,"delta_rtt_ms_out",p),volatility:Ye(this._reports,x.VIDEO,"delta_rtt_ms_out",p),_unit:{avg:"ms",min:"ms",max:"ms",volatility:"percent"}},S=gt(this._reports,x.VIDEO,"total_packets_lost_out",p),A=gt(this._reports,x.VIDEO,"total_packets_out",p),R={lost:S,avg:Math.round((S/(S+A)*100||0)*100)/100,_unit:{avg:"percent",lost:"number"}};t[p].jitter=h,t[p].rtt=E,t[p].traffic=T,t[p].bitrate=g,t[p].loss=R}})),{version:Uv,configuration:{frequency:this._cfg.refreshEvery},started:this._start,ended:this._end,ua:{agent:navigator.userAgent,pname:this._cfg.pname,user_id:this._cfg.uid},call:{call_id:this._cfg.cid,events:this._events},details:{count:this._reports.length,reports:this._cfg.record?this._reports:[],reference:this._referenceReport||null},ssrc:t,data:{rtt:{avg:Pv(this._reports,"data"),min:ze(this._reports,"data","delta_rtt_connectivity_ms"),max:Je(this._reports,"data","delta_rtt_connectivity_ms"),volatility:Ye(this._reports,"data","delta_rtt_connectivity_ms"),_unit:{avg:"ms",min:"ms",max:"ms",volatility:"percent"}},packetsLost:{audio:{in:{avg:Math.round((s/(s+r)*100||0)*100)/100}},video:{in:{avg:Math.round((o/(o+a)*100||0)*100)/100}},unit:{avg:"percent"}},bitrate:{in:{avg:Xe(this._reports,"data","delta_kbs_in"),min:ze(this._reports,"data","delta_kbs_in"),max:Je(this._reports,"data","delta_kbs_in"),volatility:Ye(this._reports,"data","delta_kbs_in")},out:{avg:Xe(this._reports,"data","delta_kbs_out"),min:ze(this._reports,"data","delta_kbs_out"),max:Je(this._reports,"data","delta_kbs_out"),volatility:Ye(this._reports,"data","delta_kbs_out")},unit:{avg:"kbs",min:"kbs",max:"kbs",volatility:"percent"}},traffic:{in:{avg:Xe(this._reports,"data","delta_KBytes_in"),min:ze(this._reports,"data","delta_KBytes_in"),max:Je(this._reports,"data","delta_KBytes_in"),volatility:Ye(this._reports,"data","delta_KBytes_in")},out:{avg:Xe(this._reports,"data","delta_KBytes_out"),min:ze(this._reports,"data","delta_KBytes_out"),max:Je(this._reports,"data","delta_KBytes_out"),volatility:Ye(this._reports,"data","delta_KBytes_out")},unit:{avg:"KBytes",min:"KBytes",max:"KBytes",volatility:"percent"}},network:{localConnection:xv(this._reports),remoteConnection:Mv(this._reports)}}}}updateConfig(s){this._cfg=s}getLastReport(){return this._reports.slice().pop()||null}getBeforeLastReport(){const s=this._reports.slice();return s.pop(),s.pop()||null}getReportsNumber(){return this._reports.length}}const qs="extractor   ",Kf=(c,s,r,o)=>{let a=!1;const t=o[s].total_rtt_ms_out,n=o[s].total_rtt_measure_out,p=r?r[s].total_rtt_ms_out:0,d=r?r[s].total_rtt_measure_out:0,h={rtt:null,totalRTT:t,totalRTTMeasurements:n};if(c[j.TIMESTAMP]===o[s].timestamp_out||!Object.prototype.hasOwnProperty.call(c,j.ROUND_TRIP_TIME)||Object.prototype.hasOwnProperty.call(c,j.TOTAL_ROUND_TRIP_TIME_MEASUREMENTS)&&(a=!0,Number(c[j.TOTAL_ROUND_TRIP_TIME_MEASUREMENTS])===0||Number(c[j.TOTAL_ROUND_TRIP_TIME_MEASUREMENTS])-d===n))return h;const g=1e3*Number(c[j.ROUND_TRIP_TIME]);let T=t+g,E=n+1;return a&&(T=1e3*Number(c[j.TOTAL_ROUND_TRIP_TIME])-p,E=Number(c[j.TOTAL_ROUND_TRIP_TIME_MEASUREMENTS])-d),{rtt:g,totalRTT:T,totalRTTMeasurements:E}},Lv=(c,s,r,o)=>{if(!Object.prototype.hasOwnProperty.call(c,j.CURRENT_ROUND_TRIP_TIME))return{rtt:null,totalRTT:o[s].total_rtt_connectivity_ms,totalRTTMeasurements:o[s].total_rtt_connectivity_measure};const a=1e3*Number(c[j.CURRENT_ROUND_TRIP_TIME]);let t=o[s].total_rtt_connectivity_ms+a,n=o[s].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(c,j.TOTAL_ROUND_TRIP_TIME)&&(t=1e3*Number(c[j.TOTAL_ROUND_TRIP_TIME])-(r?r[s].total_rtt_connectivity_ms:0)),Object.prototype.hasOwnProperty.call(c,j.RESPONSES_RECEIVED)&&(n=Number(c[j.RESPONSES_RECEIVED])-(r?r[s].total_rtt_connectivity_measure:0)),{rtt:a,totalRTT:t,totalRTTMeasurements:n}},fo=(c,s,r)=>c[j.TIMESTAMP]===r[s].timestamp_out||!Object.prototype.hasOwnProperty.call(c,j.JITTER)?null:1e3*(Number(c[j.JITTER])||0),$v=(c,s)=>{if(!Object.prototype.hasOwnProperty.call(c,j.FRAMES_DECODED)||!Object.prototype.hasOwnProperty.call(c,j.TOTAL_DECODE_TIME))return{delta_ms_decode_frame:s[x.VIDEO].delta_ms_decode_frame_in,frames_decoded:s[x.VIDEO].total_frames_decoded_in,total_decode_time:s[x.VIDEO].total_time_decoded_in};const r=c[j.FRAMES_DECODED],o=c[j.TOTAL_DECODE_TIME],a=o-s[x.VIDEO].total_time_decoded_in,t=r-s[x.VIDEO].total_frames_decoded_in;return{delta_ms_decode_frame:t>0?a*1e3/t:0,frames_decoded:r,total_decode_time:o}},Hv=(c,s)=>{if(!Object.prototype.hasOwnProperty.call(c,j.FRAMES_ENCODED)||!Object.prototype.hasOwnProperty.call(c,j.TOTAL_ENCODE_TIME))return{delta_ms_encode_frame:s[x.VIDEO].delta_ms_encode_frame_out,frames_encoded:s[x.VIDEO].total_frames_encoded_out,total_encode_time:s[x.VIDEO].total_time_encoded_out};const r=c[j.FRAMES_ENCODED],o=c[j.TOTAL_ENCODE_TIME],a=o-s[x.VIDEO].total_time_encoded_out,t=r-s[x.VIDEO].total_frames_encoded_out;return{delta_ms_encode_frame:t>0&&a?a*1e3/t:0,frames_encoded:r,total_encode_time:o}},Yf=(c,s,r,o)=>{if(!Object.prototype.hasOwnProperty.call(c,j.PACKETS_SENT)||!Object.prototype.hasOwnProperty.call(c,j.BYTES_SENT))return{packetsSent:r[s].total_packets_out,packetsLost:r[s].total_packets_lost_out,bytesSent:r[s].total_KBytes_out};const a=Number(c[j.PACKETS_SENT])||0-(o?o[s].total_packets_out:0),t=a-r[s].total_packets_out,n=Number(c[j.BYTES_SENT])/1024-(o?o[s].total_KBytes_out:0),p=n-r[s].total_KBytes_out,d=c[j.TIMESTAMP]||Date.now(),h=o?o.timestamp:null;let g=r.timestamp;!g&&h&&(g=h);const T=g?d-g:0,E=T>0?p*.008*1024/T*1e3:0;return{packetsSent:a,deltaPacketsSent:t,KBytesSent:n,deltaKBytesSent:p,kbsSent:E}},zf=(c,s,r,o)=>{let a=r[s].total_packets_lost_out,t=0,n=0;return Object.prototype.hasOwnProperty.call(c,j.PACKETS_LOST)&&(a=Number(c[j.PACKETS_LOST])||0-(o?o[s].total_packets_lost_out:0),t=a-r[s].total_packets_lost_out),Object.prototype.hasOwnProperty.call(c,j.FRACTION_LOST)&&(n=Number(100*c[j.FRACTION_LOST])),{packetsLost:a,deltaPacketsLost:t,fractionLost:n}},Jf=(c,s,r,o)=>{if(!Object.prototype.hasOwnProperty.call(c,j.PACKETS_RECEIVED)||!Object.prototype.hasOwnProperty.call(c,j.PACKETS_LOST)||!Object.prototype.hasOwnProperty.call(c,j.BYTES_RECEIVED))return{percent_packets_lost:r[s].percent_packets_lost_in,packetsReceived:r[s].total_packets_in,packetsLost:r[s].total_packets_lost_in,bytesReceived:r[s].total_KBytes_in};const a=Number(c[j.PACKETS_RECEIVED])||0-(o?o[s].total_packets_in:0),t=Number(c[j.PACKETS_LOST])||0-(o?o[s].total_packets_lost_in:0),n=t-r[s].total_packets_lost_in,p=a-r[s].total_packets_in,d=a!==r[s].total_packets_in?n*100/(n+p):0,h=Number(c[j.BYTES_RECEIVED])/1024-(o?o[s].total_KBytes_in:0),g=h-r[s].total_KBytes_in,T=c[j.TIMESTAMP]||Date.now(),E=o?o.timestamp:null;let S=r.timestamp;!S&&E&&(S=E);const A=S?T-S:0,R=A>0?g*.008*1024/A*1e3:0;return{percentPacketsLost:d,packetsReceived:a,deltaPacketsReceived:p,packetsLost:t,deltaPacketsLost:n,KBytesReceived:h,deltaKBytesReceived:g,kbsReceived:R}},Fv=c=>c[j.CANDIDATE_TYPE]!=="relay"?"":c[j.RELAY_PROTOCOL]||"",jv=c=>{if(!Object.prototype.hasOwnProperty.call(c,j.NETWORK_TYPE))return Wi.WIFI;switch(c[j.NETWORK_TYPE]){case lu.ETHERNET:return Wi.ETHERNET;case lu.CELLULAR_4G:return Wi.CELLULAR_4G;case lu.WIFI:return Wi.WIFI;default:return Wi.CELLULAR}},Xf=c=>!Object.prototype.hasOwnProperty.call(c,j.FRAME_HEIGHT)||!Object.prototype.hasOwnProperty.call(c,j.FRAME_WIDTH)?{width:null,height:null,framerate:null}:{width:c[j.FRAME_WIDTH]||null,height:c[j.FRAME_HEIGHT]||null,framerate:c[j.FRAMES_PER_SECOND]},Vv=c=>{const s=Object.prototype.hasOwnProperty.call(c,j.QUALITY_LIMITATION_REASON)?c[j.QUALITY_LIMITATION_REASON]:null,r=Object.prototype.hasOwnProperty.call(c,j.QUALITY_LIMITATION_RESOLUTION_CHANGES)?c[j.QUALITY_LIMITATION_RESOLUTION_CHANGES]:null,o=Object.prototype.hasOwnProperty.call(c,j.QUALITY_LIMITATION_DURATIONS)?c[j.QUALITY_LIMITATION_DURATIONS]:null;return o&&Object.keys(o).forEach(a=>{o[a]>1e3&&(o[a]=Number(o[a]/1e3))}),{reason:s,durations:o,resolutionChanges:r}},qv=(c,s,r)=>{if(!Object.prototype.hasOwnProperty.call(c,j.PLI)||!Object.prototype.hasOwnProperty.call(c,j.NACK))return{pliCount:s.total_pli_sent_in,nackCount:s.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};const o=(c[j.PLI]||0)-(r?r[x.VIDEO].total_pli_sent_in:0),a=(c[j.NACK]||0)-(r?r[x.VIDEO].total_nack_sent_in:0);return{pliCount:o,nackCount:a,deltaPliCount:o-s[x.VIDEO].total_pli_sent_in,deltaNackCount:a-s[x.VIDEO].total_nack_sent_in}},Bv=(c,s,r)=>{if(!Object.prototype.hasOwnProperty.call(c,j.PLI)||!Object.prototype.hasOwnProperty.call(c,j.NACK))return{pliCount:s.total_pli_received_out,nackCount:s.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};const o=(c[j.PLI]||0)-(r?r[x.VIDEO].total_pli_received_out:0),a=(c[j.NACK]||0)-(r?r[x.VIDEO].total_nack_received_out:0);return{pliCount:o,nackCount:a,deltaPliCount:o-s[x.VIDEO].total_pli_received_out,deltaNackCount:a-s[x.VIDEO].total_nack_received_out}},Gv=c=>({channels:c[j.CHANNELS]||null,clock_rate:c[j.CLOCK_RATE]||null,mime_type:c[j.MIME_TYPE]||null,sdp_fmtp_line:c[j.SDP_FMTP_LINE]||null}),Wv=c=>({clock_rate:c[j.CLOCK_RATE]||null,mime_type:c[j.MIME_TYPE]||null}),Kv=(c,s,r)=>{const o=(c[j.BYTES_RECEIVED]||0)/1024-(r?r.data.total_KBytes_in:0),a=(c[j.BYTES_SENT]||0)/1024-(r?r.data.total_KBytes_out:0),t=c[j.TIMESTAMP]||Date.now(),n=o-s.data.total_KBytes_in,p=a-s.data.total_KBytes_out,d=r?r.timestamp:null;let h=s.timestamp;!h&&d&&(h=d);const g=h?t-h:0,T=g>0?n*.008*1024/g*1e3:0,E=g>0?p*.008*1024/g*1e3:0;return{total_KBytes_received:o,total_KBytes_sent:a,delta_KBytes_received:n,delta_KBytes_sent:p,kbs_speed_received:T,kbs_speed_sent:E}},Yv=c=>{const s=c[j.AVAILABLE_INCOMING_BITRATE]/1024||0,r=c[j.AVAILABLE_OUTGOING_BITRATE]/1024||0;return{kbs_incoming_bandwidth:s,kbs_outgoing_bandwidth:r}},zv=(c,s,r,o)=>{if(!c)return[];switch(c[j.TYPE]){case zt.CANDIDATE_PAIR:let a=!1;if(c[j.NOMINATED]&&c[j.STATE]===x.SUCCEEDED&&(a=!0,xe(qs,`analyze() - got stats ${c[j.TYPE]} for ${r}`,c),j.SELECTED in c&&!c[j.SELECTED]&&(a=!1)),a){const n=c[j.LOCAL_CANDIDATE_ID],p=c[j.REMOTE_CANDIDATE_ID],d=Kv(c,s,o),h=Yv(c),g=Lv(c,"data",o,s);return[{type:re.NETWORK,value:{local_candidate_id:n}},{type:re.NETWORK,value:{remote_candidate_id:p}},{type:re.DATA,value:{total_KBytes_in:d.total_KBytes_received}},{type:re.DATA,value:{total_KBytes_out:d.total_KBytes_sent}},{type:re.DATA,value:{delta_KBytes_in:d.delta_KBytes_received}},{type:re.DATA,value:{delta_KBytes_out:d.delta_KBytes_sent}},{type:re.DATA,value:{delta_kbs_in:d.kbs_speed_received}},{type:re.DATA,value:{delta_kbs_out:d.kbs_speed_sent}},{type:re.DATA,value:{delta_kbs_bandwidth_in:h.kbs_incoming_bandwidth}},{type:re.DATA,value:{delta_kbs_bandwidth_out:h.kbs_outgoing_bandwidth}},{type:re.DATA,value:{delta_rtt_connectivity_ms:g.rtt}},{type:re.DATA,value:{total_rtt_connectivity_ms:g.totalRTT}},{type:re.DATA,value:{total_rtt_connectivity_measure:g.totalRTTMeasurements}}]}break;case zt.LOCAL_CANDIDATE:if(c[j.ID]===s.network.local_candidate_id)return[{type:re.NETWORK,value:{infrastructure:jv(c)}},{type:re.NETWORK,value:{local_candidate_type:c[j.CANDIDATE_TYPE]||""}},{type:re.NETWORK,value:{local_candidate_protocol:c[j.PROTOCOL]||""}},{type:re.NETWORK,value:{local_candidate_relay_protocol:Fv(c)}}];break;case zt.REMOTE_CANDIDATE:if(c[j.ID]===s.network.remote_candidate_id)return[{type:re.NETWORK,value:{remote_candidate_type:c[j.CANDIDATE_TYPE]||""}},{type:re.NETWORK,value:{remote_candidate_protocol:c[j.PROTOCOL]||""}}];break;case zt.INBOUND_RTP:{xe(qs,`analyze() - got stats ${c[j.TYPE]} for ${r}`,c);const n=c[j.SSRC],p=ft(n,s,He.INBOUND);p&&(p.timestamp=s.timestamp);const d=ft(n,o,He.INBOUND);if(d&&(d.timestamp=o.timestamp),c[j.MEDIA_TYPE]===x.AUDIO){const h=Jf(c,x.AUDIO,p,d),g=fo(c,x.AUDIO,p),T=c[j.CODEC_ID]||"";return[{ssrc:n,type:re.AUDIO,value:{codec_id_in:T}},{ssrc:n,type:re.AUDIO,value:{total_packets_in:h.packetsReceived}},{ssrc:n,type:re.AUDIO,value:{delta_packets_in:h.deltaPacketsReceived}},{ssrc:n,type:re.AUDIO,value:{total_packets_lost_in:h.packetsLost}},{ssrc:n,type:re.AUDIO,value:{delta_packets_lost_in:h.deltaPacketsLost}},{ssrc:n,type:re.AUDIO,value:{percent_packets_lost_in:h.percentPacketsLost}},{ssrc:n,type:re.AUDIO,value:{total_KBytes_in:h.KBytesReceived}},{ssrc:n,type:re.AUDIO,value:{delta_KBytes_in:h.deltaKBytesReceived}},{ssrc:n,type:re.AUDIO,value:{delta_kbs_in:h.kbsReceived}},{ssrc:n,type:re.AUDIO,value:{delta_jitter_ms_in:g}}]}if(c[j.MEDIA_TYPE]===x.VIDEO){const h=$v(c,p),g=Jf(c,x.VIDEO,p,d),T=fo(c,x.VIDEO,p),E=c[j.DECODER_IMPLEMENTATION]||null,S=c[j.CODEC_ID]||null,A=Xf(c),R=qv(c,p,d);return[{ssrc:n,type:re.VIDEO,value:{codec_id_in:S}},{ssrc:n,type:re.VIDEO,value:{total_packets_in:g.packetsReceived}},{ssrc:n,type:re.VIDEO,value:{delta_packets_in:g.deltaPacketsReceived}},{ssrc:n,type:re.VIDEO,value:{total_packets_lost_in:g.packetsLost}},{ssrc:n,type:re.VIDEO,value:{delta_packets_lost_in:g.deltaPacketsLost}},{ssrc:n,type:re.VIDEO,value:{percent_packets_lost_in:g.percentPacketsLost}},{ssrc:n,type:re.VIDEO,value:{total_KBytes_in:g.KBytesReceived}},{ssrc:n,type:re.VIDEO,value:{delta_KBytes_in:g.deltaKBytesReceived}},{ssrc:n,type:re.VIDEO,value:{delta_kbs_in:g.kbsReceived}},{ssrc:n,type:re.VIDEO,value:{delta_jitter_ms_in:T}},{ssrc:n,type:re.VIDEO,value:{decoder_in:E}},{ssrc:n,type:re.VIDEO,value:{delta_ms_decode_frame_in:h.delta_ms_decode_frame}},{ssrc:n,type:re.VIDEO,value:{total_frames_decoded_in:h.frames_decoded}},{ssrc:n,type:re.VIDEO,value:{total_time_decoded_in:h.total_decode_time}},{ssrc:n,type:re.VIDEO,value:{total_nack_sent_in:R.nackCount}},{ssrc:n,type:re.VIDEO,value:{delta_nack_sent_in:R.deltaNackCount}},{ssrc:n,type:re.VIDEO,value:{total_pli_sent_in:R.pliCount}},{ssrc:n,type:re.VIDEO,value:{delta_pli_sent_in:R.deltaPliCount}},{ssrc:n,type:re.VIDEO,value:{size_in:A}}]}break}case zt.OUTBOUND_RTP:{xe(qs,`analyze() - got stats ${c[j.TYPE]} for ${r}`,c);const n=c[j.SSRC],p=ft(n,s,He.OUTBOUND);p&&(p.timestamp=s.timestamp);const d=ft(n,o,He.OUTBOUND);if(d&&(d.timestamp=o.timestamp),c[j.MEDIA_TYPE]===x.AUDIO){const h=c[j.CODEC_ID]||null,g=Yf(c,x.AUDIO,p,d);return[{ssrc:n,type:re.AUDIO,value:{codec_id_out:h}},{ssrc:n,type:re.AUDIO,value:{total_packets_out:g.packetsSent}},{ssrc:n,type:re.AUDIO,value:{delta_packets_out:g.deltaPacketsSent}},{ssrc:n,type:re.AUDIO,value:{total_KBytes_out:g.KBytesSent}},{ssrc:n,type:re.AUDIO,value:{delta_KBytes_out:g.deltaKBytesSent}},{ssrc:n,type:re.AUDIO,value:{delta_kbs_out:g.kbsSent}}]}if(c[j.MEDIA_TYPE]===x.VIDEO){const h=c[j.ENCODER_IMPLEMENTATION]||null,g=c[j.CODEC_ID]||null,T=Hv(c,p),E=Xf(c),S=Vv(c),A=Bv(c,p,d),R=Yf(c,x.VIDEO,p,d);return[{ssrc:n,type:re.VIDEO,value:{codec_id_out:g}},{ssrc:n,type:re.VIDEO,value:{total_packets_out:R.packetsSent}},{ssrc:n,type:re.VIDEO,value:{delta_packets_out:R.deltaPacketsSent}},{ssrc:n,type:re.VIDEO,value:{total_KBytes_out:R.KBytesSent}},{ssrc:n,type:re.VIDEO,value:{delta_KBytes_out:R.deltaKBytesSent}},{ssrc:n,type:re.VIDEO,value:{delta_kbs_out:R.kbsSent}},{ssrc:n,type:re.VIDEO,value:{encoder_out:h}},{ssrc:n,type:re.VIDEO,value:{delta_ms_encode_frame_out:T.delta_ms_encode_frame}},{ssrc:n,type:re.VIDEO,value:{total_frames_encoded_out:T.frames_encoded}},{ssrc:n,type:re.VIDEO,value:{total_time_encoded_out:T.total_encode_time}},{ssrc:n,type:re.VIDEO,value:{total_nack_received_out:A.nackCount}},{ssrc:n,type:re.VIDEO,value:{delta_nack_received_out:A.deltaNackCount}},{ssrc:n,type:re.VIDEO,value:{total_pli_received_out:A.pliCount}},{ssrc:n,type:re.VIDEO,value:{delta_pli_received_out:A.deltaPliCount}},{ssrc:n,type:re.VIDEO,value:{size_out:E}},{ssrc:n,type:re.VIDEO,value:{limitation_out:S}}]}break}case zt.MEDIA_SOURCE:{xe(qs,`analyze() - got stats ${c[j.TYPE]} for ${r}`,c);break}case zt.TRACK:{xe(qs,`analyze() - got stats ${c[j.TYPE]} for ${r}`,c);break}case zt.CODEC:const t=[];return Object.keys(s[x.AUDIO]).forEach(n=>{const p=s[x.AUDIO][n];if(p.codec_id_in===c[j.ID]||p.codec_id_out===c[j.ID]){xe(qs,`analyze() - got stats ${c[j.TYPE]} for ${r}`,c);const d=Gv(c);c[j.ID]===p.codec_id_in?t.push({ssrc:p.ssrc,type:re.AUDIO,value:{codec_in:d}}):t.push({ssrc:p.ssrc,type:re.AUDIO,value:{codec_out:d}})}}),Object.keys(s[x.VIDEO]).forEach(n=>{const p=s[x.VIDEO][n];if(p.codec_id_in===c[j.ID]||p.codec_id_out===c[j.ID]){xe(qs,`analyze() - got stats ${c[j.TYPE]} for ${r}`,c);const d=Wv(c);c[j.ID]===p.codec_id_in?t.push({ssrc:p.ssrc,type:re.VIDEO,value:{codec_in:d}}):t.push({ssrc:p.ssrc,type:re.VIDEO,value:{codec_out:d}})}}),t;case zt.REMOTE_INBOUND_RTP:{xe(qs,`analyze() - got stats ${c[j.TYPE]} for ${r}`,c);const n=c[j.SSRC],p=ft(n,s,He.OUTBOUND),d=ft(n,o,He.OUTBOUND);if(c[j.KIND]===x.AUDIO){const h=Kf(c,x.AUDIO,d,p),g=fo(c,x.AUDIO,p),T=zf(c,x.AUDIO,p,d);return[{ssrc:n,type:re.AUDIO,value:{delta_rtt_ms_out:h.rtt}},{ssrc:n,type:re.AUDIO,value:{total_rtt_ms_out:h.totalRTT}},{ssrc:n,type:re.AUDIO,value:{total_rtt_measure_out:h.totalRTTMeasurements}},{ssrc:n,type:re.AUDIO,value:{delta_jitter_ms_out:g}},{ssrc:n,type:re.AUDIO,value:{timestamp_out:c[j.TIMESTAMP]}},{ssrc:n,type:re.AUDIO,value:{total_packets_lost_out:T.packetsLost}},{ssrc:n,type:re.AUDIO,value:{delta_packets_lost_out:T.deltaPacketsLost}},{ssrc:n,type:re.AUDIO,value:{percent_packets_lost_out:T.fractionLost}}]}if(c[j.KIND]===x.VIDEO){const h=Kf(c,x.VIDEO,d,p),g=fo(c,x.VIDEO,p),T=zf(c,x.VIDEO,p,d);return[{ssrc:n,type:re.VIDEO,value:{delta_rtt_ms_out:h.rtt}},{ssrc:n,type:re.VIDEO,value:{total_rtt_ms_out:h.totalRTT}},{ssrc:n,type:re.VIDEO,value:{total_rtt_measure_out:h.totalRTTMeasurements}},{ssrc:n,type:re.VIDEO,value:{delta_jitter_ms_out:g}},{ssrc:n,type:re.VIDEO,value:{timestamp_out:c[j.TIMESTAMP]}},{ssrc:n,type:re.VIDEO,value:{total_packets_lost_out:T.packetsLost}},{ssrc:n,type:re.VIDEO,value:{delta_packets_lost_out:T.deltaPacketsLost}},{ssrc:n,type:re.VIDEO,value:{percent_packets_lost_out:T.fractionLost}}]}break}}return[]},Yo=c=>c<0?1:c>100?4.5:1+.035*c+7/1e6*c*(c-60)*(100-c),Jv=(c,s=x.AUDIO,r,o,a)=>{const t=ft(a,c,He.INBOUND),n=ft(a,r,He.INBOUND),p=ft(a,o,He.INBOUND),d=[],h=[],g=t[s].percent_packets_lost_in,T=t[s].delta_jitter_ms_in,E=n&&n[s].delta_jitter_ms_in||null,S=p&&p[s].delta_jitter_ms_in||null,A=c.data.delta_rtt_connectivity_ms,R=r&&r.data.delta_rtt_connectivity_ms||null,C=o&&o.data.delta_rtt_connectivity_ms||null;A&&d.push(A),R&&d.push(R),C&&d.push(C),T&&h.push(T),r&&E&&h.push(E),o&&S&&h.push(S);const $=d.length>0?Gs(d):100,L=h.length>0?Gs(h):10,ne=93.2-g,D=.18*ne*ne-27.9*ne+1126.62,F=($+L)/2,Se=F-177.3<0?0:1,ve=.024*F+.11*(F-177.3)*Se,M=D-ve;return Yo(M)},Xv=(c,s=x.AUDIO,r,o,a)=>{const t=ft(a,c,He.OUTBOUND),n=ft(a,r,He.OUTBOUND),p=ft(a,o,He.OUTBOUND),d=[],h=[],g=t[s].percent_packets_lost_out,T=t[s].delta_rtt_ms_out,E=n&&n[s].delta_rtt_ms_out||null,S=p&&p[s].delta_rtt_ms_out||null,A=t[s].delta_jitter_ms_out,R=n&&n[s].delta_jitter_ms_out||null,C=p&&p[s].delta_jitter_ms_out||null,$=c.data.delta_rtt_connectivity_ms,L=r&&r.data.delta_rtt_connectivity_ms||null,ne=o&&o.data.delta_rtt_connectivity_ms||null;T?d.push(T):$&&d.push($),E?d.push(E):L&&d.push(L),S?d.push(S):ne&&d.push(ne),A&&h.push(A),r&&R&&h.push(R),o&&C&&h.push(C);const D=d.length>0?Gs(d):100,F=h.length>0?Gs(h):10,Se=93.2-g,ve=.18*Se*Se-27.9*Se+1126.62,M=(D+F)/2,N=M-177.3<0?0:1,q=.024*M+.11*(M-177.3)*N,V=ve-q;return Yo(V)},Qv=(c,s=x.AUDIO,r,o,a)=>{const t=ft(a,c,He.INBOUND),n=ft(a,r,He.INBOUND),p=ft(a,o,He.INBOUND),d=[],h=[],g=t[s].percent_packets_lost_in/100,T=t[s].delta_jitter_ms_in,E=n&&n[s].delta_jitter_ms_in||null,S=p&&p[s].delta_jitter_ms_in||null,A=c.data.delta_rtt_connectivity_ms,R=r&&r.data.delta_rtt_connectivity_ms||null,C=o&&o.data.delta_rtt_connectivity_ms||null;A&&d.push(A),R&&d.push(R),C&&d.push(C),T&&h.push(T),n&&E&&h.push(E),p&&S&&h.push(S);const $=d.length>0?Gs(d):100,L=h.length>0?Gs(h):10,ne=0,D=19.8,F=29.7,Se=30,ve=($+L)/2+Se,M=ve-177.3<0?0:1,N=.024*ve+.11*(ve-177.3)*M,V=93.2-(ne+D*Math.log(1+F*g)+N);return Yo(V)},Zv=(c,s=x.AUDIO,r,o,a)=>{const t=ft(a,c,He.OUTBOUND),n=ft(a,r,He.OUTBOUND),p=ft(a,o,He.OUTBOUND),d=[],h=[],g=t[s].percent_packets_lost_out/100,T=t[s].delta_rtt_ms_out,E=n&&n[s].delta_rtt_ms_out||null,S=p&&p[s].delta_rtt_ms_out||null,A=t[s].delta_jitter_ms_out,R=n&&n[s].delta_jitter_ms_out||null,C=p&&p[s].delta_jitter_ms_out||null,$=c.data.delta_rtt_connectivity_ms,L=r&&r.data.delta_rtt_connectivity_ms||null,ne=o&&o.data.delta_rtt_connectivity_ms||null;T?d.push(T):$&&d.push($),E?d.push(E):L&&d.push(L),S?d.push(S):ne&&d.push(ne),A&&h.push(A),n&&R&&h.push(R),p&&C&&h.push(C);const D=d.length>0?Gs(d):100,F=h.length>0?Gs(h):10,Se=0,ve=19.8,M=29.7,N=30,q=(D+F)/2+N,V=q-177.3<0?0:1,z=.024*q+.11*(q-177.3)*V,J=93.2-(Se+ve*Math.log(1+M*g)+z);return Yo(J)};class eE{constructor(s,r){this._callbacks={onreport:null,onticket:null},this._id=Dv(),this._moduleName=this._id,this._probeId=r,this._config=s,this._exporter=new kv(s),this._state=vs.IDLE,this.registerToPCEvents(),Rn(this._moduleName,`new collector created for probe ${this._probeId}`)}analyze(s,r,o,a){const t=(d,h)=>d===x.AUDIO?h===zt.INBOUND_RTP?{...Vd}:{...qd}:h===zt.INBOUND_RTP?{...Bd}:{...Gd},n=Rv(r);n.pname=this._config.pname,n.call_id=this._config.cid,n.user_id=this._config.uid,n.count=r?r.count+1:1;let p=null;return s.forEach(d=>{!p&&d.timestamp&&(p=d.timestamp),zv(d,n,n.pname,a).forEach(g=>{if(g.value&&g.type)if(g.ssrc){let T=n[g.type][g.ssrc];T||(T=t(g.type,d.type),T.ssrc=g.ssrc,n[g.type][g.ssrc]=T),Object.keys(g.value).forEach(E=>{T[E]=g.value[E]})}else Object.keys(g.value).forEach(T=>{n[g.type][T]=g.value[T]})})}),n.timestamp=p,Object.keys(n[x.AUDIO]).forEach(d=>{const h=n[x.AUDIO][d];h.direction===He.INBOUND?(h.mos_emodel_in=Jv(n,x.AUDIO,r,o,h.ssrc),h.mos_in=Qv(n,x.AUDIO,r,o,h.ssrc)):(h.mos_emodel_out=Xv(n,x.AUDIO,r,o,h.ssrc),h.mos_out=Zv(n,x.AUDIO,r,o,h.ssrc))}),n}async takeReferenceStats(){return new Promise((s,r)=>{const o=Date.now();setTimeout(async()=>{try{const a=Date.now()-o,t=Date.now(),n=await this._config.pc.getStats(),p=this.analyze(n,null,null,null),d=Date.now();p.experimental.time_to_measure_ms=d-t,p.experimental.time_to_wait_ms=a,this._exporter.saveReferenceReport(p),xe(this._moduleName,`got reference report for probe ${this._probeId}`),s()}catch(a){r(a)}},this._config.startAfter)})}async collectStats(){try{if(this._state!==vs.RUNNING||!this._config.pc)return xe(this._moduleName,`report discarded (too late) for probe ${this._probeId}`),null;const s=Date.now(),r=await this._config.pc.getStats(),o=this.analyze(r,this._exporter.getLastReport(),this._exporter.getBeforeLastReport(),this._exporter.getReferenceReport()),a=Date.now();return o.experimental.time_to_measure_ms=a-s,this._exporter.addReport(o),xe(this._moduleName,`got report for probe ${this._probeId}#${this._exporter.getReportsNumber()+1}`),this.fireOnReport(o),o}catch(s){return hr(this._moduleName,`got error ${s}`),null}}async start(){xe(this._moduleName,"starting"),this.state=vs.RUNNING,this._startedTime=this._exporter.start(),xe(this._moduleName,"started")}async mute(){this.state=vs.MUTED,xe(this._moduleName,"muted")}async unmute(){this.state=vs.RUNNING,xe(this._moduleName,"unmuted")}async stop(s){if(xe(this._moduleName,`stopping${s?" by watchdog":""}...`),this._stoppedTime=this._exporter.stop(),this.state=vs.IDLE,this._config.ticket){const{ticket:r}=this._exporter;this.fireOnTicket(r)}this._exporter.reset(),xe(this._moduleName,"stopped")}registerCallback(s,r,o){s in this._callbacks?(this._callbacks[s]={callback:r,context:o},xe(this._moduleName,`registered callback '${s}'`)):hr(this._moduleName,`can't register callback for '${s}' - not found`)}unregisterCallback(s){s in this._callbacks?(this._callbacks[s]=null,delete this._callbacks[s],xe(this._moduleName,`unregistered callback '${s}'`)):hr(this._moduleName,`can't unregister callback for '${s}' - not found`)}fireOnReport(s){this._callbacks.onreport&&xu(this._callbacks.onreport.callback,this._callbacks.onreport.context,s)}fireOnTicket(s){this._callbacks.onticket&&xu(this._callbacks.onticket.callback,this._callbacks.onticket.context,s)}updateConfig(s){this._config=s,this._exporter.updateConfig(s)}get state(){return this._state}set state(s){this._state=s,xe(this._moduleName,`state changed to ${s}`)}addCustomEvent(s,r,o,a){this._exporter.addCustomEvent({at:typeof s=="object"?s.toJSON():s,category:r,name:o,description:a})}async registerToPCEvents(){const{pc:s}=this._config;if(navigator.mediaDevices.ondevicechange=async()=>{try{const r=await navigator.mediaDevices.enumerateDevices();this.addCustomEvent(new Date().toJSON(),"device",`${r.length} devices found`,"Media Devices state")}catch{hr(this._moduleName,"can't get devices")}},s){s.oniceconnectionstatechange=()=>{const o=s.iceConnectionState;o===Gi.CONNECTED||o===Gi.COMPLETED?this.addCustomEvent(new Date().toJSON(),"call",o,"ICE connection state"):o===Gi.DISCONNECTED||o===Gi.FAILED?this.addCustomEvent(new Date().toJSON(),"call",o,"ICE connection state"):o===Gi.CLOSED&&this.addCustomEvent(new Date().toJSON(),"call","ended","ICE connection state")},s.onicegatheringstatechange=()=>{const o=s.iceGatheringState;this.addCustomEvent(new Date().toJSON(),"call",o,"ICE gathering state")},s.ontrack=o=>{this.addCustomEvent(new Date().toJSON(),"call",`${o.track.kind}track`,"MediaStreamTrack received")},s.onnegotiationneeded=()=>{this.addCustomEvent(new Date().toJSON(),"call","negotiation","Media changed")};const r=s.getReceivers();if(r&&r.length>0){const o=r[0],{transport:a}=o;if(a){const{iceTransport:t}=a;t&&(t.onselectedcandidatepairchange=()=>{this.addCustomEvent(new Date().toJSON(),"call","transport","Candidates Pair changed")})}}}}}class tE{constructor(s){this._id=s.pname&&s.pname.substr(0,12).padEnd(12," ")||Ov(),this._moduleName=this._id,Rn(this._moduleName,"probe created"),this._config=s,this._collector=new eE(this._config,this._id)}set onreport(s){s?this._collector.registerCallback("onreport",s):this._collector.unregisterCallback("onreport")}set onticket(s){s?this._collector.registerCallback("onticket",s):this._collector.unregisterCallback("onticket")}get id(){return this._id}get pname(){return this._config.pname}get cid(){return this._config.cid}get uid(){return this._config.uid}get state(){return this._collector.state}set state(s){this._collector.state=s}addCustomEvent(s,r,o,a=new Date().toJSON()){this._collector.addCustomEvent(a,r,s,o)}get isRunning(){return this._collector.state===vs.RUNNING}get isIdle(){return this._collector.state===vs.IDLE}updateUserId(s){this._config.uid=s,this._collector.updateConfig(this._config)}updateCallId(s){this._config.cid=s,this._collector.updateConfig(this._config)}start(){if(!this.isIdle){wo(this._moduleName,"probe is already running");return}this._collector.start()}stop(s=!1){this.isRunning&&this._collector.stop(s)}async takeReferenceStats(){return this._collector.takeReferenceStats()}async collectStats(){return this._collector.collectStats()}}const Ct="engine      ";class sE{constructor(s){this._config=s,this._probes=[],this._startedTime=null,this._callbacks={onresult:null},Rn(Ct,`configured for probing every ${this._config.refreshEvery}ms`),Rn(Ct,`configured for starting after ${this._config.startAfter}ms`),Rn(Ct,`${!this._config.stopAfter||this._config.stopAfter!==-1?`configured for stopped after ${this._config.stopAfter}ms`:"configured for never stopped"}`),xe(Ct,"engine initialized")}get probes(){return this._probes}get isRunning(){return this._probes.some(s=>s.isRunning)}get isIdle(){return this._probes.every(s=>s.isIdle)}addNewProbe(s,r){if(!s)throw new Error("undefined peer connection");const o=bv(s,r,this._config),a=new tE(o);return this._probes.push(a),xe(Ct,`${this._probes.length} probes registered`),a}removeExistingProbe(s){if(!s)throw new Error("undefined probe");s.state===vs.RUNNING&&s.stop(),this._probes=this._probes.filter(r=>s.id!==r.id)}async start(){const s=()=>{this._probes.forEach(t=>t.start())},r=async()=>Promise.all(this._probes.map(t=>t.takeReferenceStats())),o=()=>this.isIdle?!1:!this._config.stopAfter||this._config.stopAfter<0?!0:Date.now()<this._startedTime+this._config.stopAfter,a=async()=>{const t=Cv(),n=this._probes.filter(p=>p.isRunning);for(const p of n){const d=await p.collectStats();d&&t.probes.push(d),xe(Ct,`got probe ${p.id}`),await Gf(0)}return t.delta_time_to_measure_probes_ms=Sn(t.probes,"experimental","time_to_measure_ms"),t.delta_KBytes_in=Sn(t.probes,"data","delta_KBytes_in"),t.delta_KBytes_out=Sn(t.probes,"data","delta_KBytes_out"),t.delta_kbs_in=Sn(t.probes,"data","delta_kbs_in"),t.delta_kbs_out=Sn(t.probes,"data","delta_kbs_out"),t.total_time_decoded_in=Sn(t.probes,"video","total_time_decoded_in"),t.total_time_encoded_out=Sn(t.probes,"video","total_time_encoded_out"),t};for(xe(Ct,"starting to collect"),s(),xe(Ct,"generating reference reports..."),await r(),xe(Ct,"reference reports generated"),this._startedTime=Date.now();o();)if(xe(Ct,`wait ${this._config.refreshEvery}ms before collecting`),await Gf(this._config.refreshEvery),o()){xe(Ct,"collecting...");const t=Date.now(),n=await a(),p=Date.now();n.delta_time_consumed_to_measure_ms=p-t,this.fireOnReports(n),xe(Ct,"collected")}xe(Ct,"reaching end of the collecting period..."),this.isRunning&&setTimeout(()=>{this.stop()},0)}stop(s){const r=o=>{this._probes.forEach(a=>{a.stop(o)})};Rn(Ct,"stop collecting"),r(s)}registerCallback(s,r,o){s in this._callbacks?(this._callbacks[s]={callback:r,context:o},xe(Ct,`registered callback '${s}'`)):hr(Ct,`can't register callback for '${s}' - not found`)}unregisterCallback(s){s in this._callbacks?(this._callbacks[s]=null,delete this._callbacks[s],xe(this._moduleName,`unregistered callback '${s}'`)):hr(this._moduleName,`can't unregister callback for '${s}' - not found`)}fireOnReports(s){this._callbacks.onresult&&s.probes.length>0&&xu(this._callbacks.onresult.callback,this._callbacks.onresult.context,s)}}const nE="interface   ";class rE{constructor(s){this._config=wv(s),Rn(nE,`welcome to ${this._config.name} version ${this._config.version}`),mv(this._config.verbose||!1),this._engine=new sE(this._config)}setupLogLevel(s){gv(s)}get version(){return this._config.version}get name(){return this._config.name}get probes(){return this._engine.probes}createProbe(s,r){return this._engine.addNewProbe(s,r)}startAllProbes(){this._engine.start()}stopAllProbes(){this._engine.stop()}get running(){return this._engine.isRunning}get idle(){return this._engine.isIdle}removeProbe(s){this._engine.removeExistingProbe(s)}set onresult(s){s?this._engine.registerCallback("onresult",s):this._engine.unregisterCallback("onresult")}}function iE(c,s){return Object.keys(c).filter(r=>s.includes(r)).reduce((r,o)=>{const a=o;return{...r,[a]:c[a]}},{})}const lE=["mos_in","codec_in","delta_KBytes_in","delta_kbs_in","delta_jitter_ms_in","delta_packets_lost_in"];class oE{constructor(s){this.intervals={},this.emitInterval=s.emitInterval||200,this.onChangeFunction=s.onChangeFunction}start(s,r){s&&s.getTracks().length&&requestAnimationFrame(()=>this.beginCalculation(s,r))}stop(s){this.clearVolumeInterval(s)}clearVolumeInterval(s){console.log("clearVolumeInterval",s),clearInterval(this.intervals[s]),delete this.intervals[s]}clearAllIntervals(){Object.keys(this.intervals).forEach(s=>{clearInterval(this.intervals[s])}),this.intervals={}}beginCalculation(s,r){this.clearVolumeInterval(r);const o=Xt.createAnalyser(),a=Xt.createMediaStreamSource(s),t=Xt.createScriptProcessor(2048,1,1);o.smoothingTimeConstant=.8,o.fftSize=1024,a.connect(o),o.connect(t),t.connect(Xt.destination),this.intervals[r]=setInterval(()=>{const n=new Uint8Array(o.frequencyBinCount);o.getByteFrequencyData(n);let p=0;const d=n.length;for(let g=0;g<d;g++)p+=n[g];const h=p/d;this.onChangeFunction(r,h)},this.emitInterval)}}const ho={SELECTED_INPUT_DEVICE:"OpensipsJSInputDevice",SELECTED_OUTPUT_DEVICE:"OpensipsJSOutputDevice"},aE=0;class uE{constructor(s){this.isAutoAnswer=!1,this.muteWhenJoinEnabled=!1,this.isDNDEnabled=!1,this.muted=!1,this.microphoneInputLevelValue=1,this.speakerVolumeValue=1,this.activeRooms={},this.activeCalls={},this.extendedCalls={},this.availableMediaDevices=[],this.selectedMediaDevices={input:"default",output:"default"},this.callStatus={},this.callTime={},this.callMetrics={},this.timeIntervals={},this.metricConfig={refreshEvery:1e3},this.activeStreamValue=null,this.initialStreamValue=null,this.context=s,this.context.on(this.context.newRTCSessionEventName,this.newRTCSessionCallback.bind(this)),this.VUMeter=new oE({onChangeFunction:this.emitVolumeChange.bind(this)}),this.initializeMediaDevices()}get sipOptions(){return{...this.context.options.sipOptions,mediaConstraints:this.getUserMediaConstraints}}get currentActiveRoomId(){return this.currentActiveRoomIdValue}set currentActiveRoomId(s){this.currentActiveRoomIdValue=s,this.context.emit("currentActiveRoomChanged",s)}get autoAnswer(){return this.isAutoAnswer}get callAddingInProgress(){return this.isCallAddingInProgress}set callAddingInProgress(s){this.isCallAddingInProgress=s,this.context.emit("callAddingInProgressChanged",s)}get muteWhenJoin(){return this.muteWhenJoinEnabled}get isDND(){return this.isDNDEnabled}get speakerVolume(){return this.speakerVolumeValue}get microphoneInputLevel(){return this.microphoneInputLevelValue}get getActiveCalls(){return this.activeCalls}get hasActiveCalls(){return Object.values(this.extendedCalls).length>0}get getActiveRooms(){return this.activeRooms}get isMuted(){return this.muted}get getInputDeviceList(){return this.availableMediaDevices.filter(s=>s.kind==="audioinput")}get getOutputDeviceList(){return this.availableMediaDevices.filter(s=>s.kind==="audiooutput")}get getUserMediaConstraints(){return{audio:{deviceId:{exact:this.selectedMediaDevices.input}},video:!1}}get selectedInputDevice(){return this.selectedMediaDevices.input}get selectedOutputDevice(){return this.selectedMediaDevices.output}get activeStream(){return this.activeStreamValue}setAvailableMediaDevices(s){this.availableMediaDevices=s,this.context.emit("changeAvailableDeviceList",s)}async updateDeviceList(){await navigator.mediaDevices.getUserMedia(this.getUserMediaConstraints);const s=await navigator.mediaDevices.enumerateDevices();this.setAvailableMediaDevices(s)}async initializeMediaDevices(){const s=localStorage.getItem(ho.SELECTED_INPUT_DEVICE)||"default",r=localStorage.getItem(ho.SELECTED_OUTPUT_DEVICE)||"default";(await navigator.mediaDevices.getUserMedia(this.getUserMediaConstraints)).getTracks().forEach(t=>t.stop());const a=await navigator.mediaDevices.enumerateDevices();this.setAvailableMediaDevices(a),await this.setMicrophone(s),await this.setSpeaker(r),navigator.mediaDevices.addEventListener("devicechange",async()=>{const t=await navigator.mediaDevices.enumerateDevices();this.setAvailableMediaDevices(t)})}setCallTime(s){const r={...s};delete r.callId,this.callTime={...this.callTime,[s.callId]:r},this.context.emit("changeCallTime",this.callTime)}removeCallTime(s){const r={...this.callTime};delete r[s],this.callTime={...r},this.context.emit("changeCallTime",this.callTime)}setTimeInterval(s,r){this.timeIntervals={...this.timeIntervals,[s]:r}}removeTimeInterval(s){const r={...this.timeIntervals};r[s]&&(clearInterval(r[s]),delete r[s],this.timeIntervals={...r})}stopCallTimer(s){this.removeTimeInterval(s),this.removeCallTime(s)}emitVolumeChange(s,r){this.context.emit("changeCallVolume",{callId:s,volume:r})}setMetricsConfig(s){this.metricConfig={...this.metricConfig,...s}}sendDTMF(s,r){if(!/^[A-D0-9]+$/g.test(r))throw new Error("Not allowed character in DTMF input");this.extendedCalls[s].sendDTMF(r)}setIsMuted(s){this.muted=s,this.context.emit("changeIsMuted",s)}processMute(s){const r=this.currentActiveRoomId;this.setIsMuted(s),this.initialStreamValue.getTracks().forEach(o=>o.enabled=!s),this.roomReconfigure(r)}mute(){this.processMute(!0)}unmute(){this.processMute(!1)}async processHold({callId:s,toHold:r,automatic:o}){const a=this.extendedCalls[s];a._automaticHold=o??!1,await new Promise(p=>{const d=()=>{p()};r?a.hold({},d):a.unhold({},d)}),this.updateCall(a);const n=Object.values(this.extendedCalls).filter(p=>p.roomId===this.currentActiveRoomId&&(r?s!==p._id:!0));n.length>1&&await this.doConference(n)}holdCall(s,r=!1){return this.processHold({callId:s,automatic:r,toHold:!0})}unholdCall(s){return this.processHold({callId:s,toHold:!1})}cancelAllOutgoingUnanswered(){Object.values(this.getActiveCalls).filter(s=>s.direction==="outgoing"&&s.status===aE).forEach(s=>this.terminateCall(s._id))}answerCall(s){const r=this.extendedCalls[s];this.cancelAllOutgoingUnanswered(),r.answer(this.sipOptions),this.updateCall(r),this.setActiveRoom(r.roomId),r.connection.addEventListener("track",o=>{this.triggerAddStream(o,r)})}async moveCall(s,r){this.updateCallStatus({callId:s,isMoving:!0}),await this.processRoomChange({callId:s,roomId:r}),this.updateCallStatus({callId:s,isMoving:!1})}updateCall(s){this.activeCalls[s._id]=Ff(s),this.context.emit("changeActiveCalls",this.activeCalls)}updateRoom(s){const o={...this.activeRooms[s.roomId],...s};this.activeRooms={...this.activeRooms,[s.roomId]:{...o}},this.context.emit("updateRoom",{room:o,roomList:this.activeRooms})}hasAutoAnswerHeaders(s){const r=/answer-after=0/,a=s.request.getHeader("Call-Info");return a&&r.test(a)}addCall(s,r=!0){this.activeCalls={...this.activeCalls,[s._id]:Ff(s)},this.extendedCalls[s._id]=s,r&&this.context.emit("changeActiveCalls",this.activeCalls)}addCallStatus(s){this.callStatus={...this.callStatus,[s]:{isMoving:!1,isTransferring:!1,isMerging:!1}},this.context.emit("changeCallStatus",this.callStatus)}updateCallStatus(s){const o={...{...this.callStatus[s.callId]}};s.isMoving!==void 0&&(o.isMoving=s.isMoving),s.isTransferring!==void 0&&(o.isTransferring=s.isTransferring),s.isMerging!==void 0&&(o.isMerging=s.isMerging),this.callStatus={...this.callStatus,[s.callId]:{...o}},this.context.emit("changeCallStatus",this.callStatus)}removeCallStatus(s){const r={...this.callStatus};delete r[s],this.callStatus={...r},this.context.emit("changeCallStatus",this.callStatus)}addRoom(s){this.activeRooms={...this.activeRooms,[s.roomId]:s},this.context.emit("addRoom",{room:s,roomList:this.activeRooms})}getActiveStream(){const s=Vf(this.initialStreamValue,this.microphoneInputLevel*2);return s.getTracks().forEach(r=>r.enabled=!this.isMuted),this.setActiveStream(s),s}async setMicrophone(s){if(!this.getInputDeviceList.find(({deviceId:o})=>o===s)||(this.setSelectedInputDevice(s),Object.keys(this.getActiveCalls).length===0))return;await this.setupStream();const r=Object.values(this.extendedCalls).filter(o=>o.roomId===this.currentActiveRoomId);r.length===1?Object.values(r).forEach(async o=>{const a=this.getActiveStream();o.connection.getSenders()[0].replaceTrack(a.getTracks()[0]),this.updateCall(o)}):await this.doConference(r)}setActiveStream(s){this.activeStream&&this.stopVUMeter("origin"),this.setupVUMeter(s,"origin"),this.activeStreamValue=s,this.context.emit("changeActiveStream",s)}async setSpeaker(s){if(!this.getOutputDeviceList.find(({deviceId:a})=>a===s))return;this.setSelectedOutputDevice(s);const r=Object.values(this.extendedCalls);if(r.length===0)return;const o=r.filter(a=>a.roomId===this.currentActiveRoomId);o.length===1?r.forEach(a=>{var t;(t=a.audioTag)==null||t.setSinkId(s),this.updateCall(a)}):await this.doConference(o)}removeRoom(s){const r={...this.activeRooms},o={...r[s]};delete r[s],this.activeRooms={...r},this.context.emit("removeRoom",{room:o,roomList:this.activeRooms})}deleteRoomIfEmpty(s){s!==void 0&&Object.values(this.extendedCalls).filter(r=>r.roomId===s).length===0&&(this.removeRoom(s),this.currentActiveRoomId===s&&(this.currentActiveRoomId=void 0))}checkInitialized(){if(!this.context.initialized)throw new Error("[OpenSIPSJS] You must call `start` method first!")}muteReconfigure(s){this.muted?s.mute({audio:!0}):s.unmute({audio:!0})}async roomReconfigure(s){if(s===void 0)return;const r=Object.values(this.extendedCalls).filter(o=>o.roomId===s);if(this.currentActiveRoomId===s?r.forEach(o=>{o.audioTag&&(this.muteReconfigure(o),o.audioTag.muted=!1,this.updateCall(o))}):r.forEach(o=>{o.audioTag&&(o.audioTag.muted=!0,this.updateCall(o))}),r.length===0)this.deleteRoomIfEmpty(s);else if(r.length===1&&this.currentActiveRoomId!==s)r[0].isOnHold().local||await this.holdCall(r[0].id,!0);else if(r.length===1&&this.currentActiveRoomId===s){if(r[0].isOnHold().local&&r[0]._automaticHold&&await this.unholdCall(r[0].id),r[0].connection&&r[0].connection.getSenders()[0]){const o=this.getActiveStream();await r[0].connection.getSenders()[0].replaceTrack(o.getTracks()[0]),this.muteReconfigure(r[0])}}else r.length>1&&await this.doConference(r)}async doConference(s){await qf.forEach(s,async o=>{o._localHold&&await this.unholdCall(o._id)});const r=[];s.forEach(o=>{o!=null&&o.connection.getReceivers().forEach(a=>{r.push(a.track)})}),await qf.forEach(s,async o=>{if(o==null)return;const a=new MediaStream,t=Xt.createMediaStreamDestination();if(o.connection.getReceivers().forEach(n=>{r.forEach(p=>{a.addTrack(n.track),n.track.id!==p.id&&Xt.createMediaStreamSource(new MediaStream([p])).connect(t)})}),s[0].roomId===this.currentActiveRoomId){const n=this.getActiveStream();Xt.createMediaStreamSource(n).connect(t)}o.connection.getSenders()[0]&&(await o.connection.getSenders()[0].replaceTrack(t.stream.getTracks()[0]),this.muteReconfigure(o))})}processCallerMute(s,r){const o=this.extendedCalls[s];o&&o.connection.getReceivers().length&&(o.localMuted=r,o.connection.getReceivers().forEach(a=>{a.track.enabled=!r}),this.updateCall(o))}muteCaller(s){this.processCallerMute(s,!0)}unmuteCaller(s){this.processCallerMute(s,!1)}terminateCall(s){const r=this.extendedCalls[s];r._status!==8&&r.terminate()}transferCall(s,r){if(r.toString().length===0)return new Error("Target must be passed");const o=this.extendedCalls[s];if(!o._is_confirmed&&!o._is_canceled){const a=`sip:${r}@${this.context.sipDomain}`;o.terminate({status_code:302,reason_phrase:"Moved Temporarily",extraHeaders:[`Contact: ${a}`]});return}this.updateCallStatus({callId:s,isTransferring:!0}),o.refer(`sip:${r}@${this.context.sipDomain}`),this.updateCall(o)}mergeCall(s){const r=Object.values(this.extendedCalls).filter(t=>t.roomId===s);if(r.length!==2)return;const o=r[0],a=r[1];!o||!a||(this.updateCallStatus({callId:o._id,isMerging:!0}),this.updateCallStatus({callId:a._id,isMerging:!0}),o.refer(a.remote_identity.uri.toString(),{replaces:a}),this.updateCall(o))}setDND(s){this.isDNDEnabled=s,this.context.emit("changeIsDND",s)}startCallTimer(s){this.removeTimeInterval(s);const r={callId:s,hours:0,minutes:0,seconds:0,formatted:""};this.setCallTime(r);const o=setInterval(()=>{const a={...this.callTime[s]},t=dv(a);this.setCallTime({callId:s,...t})},1e3);this.setTimeInterval(s,o)}async setActiveRoom(s){const r=this.currentActiveRoomId;s!==r&&(this.currentActiveRoomId=s,await this.roomReconfigure(r),await this.roomReconfigure(s))}getNewRoomId(){const s=Object.keys(this.activeRooms);return s.length===0?1:parseInt(s.sort()[s.length-1])+1}async setupCall(s){var h,g;const r=s.session;if(this.getActiveCalls[r.id]!==void 0)return;const a=this.getNewRoomId(),t={started:new Date,incomingInProgress:!1,roomId:a};r.direction==="incoming"?(this.context.logger.log("New incoming call from",(g=(h=r._remote_identity)==null?void 0:h._uri)==null?void 0:g._user),t.incomingInProgress=!0,this.context.subscribe(rs.CALL_CONFIRMED,T=>{r.id===T.id&&(this.updateRoom({incomingInProgress:!1,roomId:a}),this.startCallTimer(r.id))}),this.context.subscribe(rs.CALL_FAILED,T=>{r.id===T.id&&(this.updateRoom({incomingInProgress:!1,roomId:a}),this.deleteRoomIfEmpty(a))})):r.direction==="outgoing"&&(r.once("confirmed",()=>{this.startCallTimer(r.id)}),this.startCallTimer(r.id));const n=r,p=this.hasAutoAnswerHeaders(s),d=n.direction==="incoming"&&!this.hasActiveCalls&&(p||this.autoAnswer);n.roomId=a,n.localMuted=!1,n.autoAnswer=d,d?this.addCall(n,!1):this.addCall(n),this.addCallStatus(r.id),this.addRoom(t),d&&this.answerCall(n._id)}removeCall(s){const r={...this.activeCalls};delete r[s],this.activeCalls={...r};const o={...this.extendedCalls};delete o[s],this.extendedCalls={...o},this.context.emit("changeActiveCalls",this.activeCalls)}activeCallListRemove(s){const r=this.extendedCalls[s._id];this.stopVUMeter("origin"),r.connection.getSenders().forEach(a=>{a.track.stop()});const o=r.roomId;this.removeCall(s._id),this.roomReconfigure(o)}async newRTCSessionCallback(s){const r=s.session;if(this.isDND){r.terminate({status_code:486,reason_phrase:"Do Not Disturb"});return}if(r.on("ended",o=>{var t,n;this.stopVUMeter(r.id),this.context.logger.log("Session ended for",(n=(t=r._remote_identity)==null?void 0:t._uri)==null?void 0:n._user),this.context.triggerListener({listenerType:rs.CALL_ENDED,session:r,event:o});const a=this.getActiveCalls[r.id];a&&this.activeCallListRemove(a),this.stopCallTimer(r.id),this.removeCallStatus(r.id),this.removeCallMetrics(r.id),Object.keys(this.extendedCalls).length||(this.setIsMuted(!1),this.initialStreamValue.getTracks().forEach(p=>p.stop()),this.initialStreamValue=null)}),r.on("progress",o=>{var a,t;this.context.logger.log("Session in progress for",(t=(a=r._remote_identity)==null?void 0:a._uri)==null?void 0:t._user),this.context.triggerListener({listenerType:rs.CALL_PROGRESS,session:r,event:o})}),r.on("failed",o=>{var t,n;this.stopVUMeter(r.id),this.context.logger.log("Session failed for",(n=(t=r._remote_identity)==null?void 0:t._uri)==null?void 0:n._user),this.context.triggerListener({listenerType:rs.CALL_FAILED,session:r,event:o}),r.id===this.callAddingInProgress&&(this.callAddingInProgress=void 0);const a=this.getActiveCalls[r.id];a&&this.activeCallListRemove(a),this.stopCallTimer(r.id),this.removeCallStatus(r.id),this.removeCallMetrics(r.id),Object.keys(this.extendedCalls).length||(this.setIsMuted(!1),this.initialStreamValue.getTracks().forEach(p=>p.stop()),this.initialStreamValue=null)}),r.on("confirmed",o=>{var a,t;this.context.logger.log("Session confirmed for",(t=(a=r._remote_identity)==null?void 0:a._uri)==null?void 0:t._user),this.context.triggerListener({listenerType:rs.CALL_CONFIRMED,session:r,event:o}),this.updateCall(r),r.id===this.callAddingInProgress&&(this.callAddingInProgress=void 0)}),await this.setupCall(s),r.direction==="outgoing"){const o=this.getActiveCalls[r.id].roomId;this.setActiveRoom(o)}}setMuteWhenJoin(s){this.muteWhenJoinEnabled=s,this.context.emit("changeMuteWhenJoin",s)}setMicrophoneSensitivity(s){if(s<0||s>1)throw new Error("Value should be in range from 0 to 1!");this.microphoneInputLevelValue=s,this.roomReconfigure(this.currentActiveRoomId)}setSpeakerVolume(s){this.speakerVolumeValue=s,Object.values(this.extendedCalls).forEach(r=>{r.audioTag&&(r.audioTag.volume=s,this.updateCall(r))})}setAutoAnswer(s){this.isAutoAnswer=s}setSelectedInputDevice(s){localStorage.setItem(ho.SELECTED_INPUT_DEVICE,s),this.selectedMediaDevices.input=s,this.context.emit("changeActiveInputMediaDevice",s)}setSelectedOutputDevice(s){localStorage.setItem(ho.SELECTED_OUTPUT_DEVICE,s),this.selectedMediaDevices.output=s,this.context.emit("changeActiveOutputMediaDevice",s)}setCallMetrics(s){const r={...s};delete r.callId,this.callMetrics={...this.callMetrics,[s.callId]:r},this.context.emit("changeCallMetrics",this.callMetrics)}removeCallMetrics(s){const r={...this.callMetrics};delete r[s],this.callMetrics={...r},this.context.emit("changeCallMetrics",this.callMetrics)}getCallQuality(s){const r=new rE(this.metricConfig),o=r.createProbe(s.connection,{cid:s._id}),a=[];let t;o.onreport=n=>{Object.entries(n.audio).forEach(([h,g])=>{g.direction==="inbound"&&!a.includes(h)&&(a.push(h),t=h)});const p=n.audio[t],d=iE(p,lE);d.callId=s._id,this.setCallMetrics(r)},this.context.subscribe(rs.CALL_ENDED,n=>{n._id===s._id&&r.stopAllProbes()}),r.startAllProbes()}setupVUMeter(s,r){this.VUMeter.start(s,r)}stopVUMeter(s){this.VUMeter.stop(s)}async setupStream(){const s=await navigator.mediaDevices.getUserMedia(this.getUserMediaConstraints);this.initialStreamValue&&(this.initialStreamValue.getTracks().forEach(r=>r.stop()),this.initialStreamValue=null),this.initialStreamValue=s}async triggerAddStream(s,r){this.setIsMuted(this.muteWhenJoin||this.isMuted),this.initialStreamValue||await this.setupStream();const o=Vf(this.initialStreamValue,this.microphoneInputLevel*2),a=this.isMuted||this.muteWhenJoin;o.getTracks().forEach(n=>n.enabled=!a),this.setActiveStream(o),await r.connection.getSenders()[0].replaceTrack(o.getTracks()[0]);const t=new MediaStream([s.track]);JT(t,r,this.selectedOutputDevice,this.speakerVolume),this.setupVUMeter(t,r._id),this.getCallQuality(r),this.updateCall(r)}initCall(s,r){if(this.checkInitialized(),s.length===0)return console.error("Target must be a valid string");this.context.logger.log(`Calling sip:${s}@${this.context.sipDomain}...`);const o=this.context.call(`sip:${s}@${this.context.sipDomain}`,this.sipOptions);this.callAddingInProgress=o.id,r&&this.currentActiveRoomId!==void 0&&this.processRoomChange({callId:o.id,roomId:this.currentActiveRoomId}),o.connection.addEventListener("track",a=>{this.triggerAddStream(a,o)})}async processRoomChange({callId:s,roomId:r}){const o=this.extendedCalls[s].roomId;this.extendedCalls[s].roomId=r;const a=this.extendedCalls[s];return this.updateCall(a),await this.setActiveRoom(r),Promise.all([this.roomReconfigure(o),this.roomReconfigure(r)]).then(()=>{this.deleteRoomIfEmpty(o),this.deleteRoomIfEmpty(r)})}}class cE{constructor(s){this.context=s}get sipOptions(){return{...this.context.options.sipOptions}}initCall(s){if(s.length===0)return console.error("Target must be a valid string");this.context.logger.log(`Calling sip:${s}@${this.context.sipDomain}...`),this.context.joinVideoCall(`sip:${s}@${this.context.sipDomain}`,this.sipOptions),console.log("video call")}}class fE{constructor(s){this.activeMessages={},this.extendedMessages={},this.msrpHistory={},this.context=s,this.context.on(this.context.newMSRPSessionEventName,this.newMSRPSessionCallback.bind(this.context))}get isMSRPInitializing(){return this.isMSRPInitializingValue}get getActiveMessages(){return this.activeMessages}msrpAnswer(s){const r=this.extendedMessages[s];this.updateMSRPSession(r)}updateMSRPSession(s){this.activeMessages[s._id]=jf(s),this.context.emit("changeActiveMessages",this.activeMessages)}addMMSRPSession(s){this.activeMessages={...this.activeMessages,[s._id]:jf(s)},this.extendedMessages[s._id]=s,this.context.emit("changeActiveMessages",this.activeMessages)}addMSRPMessage(s,r){const o=this.msrpHistory[r.id]||[];o.push(s),this.msrpHistory={...this.msrpHistory,[r.id]:[...o]},this.context.emit("newMSRPMessage",{message:s,session:r})}messageTerminate(s){const r=this.extendedMessages[s];r._status!==8&&r.terminate()}addMessageSession(s){if(!s._id||this.getActiveMessages[s._id]!==void 0)return;const o=s;this.addMMSRPSession(o)}triggerMSRPListener({listenerType:s,session:r,event:o}){const a=this.context.listenersList[s];!a||!a.length||a.forEach(t=>{t(r,o)})}removeMMSRPSession(s){const r={...this.activeMessages};delete r[s],this.activeMessages={...r};const o={...this.extendedMessages};delete o[s],this.extendedMessages={...o},this.context.emit("changeActiveMessages",this.activeMessages)}activeMessageListRemove(s){this.removeMMSRPSession(s._id)}newMSRPSessionCallback(s){const r=s.session;r.on("ended",o=>{this.triggerMSRPListener({listenerType:rs.CALL_ENDED,session:r,event:o});const a=this.getActiveMessages[r.id];this.activeMessageListRemove(a)}),r.on("failed",o=>{this.triggerMSRPListener({listenerType:rs.CALL_FAILED,session:r,event:o});const a=this.getActiveMessages[r.id];this.activeMessageListRemove(a)}),r.on("confirmed",o=>{this.triggerMSRPListener({listenerType:rs.CALL_CONFIRMED,session:r,event:o}),this.updateMSRPSession(r)}),r.on("newMessage",o=>{this.addMSRPMessage(o,r)}),this.addMessageSession(r)}setIsMSRPInitializing(s){this.isMSRPInitializingValue=s,this.context.emit("isMSRPInitializingChanged",s)}initMSRP(s,r,o){if(s.length===0)return console.error("Target must be a valid string");const a=this.context.startMSRP(s,o);a.on("active",()=>{this.addMessageSession(a),a.sendMSRP(r),this.setIsMSRPInitializing(!1)}),this.setIsMSRPInitializing(!0)}sendMSRP(s,r){const o=this.extendedMessages[s];if(!o)throw new Error(`MSRP session with id ${s} doesn't exist!`);o.sendMSRP(r)}}const Qi={AUDIO:"audio",VIDEO:"video",MSRP:"msrp"};class dE extends KT{constructor(s,r){if(!s.modules.length)throw new Error("options.modules should include at least 1 module");const o={...s.configuration,sockets:s.socketInterfaces.map(a=>new fv.WebSocketInterface(a))};super(o),this.initialized=!1,this.logger=console,this.newRTCSessionEventName="newRTCSession",this.registeredEventName="registered",this.unregisteredEventName="unregistered",this.disconnectedEventName="disconnected",this.connectedEventName="connected",this.newMSRPSessionEventName="newMSRPSession",this.isReconnecting=!1,this.audio=null,this.msrp=null,this.video=null,this.listenersList={},this.modules=[],s.pnExtraHeaders&&Object.keys(s.pnExtraHeaders).length&&this.registrator().setExtraContactParams(s.pnExtraHeaders),this.options=s,this.modules=s.modules,r&&XT(r)&&(this.logger=r)}on(s,r){return super.on(s,r)}off(s,r){return super.off(s,r)}emit(s,r){return super.emit(s,r)}get sipDomain(){return this.options.sipDomain}begin(){if(this.isConnected()){console.error("Connection is already established");return}return this.modules.includes(Qi.AUDIO)&&(this.audio=new uE(this)),this.modules.includes(Qi.MSRP)&&(this.msrp=new fE(this)),this.modules.includes(Qi.VIDEO)&&(this.video=new cE(this)),this.on(this.registeredEventName,()=>{this.logger.log("Successfully registered to",this.options.socketInterfaces[0]),this.setInitialized(!0)}),this.on(this.unregisteredEventName,()=>{this.logger.log("Unregistered from",this.options.socketInterfaces[0]),this.setInitialized(!1)}),this.on(this.connectedEventName,()=>{this.logger.log("Connected to",this.options.socketInterfaces[0]),this.isReconnecting=!1}),this.on(this.disconnectedEventName,()=>{this.isReconnecting||(this.logger.log("Disconnected from",this.options.socketInterfaces[0]),this.logger.log("Reconnecting to",this.options.socketInterfaces[0]),this.isReconnecting=!0,this.stop(),this.setInitialized(!1),setTimeout(this.start.bind(this),5e3))}),this.logger.log("Connecting to",this.options.socketInterfaces[0]),this.start(),this}subscribe(s,r){const a=!this.listenersList[s]||!this.listenersList[s].length?[r]:[...this.listenersList[s],r];this.listenersList={...this.listenersList,[s]:a}}removeIListener(s){const r={...this.listenersList};delete r[s],this.listenersList={...r}}triggerListener({listenerType:s,session:r,event:o}){const a=this.listenersList[s];!a||!a.length||a.forEach(t=>{t(r,o)})}setInitialized(s){this.initialized=s,this.emit("ready",s)}}const Mu=20,tt=4;let ku={};const Wd=(c,s)=>{c&&c.getTracks().length?requestAnimationFrame(()=>hE(c,s)):Kd(s)},Kd=c=>{clearInterval(ku[c]),delete ku[c]},_o=c=>{const s=Mu/4;return c<s?c:s},hE=(c,s)=>{Kd(s);const r=Xt.createAnalyser(),o=Xt.createMediaStreamSource(c),a=Xt.createScriptProcessor(2048,1,1);r.smoothingTimeConstant=.8,r.fftSize=1024,o.connect(r),r.connect(a),a.connect(Xt.destination);const t=document.getElementById(`canvas-${s}`);if(!t)return;const n=tt*5,p=Mu/2;t.setAttribute("width",`${n}`),t.setAttribute("height",`${Mu}`);const d=t.getContext("2d");ku[s]=setInterval(()=>{if(!d)return;const h=new Uint8Array(r.frequencyBinCount);r.getByteFrequencyData(h);let g=0;const T=h.length;for(let A=0;A<T;A++)g+=h[A];const E=g/T;d.fillStyle="blue";const S=E/2;d.clearRect(0,p,tt,p),d.fillRect(0,p,tt,_o(S)),d.clearRect(0,p,tt,-p),d.fillRect(0,p,tt,0-_o(S)),d.clearRect(tt*2,p,tt,p),d.fillRect(tt*2,p,tt,E),d.clearRect(tt*2,p,tt,-p),d.fillRect(tt*2,p,tt,0-E),d.clearRect(tt*4,p,tt,p),d.fillRect(tt*4,p,tt,_o(S)),d.clearRect(tt*4,p,tt,-p),d.fillRect(tt*4,p,tt,0-_o(S))},200)};function Yd(c){return c.target_addr[0].match(/msrp:\/\/(.*?)\./)[1]}function _E(){const c=Date.now().toString(16),s=Math.floor(Math.random()*1e6).toString(16);return`${c}-${s}`}class pE{constructor(s,r){if(this.isConnected=!1,this.dbName="",this.db=null,this.version=2,!s)throw new Error("Database name should be provided in constructor parameters!");this.dbName=s,this.version=r}connect(){return this.isConnected?Promise.resolve():new Promise((s,r)=>{const o=indexedDB.open(this.dbName,this.version);o.onerror=a=>{this.isConnected=!1,console.error("Error opening database:",a.target.error),r(a.target.error)},o.onsuccess=a=>{this.isConnected=!0,this.db=a.target.result,s()},o.onupgradeneeded=a=>{this.db=a.target.result,this.db.objectStoreNames.contains("messages")||this.db.createObjectStore("messages",{keyPath:"id"})}})}saveData(s,r){return this.db?new Promise((o,a)=>{this.db.objectStoreNames.contains("messages")||console.error("Store 'messages' is not contained");const n=this.db.transaction("messages","readwrite").objectStore("messages");s.uid=r,s.id=_E();const p=n.add(s);p.onsuccess=d=>{o(d.target.result)},p.onerror=d=>{console.error("Error writing data to store",d.target.error),a(d.target.error)}}):Promise.reject("Database not initialized. Call connect first!")}getData(s){return this.db?new Promise((r,o)=>{this.db.objectStoreNames.contains("messages")||o("Store 'messages' is not contained");const a=this.db.transaction("messages","readonly"),t=a.objectStore("messages"),n=[];a.oncomplete=()=>{r(n)},a.onerror=()=>{o("Error retrieving records")};const p=t.openCursor();p.onsuccess=d=>{const h=d.target.result;if(h){const g=h.value;g.uid===s&&n.push(g),h.continue()}},p.onerror=()=>{o("Cursor error")}}):Promise.reject("Database not initialized. Call connect first!")}close(){this.db&&this.db.close()}}let De=null,Ho=null,zd=!1;const au=document.getElementById("loginToAppForm"),mE=document.getElementById("loginPage"),gE=document.getElementById("webRTCPage"),Es=document.getElementById("makeCallForm"),uu=document.getElementById("videoCallForm"),cu=document.getElementById("sendMessageForm"),fu=document.getElementById("callAddingIndicator"),is=document.getElementById("microphoneEl"),ls=document.getElementById("speakerEl"),Zi=document.getElementById("muteWhenJoinInputEl"),el=document.getElementById("DNDInputEl"),Jt=document.getElementById("muteContainerEl"),Lu=document.getElementById("addToCurrentRoomInputEl"),du=document.getElementById("inputLevelApplyButton"),hu=document.getElementById("outputLevelApplyButton"),TE=document.getElementById("inputLevel"),vE=document.getElementById("outputLevel"),_u=document.getElementById("dtmfForm"),tl=document.getElementById("dtmfInput"),Qf=document.getElementById("dtmfSendButton"),EE=document.getElementById("agentVoiceLevelContainer"),SE=document.getElementById("activeCallsCounter"),In=document.getElementById("roomSelect"),Fo=document.getElementById("roomsContainer"),Zf=document.getElementById("messagesContainer"),Jd=c=>{c.preventDefault(),De.audio.isMuted?De.audio.unmute():De.audio.mute()},Xd=c=>{const s=Object.values(c).filter(o=>o.roomId===De.audio.currentActiveRoomId),r=tl.value;s.length!==1||!r?Qf.setAttribute("disabled","true"):Qf.removeAttribute("disabled")},yE=c=>{Jt&&(Object.keys(c).length?Jt.querySelector("button").removeAttribute("disabled"):Jt.querySelector("button").setAttribute("disabled","true"))},AE=c=>{const s=document.getElementById("volume-level-agent-voice-level");if(!Object.keys(c).length&&s&&s&&s.remove(),!s){const r=document.createElement("span");r.setAttribute("id","volume-level-agent-voice-level"),r.classList.add("volume-wrapper");const o=document.createElement("canvas");o.setAttribute("id","canvas-agent-voice-level"),o.width=20,o.height=20,r.appendChild(o),EE.appendChild(r)}},CE=c=>{const s=Object.keys(c).length;SE.innerText=`${s}`};function RE(c){return`room-${c}`}function IE(c){return`call-${c}`}function Qd(c){return`callTimer-${c}`}const pu=c=>{const s=De.audio.currentActiveRoomId;In.querySelectorAll("option:not(.noData)").forEach(r=>r.remove()),Fo.querySelectorAll(".roomWrapper").forEach(r=>r.remove()),Object.values(c).forEach(r=>{const o=document.createElement("option");o.value=`${r.roomId}`,o.text=`Room ${r.roomId}`,o.setAttribute("key",`${r.roomId}`),r.roomId===s&&o.setAttribute("selected",""),In.appendChild(o);const a=document.createElement("div");a.setAttribute("id",RE(r.roomId)),a.setAttribute("key",`${r.roomId}`),a.classList.add("roomWrapper");const t=document.createElement("div"),n=document.createElement("b"),p=document.createElement("span");n.innerText=`Room ${r.roomId} - `,p.innerText=`${r.started}`,t.appendChild(n),t.appendChild(p),a.appendChild(t);const d=document.createElement("br");a.appendChild(d);const h=document.createElement("ul");a.appendChild(h),Fo.appendChild(a),Zd(r,De.audio.getActiveCalls)})},Zd=(c,s)=>{const r=Fo.querySelector(`#room-${c.roomId} ul`);r.querySelectorAll("li").forEach(a=>a.remove());const o=Object.values(s).filter(a=>a.roomId===c.roomId);o.forEach((a,t)=>{var L;const n=document.createElement("li");n.setAttribute("key",`${t}`),n.setAttribute("id",IE(a.id));const p=document.createElement("div");p.innerText=a._id;const d=document.createElement("span");d.setAttribute("id",Qd(a.id)),d.innerText="00:00:00",n.appendChild(p),n.appendChild(d);const h=document.createElement("button");h.innerText=a.localMuted?"Unmute":"Mute",h.addEventListener("click",ne=>{ne.preventDefault();const D=a.localMuted;D?De.audio.unmuteCaller(a._id):De.audio.muteCaller(a._id),h.innerText=D?"Mute":"Unmute"}),n.appendChild(h);const g=document.createElement("button");g.innerText="Hangup",g.addEventListener("click",ne=>{ne.preventDefault(),De.audio.terminateCall(a._id)}),n.appendChild(g);const T=document.createElement("button");if(T.innerText="Transfer",T.addEventListener("click",ne=>{ne.preventDefault();const D=prompt("Please enter target:");(D!==null||D!=="")&&De.audio.transferCall(a._id,D)}),n.appendChild(T),o.length===2){const ne=document.createElement("button");ne.innerText=`Merge ${c.roomId}`,ne.addEventListener("click",D=>{D.preventDefault(),De.audio.mergeCall(c.roomId)}),n.appendChild(ne)}const E=document.createElement("button");E.innerText=a._localHold?"UnHold":"Hold",E.classList.add("holdAgent");let S=a._localHold;if(E.addEventListener("click",async ne=>{ne.preventDefault(),S?await De.audio.unholdCall(a._id):await De.audio.holdCall(a._id),E.innerText=S?"Hold":"UnHold",S=!S}),n.appendChild(E),a.direction!=="outgoing"&&!a._is_confirmed){const ne=document.createElement("button");ne.innerText="Answer",ne.addEventListener("click",D=>{D.preventDefault(),De.audio.answerCall(a._id)}),n.appendChild(ne)}const A=document.createElement("select"),R=document.createElement("option");R.value=String(a.roomId),R.text=`Room ${a.roomId}`,A.appendChild(R),Object.values(De.audio.getActiveRooms).forEach(ne=>{if(a.roomId===ne.roomId)return;const D=document.createElement("option");D.value=String(ne.roomId),D.text=`Room ${ne.roomId}`,A.appendChild(D)}),A.addEventListener("change",ne=>{ne.preventDefault();const D=ne.target;De.audio.moveCall(a._id,parseInt(D.value))}),n.appendChild(A);const C=document.createElement("span");C.setAttribute("id",`volume-level-${a._id}`),C.classList.add("volume-wrapper");const $=document.createElement("canvas");$.setAttribute("id",`canvas-${a._id}`),$.width=20,$.height=20,C.appendChild($),n.appendChild(C),(L=a.audioTag)!=null&&L.srcObject&&Wd(a.audioTag.srcObject,a._id),r.appendChild(n)})},bE=c=>{Zf.querySelectorAll(".messageWrapper").forEach(r=>r.remove());const s=document.getElementById("msrpTargetLabel");s&&(Object.keys(c).length?s.style.display="none":s.style.display="inline"),Object.values(c).forEach(async r=>{const o=document.createElement("div");o.setAttribute("id",`message-${r._id}`),o.setAttribute("key",`${r._id}`),o.classList.add("messageWrapper");const a=document.createElement("b");if(a.innerText=`Message ${r._id}`,o.appendChild(a),r.direction!=="outgoing"&&r.status!=="active"){const d=document.createElement("button");d.innerText="AnswerMsg",d.addEventListener("click",h=>{h.preventDefault(),De.audio.msrpAnswer(r._id),o.removeChild(d),d.disabled=!0,d.style.display="none"}),o==null||o.appendChild(d)}const t=document.createElement("button");t.innerText="Hangup",t.addEventListener("click",d=>{d.preventDefault(),De.messageTerminate(r._id)}),o.appendChild(t);const n=document.createElement("div");n.setAttribute("id",`history-${r._id}`),n.classList.add("history-wrapper"),o.appendChild(n),Zf.appendChild(o);const p=Yd(r);if(p){const d=await Ho.getData(p);n.querySelectorAll(".history-message").forEach(h=>h.remove()),d.forEach(h=>{eh({message:h,session:r})})}})},eh=({message:c,session:s},r=!1)=>{if(r){const n=Yd(s);Ho.saveData(c,n)}const o=document.getElementById(`history-${s._id}`);if(!o)return;const a=document.createElement("div");c.direction==="outgoing"?a.classList.add("message-right"):a.classList.add("message-left");const t=document.createElement("p");t.innerText=c.body,t.classList.add("history-message"),a.appendChild(t),o.appendChild(a),o.scrollTop=o.scrollHeight};window.addEventListener("DOMContentLoaded",()=>{Jt&&Jt.querySelector("button").addEventListener("click",Jd),Lu&&Lu.addEventListener("change",async c=>{c.preventDefault(),zd=c.target.checked})});au==null||au.addEventListener("submit",c=>{c.preventDefault();const s=c.target;if(!(s instanceof HTMLFormElement))return;const r=new URLSearchParams(window.location.search),o=new FormData(s),a=o.get("username")||r.get("username"),t=o.get("password")||r.get("password"),n=o.get("token")||r.get("token"),p=o.get("domain")||r.get("domain");if(a&&p&&!t&&!n){alert("Fill up password or token");return}if(!a||!t&&!n||!p){alert("Fill up all required fields");return}try{const d={session_timers:!1,uri:`sip:${a}@${p}`};t&&(d.password=t),n&&(d.authorization_jwt=n),De=new dE({configuration:d,socketInterfaces:[`wss://${p}`],sipDomain:`${p}`,sipOptions:{session_timers:!1,extraHeaders:["X-Bar: bar"],pcConfig:{}},modules:[Qi.AUDIO,Qi.VIDEO]}),De.on("ready",()=>{Jt&&(Jt.querySelector("button").setAttribute("disabled","true"),Lu.checked=!1,Ho=new pE("msrpHistory",6),Ho.connect())}).on("changeActiveCalls",h=>{Xd(h),yE(h),AE(h),CE(h),Object.values(De.audio.getActiveRooms).forEach(g=>{Zd(g,h)})}).on("changeActiveMessages",h=>{bE(h)}).on("newMSRPMessage",h=>{eh(h,!0)}).on("callAddingInProgressChanged",h=>{fu&&(h===void 0?(fu.classList.add("hidden"),Es==null||Es.querySelector('button[type="submit"]').removeAttribute("disabled")):(fu.classList.remove("hidden"),Es==null||Es.querySelector('button[type="submit"]').setAttribute("disabled","true")))}).on("changeAvailableDeviceList",h=>{const g=h.filter(E=>E.kind==="audioinput"),T=h.filter(E=>E.kind==="audiooutput");if(is){for(;is.childNodes.length>=1;)is.removeChild(is.firstChild);g.forEach(E=>{const S=document.createElement("option");S.value=E.deviceId,S.text=E.label,is.appendChild(S)})}if(ls){for(;ls.childNodes.length>=1;)ls.removeChild(ls.firstChild);T.forEach(E=>{const S=document.createElement("option");S.value=E.deviceId,S.text=E.label,ls.appendChild(S)})}}).on("changeActiveInputMediaDevice",h=>{is&&(is.value=h)}).on("changeActiveOutputMediaDevice",h=>{ls&&(ls.value=h)}).on("changeMuteWhenJoin",h=>{Zi&&(Zi.checked=h)}).on("changeIsDND",h=>{el&&(el.checked=h)}).on("changeIsMuted",h=>{if(!Jt)return;Jt.removeChild(Jt.querySelector("button"));const g=document.createElement("button"),T=h?"Unmute":"Mute";g.classList.add("muteButtonEl"),g.innerText=T,g.addEventListener("click",Jd),Jt.appendChild(g)}).on("changeActiveStream",h=>{Wd(h,"agent-voice-level")}).on("changeCallVolume",h=>{}).on("currentActiveRoomChanged",h=>{Fo.querySelectorAll(".roomWrapper").forEach(T=>{const E=+T.id.split("-")[1];T.querySelectorAll(".holdAgent").forEach(S=>{E===h?S.removeAttribute("disabled"):S.setAttribute("disabled","")})});const g=In.querySelectorAll("option");if(g.forEach(T=>T.removeAttribute("selected")),!h){In.querySelector("option.noData").setAttribute("selected","");return}g.forEach(T=>{T.value===`${h}`&&T.setAttribute("selected","")})}).on("addRoom",({roomList:h})=>{pu(h)}).on("updateRoom",({roomList:h})=>{pu(h)}).on("removeRoom",({roomList:h})=>{pu(h)}).on("changeCallTime",h=>{Object.values(h).forEach(g=>{const T=document.getElementById(Qd(g.callId));T&&(T.innerText=`${g.formatted}`)})}).begin(),mE.style.display="none",gE.style.display="block"}catch(d){console.error(d)}});Es==null||Es.addEventListener("submit",c=>{var a;c.preventDefault();const s=c.target;if(!(s instanceof HTMLFormElement))return;const o=new FormData(s).get("target");if(typeof o!="string"||o.length===0){alert("Please provide a valid string!");return}(a=De.audio)==null||a.initCall(o,zd)});uu==null||uu.addEventListener("submit",c=>{var a;c.preventDefault();const s=c.target;if(!(s instanceof HTMLFormElement))return;const o=new FormData(s).get("target");if(typeof o!="string"||o.length===0){alert("Please provide a valid string!");return}(a=De.video)==null||a.initCall(o)});cu==null||cu.addEventListener("submit",c=>{c.preventDefault();const s=c.target;if(!(s instanceof HTMLFormElement))return;const r=Object.keys(De.msrp.getActiveMessages).length,o=new FormData(s);let a;r||(a=o.get("target"));const t=o.get("message"),n=o.get("extraHeaders");if(!r&&(typeof a!="string"||a.length===0)){alert("Please provide a valid string!");return}const p={};if(typeof n=="string"&&(p.extraHeaders=n.split(",")),r){const d=Object.values(De.msrp.getActiveMessages)[0];De.msrp.sendMSRP(d._id,t)}else De.msrp.initMSRP(a,t,p)});is==null||is.addEventListener("change",async c=>{c.preventDefault();const s=c.target;await De.audio.setMicrophone(s.value)});ls==null||ls.addEventListener("change",async c=>{c.preventDefault();const s=c.target;await De.audio.setSpeaker(s.value)});Zi==null||Zi.addEventListener("change",async c=>{c.preventDefault();const s=c.target;De.audio.setMuteWhenJoin(s.checked)});el==null||el.addEventListener("change",async c=>{c.preventDefault();const s=c.target;De.audio.isDND=s.checked});du==null||du.addEventListener("click",async c=>{c.preventDefault();const s=Number(TE.value);De.audio.setMicrophoneSensitivity(s)});hu==null||hu.addEventListener("click",async c=>{c.preventDefault();const s=Number(vE.value);De.audio.setSpeakerVolume(s)});tl==null||tl.addEventListener("input",async c=>{c.preventDefault(),Xd(De.audio.getActiveCalls)});_u==null||_u.addEventListener("submit",c=>{if(c.preventDefault(),!(c.target instanceof HTMLFormElement))return;const r=Object.values(De.audio.getActiveCalls).filter(a=>a.roomId===De.audio.currentActiveRoomId),o=tl.value;De.audio.sendDTMF(r[0].id,o)});In==null||In.addEventListener("change",async c=>{c.preventDefault();const s=c.target,r=parseInt(s.value),o=isNaN(r)?void 0:r;await De.audio.setActiveRoom(o)});

</script>
  <style>
.hidden{display:none}.login-form{display:flex;flex-direction:column;align-items:center}.volume-wrapper{margin:0 10px}select::-ms-expand{display:none}select{display:inline-block;box-sizing:border-box;margin-top:5px;padding:.5em 2em .5em .5em;border:1px solid #eee;font:inherit;line-height:inherit;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background-repeat:no-repeat;background-image:linear-gradient(45deg,transparent 50%,currentColor 50%),linear-gradient(135deg,currentColor 50%,transparent 50%);background-position:right 15px top 1em,right 10px top 1em;background-size:5px 5px,5px 5px}button{background-color:#a5c544;border:none;border-radius:3px;color:#fff;padding:10px 25px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;cursor:pointer}button:disabled,button[disabled]{background-color:#ccc}input[type=text],input[type=number]{padding:10px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.login-form input{display:block}.call-quick-actions{width:300px;display:flex;justify-content:space-between;margin:20px 0}.history-wrapper{display:flex;flex-direction:column;width:700px;max-width:90vw;overflow-y:auto;max-height:300px}.history-message{margin:10px 20px}.message-right{display:flex;justify-content:flex-end;background-color:#f1f8dc;border-top:1px solid #fff}.message-left{display:flex;justify-content:flex-start;background-color:#fdfdfd;border-top:1px solid #fff}

</style>
</head>
<body>
    <div>
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABoCAYAAACHQEjkAAAABHNCSVQICAgIfAhkiAAAIABJREFUeJzsnXd8W+XVx3/natqW7XjFdjyybTl7J2QvRglQNmW2lC5GS1vgLYW2QMumUFooXYwWKDMBwigjyyYhZDjO8pAzHdtxvJeGte497x+SHA9ZV7Zlyzb3+/k4kXXPfe65kqxznvM85xyCgoKCgoKCwnBBz7WXj4OAdLCQDuIMMI0BIQOgcaerbBnpMz6JDWYg9QArqqCgoKCgoBAcSVx/xWSA0sFIA2EsGJkAMlrM7vFtbe4EjUZAfZMbRP4HUKmFoC+mOAAKCgoKCgoDDNddlgmoxoOQCXh/mDNAlFlTZx9HoChBINQ3uHo07mq1AGbveNyDjIoAIB5Ao5xOPVxGQUFBQUFBIQjU3HT5eIjCOBDGg5EJRgaAsSBknq5qS9fpVBqfcE/GvSeD3luIgIR49UxKfO+QrOKhueSgEVfKKxIBGgUgCuBIgOwMtBHQnE25DQBqw62kgoKCgsKIIJrrr8gEaCKAyWDOAJAOgTLsbWJGXYMzNUKvQn2t2zOb9mPc9XpVJ+MeKkMfEKZMALIOwJCMAJTw8qkE4XwCZtbXuGZUVzgmiBLHqFTy6jIDkii1JafrTqak6Q5LwGEB/Hk25eUPguoKCgoKCsODRK6/Mh2AEcBk75p7OoBxTS3O1LY2KV6r8aynE3lsS7fZOwODYc97AxGQEKe9nZLWvyArOxgKyVHESyaroL2xqd51Yfkx21x1hxfdR2+8Jn/nud2MMWN1h5JStP8j8CvZlHckBKorKCgoKAwt1NxyeSrcQiaASWBMBGMswBkMZNbWO1PAiBIEAlHPxn1QZuoDRGKC9glKXH+vnFzYHIASXjIR0PzcdMByvSQiDuRRZiBfdCKvt8aAIKA5Z3b0fwj8dDblVgzcVRUUFBQUQoSBGy4fAxYyAEwCMBHABDDGWm1iWqvZlaBWkxYYucZdDiIgIUH7ASWsv0xWdjAU6kgpr7yxosz+YEuDe8JgGP2e8H0gJAlITtMUJaVq7zNS3oeDr4mCgoLCNx4CkMB1l4+BIIyFhLEAskDIApDW1OwcY7OJcVqtZx1YEM7ajW+ScQ+WxETtQUpYP0tObtAcgFJe9cChPa33q9SkAYbWm+TzEtUaas6aEXlXDuW9HG6dFBQUFEYIOuDm0VzfkgpQJkDjwMgCIRtAWl2DI9nlZINGI3SbtXedvQ8luzFU8b6GzQmTP4yTlR1oZUy84v8OfG1+QqsThsWbRwSo1NSaPSPqZiPlvhdufRQUFBSGK1x75f/V1Due8Lfe3tG4DwfbMFwgAmw2EZmzPpG178GXDOolJl520Xv75lmLC6xPaLTDw/gDng+i28UxRfssG76qWVxUxEsmhFsnBQUFhWGJiivUaupm6Dv+P1xsw3CBGdBqBQCIkJMdCAcgtsi94suifW0fMSNyOL+5NZXOKSX5juOlvOLJcOuioKCgMOxwcVW4VfgmolYTgNGpcnIhXQIo4RXXHt5teUOtoRHl1REBUTGqqrRJ6oXT6KvKcOujoKCgMBzghqsmNDQ4jo8kezAcIAISEjWrKH5DbiC5kEUATLxyffE+6xsqdd+Nv2+NCHT2scslgZntOj01GWLVtfoIoRGENpdT6iY7UDsamAFrqzimZK+9wsQrrhuYqygoKCiMLCjh3RPh1uEbi0gZciL9LgVcwksTT5U6DxYXWMb09tz2VDwRiEtSV6SN0+0GcJAAkwQcAVwnc2inuafzS3nJKILGKIFnCKBZTU3uxeVH22aq1J6BQ+l1MgOCQCjaZ/2viVcsN1LeT0I3uoKCgsLIpM0uQq9ThVuNbxTMAAhj5eT6NWc28bJZB3fZ9mu0vZj1e3P/JYnF6fOi3ybgwyy6/FPgZ6390aUDGhMvv4ggXH1wj/k76n5EJHqCCJg8NWr7dH3e8tCOrKCgoDCy4LoryxoanWOVVYDBw1sO+DVKWn9TQLm+XqCEV5xXuMfyuaD2ldeTV0gUGdPnR38CSM8Z6cvP+3rt3mDild9pbXT/uuKkfYYv9SQUEAFxSZqjqzK/zgrNiAoKCgojD66/cmtDo3OVsg9gcElM0O6mxPWLAsn0yQEo4eWXFeXb3uuprWGnCxDgcjFmLox+0ki5TyCIHsVeYkp4dTyBRwHQM0giUBsDjTm0pRFAWy91nidAePJwvmVVxypS/YEIiIlTl62dsGt8/0dTUFBQGHlww5X/aWhw3qQ4AIMHERATra7Spr6XFlCutwObePklhfm2jXLGnwgQ3YzpC6KfMFLubwG4epI9wmuWScC5BMw9ddyWY25yjxUlCO3d/3zX8uaMShJDrSFHwmjNieQ0XREDewD8L4e2FsnpX8LLF9VUul5trHVNDpUTEBuvPrFm/K6J/R9NQUFBYWTB9Vc83NDoul9xAAYPIsDWJoqZMz8JuM+vVw5ACa9cWLjXvEsQ5E+bNtfwRTblfgdAk5/D6lJe82OLxX39sSLbOR0LRQDBz867n8OOqXNjtgJ4xUhb3g10rolX3Hxwt+VlTQhSFomA5DTt4SUpO2f0byQFBQWFkQXXXXlbQ5Pzr4oDMLg4XRLSpn0sIMAifdAOgImXpx/aba3w7bD3OxgBTqeEWYuiLzFS3kddjxfz6nkq0CMH97Sepx6Anfo+HQDA7WL3jIUx/xUg/SaLtvWUu284ZF/+2dFC25JQXHfqnOgPs2nbt/s7loKCgsJIgeuvuKih0fWR4gAMLkRAYtaHyQBqe5QJdrAN+fOsRD1X9iMCJuZE7ZoZmbccXcL9Jl6zsrrS/reGGpcxlBvx5CDypBhOm2fYAnL92Ejbj/uTK+WVdxzaY36uPzUMfNebMsfwGyPlPtL3URQUFBRGDlx3xfSGJtchxQEYXIiAhFHq+TT6vfyeZIIqBHTAunxnIOPPDEyZE/XEzMi8c9DB+JfyyrG7G5bvK9pn3tZY6zL6ZAcLZoAEoHi/Zc3hvfZjJl7zDvzUPsim3OdnLIjMYWZ7MBsbA12vMN/8cAmvWNwPtRUUFBRGDJS04WS4dfjGIggBawHIOgAmXnHvCZPtnJ4MtyQxps+Lut5Iefd2Pm/N44f2WMtOl9nnAOFt+OAr4lNcYL7qrZ3zXCZec2VXmWzabrpi3r7ohNGaI/1xAkggHNxl3tEffRUUFBRGEBaXS5n+DzbeYkDjAskEdABMvHzC4T2Wx3oy3p68/qjV2ZT3hu+5El6VsunY4rLiAvOvBFUvQ+odyvr6++kvzIBGK6Bon/ldE69e70fEvSLj6+wpcwyf9vl6nk5MVORcvq0/uiooKCiMFKIiVfWh+A5XCB4CAMYkWZme+OzIwnKbWczwZ8RFkTFjQfQyI+W2z3ZNvPL8g7utnwW7s759PwABbhcjIkpoiI3T1MTGqZoiIlVtAOB0saa10R3X0uhOtLS6UwUVkeB1W/q7Xh89Sn3q3Ik7jQDsXY+beOUrxQWW7/Wnr0HOnMgrc+jLDX3XUkFBQWH4w/VX7mlocM5X4gCDBxGQEK/dTInrz+1JpsccQROvvKu4wOLX+EsSY+aC6POyOxn/Vb8ozLc8I1d61+cFulySNHNBzDYQbQakT4y0zYQAtQI66JUBqM4l4NIDu1vWaTSC0BcjzQyYm91j39kzz5I9P2rMTMrrtFPSSLk3l/KKxqIC6y97P7qHonzrGwB0fT1fQUFBYUTAKAdhfjBVYxVCSmaggz1FANRvfz3Hpdb4XyGYOjf6B0ba9pLvdxOveqhon/V3AS9EgCQyps6N3gIBf82hre/LaR4Mpbz6tpKD1sckkWN8z3H7P94og/d3Zo8ODEClhqhWkwsgl1qDuoum7p4GP9UFS3jlfQJ4AQB377WjSAnSS0oUQEFB4ZsM1135p4Ym58+VTIDBgwhwuSVr6pSPDT3J+I0AmHjly8UFlm4zeU+aW9TfOhr/El7120DG31cRcMaC6FdUcP16Em2t6f2t9Ew2bX0BwAulvOYRCdARpGYAFkAwE7iVQQ0ANwNoJEjmbMq1A3AgSIOeQ7mPhlJfBQUFhW8gp8N5cfL+Q+QpOuf5/exjSWK4xZHnnbhcHBXouD8HYNThPeYbBVXn4AARkJCsKTFS3m2+50p41Y+L91l/H+gCU+ZEfySBb8mmrXW9Uby3ZNOW+wdyfAUFBQWFPkJcEa5LCwJBFBlOh4jGZidaWl1oaHSgqcWJlhYnjhxvxdqVqVi1JHlEOQHMQIReBQBRAKz+ZLo5ACZe+YK/2b/TKWFF+tcLfL+X8IpFxfusf/c3KBEAQtuU2YaLjLRla99vQUFBQUFhBFAZjvC/IBDKK62YvWpzQLmxGQasXpYCjCAHAPAugddfnUGJ75j8He/qAOgP7TFfq/Iz+5+9KOYGABbvU9GHdtm+Vmu6byHwVsPbYqSta0Ogv4KCgoLCMIcSNxyrP3LJ4NeDYSAiImA/HADAmZq2vrXGHeJ4suzEsQDkHYBSXvHbogJrpzeJCBgzVrc/m3L/63tud8PyvNNldr9v5pQ5hkeNtLXX4fgSXpVCENIAigLIBkgVRtpSB0Dq7VgKCgoKCkOKGkkKTT2X3sDMSIjTysodL7MMum6DAREAph471XZyAA7nW35OXTr9iSIjPkFY5/vdxKtvLy6wzPZn/KfOjfqJkbb+IxjFSnntpRL4suoK55La046Jpv2eDfjesgBgBkr53PXZtOmqYMZTUFBQUBi6uN2SXasV9INaDh6Atodsto589HntiMxQZAbAGN/T8XYHoJRXri0qsER2nf3PmB/9ahblnvE+FXloj/n5rksEADB1btTNRtr270DKHOW12RLoDwd2t1xVvN+zmsDwVOdrv643a2D6fMN3s2nTq8HcZPb9pnl1m5/8lqv1zFQWHYkksbzL1xtIEFkgu6COqNYmjj009uLnPt53Nx0N9vS4hbfc7ao/diUJ6jYI5EYP6ZcMOAFqfweI4CYS3ADTWRkSIahcYPa3/sKQRC2BBYCYWVIzQw2wQIAGLKmZBJtKG31Knz5tb82nf3gTflIf+0PmTW+vbT204UJ3W1MWSWI0s6QGswrsfU+IBYD9x+RYcHb6XRAc7fdJJBIJ7o73zWC1KiJub8vh9+8M5T1M/Pmecxp3PLfOba6ZCpai/b5bDImJnPBtKBbIQZ0Oq5ygLt8pnvdHQ2AVA2CJdWBWEbEGEhPU+mpt4tj9Sde88K7pDioL5T35mHDH1iXOM4WZ7DBr3E67mkWXmiWnClCB3baANStIpXGBNBIgen4XtCKpdG5fkI40OlGt1bu9hwEAEpzq0Wt/vfvAz8hvCLIjsXOv+z2xFAXyF/UjkkS32Hrg3V91fDbt2ldWt+z59xNEQvfPMZEEQXDBz98bAy6ARN8xQRDsnf7OSHAB5D/6yKLOM0khgVnSnH0PIUClqdPEpBYmXf70+6X3xh+Wu+feYnz0dILt8Ccr7XUn40lQixp9rCPU1+iIBKc6duWv95b8kor7O1Zqiv5kQ6MzJxR69QYiYPH8Udi5tzmgHI/AWLM3qjGux+O+B6W84p2iAutVHR0At5txzaJ9WngL9Jh49TvFBZarujoJU+dE3ZtN257o6SImXjXZasGrp0rbFpEQuIKfJ2XQMCubthyUu7m4udc+5qg7dgcR9ZjnOFAwqE6XMvXppt0v93jfPmKmX/qi2Fp1y2Do1SuYAW3kV2PWPXDX0T+v3t2foeLn3fSAva7kXgLpQ6VeMAi6qB3mI9uWhWKs+AU3PWCvNv2SCDHy0gOMoDphyLno1zX/u/+d/g414Zb/Lan98o9/kBzmVRSGOKc+dcb/Nex68Sk5ucjM+VYiiuzpOEsibBX7Ot1A8rrff8dS+PGbodAz9Ag1uoy5jzbu+Otf+jPK5Gc4tfaVyx5wtZ65isDxodIuWDRjpt/X/PVLj/V3HK6/8rOGRuf5g70PQKsVcNdvC/Di6+UB5coKLoTBoA5r35qe8P3ZEhEIvvL4BJc7sNdCBCQkaPMpYf18f8fbYyP7vzZ3M+wzF0b/E17jX8ArMgvzu8tMnWN4O5DxL+Fz/1WUbztSfrRtEWRaAUsSY8YCwzlyxj/1yn+cF5kx3+WsP35vOIw/ABA4yVld+Hhk5nzL+Fs+WR5QlkgMdDxsEAGutiVVH9y7K9p43sa+DDHm1yeyIscubHDUmR4cbOPvof+v7eQffbEwMnNBi6PG9OCQMP4AIIkTLEUb3zZMWFo06QFO6uMoBkPW6s01mx/cwU5LWIw/AJBK65SXAkAkM5ul7rU7BNUQnrdJyY6KvX+OGreoatIfWnpchw1EdM633qz684Iqd2vVj8Nh/AGABLVshdYgCUsqIDMwNiNgOjwAwGx1IRx/Iz5jLggElYqgVhM0agFajQCNRoAgENxuhtXqRmWVDUdOtGLbjhq8+s6JoJyV1lZXRk/H1ABg4hUrirts/hNFhpFy7/P9HgX13wXhbJlfIsAQqz6dTVu/429gE6+eWHrQlm/abx5FgnxvACJg+ryY32bTpl2B5OIX3fKL1r0vPdN1r0K4IKKo2s0P5cUv+uEvG3f960/h1qevSG3Nl0SOXdCo4aSJLeWfNAVzzrgbX11R+99rcsNlWEJBwtLbb636/P4Xhuo9sOicUvXK/Nq0mz9ZdPqVdUFHaTK+/87Shs1PbmeHRV5YYWBhKbXqX2uPpVz1529Vv3vnZ8GckvWUfXzlc0uLJVuDXqZlyzCCw1MMiIHU0fJzk7p6B9JSewxA9Qmfce/42NfcTpI8k167XYTNLsJiccFqdeN0tQ31DQ6cOGVBeaUVX+1uRFWNfx/6vJWpSErUQ5J6NrAtLa4eJxC+tdgLO2sNTJ8X/SWABu8z8Yf2tn5L6GB0RZGROhF+Q6+lvPaSQ3vMG9V+mgJ1Ks0rAQwGEWF0qrYkmzY93ONdAEhYfdeN9uPbnwkkEy4cZw4+k7Tq7ua6bX98Jdy69BUC4lxUWwUgDn4aJHVk4r3HJlW/ce2wNv6JS3/2o7aKXS8M9S9YIgHNWx7cNea2bbOrXlh1QE5+zDUvrmnc8tRmIvnNTwqDAxHBvPv1T9O++9qq0/+5MTeQ7JQHaieVPbf06Mh7/6gyHFdlZiQlyjsATc2OPmcCEHlqDvhspCQxJIlhaxNhtbphtrjQanahps6Omto2nCi3oPSoGZvyGmRGDkyrxRXw3pgBnU4lwBPt7xYtUwNAU714fqebAQDi9jWfUl5zT1GBudPsf9r86D/m0NaTXQc08bk3H85vfVnVpSkQkcdpSE7TFY9O1b0NIDebtMeBT5rhKcsbMPyXvHjGaMvxL18dyl/WtuN5L2c9xZuP3ENhq3rVXwikN0xcusdyfMeMQHJn3rhu33A2/mk/2DWjedPPgspYGRIQofnje/bD01yqx5B60op3Ulq+fmrziMxpGu4QoWnbn7cBk2KBY609SZW9cmHpyDP+ABjl4VhfZwCJCfI92aqq2+BZYQ9eSUEgqFWEFrMLhSXN2FtQj6LSFuza14zyyoBzqJBQV+/ApPHRAWW8m/ZT4accsxoAKo63zVSpz35hOOwSjJTXHqo6tLf1F11m/84c2npP18FMvObCwvzWlzvKEgEup4SZC2P+FoUlD6XTQ33qBdDWlPIKEHgXZ9ghQtXfln0EYFa4VekP7HZOT1h6+60NO/76N3/H4+bf9HtnrWlorJX3kabNd24dbiaSSIAh+9z3LKWbLupJxlbxl1zF+A9diARETUr/2HrsmN99QzHG8z4U25pHoPUHAD7R3gJ+MK/KQNwoeQegpt7eqz8drUZAbb0db2wowwNPyCa5DAiNzQ7vEkPPLyozwPVXjKXEDd0cAKGYlxu7VvSbvTjmLd/jEl41R6Wi9lfPmxr4864DlfDqtMK9lk+ELmvzxlnRW69etMeQTZtv66vxTwUSRVvzhfKS4YdF58wJvzBND7ce/aWtfPdfezrmqCn+7WDqEmoSltx6OzEnhFuPvsD2lnVjrvlPlr9jqVf/7XyIzuzB1kmhl7hsy7J/sXte16enPFY7SWxr7tG5G+5Q0oZjYYkAMCMmWiMrV15hCyrATARoNALe/6QCkxd8FjbjD3giAHJOi+c4TfZ3TBBAM7sL8xvtAhBu6bQ50M3ObNrabWZYZrLvbY8ieMP9U+cYbs4RNq1BD40IgsW15NYb+nP+YFP/+V3/F24d+guRQCkXPNStCFPKJX+8fCiFJ1kSI3p7jr3qwG8GQpfBwlL8/q/9PW8uePsPg61LMLDkkv/2/YZR9ekD3SKola/dHLClergQJHfI3j+rzR2GaoBAZIRKVu5AYbN3CaBnfBv5fvfYQXzvp/tCpWKfOX3GJuuzeO233ywUNYBOhRncboaR8j73/X602Hq5L2xDBExfEP3HroOYeO1DJfstqewt4+d2MWYuMMzJps37e3tD/nA2lq0ORo6ZoYqI+0AdlVRE+ggbEQX0N0WXQyu1nJnPsml6xJLoHMUOyxIiki0s7bbW9dqLF6LHvGAu/OCnAEK7DfUsDECT/bglo+o/V98r2eqvkzvBdmrXDQDe7fTcsc03BXUxZtaMSv97xJgpu9WxabWCPj64VLBewKIkaJOzGy1Pzw36nKRLn5xo278+JShhEqpVkQmbVBExpwG1gzRaF6mEkKedSU67jl0uvWhvmiTaGq+Q21vhbjl9A4Cbu49jnR/MvgwGLNq4zBdVUfE1HYvfDAQsurQxC27Oa/j6XwN5mYBok7Ifbsp/7RkM4AaiKQ/s0VqrG4yNuc/8XLK3fFtOXrTVXw3gmo7PuS21Vwb1/jG7VVFxH6n1CSbS6O2kCVmaXvdriW5N9ILvbW34+iV54SDISIuoaGruOS1toFCpCHGjNGhq7vmlOlRsgdzcRq0W8JtHDuL5l7ptfwsLFaetsp9q7wrBWH/H1ATqVCYwNl5dhbObjPRtFjHF1xrYkxq49fEuYwiH95h/55v9i27GzAWGnGzaErK4iOgwT5GTYRIabad2pUFm93p/MRjP+5Dbmi8OJEPAKPSw67InVGqd0ys/oHlbpfcamgFcH5PzLa1oa7gykKzbUnd+t+esjefIe5wMoXzv6JbyvfUth97vj7ohh5uqVgUjpzIkv9Ja9NH3B1ofP0RFZs6zBIqyEJE6EUitB3wVOjH2lvWz6zc/KTs4qXUHrMe3z7ad2hMabYOgcde/B+1a/tCOSj0BIKjU1r5S/NACAKgGkBs747IX3C2nbw0kTyQgY+0dYyo2P1/lfSqeiGSjWYImaof5WGgKXwVL467QJTYJAlUCGHQHgACsXpqADR9XB5SzWt1Qq/2nrWs0Aj74X8WQMf4A8M7Garz452DWLfy/5gKA9I43O25SxP98j0t41UKfYScCUjL0hwCYOw5g4rXPdNxDMHN+9LdCafwBgEWn7HptzDk/uxwDbPwBwGL64hIOYiFrysPV3db4AsE8uOkNkfNukq1gCKLuO2ckcbTcaeqo+I8tQH3fNBtYRFudbEEWZkZr0Uc/GAx9/GDVxKa/Lit1+bOd1vQcDacmBDN49Pzv/6yPeg1fJJaP/4aQlkPv3x2MnDj+4nG+x9l3fR0w68ZH4rrrAjrtQx7uvhN9UC7LQPbkwLvlAaChybeprjNEQGurC9+7Y/DD/t9ak4g7fjAeTz4wFa88NxefvLkEOz9dhdJdF+BM0cVwOuVroUkiZ/p7Xl17xjnGl/ngydHn9qmBAGFpR1uXlKJ5u+sAh3ab71RrPMUNcmYbXsmizUEVuugVkhgNoee/YWZG9ZvX5YX8uj1AgnAGzKmBZKylXyQOlj59ofq1ayuixi4IKHN2R0fHLabyforKMDrkNdBDRhB7BpjQhDB2odQljD3gbq0KvO/F1blioeRoCaoKI7lEpTLQwGNjSXKTIMgsF54NR7eW5Y8KZuCTf/5hnzZSDxkIgevxDhDMQOpo+e1CzS1Ov3JqtYA33z8eWqUEFX50QxoS4nVISYpAUqIOCfE6JMbrEG3QID5OB51WADODvffg+WFPHR14HgezsbK23jnG3/PqpnpXYudveKnE94iBOR3TNkRIndaDTbzmlpL9ngqCopvdRto8MCFTIhkPfnC3ljKENkJgr4td0pDOxUry9FwOCHf6z0sw0SZWDWiDkv7AJMhGiQSVNqxfssSBa2J4hTq9L9qEyQ1WyPvejrrDCwCEZG+OQgBIsAGBy0rHjFlY74v/ayMTgtojM+G+vdNOPDq/sL/qhZHwOABgjEmRdwAaGp1+NylKEuNXDxX16pp33DIOoxP1SErSIylBh7hYHRITdDBEqREfp4NKRV2MeQeDzoDEDLuj/1Xk2TOW35tXu12SwddgjRkw0vYTvoPNDa5Jvm8Zh13CVMrt1AGPIFwP+FIDY37Ub017ZEjb0pELS3369LFKPXQdAKi615PvAgXhJAwsvd8nbV1/YxGSA0d0AKCtbOffc+45vrXkqYlBd7NU6AtMct9bDQ8ltRcD0uVcfAJfPis7as2bP98Iz8btkG+qHRQIZeHou8sMxMbKN4mtb7S375rzIQiEqurgmqZmT9LjpWcXYdqUUWifPLPHAek4g3e7Jbhlv4lCh04rAEAsgJaOz6uZzzZwEUUGPBtZAAA1p+0pnhRCYPQYXWnXQQ/taV2l1hDcLomzaNOwLYGr0AOCukVeqDvOmsJfRU1cegsYg5ovyJJoiJv206WnP76uR+NGsg1nAFDod/oPNE12VEQGEXYmIpS/c+2RqHHnVEBQtbczDiFOCKomlT62OGrcwq1nPr7/DflTvpnUdUiPPnJftCkycx5kU2wl14SozPkOioz7SBOVVKjWGszsrzV4HyC1SoRK1xqRNrvCfvzBvbW7T4Y+EsZ8MhzN9piBlCCWAPzl1RMBZeXBrZx9+vZqxI3SwuUaWl8hnmJAV46lxPWHOj7f6cvC21CgXXN7mxSj0Xg+kOnj9J3iHyZevaRkvyeIPGNB7LBtgqMQCD/d14KBpVFwO4Na0wwlBMBtrQ4hg0xAAAAgAElEQVTs5g+dEgYhRxuX+bqrpfJ7QQmzmAFxgJpUioDoajun9fDGWyIz5/1XEzfuuZaD6795mw/l6eSMCrqYbey0yGepEIHbmi92tjVfPBBhAFvZTgBJiMxMsKsNozekXv6vP5Q+nNZtAtgXKHFDaf2RS8JQDZARoZffC1rpJ6+eyFO/IBhGJ+rQZg/N31WnFsDUXtDn7KYsZkiMgI2Auow1CUAnB0AA2PMZIkDqco+iyBp4L8bgU50GhNBe7pYhdtscqDD8CX8oPPSoglgCGLZMmvNguFXoCpEAd3P5TyMz53Hq99YPavraMKDTN3fCObcMqUJORIJetNZfX/naZSZD1povQjSsIxTr2n0h2hBENcBKq98FuGAdFrcYnCARIHRtAazxtADWaT1tgCUJaDW7UV3Thv2HGrF1ew3e/6Qcb2w4iY8/r8CO3XU4U90GIoJWIwRsZezV39j1ebVGK7S6XZwIAIKq87oSS975EgME6pLWRVMAQPLUBhi8pGKFwYMl+QLaww253ZvDmOb3fnMqJueC90Rb4+Xh1qUrRAJatz355ei1v76pdvNjr4VbnyGCBh1SAU69ev22qAlLSiC6cgKcExbYYT43MnO+MybzobTqHRfW9WcsQ5S6we3mhMGMAjADWq18+G/jp7XdDSkDkRGy9d8AAO9uLMe1V4yFyyV5iucBQIcZPBHB7ZbgcEgwW51wOEScrmpDS6sTpyqtqKpuw8GiZmzb0dir+/v9vUbccNUEJMRp4fSz/OC9o261ANQxo9RNjXWuRAAQ3dwpfCoI5IbnQwqAOu2CYCAdAJLT9cd6pWmf8JYYVBhUWHnRhx2tJZ9dEZk5TyQShuRih+XI5lfHXvefylNvfHdbuHUZAnSLSc+89fOVB55bVTMUO20Skaa1/HfV8FQr7fNG39hY7emGBseg9+IQiLB00Sjs2BW4qVxXAyoxMC4zKqhr/PAXBcjbWYMrLsqAIUoDh1NEc4sTZeVWVFbZsHNvAw4Vhz4T93ePm/C7x0147YV5uOSC9O5OgGfdIL3reerUDF1VQ61rMgB07AgIABot7Gh3ADpvNCHwKABIStEqu4lHKiwFlVuuMLQYf9N7WWWvXnFsKHYFJCLU7XhuKzz7j0ZsNCYYUgB9dZfCajvvMdRmXPuv8xq++ucXQ9MJEATDpOVfWY592atCZ51grgQQVOGjUMJgzJ4WJ+sA1Dc4kBivg+QNUUgSIy01+Artr797Gq+/G5Z6R7jxtnz85i4z7rk9x08kgLtFAAQAlb7PWddOftGjNA3tp4I7vQKiRFrP850/wANCOFpIKYxMB4CHUCejAaLo4czjGTd/kM0cxO6gMEAkIHrKt94Mtx7hJmrZeX7/vire/OGmhHN+cH4wFUfDAbvsc1MveOiyvg+AyhCqE/xlGUHVAjBbXN1in2oV4eH7htzKjF8efroUL75+DDpd5wBTs9ndLQIgMNC+uc9b8z/O93vmhIhKBgACCNSpsp1K8NSsp0HZV00D1uxCISDyibPDDJFdI+6e/GF6KO2IrTxfTbroUG3eCimSpf4qjMDPV2/QzPh7j9ao4u0ffzHhl3tSoFIfGUydgqW15NNuHWGDJozVAMdmyIfy6xrs3YJnLreEG64a7/+EIchdvyvEwcImqFRnb8RsdndbdhEAbk/vEASghJdnnP2din0LwYxu3YTq4Xl+4NO9gsndVgg9Qy8CKQuTGDjXR6ZD5AhDshzZcn7Kd96YJkTGv8/cNc8njBAhYcntd4ZbjXDCE9MDbrIt/DnVWE/szI6df/PFUOkODHbF08BIyWlX/2tRn05lnJAXCj3MjFFBFANqbuleDZAZGBWrxet/mz9A2oWeZRflgiWv/T7bErnTbka1AHQqK0mgbHhzBQnYA+BHAFBd6cjqMv5JACg/bhv4uAj1MR9doZ/0zQMQdNFfRB7ZcqP+/AcGqrWxXzSCWnWs9p7As4uhVZ9jUDj+xKQiAJcDwIQffZTpdrRNt9cejSUSQmNRiJjcNo2rtTrN0XhyKbc1rwtm/4GzpvDbAJ4KiQ7DENuJwqCybKrW3/oxgI8B6DOu+fv5lrLdcySHOQGSGOLoqyBJTtto0VZ/VTD7D6xHPvs+gF29vgzhRDhWN5iB9CDW8j3FgLq0QAHgckm4+II03HVbI55+IcR9AQaI7btrsWLxaLjdnnvhmsvHUfJ77Rv31VmUV7B+77z2soUChGlo7wHv3O57vuqUvVNLXoZ0CADMzWLawN+G4PxGfnMPU1RRcSdqgFp8/lC4VekGQ5JPBh7BnPjnxeUY4HrsaT/Ynd70xR0VckZEdNoGfSPYUELi5t52KbRXvP2TjQA2DoQ+HYiJHLvgDHl2+/eIs/HUd+GdIPYGSlx/LBzFgMDoti7uj+rath6nPi6XhN/ePR1qtYAn/jL0979feuMuNB3/NuAtRQwVTQTQ7gAIABBlEKp8f6si82rfwSzafsTe5jG8+ggBJl7TvjyggfMrwLNscITXyBch7wdBlW8dVIZ/GNkqL9JniIZwsZ1vwCbAcHP6xYWVmrjMP8tLsnx/1hGM5Goeqs5oa5Tx/NvlxUgLP6mMQdDgm5EOJgxGtEE+n7+6tq3H4Cezxwm4/5fTsP6Vvq2ABMuqpXH47jXp+O3d2fjrkzPxzksLkbtxOXZ/sRrP/GF6kKMwTlVYIAjkqyTYqR26GgAmGCNyiwqs1wHA/p2tSzsKGGca9pYdsXkXPvgKAM8CwETaXvHBgXPMLHG0BLoInuWCAWKIGVyWZL+4BEP00DWCAHSAVq6MqN+/gfbqFj0jOswpfVRrMBhan6URiqCLqZKXGslwtNwfiiY2R64hZ9hQx02QjXF7706FPqRzMqONCBGDXQwomAjAy29U4dlHA793DoeItctTUHnoIrz/STl++utDAeW7cvm60UhNjsSY1EgkJ+kQP0qH0Ul6xERrkZToaQPsKwHsUf5sQyEwMCU7FpMnROPi63fKXquu3oHM9CjfuZkdj3ndIcoFcB0A6CIEmHil0Ui5JgCIMgivApgPAHab1O4AAEDOTMPrxfvNt5oOWn4B4He9egVCCJGAzBvemlP++ncKBuFyKmJxtNwap3rCeRWDoEuf0V369Hzn/sAVnNmPrWRBaCaZjZ9uc23fU4QGGIL7G73zfLBwtVQul5ei4FqsDTMyb9m4pGHzI7JybX/NGbJOEreWj5OV8Xw/9KkdQUqyrqqh0TlRXjK0aDQC0sfoUFkVKKgsBZV67nJL0OsF3HjNBFx/1XicKLPgeJkFVdU22O0idDoVkhJ0iI/TITFeB4NBg9GJOqgE8mXcefC1AcbZboGexnw96yDaRSxbNDqoe261uM66otTZARA8z2Fjx/sl8Drf42za+rooejyPI4etnaIDgOufAMASDCZec15Q2vQFQT4C0LDjzx8ZUlMT5eT6S/Tk1ZvkNzgxjt0XXdybcUklDOYyR1TrgXf+JSdEmu5VHtX6WNle8kSCKjr7/A19VW5AYVaWAAYWip19zWNsb1knJyioI0yDoZAkaAatde7ke2sm1G969FM5OWZGne1s59WhhrnksyfkpajvJe0YYamUw8xYszxJVq6+sXsmgP/xPEsCosgYP9aA81al4ObrJuLW72fh+9dPxEXnp+Oc+YmYPCEaKaP1IAJEieFySWd/3BLcosfoSxIHvTdCrenFJu2zot0jAFmUW/tR4YIal0NKZgBV5c6fAHjaK9OcnKYvqa925Kg1hBJe89Mc2vIcAGRT7oFtp5YdbW5wTT5d5vgHgAFJlFRHxu90m2u6piF2hsUxrM2oi5owqURQa+q6Vi7sH8QsijGSyzZLcgbxmSdNr7eIuppOXR+dtWYBIPVlTS1IiFlyR7GzbW4wnzJNbPpHXZ/Tj5m53nZiu2zHMsnedHlU5nxJ0MduJW1kmUqtdSBEbUuDgVnUROdc8LF309SIJ+u+yhlV71z3MgmqMISViZlZy25HCiT3OHfjyaDO0saP+wInvhxg3QDbkc0vGiav/DGR4A7t90JHBEgue1rVmxdPCMZwCBr9ga7Pxc647FkiQUfhWqYiZtHtjHK31nwHkiiboaCJSfmk7xfjsBUDGpsuXwvAbHEhNkaD3hRjkiSGJAED/fYRASoVobomuF5tMdGa9q97t7tzNcD2HRFZU6PWFxWYbwcDDTXOSQAS4c31Hz1G82B9teNtADh11HYPgOd856Vl6u5pbnB90NrkHlfKa7+fTZtf7t/tdSdi/JLXzIfeuzYoYdGRI4mOAUlNDLY0pzZ+/JvWMvm1mU5I7jTJYR6EjAog2BKx+qkXvoGCtzo9V7ft6dcjM+f/NajXgogkR+saOFrDUvPVenJXCwZ+x/SQwFV5cBS77HOH0waHMUse/FNj/qsDfyGChp22xUPptdEmTHwXx7d3es7VVH4HCaoBnAAER7Dfc/oJS15rKew2Rwj2IuXhSgUMpq5/faMDGWmDmsUMwF8LYO//gKdjrwS43RLKyq248778oMZMS4lsdwCqa+1jOh5rdwAY/DqA2wFPRcBSXvnjbMp9BACMtPWdt3bOe1ujFWAzixkmXn2BkbZ+BgBZtHmjLwpwaI/5JQDvA2jqz4vQleqP7v00cuwCCwGGUI47IDCjqeC/j4dbjX4jqE9Wv3aTv09Yqzoq8UPR1nDJoOvUWwR/9SOG2IbSUCEM0bqxPUCaiL2Ff55QE249wgOjcc+/u2dJkOCATOrdUIGZnTUf3tufCMAJX4r5oMKMhDj58gv+igH1h45jdTPu3pIDbpHhcEpwODwNhBoaHaipt6O2zo5TFVYcO2nGwaIWVJzu3YpWakoE3G5PNp9Oq+pcCMj3wEi5uzbkz7WCKIoBFBaY7wXQvpNl1jkx9xUXWB4FgKpT9ucATPYdS8vUXdRY5ypVawj/K1lsujBnZ3KvNAyCqKxzv287sumdUI8balQxqS9jYLPsBoXYxbfdaD3pP4rRWvLpdyMz5zcNxWYlsjCGaurVN4r069+4wfTQ4AS8hhqq6JSXMMy/I6LGL/2JrXxv3wcgOhquCMDoJPkWJw2NDpCvBq4MXWftgKfzILzGXZIAp1OC0ynC7ZZQW+9AS6sTlWdsaGh04MhxM44cN6PgkBlmS2iTx/75zOxOuSieHqHr0oBPTgNdygJOnWt4sbjAeiczQEQGE68810i5mwDASFsfe+vreY9qNAKaG9yTTLzqO0ba9hYAZNHmI6W85vHi/dZ7HW3S6O2nl5UsS9se0jB83aZH3jVkrd7CDsuaUI4bSpjZ3Fr44S3h1qO/qKJTXq767w1fBRBpjpq8/Hu2Y9v/PVg6hQrqW96yQghRRae+aHoobUjWuB9omNneWvjRD8KtR38gle5AXd6fXunXIFGqE9Qw+BEABhAdJT8HqG90+M3iJALUKqF95u5yM5zeWbvDJaGm1g6L1YXySitq6+04csyMQlMLDhSGvgVwMJy3KhVu8WwRPWaA6yMmUCK6OwAqCE9KEu70eTFnyh3PA8j2HZ+9KOanRQWW55iBwr2WVwG0LxBn05Zf725YcV7VKcec+hqX8bPSxVUXZO+cAiBw78VeYDmydW3U+MVlkNyBNwSGAWYJ8T/6PMf2m0Fvcx1SSB2xOxgnpm7L0/8ZNeuaKa6mk/83GHopjBBUmpLWwo0/DLca4YCZMfqmD2aVPTx8Ix/M7LCe2L6wv+OQ/u3y2tJLBr3dCDMjKkq+GFBtXfdqgESArU3Eho9Ooq7ejkJTCw4Vt6CsfIjVqfPy37/Px6hYLVwd2gJ7bfs4ANuBLp38JtO2qvQJunzf2kxjnSurhFe0p/5l09bnIw3CGSJAUJGmhNd0CskvTMibq4sUqgGgzSqlvrNrQZOJz70+lDdlPblzHGn0+0I5Zn9hoDni9i/TKn+TEJ4m0CGC9DGfWY7nBV3eqvnA27/Sj11w+1BtW6owtCC1tsh64qsp8pIjD2YJKde+NKPs4bRSeemhCYOaMyefTkMfc/+70mZzy66z+2baoVxtjIyUdwD2HWzye02WgF/85jAeffYoPvysdsga/+uvHIMLzx3Tyfh3YJzvQbec6FHx6vt8j4mAyuOO1zoeH5sVeaHkrZNQXGC+ysSrvtPx+IXGnWOiR6lPAYBaI6C4wPz6jqoVJSZes6Sf99SO5diX8/RjZt7HHN7+AMwMdWza32yn9sQ1/CpyyBb1kINZQmTmwp9aSjd/q7fnNnz5/AvJP9uTSdqI3QOhW5gYhpsb5L/UwgYzNPHjn7Yc3zGtnwMNw/cFIF30F7byfP2JJ2YcDrcufUWIGPWh7dTuONOWqoZQjRkTo+lxLJWKoNUKcLsZbXYRoghotQIEoX8fAWYgQidfCmT7ruZu2RDMCCp6EG4uPj8Jzz4yz1tMyB9nUwG7vRJGytsUEak67YsCmFvc40p55Q2+4zm09cDUedF/9O1cPLzH8uZhXja5wxC8dsKOcdnTo/J8r19dtcNYXGDd8alpcbWJz/21iVdP7e9NNnz9r8ds5fk6XcqM30GlPjpYs1BmiUmtLdSlTnvQVr43uuXQ+7cNyoUHAGa2qOPH/cVWnq+v2/7c830d5+TdVGE5mrco8Y7d4zUJE58lQVvIYDuz5KlwFaYfiO7u6/2iWy17ruSW3yU0gIhuh0pWR5ej09+u220Bs+RgUEOXn0ZmMjNTKwNWBuwM2JnZ5fmRRGZJ8v6gDz/sGYNdnnHJzKA6kHAamsivI8bM/q21fG9M8/6375a9cUnSBHw/wcNm/wYzmwVD8pvpt203Wo5sOR+A/FSRpYiB1yx4mCWQLnpT2vWvzTSbvvh2qMcfNUrTrSkVEaDVCCg50oK7f1eAlCkfIWPGJ0jO+RAPPXkIJ09ZoNX0v5bXunPliwE1t3bPBNBqBQzlbUQP3J2NV547p725n3+ovRiQX3eqlFddWlRgft83gNMh4dolBZ1kd9QsK6ytdExlAJIoiVctyI8H0NpRxsRr/+/wXvMTajV5lPHmM0oSwBK7Y+LU1QnJ2mpDtNrm1YWtFneEpVU0tFnEOLtdjDDOMKzJps3BhPy1E5+xZ0oHPoyHoAqtNyCJJOoj3Lqci84c/QVVo5eVHmJnXPYPd8vpgF2zSBu5U9BGnuROTpnABMEJgVgQNE4iwQ2VIBKTg0lwgwSRVGoHyKMPqfQOMAssOTQAMbtdESyJGoIYKbrsUSw6I1UqrU0Vm1Y6esEdm0qemSJb1a+f6BC+qSnBE6rsGq7Uen96fA/HPsCaUw9RyPau9AE1AD161pGuAtre7VyDXUDfW2b6/rY7frOpEDgS4vYeF/tx3a7IJWgTgE67qZIvfuRqy6GNAWtakzZqlz512pssDlwZaCJitT7OqkmadFo//3sFR39JvV4OjF/y4zsJQsDP5kBDJEja2DHNEROXHzz+l2UFA6kL1125saHJeUlHQ6USCH/6uwl/eLrnlZLnH5+JG64e31N4WxatRsBjzxbi8b90K3TaieKvzkfyaD0k6ayCWq2AO+/Lx7/fDEsdox657MJk/OrOqciZHAOXW+rR+BMBCQnaEkpYPwXo4cs5m7Z9sOnYojJzi3scM6DTCyjlVR9k07ZLfTJLk7fPXb93fosgkE6lElTvH1hw+rJZe8YAMPtkjLT5yVJe/brNhndPmmyLCd5eMgSQitQWs5huNbeldypD7P3K8ckd3mvON/G5vzDSpmcRGOfxX3YvXTtciJ6y7o9nNt7z/mBdr2HHC4NxGQeCmfkMLv6cgk6ceijskWY3uhi6rrzb/an+GGHfX2DHHKRwNLMakNQ4lSFxf/2Xz/1lIMb2y5s39+m0xq/+EUQHxREEUUXH736dVsALLx8JaPwB4I57D8IQpcZl6zLg7IMTwABSkuWDLXZH9/JlzMD4zPCWo5k9zYCsSdGYMNaAWdPjMHNaHFKSIiAxB/V61NU5032Pe5ydZU7UfedwvnuXL5RQuM/87RJecVkO5fmMlGPaPMO0g7vMRzVaASzC8P6BhTXzZsZlZdBn7e5RNm2tArDExGsXO2zSU8dKbIsFwfuNw93dy44fCGZPUaLi/eY/bT+z/NbRKdo7smnzpmBepGGHyxbWsLOCwkiFeCDLayv0GcIJ30NBIJwst+LePwTXQuV7P92H5YtHdypzGyzMCKoYkL81dI8DIF9JsC9otQIWzY3BpPHRSB8TiYy0SCTG65CYoEfcKC3i47RQCQLUaoJK5alSILGn/LDLHZwjxAyI4tk23D06ANmUt9vEKz4tLrB+y/cCH9plee80X5KYRh82AICRth0z8aoFh/ZY9qjVBBY54uvdDRUlvOrcHNq2ueN4Rtq8Ex5HIB3AbWcqHFc31Dgnqjp0RfKuEnR7DAC1lY4sR5v0dxOvvpfAO7Np27Deca+goKDwjUbi9mZQKhVh2/be9Ub6ancdLjo/vb3KXbAQAItVPsCl0/rZa8CMUaPknYeuGCfpMX6sAZPGR2NMSgRSkyOQ6O0UmJSgQ1SkGhqNALWKIAh0doLcpUsg4Os50PeVGY2niVAsgJaA67NGyvv2WzvnODXeF0KjJRwyVR8CkHZWZtteE69ZdHBX6y6NlqBSE4ryrZtMvPoZI229q/uYmysB3AfgvsO8MlYL9XIJmC2AJjM42dEmRQOALkKwEOgMgCMMzjfS5lwAwXU/UFBQUFAY2pB03FdrTyDgtXeCayLlY/e+elxyQbq8YNfLElB+Wn61SadXdQtRMwOJXaIH58yLxpjUKEwaZ0BKcgSSEvRITtIjJlqD0Ul66LQCdDpV+6zdZ9DB7DXsntbK7C0HjB5374cGTzGgKydT4vp8uQ1artnnxFxduM/yju/ENps05oBt2fZZkduX+YSMtGW3iVcaD++1HlapSAMAxQWWX35x7JyrMidGXGakrX438U2n3BYAH3l/Qk0EPOuivoUcCaHbrKSgoKCg0A8o8b2K+iOXeMO9hH2Helctr7HZ2aeEXSLgP291S0DoRmK8rttMW2JGRlok9mxag+QkHbRaFSL0qk6Ra99sPZSz9lDiyeDjcQBkHQBkU+67pbzyg6ICy6U+b+VESdtSE69820i51/jkjJRbCiA+t3zJ/sY61yRmwNIiZhTlW/JNvOZ9CeKdUyi3YuBuy0MJr57b0uB68dQx+yzfHgOP18UgAqsEQSQVILkZ0xdEzjZSXmHPYy1PBbCUAZ0KgkEE6wGOEqCKIEAPSBEM0hNYC5BWAuIB/nsO5W0Y6PtUUFBQGObY7HYROp0KzIwbrhqD198NvpxK1sToXq//EwH1TU5UVQfem3zB6gRo1AIczs4bAZmBiAgVJo4ztBv3vmYjhBVCOhBkilY25V72SfH8WkcbJ/mcgOICy9WlvMqSTds6lo21rMz8avIRXvPC4X3mW32pf8UF5sskCZeV8uqNDOlhI+UG18ewF5h4xXJ7m/Bo8T7LEiJAre5WyBHw9GtQCypYps+JmJ1FeT1mDRTz4oyDuyzlWn/rQP4gQK1C4yUz8xXjr6CgoBAEKjXZiBApSYyLzkvvlQOweMHoXs+q1SoBO/fUycqtWpYCqQfvouPMfhiTCfgpBNQT66bsneJ2nb1pZqCowPx9E6/slrqWRVtumzY3cqVGS62+LAIioKjA8u2ifba9m44tLjPxmodNvMrYnzs4yiuSTLzmN5tPLD5ZtK8t70SJdYlPt56YMsfw4aWz9kRn0ZcBjP+KnMO77OVarXB2jSbADwBIbnbFzYjO6s/9KCgoKHyTSEnWnwY8O+6XLRod9HmjotWYPT2uVw4AESBKjBt+It/FcNbU3o09/KCxQO+KtNRPXxg5t3CvbZ+vHKM3EnDpPvOyr+dGbz+no3A25eYBiC3hVY8c3mO5r70YEABzi3tscYH5fmbc//7+heacmYbdIOwCcJAgHZTQWJlDB+04uwVDKOBFEZGImAQI8wAsOX2ybeWBvbbxKhW1CwUqfqDRUtOkaRHXGWnrZ4Fu0sQrVh3cbdmq8Rp/OYgAl1PCtEUJ46bSppCVyVRQUFAY8TBXAJjMDERGqrD945VYdlGu7GlffrwKKhUFKHfbHY1GwPoP5df+AWD2jPiR7QAQMoBeVmnLoe0Fpbzy4sP5lo86Fuw5daRt0UeF8+vGTdXPmU7bKzqfs+1+AI+X8ponDu5uvVWtoU6GVRI5uni/eS2Atb5IgejW4s2v5kGjJScY5Haz5vheESqVtT2awPDkjvZopL1VB5nZPnWO4Z5s2iZb6tbEK35RmG99pqOzEggiwO2WxHmLojMm0qYz8mcoKCgoKJyFynyP3G7GjCmjsOuzVVh0QS78FSFcMDsaL/3lHKSPiexV+p9KRag4bcMtdxbIyv7u7mzodAKczmG4th8kbTYxE+hDmdZsyv3YxCsuL8y3vtfRCXA5OLFkt63cxCt+aKS8F7ucZs6mLbcBuNvEa3529LDlHqeT488a6bOCvuI/Wk99AC08s/f2Y0CAEL93PFFkjE7VHUlJ1/4+m7b+N5j7MvHKj4r2WS4KtusUEaDWoPHyubWTgYLG4M5SUFBQUOjAiY7f506XhKxJMag1XYwiUzMOFzfD7nDDEKXB9ClxyMmKheCZeAV9AZWKYLa4MW3pF0HJX35RBtzuETz7Z6ChyZkM9LFOu5Hy3jfxirWH9lg2+2bLzPDUANhn/ddB2/KbZ0Z+eSGAli6n2oy05XEAjxfzqlkqCD84WmS9qs0qjlZ16RcQcAbuR0Z0MxJStCfSxupf1oD/O5G2lgVzLyZescB00LapuMASE+z9EwFp4/QHFibsmIMw1u1WUFBQGNYwjnVtXCOKDEEAZk6Lw+zp8b40LkjMEEXuVZq8RiOgurYNxkXBFZD94Q2ZmDgu2m8Z4JECA4jQe4pj9rlRi5Hytph4+dSDuyyFGq1AHd/A4yW2xW/vmts8a2HMg9m07SF/50+hbQcA3OH9STDx6oUArQFj/nftAm0AAAb4SURBVLFiy6Q2mxTPDF3XCbknQgBbZKy6bvzkyFIAXwvAlizaUoDe1RJXlfLKVw/vtVwnqGQcjq66zzG8YKTc24OV52HZXlZBYRjAQbUIVv7+hirEx/x993pL1kLsw/yKyLM8LBDhy521uOSGnUGf+8vbc/rUX2DYwQDXXjG5X53ajPRlMYCo3PJFBxrr3FkdQ/RqNaGowPzghr3zfjVtnuHn2ZT7zwBDNRhp6/8A/K/L81p4Cvr4anm7ANjQuQtarzHxqrsP7Gp5qqjAAhKCM/5Enq6Is86JXmek3K56BsTbchUA9VB/ktWSNJJjTgoKAwOxKMn9bTFL4WhspBAElLihvP7IJb3O5+82DgEqlQBBAOx2EYeKm/GHpw5j21dNQY/x/OMzkZYSAccIXvtvhwAISA+ZZ2ziFc8V5lvvEPwYVM/GPnZNXxD9mJFynwUQ/LsSOnQmXnFnYb7l94JAut5+4CZNidw5M/LLNVDKESsoKCiEjDNFF3P3ui3BQwTYHRJyd1TjYFETnnr+eK/HWLU0Hu//Z3nQTXWGO0RAQpzmppCGxo7w8gVFB2xfsIRYfwbWs2ueMXW2YbdKIzxnpG0bIdP2tP86rVzMwM8P7DZfpdEEt7vfBxHgdknuGQtjbjBSbsCe4woKCgoKvads/4WSIUpNfY0CEAFmixvj5/QqMNuJykPrEKFX91j8Z6RBBCTEa+4fkLUxE6/446E9lrsCpdN5jCsjNVN3JClVuwHgL42Utw+AfJmmAJzmq9LNqF0B0LcP7m69Qq0Wgi521FE30c2YvsDwDyPl/aQ/+igoKCgo9Iy57NIqh1NK7Y/tVasIcZM29ulc09fnY3SSvlc1BYY73gjAXwdsc8wxXh4vgl46nG+91N+yQGdtPEsSkuipqzw+O6IkLkFbJEE6TkAVgHoGmwF2EAQXwHoGRRIQR6AxDEy0tIozjxVZZ6g1Asleryc1CJAkYNo8w8cuOL8/nXb2yxlRUFBQUAgM11+5q6HRubA/DoBOp0LMuA/R2+1hJTvPR0qyfmSn/fnB4wBoPx7w3bElvGKCADx1ON96ea8MMwW/dTcUG0hEkTFjvuEtAu7Lorze9aVUUFBQUOgTXHflWw1Nzmv68z2u1Qr4zSMH8NyLZUHJr14aj38/fw4MBvWInPn3VM+GvemUYGB0om5Tv7IAgiGH8k4AuKKAF8VFQX9fUYH5Dk8HPRnDzQObYO/LPVWpYM2ZZfhLNuU+gt6lESooKCgo9BfC8f5O4piBxAR9ULJ/eWwGbrxqPCRvquFww59x79iXxi1KGJ2oO6VS0SkAlQCfBlMZBC4HqIIS1pfBW6NnwB0AH3NoVxOAewDcU8Ir1hFw08HdlqvVGpIv/BMifEbf7WbMXBj9DoFfzqa8zwf+ygoKCgoKfmEc71oMqNdDMDA2PSqgzM3XpuOu26cgMy1ySKb6dWyc1xGfcScC3KLkThmtPwbgFIAyAJVgnAZxOYAKStxwCkDgXscdGDQHoCM5lPcJgE8AXGPiFRcSsO5Eqf0Km0VMBs6+EL4KUL3Ge17HD1V0rKpq7CT9eyL44yn0pWL0FRQUFIYEfKL/E0BGTLTG75Hf3pWFS76VAeOkGDhdUliMfzDGXZLYlpSoM4FRBkIFwJUgVEKSKiBI5ZSwscL/6H0nLA5AR4yU5ysAdDuAJBOvmAvQPACzTx1rm29uFjMI6LQhoOOL2OmD4102iIwUqifmRO5mYD+B87Mpbwe6lyVWUFBQUAg3Kj4digiAzwFYsywe685Lg3FyDGZNj0dUpApuNw9YeV9/xr1r3xqNhupjYzWlYJSBuRzAaYArAFRS0nuVAGoHRDkZhkuJzPgSXpwMCAkEwQBQBIE0DHZ5MwNaBVDjZNpWC6A+3MoqKCgoKARNZK3pYisF24mtB0TRU3Q9MkINSeL2n/7UF/BNKv0Zd0liuEVGcpK+XCXgGAhlYJwEcQXAFSA6TQkbzgBo7deNDSDDxQFQUFBQUBihlB9Yx5GRqpBkdAVb2p25++zdF5IXRYbLLXFGWuRxgI8COAnmEyAqB6QqqLWnadRbZ9CL9fahSNiXABQUFBQUvtlotWQBYAjFWP6Me8eQvNMlQq0WrMlJ+lNe437UO3s/BVGsouT3qwBUh0KXoY7iACgoKCgohJXk0fryhkbnlEAyHWfp/oy8281wOiXExqrrY2I0FQAdAbMJ/9/e3aMgDARRHP+PkGBtiAi5gWeXXMND+BF3A4qdYJUQZi1SC1YuyvudYKZ6rxkmETCPDPTWtDfg+YWVfoIKgIiI5GV2AbbvQn4YnWly36yX17JYBOCIcQDOGNGqXQDuzB9j5UMqACIikldK+2pVNsCJ+b69I9GBR6vbHnhkne9PvQC09rPTYTGGmgAAAABJRU5ErkJggg==" alt="OpenSIPS" height="64">
    </div>
    <div id="loginPage">
        <form id="loginToAppForm" class="login-form">
            <label>
                Username:
                <input type="text" name="username" value="">
            </label>
            <label>
                Password:
                <input type="text" name="password" value="">
            </label>
            <label>
                JWT Token:
                <input type="text" name="token" value="">
            </label>
            <label>
                Domain:
                <input type="text" name="domain" value="">
            </label>
            <button type="submit">
                Register
            </button>
        </form>
    </div>
    <div id="webRTCPage" style="display: none">
        <div>
            <select id="microphoneEl"></select>
            <select id="speakerEl"></select>
        </div>


        <div class="call-quick-actions">
            <div>
                <label for="muteWhenJoinInputEl">Mute when join</label>
                <input type="checkbox" id="muteWhenJoinInputEl"/>
            </div>
            <div>
                <label for="DNDInputEl">DND</label>
                <input type="checkbox" id="DNDInputEl"/>
            </div>
        </div>

        <div>
            <div id="muteContainerEl">
                <button class="muteButtonEl">
                    Mute
                </button>
            </div>
        </div>

        <br>

        <form id="makeCallForm">
            <label>
                Your target:
                <input type="text" name="target">
            </label>
            <button type="submit">
                Call
            </button>
        </form>
        <div id="callAddingIndicator" class="hidden">Calling...</div>

        <div>
            <label for="addToCurrentRoomInputEl">Add new call to current room</label>
            <input type="checkbox" id="addToCurrentRoomInputEl">
        </div>

        <br/>

        <div>
            <label for="inputLevel">Microphone sensitivity (between 0 and 2):</label>
            <input type="number"
                   id="inputLevel"
                   name="inputLevel"
                   value="1"
                   min="0"
                   max="1"
                   step="0.1"
            >
            <button id="inputLevelApplyButton">Apply</button>
        </div>
        <div>
            <label for="outputLevel">Speaker volume (between 0 and 1):</label>
            <input type="number"
                   id="outputLevel"
                   name="outputLevel"
                   value="1"
                   min="0"
                   max="1"
                   step="0.1"
            >
            <button id="outputLevelApplyButton">Apply</button>
        </div>

        <br/>

        <div>
            <form id="dtmfForm">
                <label>
                    DTMF input:
                    <input id="dtmfInput" type="text">
                </label>
                <button id="dtmfSendButton" type="submit" disabled>
                    Send
                </button>
            </form>
        </div>

        <div id="agentVoiceLevelContainer"></div>

        <div>
            Active calls: <span id="activeCallsCounter">0</span>
            <p>Your room: </p>
            <select id="roomSelect">
                <option value="" class="noData" selected>No room selected</option>
            </select>
        </div>

        <br>
        <p>RoomList</p>
        <br>

        <div id="roomsContainer"></div>

        <form id="videoCallForm">
            <label>
                Join video room:
                <input type="text" placeholder="Room" name="target">
            </label>
            <button type="submit">
                Join
            </button>
        </form>

<!--        <form id="sendMessageForm">
          <label id="msrpTargetLabel">
            Your target:
            <input type="text" name="target">
          </label>
          <label>
            Your Message:
            <input type="text" name="message">
          </label>
          <label>
            Extra Headers (comma separated):
            <textarea name="extraHeaders"></textarea>
          </label>
          <button type="submit">
            Send message
          </button>
        </form>
        <div id="messagesContainer"></div>-->

    </div>

</body>
</html>
</template>